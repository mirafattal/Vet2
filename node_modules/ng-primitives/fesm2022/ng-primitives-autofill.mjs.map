{"version":3,"file":"ng-primitives-autofill.mjs","sources":["../../../../packages/ng-primitives/autofill/src/autofill/autofill.token.ts","../../../../packages/ng-primitives/autofill/src/autofill/autofill.directive.ts","../../../../packages/ng-primitives/autofill/src/index.ts","../../../../packages/ng-primitives/autofill/src/ng-primitives-autofill.ts"],"sourcesContent":["/**\n * Copyright © 2024 Angular Primitives.\n * https://github.com/ng-primitives/ng-primitives\n *\n * This source code is licensed under the Apache 2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { InjectionToken, inject } from '@angular/core';\nimport type { NgpAutofill } from './autofill.directive';\n\nexport const NgpAutofillToken = new InjectionToken<NgpAutofill>('NgpAutofillToken');\n\n/**\n * Inject the Autofill directive instance\n */\nexport function injectAutofill(): NgpAutofill {\n  return inject(NgpAutofillToken);\n}\n","/**\n * Copyright © 2024 Angular Primitives.\n * https://github.com/ng-primitives/ng-primitives\n *\n * This source code is licensed under the Apache 2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { Directive, HostListener, output, signal } from '@angular/core';\nimport { injectStyleInjector } from 'ng-primitives/internal';\nimport { NgpAutofillToken } from './autofill.token';\n\n@Directive({\n  standalone: true,\n  selector: '[ngpAutofill]',\n  exportAs: 'ngpAutofill',\n  providers: [{ provide: NgpAutofillToken, useExisting: NgpAutofill }],\n  host: {\n    '[attr.data-autofill]': 'autofilled() ? \"\" : null',\n  },\n})\nexport class NgpAutofill {\n  /**\n   * Access the style injector.\n   */\n  private readonly styleInjector = injectStyleInjector();\n\n  /**\n   * Store the autofill state.\n   */\n  protected readonly autofilled = signal(false);\n\n  /**\n   * Emit when the autofill state changes.\n   */\n  readonly autofillChange = output<boolean>({\n    alias: 'ngpAutofill',\n  });\n\n  constructor() {\n    // This technique is based on that used by the Angular CDK\n    // https://github.com/angular/components/blob/main/src/cdk/text-field/_index.scss\n    this.styleInjector.add(\n      'ngp-autofill',\n      `\n        @keyframes ngp-autofill-start { }\n        @keyframes ngp-autofill-end {}\n\n        [data-autofill]:-webkit-autofill {\n          animation: ngp-autofill-start 0s 1ms;\n        }\n\n        [data-autofill]:not(:-webkit-autofill) {\n          animation: ngp-autofill-end 0s 1ms;\n        }\n      `,\n    );\n  }\n\n  @HostListener('animationstart', ['$event'])\n  protected onAnimationStart(event: AnimationEvent): void {\n    if (event.animationName === 'ngp-autofill-start') {\n      this.autofilled.set(true);\n      this.autofillChange.emit(true);\n    }\n\n    if (event.animationName === 'ngp-autofill-end') {\n      this.autofilled.set(false);\n      this.autofillChange.emit(false);\n    }\n  }\n}\n","/**\n * Copyright © 2024 Angular Primitives.\n * https://github.com/ng-primitives/ng-primitives\n *\n * This source code is licensed under the Apache 2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nexport { NgpAutofill } from './autofill/autofill.directive';\nexport { NgpAutofillToken } from './autofill/autofill.token';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;AAAA;;;;;;AAMG;MAIU,gBAAgB,GAAG,IAAI,cAAc,CAAc,kBAAkB,EAAE;AAEpF;;AAEG;SACa,cAAc,GAAA;AAC5B,IAAA,OAAO,MAAM,CAAC,gBAAgB,CAAC,CAAC;AAClC;;ACjBA;;;;;;AAMG;MAcU,WAAW,CAAA;AAkBtB,IAAA,WAAA,GAAA;AAjBA;;AAEG;QACc,IAAa,CAAA,aAAA,GAAG,mBAAmB,EAAE,CAAC;AAEvD;;AAEG;AACgB,QAAA,IAAA,CAAA,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;AAE9C;;AAEG;QACM,IAAc,CAAA,cAAA,GAAG,MAAM,CAAU;AACxC,YAAA,KAAK,EAAE,aAAa;AACrB,SAAA,CAAC,CAAC;;;AAKD,QAAA,IAAI,CAAC,aAAa,CAAC,GAAG,CACpB,cAAc,EACd,CAAA;;;;;;;;;;;AAWC,MAAA,CAAA,CACF,CAAC;KACH;AAGS,IAAA,gBAAgB,CAAC,KAAqB,EAAA;AAC9C,QAAA,IAAI,KAAK,CAAC,aAAa,KAAK,oBAAoB,EAAE;AAChD,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAC1B,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAChC;AAED,QAAA,IAAI,KAAK,CAAC,aAAa,KAAK,kBAAkB,EAAE;AAC9C,YAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC3B,YAAA,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACjC;KACF;+GAjDU,WAAW,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA,EAAA;mGAAX,WAAW,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,eAAA,EAAA,OAAA,EAAA,EAAA,cAAA,EAAA,aAAA,EAAA,EAAA,IAAA,EAAA,EAAA,SAAA,EAAA,EAAA,gBAAA,EAAA,0BAAA,EAAA,EAAA,UAAA,EAAA,EAAA,oBAAA,EAAA,4BAAA,EAAA,EAAA,EAAA,SAAA,EALX,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,WAAW,EAAE,WAAW,EAAE,CAAC,EAAA,QAAA,EAAA,CAAA,aAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA,EAAA;;4FAKzD,WAAW,EAAA,UAAA,EAAA,CAAA;kBATvB,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACT,oBAAA,UAAU,EAAE,IAAI;AAChB,oBAAA,QAAQ,EAAE,eAAe;AACzB,oBAAA,QAAQ,EAAE,aAAa;oBACvB,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,WAAW,EAAa,WAAA,EAAE,CAAC;AACpE,oBAAA,IAAI,EAAE;AACJ,wBAAA,sBAAsB,EAAE,0BAA0B;AACnD,qBAAA;AACF,iBAAA,CAAA;wDAwCW,gBAAgB,EAAA,CAAA;sBADzB,YAAY;uBAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAA;;;AC1D5C;;;;;;AAMG;;ACNH;;AAEG;;;;"}