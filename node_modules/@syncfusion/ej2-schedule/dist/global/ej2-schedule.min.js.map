{"version":3,"file":"ej2-schedule.min.js","sources":["../../src/schedule/base/util.js","../../src/recurrence-editor/date-generator.js","../../src/schedule/base/constant.js","../../src/schedule/base/css-constant.js","../../src/schedule/renderer/header-renderer.js","../../src/schedule/actions/scroll.js","../../src/schedule/actions/touch.js","../../src/schedule/actions/keyboard.js","../../src/schedule/actions/data.js","../../src/common/calendar-util.js","../../src/schedule/timezone/timezone.js","../../src/schedule/event-renderer/event-base.js","../../src/schedule/event-renderer/vertical-view.js","../../src/schedule/event-renderer/month.js","../../src/schedule/event-renderer/timeline-view.js","../../src/schedule/event-renderer/inline-edit.js","../../src/schedule/popups/form-validator.js","../../src/schedule/popups/quick-popups.js","../../src/schedule/popups/event-tooltip.js","../../src/recurrence-editor/recurrence-editor.js","../../src/schedule/popups/event-window.js","../../src/schedule/actions/virtual-scroll.js","../../src/schedule/renderer/renderer.js","../../src/schedule/models/work-hours.js","../../src/schedule/models/time-scale.js","../../src/schedule/models/quick-info-templates.js","../../src/schedule/models/header-rows.js","../../src/schedule/actions/crud.js","../../src/schedule/actions/work-cells.js","../../src/schedule/models/field-options.js","../../src/schedule/models/fields.js","../../src/schedule/models/event-settings.js","../../src/schedule/models/group.js","../../src/schedule/models/resources.js","../../src/schedule/base/resource.js","../../src/schedule/models/toolbar.js","../../src/schedule/base/schedule.js","../../src/schedule/actions/action-base.js","../../src/schedule/actions/resize.js","../../src/schedule/event-renderer/year.js","../../src/schedule/actions/drag.js","../../src/schedule/renderer/view-base.js","../../src/schedule/renderer/vertical-view.js","../../src/schedule/renderer/day.js","../../src/schedule/renderer/week.js","../../src/schedule/renderer/work-week.js","../../src/schedule/renderer/month.js","../../src/schedule/renderer/year.js","../../src/schedule/event-renderer/agenda-base.js","../../src/schedule/renderer/agenda.js","../../src/schedule/renderer/month-agenda.js","../../src/schedule/renderer/timeline-header-row.js","../../src/schedule/renderer/timeline-view.js","../../src/schedule/renderer/timeline-month.js","../../src/schedule/renderer/timeline-year.js","../../src/schedule/exports/calendar-export.js","../../src/schedule/exports/calendar-import.js","../../src/schedule/exports/excel-export.js","../../src/schedule/exports/print.js","../../src/global.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Schedule common utilities\n */\nexport var WEEK_LENGTH = 7;\nexport var DEFAULT_WEEKS = 6;\nexport var MS_PER_DAY = 86400000;\nexport var MS_PER_MINUTE = 60000;\n/**\n * Method to get height from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @param {boolean} isTransformed Accepts the boolean value that indicates the status of the transform style applied to the element\n * @returns {number} Returns the height of the element\n */\nexport function getElementHeightFromClass(container, elementClass, isTransformed) {\n    var height = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    height = getElementHeight(el, isTransformed);\n    remove(el);\n    return height;\n}\n/**\n * Method to get width from element\n *\n * @param {Element} container Accepts the DOM element\n * @param {string} elementClass Accepts the element class\n * @param {boolean} isTransformed Accepts the boolean value that indicates the status of the transform style applied to the element\n * @returns {number} Returns the width of the element\n */\nexport function getElementWidthFromClass(container, elementClass, isTransformed) {\n    var width = 0;\n    var el = createElement('div', { className: elementClass }).cloneNode();\n    el.style.visibility = 'hidden';\n    el.style.position = 'absolute';\n    container.appendChild(el);\n    width = getElementWidth(el, isTransformed);\n    remove(el);\n    return width;\n}\n/**\n * Method to get translateY value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateY value of given element\n */\nexport function getTranslateY(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m42 : 0;\n}\n/**\n * Method to get translateX value\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {number} Returns the translateX value of given element\n */\nexport function getTranslateX(element) {\n    var style = getComputedStyle(element);\n    return window.WebKitCSSMatrix ?\n        new WebKitCSSMatrix(style.webkitTransform).m41 : 0;\n}\n/**\n * Method to get week first date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nexport function getWeekFirstDate(date, firstDayOfWeek) {\n    var date1 = new Date(date.getTime());\n    firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * (-1)) % 7;\n    return new Date(date1.setDate(date1.getDate() + (isNaN(firstDayOfWeek) ? 0 : firstDayOfWeek)));\n}\n/**\n * Method to get week last date\n *\n * @param {Date} date Accepts the date object\n * @param {number} firstDayOfWeek Accepts the first day of week number\n * @returns {Date} Returns the date object\n */\nexport function getWeekLastDate(date, firstDayOfWeek) {\n    var weekFirst = getWeekFirstDate(date, firstDayOfWeek);\n    var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);\n    return new Date(weekLast.getTime());\n}\n/**\n * Method to get first date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nexport function firstDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n/**\n * Method to get last date of month\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nexport function lastDateOfMonth(date) {\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n}\n/**\n * Method to get week number\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the week number\n */\nexport function getWeekNumber(date) {\n    var date1 = new Date(date.getFullYear(), 0, 1).valueOf();\n    var currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();\n    var dayOfYear = ((currentDate - date1 + MS_PER_DAY) / MS_PER_DAY);\n    return Math.ceil(dayOfYear / 7);\n}\n/**\n * Method to get week middle date\n *\n * @param {Date} weekFirst Accepts the week first date object\n * @param {Date} weekLast Accepts the week last date object\n * @returns {Date} Returns the date object\n */\nexport function getWeekMiddleDate(weekFirst, weekLast) {\n    return new Date(weekLast.valueOf() - ((weekLast.valueOf() - weekFirst.valueOf()) / 2));\n}\n/**\n * Method to set time to date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} time Accepts the milliseconds\n * @returns {Date} Returns the date object\n */\nexport function setTime(date, time) {\n    var tzOffsetBefore = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;\n    date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);\n    return date;\n}\n/**\n * Method the reset hours in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {Date} Returns the date object\n */\nexport function resetTime(date) {\n    return new Date(date.getFullYear(), date.getMonth(), date.getDate());\n}\n/**\n * Method to get milliseconds from date object\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the milliseconds from date object\n */\nexport function getDateInMs(date) {\n    var localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();\n    var dateOffset = date.getTimezoneOffset();\n    var timezoneOffset = dateOffset - localOffset;\n    return ((date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime())\n        - (timezoneOffset * 60 * 1000));\n}\n/**\n * Method to get date count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the date count\n */\nexport function getDateCount(startDate, endDate) {\n    return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to add no of days in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfDays Accepts the number of days count\n * @returns {Date} Returns the date object\n */\nexport function addDays(date, noOfDays) {\n    date = new Date('' + date);\n    return new Date(date.setDate(date.getDate() + noOfDays));\n}\n/**\n * Method to add no of months in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfMonths Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nexport function addMonths(date, noOfMonths) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setMonth(date.getMonth() + noOfMonths);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to add no of years in date object\n *\n * @param {Date} date Accepts the date object\n * @param {number} noOfYears Accepts the number of month count\n * @returns {Date} Returns the date object\n */\nexport function addYears(date, noOfYears) {\n    date = new Date('' + date);\n    var day = date.getDate();\n    date.setDate(1);\n    date.setFullYear(date.getFullYear() + noOfYears);\n    date.setDate(Math.min(day, getMaxDays(date)));\n    return date;\n}\n/**\n * Method to get start and end hours\n *\n * @param {Date} date Accepts the date object\n * @param {Date} startHour Accepts the start hour date object\n * @param {Date} endHour Accepts the end hour date object\n * @returns {Object} Returns the start and end hour date objects\n */\nexport function getStartEndHours(date, startHour, endHour) {\n    var date1 = new Date(date.getTime());\n    date1.setHours(startHour.getHours());\n    date1.setMinutes(startHour.getMinutes());\n    date1.setSeconds(startHour.getSeconds());\n    var date2 = new Date(date.getTime());\n    if (endHour.getHours() === 0) {\n        date2 = addDays(date2, 1);\n    }\n    else {\n        date2.setHours(endHour.getHours());\n        date2.setMinutes(endHour.getMinutes());\n        date2.setSeconds(endHour.getSeconds());\n    }\n    return { startHour: date1, endHour: date2 };\n}\n/**\n * Method to get month last date\n *\n * @param {Date} date Accepts the date object\n * @returns {number} Returns the month last date\n */\nexport function getMaxDays(date) {\n    return lastDateOfMonth(date).getDate();\n}\n/**\n * Method to get days count between two dates\n *\n * @param {Date} startDate Accepts the date object\n * @param {Date} endDate Accepts the date object\n * @returns {number} Returns the days count\n */\nexport function getDaysCount(startDate, endDate) {\n    var strTime = resetTime(new Date(startDate));\n    var endTime = resetTime(new Date(endDate));\n    return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);\n}\n/**\n * Method to get date object from date string\n *\n * @param {string} date Accepts the date string\n * @returns {Date} Returns the date object\n */\nexport function getDateFromString(date) {\n    return date.indexOf('Date') !== -1 ? new Date(parseInt(date.match(/\\d+/g).toString(), 10)) :\n        date.indexOf('T') !== -1 ? new Date(date) : new Date(date.replace(/-/g, '/'));\n}\n/** @private */\nvar scrollWidth = null;\n/** @private */\nvar pixelRatio = null;\n/**\n * Method to get scrollbar width\n *\n * @returns {number} Returns the scrollbar width\n * @private\n */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    if (pixelRatio === null) {\n        pixelRatio = window.devicePixelRatio || window.screen.availWidth / document.documentElement.clientWidth;\n    }\n    var divNode = createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    var ratio = (devicePixelRatio) ? (devicePixelRatio.toFixed(2) === '1.10' || devicePixelRatio <= 1) ?\n        Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;\n    value = (divNode.offsetWidth - divNode.clientWidth - ratio) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/**\n * Method to reset scrollbar width\n *\n * @private\n * @returns {void}\n */\nexport function resetScrollbarWidth() {\n    var zoomPixelRatio = window.devicePixelRatio || window.screen.availWidth / document.documentElement.clientWidth;\n    if (pixelRatio && pixelRatio !== zoomPixelRatio) {\n        scrollWidth = null;\n        pixelRatio = zoomPixelRatio;\n    }\n}\n/**\n * Method to find the index from data collection\n *\n * @param {Object} data Accepts the data as object\n * @param {string} field Accepts the field name\n * @param {string} value Accepts the value name\n * @param {Object} event Accepts the data as object\n * @param {Object[]} resourceCollection Accepts the data collections\n * @returns {number} Returns the index number\n */\n// eslint-disable-next-line max-len\nexport function findIndexInData(data, field, value, event, resourceCollection) {\n    for (var i = 0, length_1 = data.length; i < length_1; i++) {\n        if (data[parseInt(i.toString(), 10)][\"\" + field] === value) {\n            if (event) {\n                var field_1 = resourceCollection.slice(-2)[0].field;\n                var res = (event[\"\" + field_1] instanceof Array ? event[\"\" + field_1] : [event[\"\" + field_1]]);\n                var resData = res.join(',');\n                if (resData.includes(data[parseInt(i.toString(), 10)][resourceCollection.slice(-1)[0].groupIDField])) {\n                    return i;\n                }\n            }\n            else {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n/**\n * Method to get element outer height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @returns {number} Returns the outer height of the given element\n */\nexport function getOuterHeight(element) {\n    var style = getComputedStyle(element);\n    return element.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);\n}\n/**\n * Method to remove child elements\n *\n * @param {HTMLElement | Element} element Accepts the DOM element\n * @returns {void}\n */\nexport function removeChildren(element) {\n    var elementChildren = [].slice.call(element.children);\n    for (var _i = 0, elementChildren_1 = elementChildren; _i < elementChildren_1.length; _i++) {\n        var elementChild = elementChildren_1[_i];\n        element.removeChild(elementChild);\n    }\n}\n/**\n * Method to check DST is present or not in date object\n *\n * @param {Date} date Accepts the date object\n * @returns {boolean} Returns the boolean value for either DST is present or not\n */\nexport function isDaylightSavingTime(date) {\n    var jan = new Date(date.getFullYear(), 0, 1);\n    var jul = new Date(date.getFullYear(), 6, 1);\n    return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n}\n/**\n * Method to get UTC time value from date\n *\n * @param {Date} date Accepts the date\n * @returns {number} Returns the UTC time value\n */\nexport function getUniversalTime(date) {\n    var year = date.getFullYear();\n    var month = date.getMonth();\n    var day = date.getDate();\n    var hours = date.getHours();\n    var minutes = date.getMinutes();\n    var seconds = date.getSeconds();\n    var milliseconds = date.getMilliseconds();\n    return Date.UTC(year, month, day, hours, minutes, seconds, milliseconds);\n}\n/**\n * Method to check the device\n *\n * @returns {boolean} Returns the boolean value for either device is present or not.\n */\nexport function isMobile() {\n    return window.navigator.userAgent.toLowerCase().indexOf('mobi') > -1;\n}\n/**\n * Method to check the IPad device\n *\n * @returns {boolean} Returns the boolean value for either IPad device is present or not.\n */\nexport function isIPadDevice() {\n    return window.navigator.userAgent.toLowerCase().indexOf('ipad') > -1;\n}\n/**\n * Method to capitalize the first word in string\n *\n * @param {string} inputString Accepts the string value\n * @param {string} type Accepts the string type\n * @returns {string} Returns the output string\n */\nexport function capitalizeFirstWord(inputString, type) {\n    if (type === 'multiple') {\n        inputString = inputString.split(' ').map(function (e) { return e.charAt(0).toLocaleUpperCase() + e.substring(1); }).join(' ');\n    }\n    else if (type === 'single') {\n        if (inputString[0] >= '0' && inputString[0] <= '9') {\n            var array = inputString.match(/[a-zA-Z]/);\n            inputString = isNullOrUndefined(array) ? inputString :\n                inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);\n        }\n        inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);\n    }\n    return inputString;\n}\n/**\n * Method to get element cell width\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @param {boolean} isTransformed Accepts the boolean value that indicates the status of the transform style applied to the element\n * @returns {number} Returns the width of the given element\n */\nexport function getElementWidth(element, isTransformed) {\n    return isTransformed ? element.offsetWidth : element.getBoundingClientRect().width;\n}\n/**\n * Method to get element cell Height\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @param {boolean} isTransformed Accepts the boolean value that indicates the status of the transform style applied to the element\n * @returns {number} Returns the Height of the given element\n */\nexport function getElementHeight(element, isTransformed) {\n    return isTransformed ? element.offsetHeight : element.getBoundingClientRect().height;\n}\n/**\n * Method to get element cell Top\n *\n * @param {HTMLElement} element Accepts the DOM element\n * @param {boolean} isTransformed Accepts the boolean value that indicates the status of the transform style applied to the element\n * @returns {number} Returns the top value of the given element\n */\nexport function getElementTop(element, isTransformed) {\n    return isTransformed ? element.offsetTop : element.getBoundingClientRect().top;\n}\n","/* eslint-disable max-len */\nimport { isNullOrUndefined, getDefaultDateObject, getValue, cldrData } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, addDays, resetTime, capitalizeFirstWord } from '../schedule/base/util';\nimport { Islamic, Gregorian } from '../common/calendar-util';\nimport { Timezone } from '../schedule/timezone/timezone';\n/**\n * Date Generator from Recurrence Rule\n */\n/**\n * Generate Summary from Recurrence Rule\n *\n * @param {string} rule Accepts the Recurrence rule\n * @param {L10n} localeObject Accepts the locale object\n * @param {string} locale Accepts the locale name\n * @param {CalendarType} calendarType Accepts the calendar type\n * @returns {string} Returns the summary string from given recurrence rule\n */\nexport function generateSummary(rule, localeObject, locale, calendarType) {\n    if (calendarType === void 0) { calendarType = 'Gregorian'; }\n    var ruleObject = extractObjectFromRule(rule);\n    var summary = localeObject.getConstant(EVERY) + ' ';\n    var cldrObj;\n    var cldrObj1;\n    var calendarMode = calendarType.toLowerCase();\n    if (locale === 'en' || locale === 'en-US') {\n        var nameSpace1 = 'months.stand-alone.abbreviated';\n        var nameSpace = 'days.stand-alone.abbreviated';\n        cldrObj1 = (getValue(nameSpace1, getDefaultDateObject(calendarMode)));\n        cldrObj = (getValue(nameSpace, getDefaultDateObject(calendarMode)));\n    }\n    else {\n        var nameSpace1 = 'main.' + locale + '.dates.calendars.' + calendarMode + '.months.stand-alone.abbreviated';\n        var nameSpace = 'main.' + locale + '.dates.calendars.' + calendarMode + '.days.stand-alone.abbreviated';\n        cldrObj1 =\n            (getValue(nameSpace1, cldrData));\n        cldrObj =\n            (getValue(nameSpace, cldrData));\n    }\n    if (ruleObject.interval > 1) {\n        summary += ruleObject.interval + ' ';\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            summary += localeObject.getConstant(DAYS);\n            break;\n        case 'WEEKLY':\n            summary += localeObject.getConstant(WEEKS) + ' ' + localeObject.getConstant(ON) + ' ';\n            ruleObject.day.forEach(function (day, index) {\n                summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT[\"\" + day], cldrObj), 'single');\n                summary += (((ruleObject.day.length - 1) === index) ? '' : ', ');\n            });\n            break;\n        case 'MONTHLY':\n            summary += localeObject.getConstant(MONTHS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n        case 'YEARLY':\n            summary += localeObject.getConstant(YEARS) + ' ' + localeObject.getConstant(ON) + ' ';\n            summary += capitalizeFirstWord(getValue((ruleObject.month[0]).toString(), cldrObj1), 'single') + ' ';\n            summary += getMonthSummary(ruleObject, cldrObj, localeObject);\n            break;\n    }\n    if (ruleObject.count) {\n        summary += ', ' + (ruleObject.count) + ' ' + localeObject.getConstant(TIMES);\n    }\n    else if (ruleObject.until) {\n        var tempDate = ruleObject.until;\n        summary += ', ' + localeObject.getConstant(UNTIL)\n            + ' ' + tempDate.getDate()\n            + ' ' + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), 'single')\n            + ' ' + tempDate.getFullYear();\n    }\n    return summary;\n}\n/**\n * Generates Month summary\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {string[]} cldrObj Accepts the collections of month name from calendar\n * @param {L10n} localeObj Accepts the locale object\n * @returns {string} Returns the month summary string from given recurrence rule object\n * @private\n */\nfunction getMonthSummary(ruleObject, cldrObj, localeObj) {\n    var summary = '';\n    if (ruleObject.monthDay.length) {\n        summary += ruleObject.monthDay[0];\n    }\n    else if (ruleObject.day) {\n        var pos = ruleObject.setPosition - 1;\n        summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : (WEEKPOS.length - 1)])\n            + ' ' + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), 'single');\n    }\n    return summary;\n}\n/**\n * Generates the date collections from the given recurrence rule\n *\n * @param {Date} startDate Accepts the rule start date\n * @param {string} rule Accepts the recurrence rule\n * @param {string} excludeDate Accepts the exception dates in string format\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @param {number} maximumCount Accepts the maximum number count to generate date collections\n * @param {Date} viewDate Accepts the current date instead of start date\n * @param {CalendarType} calendarMode Accepts the calendar type\n * @param {string} newTimezone Accepts the timezone name\n * @returns {number[]} Returns the collection of dates\n */\nexport function generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode, newTimezone) {\n    if (maximumCount === void 0) { maximumCount = MAXOCCURRENCE; }\n    if (viewDate === void 0) { viewDate = null; }\n    if (calendarMode === void 0) { calendarMode = 'Gregorian'; }\n    if (newTimezone === void 0) { newTimezone = null; }\n    var ruleObject = extractObjectFromRule(rule);\n    var cacheDate;\n    calendarUtil = getCalendarUtil(calendarMode);\n    var data = [];\n    var modifiedDate = new Date(startDate.getTime());\n    tempExcludeDate = [];\n    var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(',');\n    var tz = new Timezone();\n    tempDate.forEach(function (content) {\n        var parsedDate = getDateFromRecurrenceDateString(content);\n        if (newTimezone) {\n            parsedDate = tz.add(new Date(parsedDate.getTime()), newTimezone);\n        }\n        tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));\n    });\n    ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;\n    if (viewDate && viewDate > startDate && !ruleObject.count) {\n        tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));\n    }\n    else {\n        tempViewDate = null;\n    }\n    if (!ruleObject.until && tempViewDate) {\n        cacheDate = new Date(tempViewDate.getTime());\n        cacheDate.setDate(tempViewDate.getDate() + maximumCount * (ruleObject.interval));\n        ruleObject.until = cacheDate;\n    }\n    if (ruleObject.until && startDate > ruleObject.until) {\n        return data;\n    }\n    maxOccurrence = maximumCount;\n    startDayOfWeek = startDayOfWeek || 0;\n    setFirstDayOfWeek(DAYINDEX[parseInt(startDayOfWeek.toString(), 10)]);\n    if (ruleObject.until) {\n        var end = resetTime(ruleObject.until);\n        ruleObject.until = new Date(end.getFullYear(), end.getMonth(), end.getDate(), 23, 59, 59);\n    }\n    switch (ruleObject.freq) {\n        case 'DAILY':\n            dailyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'WEEKLY':\n            weeklyType(modifiedDate, ruleObject.until, data, ruleObject, startDayOfWeek);\n            break;\n        case 'MONTHLY':\n            monthlyType(modifiedDate, ruleObject.until, data, ruleObject);\n            break;\n        case 'YEARLY':\n            yearlyType(modifiedDate, ruleObject.until, data, ruleObject);\n    }\n    return data;\n}\n/**\n * Generate date object from given date string\n *\n * @param {string} recDateString Accepts the exception date as string\n * @returns {Date} Returns the date from exception date string\n */\nexport function getDateFromRecurrenceDateString(recDateString) {\n    return new Date(recDateString.substr(0, 4) +\n        '-' + recDateString.substr(4, 2) +\n        '-' + recDateString.substr(6, 5) +\n        ':' + recDateString.substr(11, 2) +\n        ':' + recDateString.substr(13));\n}\n/**\n * Internal method to handle exclude date\n *\n * @param {number[]} data Accepts the exception date collections\n * @param {number} date Accepts the new exclude date\n * @returns {void}\n * @private\n */\nfunction excludeDateHandler(data, date) {\n    var zeroIndex = new Date(date).setHours(0, 0, 0, 0);\n    if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {\n        data.push(date);\n    }\n}\n/**\n * Internal method for get date count\n *\n * @param {Date} startDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} Returns the number of date count\n * @private\n */\nfunction getDateCount(startDate, ruleObject) {\n    var count = maxOccurrence;\n    if (ruleObject.count) {\n        count = ruleObject.count;\n    }\n    else if (ruleObject.until) {\n        if (ruleObject.freq === 'DAILY' || ruleObject.freq === 'WEEKLY') {\n            count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;\n        }\n        else if (ruleObject.freq === 'MONTHLY' || ruleObject.freq === 'YEARLY') {\n            count = Math.floor(((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear()) -\n                (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) +\n                (ruleObject.day.length > 1 ? (Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1) : 1);\n            if (ruleObject.freq === 'YEARLY') {\n                count = ruleObject.month.length > 1 ? (count * ruleObject.month.length) : count;\n            }\n        }\n    }\n    return count;\n}\n/**\n *  Internal method for daily type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction dailyType(startDate, endDate, data, ruleObject) {\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var expectedDays = ruleObject.day;\n    while (compareDates(tempDate, endDate)) {\n        state = true;\n        state = validateRules(tempDate, ruleObject);\n        if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {\n            excludeDateHandler(data, tempDate.getTime());\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n        }\n        tempDate.setDate(tempDate.getDate() + interval);\n        if (tempDate.getHours() !== startDate.getHours()) {\n            tempDate.setHours(startDate.getHours());\n        }\n    }\n}\n/**\n * Internal method for weekly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} startDayOfWeek Accepts the start day index of week\n * @returns {void}\n * @private\n */\nfunction weeklyType(startDate, endDate, data, ruleObject, startDayOfWeek) {\n    var tempDate = new Date(startDate.getTime());\n    if (!ruleObject.day.length) {\n        ruleObject.day.push(DAYINDEX[startDate.getDay()]);\n    }\n    var interval = ruleObject.interval;\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var weekState = true;\n    var wkstIndex;\n    var weekCollection = [];\n    if (expectedDays.length > 1) {\n        if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === '') {\n            ruleObject.wkst = dayIndex[0];\n        }\n        wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);\n        while (compareDates(tempDate, endDate)) {\n            var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;\n            startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;\n            var weekstartDate = addDays(tempDate, -startDateDiff);\n            var weekendDate = addDays(weekstartDate, 6);\n            var compareTempDate = new Date(tempDate.getTime());\n            weekendDate = resetTime(weekendDate);\n            compareTempDate = resetTime(compareTempDate);\n            while (weekendDate >= compareTempDate) {\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    weekCollection.push([tempDate.getTime()]);\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    break;\n                }\n                tempDate.setDate(tempDate.getDate() + 1);\n                if (tempDate.getHours() !== startDate.getHours()) {\n                    tempDate.setHours(startDate.getHours());\n                }\n                compareTempDate = new Date(tempDate.getTime());\n                compareTempDate = resetTime(compareTempDate);\n            }\n            tempDate.setDate(tempDate.getDate() - 1);\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate((tempDate.getDate()) + 1 + ((interval - 1) * 7));\n            insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n            weekCollection = [];\n        }\n    }\n    else {\n        tempDate = getStartDateForWeek(startDate, ruleObject.day);\n        if (interval > 1 && dayIndex.indexOf(ruleObject.day[0]) < (startDate.getDay() - startDayOfWeek)) {\n            tempDate.setDate(tempDate.getDate() + ((interval - 1) * 7));\n        }\n        while (compareDates(tempDate, endDate)) {\n            weekState = validateRules(tempDate, ruleObject);\n            if (weekState && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1)) {\n                excludeDateHandler(data, tempDate.getTime());\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                break;\n            }\n            tempDate.setDate(tempDate.getDate() + (interval * 7));\n        }\n        insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);\n        weekCollection = [];\n    }\n}\n/**\n *  Internal method for monthly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyType(startDate, endDate, data, ruleObject) {\n    // Set monthday value if BYDAY, BYMONTH and Month day property is not set based on start date\n    if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n        if (ruleObject.freq === 'YEARLY') {\n            ruleObject.month.push(startDate.getMonth() + 1);\n        }\n    }\n    else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {\n        ruleObject.monthDay.push(startDate.getDate());\n    }\n    var ruleType = validateMonthlyRuleType(ruleObject);\n    switch (ruleType) {\n        case 'day':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDayTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n        case 'both':\n        case 'date':\n            switch (ruleObject.freq) {\n                case 'MONTHLY':\n                    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n                    break;\n                case 'YEARLY':\n                    monthlyDateTypeProcess(startDate, endDate, data, ruleObject);\n                    break;\n            }\n            break;\n    }\n}\n/**\n * Internal method for yearly type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction yearlyType(startDate, endDate, data, ruleObject) {\n    var typeValue = checkYearlyType(ruleObject);\n    switch (typeValue) {\n        case 'MONTH':\n            monthlyType(startDate, endDate, data, ruleObject);\n            break;\n        case 'WEEKNO':\n            processWeekNo(startDate, endDate, data, ruleObject);\n            break;\n        case 'YEARDAY':\n            processYearDay(startDate, endDate, data, ruleObject);\n            break;\n    }\n}\n/**\n * Internal method for process week no\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processWeekNo(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var startDay;\n    var firstWeekSpan;\n    var weekNos = ruleObject.weekNo;\n    var weekNo;\n    var maxDate;\n    var minDate;\n    var weekCollection = [];\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);\n        firstWeekSpan = (6 - startDay) + 1;\n        for (var index = 0; index < weekNos.length; index++) {\n            weekNo = weekNos[parseInt(index.toString(), 10)];\n            weekNo = (weekNo > 0) ? weekNo : 53 + weekNo + 1;\n            maxDate = (weekNo === 1) ? firstWeekSpan : firstWeekSpan + ((weekNo - 1) * 7);\n            minDate = (weekNo === 1) ? firstWeekSpan - 7 : firstWeekSpan + ((weekNo - 2) * 7);\n            while (minDate < maxDate) {\n                tempDate = new Date(stDate.getTime() + (MS_PER_DAY * minDate));\n                if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                    }\n                    else {\n                        weekCollection.push([tempDate.getTime()]);\n                    }\n                }\n                minDate++;\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        weekCollection = [];\n    }\n}\n/**\n * Internal method for process year day\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processYearDay(startDate, endDate, data, ruleObject) {\n    var stDate = calendarUtil.getYearLastDate(startDate, 0);\n    var tempDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var state;\n    var dateCollection = [];\n    var date;\n    var expectedDays = ruleObject.day;\n    while (compareDates(stDate, endDate)) {\n        for (var index = 0; index < ruleObject.yearDay.length; index++) {\n            date = ruleObject.yearDay[parseInt(index.toString(), 10)];\n            tempDate = new Date(stDate.getTime());\n            if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) &&\n                (!calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1))) {\n                tempDate.setDate(tempDate.getDate() + 1);\n                continue;\n            }\n            tempDate.setDate(tempDate.getDate() + ((date < 0) ?\n                calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));\n            if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                if (ruleObject.setPosition == null) {\n                    insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());\n                }\n                else {\n                    dateCollection.push([tempDate.getTime()]);\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);\n        }\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);\n        dateCollection = [];\n    }\n}\n/**\n * Internal method to check yearly type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {YearRuleType} Returns the Yearly rule type object\n * @private\n */\nfunction checkYearlyType(ruleObject) {\n    if (ruleObject.yearDay.length) {\n        return 'YEARDAY';\n    }\n    else if (ruleObject.weekNo.length) {\n        return 'WEEKNO';\n    }\n    return 'MONTH';\n}\n/**\n * Internal method to initialize recurrence rule variables\n *\n * @param {Date} startDate Accepts the start date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {RuleData} Return the rule data object\n * @private\n */\nfunction initializeRecRuleVariables(startDate, ruleObject) {\n    var ruleData = {\n        monthCollection: [],\n        index: 0,\n        tempDate: new Date(startDate.getTime()),\n        mainDate: new Date(startDate.getTime()),\n        expectedCount: getDateCount(startDate, ruleObject),\n        monthInit: 0,\n        dateCollection: []\n    };\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());\n    }\n    return ruleData;\n}\n/**\n * Internal method for process monthly date type recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {\n    if (ruleObject.month.length) {\n        monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    var currentMonthDate;\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    while (compareDates(ruleData.tempDate, endDate)) {\n        currentMonthDate = new Date(ruleData.tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) &&\n            (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) <= ruleData.expectedCount)) {\n            if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month))) {\n                processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);\n                ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n                ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n            }\n            else {\n                calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n                ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n                break;\n            }\n        }\n        ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(ruleData.tempDate)) {\n            calendarUtil.setValidDate(ruleData.tempDate, 1, 1);\n            ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);\n        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * Internal method for process monthly date type with month frequency from recurrence rule\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var ruleData = initializeRecRuleVariables(startDate, ruleObject);\n    ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);\n    if (((ruleObject.freq === 'MONTHLY' && ruleObject.interval === 12) || (ruleObject.freq === 'YEARLY')) &&\n        calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {\n        return;\n    }\n    while (compareDates(ruleData.tempDate, endDate)) {\n        ruleData.beginDate = new Date(ruleData.tempDate.getTime());\n        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);\n        }\n        if (ruleData.expectedCount && (data.length + ruleObject.recExceptionCount) >= ruleData.expectedCount) {\n            return;\n        }\n        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);\n        ruleData.dateCollection = [];\n    }\n}\n/**\n * To process date collection for Monthly & Yearly based on BYMONTH Day property\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {RuleData} recRuleVariables Accepts the rule data\n * @param {Date} endDate Accepts the end date\n * @param {boolean} isByMonth Accepts the boolean to validate either month or not\n * @param {Date} startDate Accepts the start date\n * @param {number[]} data Accepts the collection of dates\n * @returns {void}\n * @private\n */\nfunction processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {\n    for (var index = 0; index < ruleObject.monthDay.length; index++) {\n        recRuleVariables.date = ruleObject.monthDay[parseInt(index.toString(), 10)];\n        recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);\n        var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);\n        recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : (maxDate + recRuleVariables.date + 1);\n        if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate)\n            && (recRuleVariables.date > 0)) {\n            calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);\n            if (endDate && recRuleVariables.tempDate > endDate) {\n                return;\n            }\n            if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {\n                if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount\n                    && (data.length + ruleObject.recExceptionCount) < recRuleVariables.expectedCount)) {\n                    insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());\n                }\n                else {\n                    recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);\n                }\n            }\n        }\n    }\n}\n/**\n * Internal method to set next valid date\n *\n * @param {Date} tempDate Accepts the date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} monthInit Accepts the initial month\n * @param {Date} beginDate Accepts the initial date\n * @param {number} interval Accepts the interval duration\n * @returns {number} Returnx the next valid date\n * @private\n */\nfunction setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {\n    if (beginDate === void 0) { beginDate = null; }\n    var monthData = beginDate ? beginDate.getMonth() : 0;\n    var startDate = calendarUtil.getMonthStartDate(tempDate);\n    interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;\n    tempDate.setFullYear(startDate.getFullYear());\n    tempDate.setMonth(startDate.getMonth());\n    tempDate.setDate(startDate.getDate());\n    if (ruleObject.month.length) {\n        monthInit++;\n        monthInit = monthInit % ruleObject.month.length;\n        calendarUtil.setMonth(tempDate, ruleObject.month[parseInt(monthInit.toString(), 10)], 1);\n        if (monthInit === 0) {\n            calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);\n        }\n    }\n    else {\n        if (beginDate && (beginDate.getFullYear() < tempDate.getFullYear())) {\n            monthData = tempDate.getMonth() - 1;\n        }\n        calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);\n    }\n    return monthInit;\n}\n/**\n * To get month collection when BYDAY property having more than one value in list.\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction getMonthCollection(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var tempDate = new Date(startDate.getTime());\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var monthCollection = [];\n    var dateCollection = [];\n    var dates = [];\n    var index;\n    var state;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var monthInit = 0;\n    var beginDate;\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)\n        && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        var currentMonthDate = new Date(tempDate.getTime());\n        var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n        if (isHavingNumber.indexOf(true) > -1) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);\n                var position = parseInt(expectedDaysArray[0], 10);\n                tempDate = new Date(tempDate.getTime());\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, expectedDays);\n                currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {\n                    if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {\n                        monthCollection.push([currentMonthDate.getTime()]);\n                    }\n                    currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                }\n                currentMonthDate.setDate(currentMonthDate.getDate() - (1));\n                if (expectedDaysArray[0].indexOf('-') > -1) {\n                    index = monthCollection.length - (-1 * position);\n                }\n                else {\n                    index = position - 1;\n                }\n                index = isNaN(index) ? 0 : index;\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, dates))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n                monthCollection = [];\n            }\n            if (!isNullOrUndefined(ruleObject.setPosition)) {\n                insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n                dates = [];\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n        else {\n            var weekCollection = [];\n            var dayCycleData = processWeekDays(expectedDays);\n            currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());\n            var initialDate = new Date(tempDate.getTime());\n            beginDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameMonth(initialDate, tempDate)) {\n                weekCollection.push(tempDate.getTime());\n                if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {\n                    monthCollection.push(weekCollection);\n                    weekCollection = [];\n                }\n                tempDate.setDate(tempDate.getDate()\n                    + dayCycleData[DAYINDEX[tempDate.getDay()]]);\n            }\n            index = ((ruleObject.setPosition < 1) ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n            if (isNullOrUndefined(ruleObject.setPosition)) {\n                index = 0;\n                var datas = [];\n                for (var week = 0; week < monthCollection.length; week++) {\n                    for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {\n                        datas.push(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]);\n                    }\n                }\n                monthCollection = [datas];\n            }\n            if (monthCollection.length > 0) {\n                insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n            }\n            if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                return;\n            }\n            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n            monthCollection = [];\n        }\n    }\n}\n/**\n * To process monday day type for FREQ=MONTHLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    // When BYDAY property having more than 1 value.\n    if (expectedDays.length > 1) {\n        getMonthCollection(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var monthCollection = [];\n    var beginDate;\n    var monthInit = 0;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate) && (expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount)) {\n        beginDate = new Date(tempDate.getTime());\n        var currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {\n            monthCollection.push([currentMonthDate.getTime()]);\n            currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n        }\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process monday day type for FREQ=YEARLY\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n    // If BYDAY property having more than 1 value in list\n    if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {\n        processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);\n        return;\n    }\n    else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {\n        monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);\n        return;\n    }\n    var tempDate = new Date(startDate.getTime());\n    var currentMonthDate;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n    }\n    // Set the date as start date of the yeear if yearly freq having ByDay property alone\n    if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {\n        tempDate.setFullYear(startDate.getFullYear(), 0, 1);\n    }\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n            (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n            currentMonthDate = new Date(tempDate.getTime());\n            while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                if (ruleObject.month.length === 0 || (ruleObject.month.length > 0\n                    && !calendarUtil.checkMonth(tempDate, ruleObject.month))) {\n                    if (expectedDays.length > 1) {\n                        if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (1));\n                    }\n                    else {\n                        // If BYDAY property having 1 value in list\n                        if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {\n                            calendarUtil.setValidDate(tempDate, 1, 1);\n                            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                            break;\n                        }\n                        var newstr = getDayString(expectedDays[0]);\n                        if (DAYINDEX[currentMonthDate.getDay()] === newstr\n                            && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0)\n                                > new Date(startDate.getFullYear())) {\n                            monthCollection.push([currentMonthDate.getTime()]);\n                        }\n                        currentMonthDate.setDate(currentMonthDate.getDate() + (7));\n                    }\n                }\n                else {\n                    calendarUtil.setValidDate(tempDate, 1, 1);\n                    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    break;\n                }\n            }\n        }\n        tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());\n        // To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n        insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        }\n        tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n            return;\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        monthCollection = [];\n    }\n}\n/**\n * To process the recurrence rule when BYDAY property having values with integer\n *\n * @param {Date} startDate Accepts the strat date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of dates\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var tempDate = new Date(startDate.getTime());\n    var interval = ruleObject.interval;\n    var monthCollection = [];\n    var dateCollection = [];\n    var index;\n    var state;\n    var monthInit = 0;\n    var currentMonthDate;\n    var currentDate;\n    var beginDate;\n    tempDate = calendarUtil.getMonthStartDate(tempDate);\n    var datas = [];\n    if (ruleObject.month.length) {\n        calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);\n    }\n    tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n    while (compareDates(tempDate, endDate)) {\n        currentMonthDate = new Date(tempDate.getTime());\n        for (var i = 0; i <= ruleObject.month.length; i++) {\n            for (var j = 0; j <= expectedDays.length - 1; j++) {\n                tempDate = calendarUtil.getMonthStartDate(tempDate);\n                tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                monthCollection = [];\n                while (calendarUtil.isSameYear(currentMonthDate, tempDate) &&\n                    (expectedCount && (data.length + ruleObject.recExceptionCount) <= expectedCount)) {\n                    while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {\n                        currentMonthDate = new Date(tempDate.getTime());\n                        if (ruleObject.month.length === 0 ||\n                            (ruleObject.month.length > 0 && ruleObject.month[parseInt(i.toString(), 10)] === calendarUtil.getMonth(currentMonthDate))) {\n                            var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);\n                            var position = parseInt(expectedDaysArray[0], 10);\n                            currentDate = new Date(tempDate.getTime());\n                            while (calendarUtil.isSameYear(currentDate, tempDate)\n                                && calendarUtil.isSameMonth(currentDate, tempDate)) {\n                                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {\n                                    monthCollection.push([currentDate.getTime()]);\n                                }\n                                currentDate.setDate(currentDate.getDate() + (1));\n                            }\n                            currentDate.setDate(currentDate.getDate() - (1));\n                            if (expectedDaysArray[0].indexOf('-') > -1) {\n                                index = monthCollection.length - (-1 * position);\n                            }\n                            else {\n                                index = position - 1;\n                            }\n                            index = isNaN(index) ? 0 : index;\n                        }\n                        monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);\n                        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n                    }\n                }\n                tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());\n                if (monthCollection.length > 0) {\n                    if (isNullOrUndefined(ruleObject.setPosition)) {\n                        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n                    }\n                    else {\n                        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n                    }\n                }\n                if (expectedCount && (data.length + ruleObject.recExceptionCount) >= expectedCount) {\n                    return;\n                }\n            }\n        }\n        if (!isNullOrUndefined(ruleObject.setPosition)) {\n            insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n            datas = [];\n        }\n        if (calendarUtil.isLastMonth(tempDate)) {\n            calendarUtil.setValidDate(tempDate, 1, 1);\n            tempDate.setFullYear(tempDate.getFullYear() + interval - 1);\n        }\n        else {\n            tempDate.setFullYear(tempDate.getFullYear() + interval);\n        }\n        tempDate = getStartDateForWeek(tempDate, ruleObject.day);\n        if (ruleObject.month.length) {\n            calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());\n        }\n    }\n}\n/**\n * To get recurrence collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month collection dates\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {RuleData} Returns the rule data object\n * @private\n */\nfunction getRecurrenceCollection(monthCollection, expectedDays) {\n    var index;\n    var recurrenceCollectionObject = { monthCollection: [], index: 0 };\n    if (expectedDays.length === 1) {\n        // To split numeric value from BYDAY property value\n        var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);\n        var arrPosition = void 0;\n        if (expectedDaysArrays.length > 1) {\n            arrPosition = parseInt(expectedDaysArrays[0], 10);\n            index = ((arrPosition < 1) ? (monthCollection.length + arrPosition) : arrPosition - 1);\n        }\n        else {\n            index = 0;\n            monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n        }\n    }\n    else {\n        index = 0;\n        monthCollection = getDateCollectionforBySetPosNull(monthCollection);\n    }\n    recurrenceCollectionObject.monthCollection = monthCollection;\n    recurrenceCollectionObject.index = index;\n    return recurrenceCollectionObject;\n}\n/**\n * Internal method to process the data collections\n *\n * @param {number[]} dateCollection Accepts the date collections\n * @param {boolean} state Accepts the state\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of numbers\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {\n    var index = ((ruleObject.setPosition < 1) ?\n        (dateCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n    if (isNullOrUndefined(ruleObject.setPosition)) {\n        index = 0;\n        dateCollection = getDateCollectionforBySetPosNull(dateCollection);\n    }\n    if (dateCollection.length > 0) {\n        insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);\n    }\n}\n/**\n * To process month collection if BYSETPOS is null\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @returns {number[]} Returns the month date collections\n * @private\n */\nfunction getDateCollectionforBySetPosNull(monthCollection) {\n    var datas = [];\n    for (var week = 0; week < monthCollection.length; week++) {\n        for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {\n            datas.push(new Date(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]).getTime());\n        }\n    }\n    monthCollection = datas.length > 0 ? [datas] : [];\n    return monthCollection;\n}\n/**\n * To filter date collection based on BYDAY Index, then BYSETPOS and to insert datas into existing collection\n *\n * @param {number[]} monthCollection Accepts the month date collections\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the date collections\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {\n    var expectedDays = ruleObject.day;\n    var state;\n    var datas = [];\n    var dateCollection = [];\n    var recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);\n    monthCollection = recurrenceCollections.monthCollection;\n    var index = recurrenceCollections.index;\n    if (ruleObject.setPosition != null) {\n        dateCollection = [(filterDateCollectionByIndex(monthCollection, index, datas))];\n        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);\n    }\n    else {\n        if (monthCollection.length > 0) {\n            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);\n        }\n    }\n    datas = [];\n}\n/**\n * To filter date collection when BYDAY property having values with number\n *\n * @param {number[]} monthCollection Accepts the date collections\n * @param {number} index Accepts the index of date collections\n * @param {number[]} datas Accepts the collection of dates\n * @returns {number[]} Returns the collection of dates\n * @private\n */\nfunction filterDateCollectionByIndex(monthCollection, index, datas) {\n    for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {\n        datas.push(monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)]);\n    }\n    return datas;\n}\n/**\n * To insert processed date collection in final array element\n *\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} dayData Accepts the date index\n * @returns {void}\n * @private\n */\nfunction insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {\n    var expectedCount = getDateCount(startDate, ruleObject);\n    var chDate = new Date(dayData);\n    state = validateRules(chDate, ruleObject);\n    if ((chDate >= startDate) && compareDates(chDate, endDate) && state\n        && expectedCount && (data.length + ruleObject.recExceptionCount) < expectedCount) {\n        excludeDateHandler(data, dayData);\n    }\n}\n/**\n * Return the last week number of given month and year.\n *\n * @param {number} year Accepts the Year in number format\n * @param {number} startDayOfWeek Accepts the start date\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {number} week Accepts the week in number format\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {number} returns week number\n * @private\n */\nfunction weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {\n    var firstDayOfWeek = startDayOfWeek || 0;\n    var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);\n    var lastOfMonth = new Date(year, ruleObject.month[0], 0);\n    var numberOfDaysInMonth = lastOfMonth.getDate();\n    var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;\n    var used = firstWeekDay + numberOfDaysInMonth;\n    var count = Math.ceil(used / 7) - 1;\n    var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(count.toString(), 10)];\n    var chDate = new Date(dayData);\n    var state = validateRules(chDate, ruleObject);\n    return (state) ? count : count - 1;\n}\n/**\n * To process date collection based on Byset position after process the collection based on BYDAY property value index: EX:BYDAY=1SUm-1SU\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {void}\n * @private\n */\nfunction insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {\n    if (monthCollection.length > 0) {\n        for (var week = 0; week < monthCollection.length; week++) {\n            monthCollection[parseInt(week.toString(), 10)].sort();\n            var expectedDays = ruleObject.day;\n            var isHavingNumber = expectedDays.map(function (item) { return HASNUMBER.test(item); });\n            var weekIndex = (ruleObject.freq === 'YEARLY' && (ruleObject.validRules.indexOf('BYMONTH') > -1) &&\n                !(isHavingNumber.indexOf(true) > -1)) ?\n                weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject)\n                : (monthCollection[parseInt(week.toString(), 10)].length + ruleObject.setPosition);\n            var index = ((ruleObject.setPosition < 1) ? weekIndex : ruleObject.setPosition - 1);\n            var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(index.toString(), 10)];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * To insert datas into existing collection which is processed from previous loop.\n *\n * @param {number[]} monthCollection Accepts the collection of dates\n * @param {boolean} state Accepts the state of the recurrence rule\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @param {number[]} data Accepts the collection of date\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @param {number} index Accepts the index value\n * @returns {void}\n * @private\n */\nfunction insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {\n    if (monthCollection.length > 0) {\n        index = !isNullOrUndefined(index) ? index :\n            ((ruleObject.setPosition < 1)\n                ? (monthCollection.length + ruleObject.setPosition) : ruleObject.setPosition - 1);\n        monthCollection[parseInt(index.toString(), 10)].sort();\n        for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {\n            var dayData = monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)];\n            insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);\n        }\n    }\n}\n/**\n * Internal method to compare dates\n *\n * @param {Date} startDate Accepts the start date\n * @param {Date} endDate Accepts the end date\n * @returns {boolean} Returns the result of checking start and end dates\n * @private\n */\nfunction compareDates(startDate, endDate) {\n    return endDate ? (startDate <= endDate) : true;\n}\n/**\n * Internal method to get day string\n *\n * @param {string} expectedDays Accepts the exception date string\n * @returns {string} Returns the valid string\n * @private\n */\nfunction getDayString(expectedDays) {\n    // To get BYDAY value without numeric value\n    var newstr = expectedDays.replace(REMOVENUMBERINSTRING, '');\n    return newstr;\n}\n/**\n * Internal method to check day index\n *\n * @param {number} day Accepts the day index\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {boolean} Returns the index date\n * @private\n */\nfunction checkDayIndex(day, expectedDays) {\n    var sortedExpectedDays = [];\n    expectedDays.forEach(function (element) {\n        var expectedDaysNumberSplit = element.match(SPLITNUMBERANDSTRING);\n        if (expectedDaysNumberSplit.length === 2) {\n            sortedExpectedDays.push(expectedDaysNumberSplit[1]);\n        }\n        else {\n            sortedExpectedDays.push(expectedDaysNumberSplit[0]);\n        }\n    });\n    return (sortedExpectedDays.indexOf(DAYINDEX[parseInt(day.toString(), 10)]) === -1);\n}\n/**\n * Internal method to get start date of week\n *\n * @param {Date} startDate Accepts the start date\n * @param {string[]} expectedDays Accepts the exception dates\n * @returns {Date} Return the week start date\n * @private\n */\nfunction getStartDateForWeek(startDate, expectedDays) {\n    var tempDate = new Date(startDate.getTime());\n    var newstr;\n    if (expectedDays.length > 0) {\n        var expectedDaysArr = [];\n        for (var i = 0; i <= expectedDays.length - 1; i++) {\n            newstr = getDayString(expectedDays[parseInt(i.toString(), 10)]);\n            expectedDaysArr.push(newstr);\n        }\n        if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {\n            do {\n                tempDate.setDate(tempDate.getDate() + 1);\n            } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);\n        }\n    }\n    return tempDate;\n}\n/**\n * Method to generate recurrence rule object from given rule\n *\n * @param {string} rules Accepts the recurrence rule\n * @returns {RecRule} Returns the recurrence rule object\n */\nexport function extractObjectFromRule(rules) {\n    var ruleObject = {\n        freq: null,\n        interval: 1,\n        count: null,\n        until: null,\n        day: [],\n        wkst: null,\n        month: [],\n        weekNo: [],\n        monthDay: [],\n        yearDay: [],\n        setPosition: null,\n        validRules: []\n    };\n    var rulesList = rules.split(';');\n    var splitData = [];\n    var temp;\n    rulesList.forEach(function (data) {\n        splitData = data.split('=');\n        switch (splitData[0]) {\n            case 'UNTIL':\n                temp = splitData[1];\n                ruleObject.until = getDateFromRecurrenceDateString(temp);\n                break;\n            case 'BYDAY':\n                ruleObject.day = splitData[1].split(',');\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTHDAY':\n                ruleObject.monthDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYMONTH':\n                ruleObject.month = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYYEARDAY':\n                ruleObject.yearDay = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'BYWEEKNO':\n                ruleObject.weekNo = splitData[1].split(',').map(Number);\n                ruleObject.validRules.push(splitData[0]);\n                break;\n            case 'INTERVAL':\n                ruleObject.interval = parseInt(splitData[1], 10);\n                break;\n            case 'COUNT':\n                ruleObject.count = parseInt(splitData[1], 10);\n                break;\n            case 'BYSETPOS':\n                ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);\n                break;\n            case 'FREQ':\n                ruleObject.freq = splitData[1];\n                break;\n            case 'WKST':\n                ruleObject.wkst = splitData[1];\n                break;\n        }\n    });\n    if ((ruleObject.freq === 'MONTHLY') && (ruleObject.monthDay.length === 0)) {\n        var index = ruleObject.validRules.indexOf('BYDAY');\n        ruleObject.validRules.splice(index, 1);\n    }\n    return ruleObject;\n}\n/**\n * Internal method to validate proper date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number} data Accepts the data value\n * @param {Date} startDate Accepts the start date\n * @returns {boolean} Returns the result of date validate\n * @private\n */\nfunction validateProperDate(tempDate, data, startDate) {\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    return (data <= maxDate) && (tempDate >= startDate);\n}\n/**\n * Internal method to process week days\n *\n * @param {string[]} expectedDays Accepts the expection dates\n * @returns {Object} Returns the weekdays object\n * @private\n */\nfunction processWeekDays(expectedDays) {\n    var dayCycle = {};\n    expectedDays.forEach(function (element, index) {\n        if (index === expectedDays.length - 1) {\n            var startIndex = dayIndex.indexOf(element);\n            var temp = startIndex;\n            while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {\n                temp++;\n            }\n            dayCycle[\"\" + element] = temp - startIndex;\n        }\n        else {\n            dayCycle[\"\" + element] = dayIndex.indexOf(expectedDays[(index + 1)]) - dayIndex.indexOf(element);\n        }\n    });\n    return dayCycle;\n}\n/**\n * Internal method to check date\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedDate Accepts the exception dates\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkDate(tempDate, expectedDate) {\n    var temp = expectedDate.slice(0);\n    var data;\n    var maxDate = calendarUtil.getMonthDaysCount(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + maxDate + 1;\n        }\n        if (data === tempDate.getDate()) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to check the year value\n *\n * @param {Date} tempDate Accepts the date value\n * @param {number[]} expectedyearDay Accepts the exception dates in year\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction checkYear(tempDate, expectedyearDay) {\n    var temp = expectedyearDay.slice(0);\n    var data;\n    var yearDay = getYearDay(tempDate);\n    data = temp.shift();\n    while (data) {\n        if (data < 0) {\n            data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;\n        }\n        if (data === yearDay) {\n            return false;\n        }\n        data = temp.shift();\n    }\n    return true;\n}\n/**\n * Internal method to get the year day\n *\n * @param {Date} currentDate Accepts the date value\n * @returns {number} Returns the boolean value\n * @private\n */\nfunction getYearDay(currentDate) {\n    if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {\n        startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);\n    }\n    var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];\n    var diff = currentDate.getTime() - tempDate.getTime();\n    return Math.ceil(diff / MS_PER_DAY);\n}\n/**\n * Internal method to validate monthly rule type\n *\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {MonthlyType} Returns the monthly type object\n * @private\n */\nfunction validateMonthlyRuleType(ruleObject) {\n    if (ruleObject.monthDay.length && !ruleObject.day.length) {\n        return 'date';\n    }\n    else if (!ruleObject.monthDay.length && ruleObject.day.length) {\n        return 'day';\n    }\n    return 'both';\n}\n/**\n * Internal method to re-order the week days based on first day of week\n *\n * @param {string[]} days Accepts the week days value\n * @returns {void}\n * @private\n */\nfunction rotate(days) {\n    var data = days.shift();\n    days.push(data);\n}\n/**\n * Internal method to set first day of week\n *\n * @param {string} day Accepts the first day string\n * @returns {void}\n * @private\n */\nfunction setFirstDayOfWeek(day) {\n    while (dayIndex[0] !== day) {\n        rotate(dayIndex);\n    }\n}\n/**\n * Internal method to validate recurrence rule\n *\n * @param {Date} tempDate Accepts the date value\n * @param {RecRule} ruleObject Accepts the recurrence rule object\n * @returns {boolean} Returns the boolean value\n * @private\n */\nfunction validateRules(tempDate, ruleObject) {\n    var state = true;\n    var expectedDays = ruleObject.day;\n    var expectedMonth = ruleObject.month;\n    var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);\n    var expectedyearDay = ruleObject.yearDay;\n    ruleObject.validRules.forEach(function (rule) {\n        switch (rule) {\n            case 'BYDAY':\n                if (checkDayIndex(tempDate.getDay(), expectedDays)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTH':\n                if (calendarUtil.checkMonth(tempDate, expectedMonth)) {\n                    state = false;\n                }\n                break;\n            case 'BYMONTHDAY':\n                if (checkDate(tempDate, expectedDate)) {\n                    state = false;\n                }\n                break;\n            case 'BYYEARDAY':\n                if (checkYear(tempDate, expectedyearDay)) {\n                    state = false;\n                }\n                break;\n        }\n    });\n    return state;\n}\n/**\n * Internal method to get calendar util\n *\n * @param {CalendarType} calendarMode Accepts the calendar type object\n * @returns {CalendarUtil} Returns the calendar util object\n * @private\n */\nexport function getCalendarUtil(calendarMode) {\n    if (calendarMode === 'Islamic') {\n        return new Islamic();\n    }\n    return new Gregorian();\n}\nvar startDateCollection = {};\nvar tempExcludeDate;\nvar dayIndex = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar maxOccurrence;\nvar tempViewDate;\nvar calendarUtil;\nvar DAYINDEX = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];\nvar MAXOCCURRENCE = 43;\nvar WEEKPOS = ['first', 'second', 'third', 'fourth', 'last'];\nvar TIMES = 'summaryTimes';\nvar ON = 'summaryOn';\nvar EVERY = 'every';\nvar UNTIL = 'summaryUntil';\nvar DAYS = 'summaryDay';\nvar WEEKS = 'summaryWeek';\nvar MONTHS = 'summaryMonth';\nvar YEARS = 'summaryYear';\nvar DAYINDEXOBJECT = {\n    SU: 'sun',\n    MO: 'mon',\n    TU: 'tue',\n    WE: 'wed',\n    TH: 'thu',\n    FR: 'fri',\n    SA: 'sat'\n};\n// To check string has number\nvar HASNUMBER = /\\d/;\n// To find the numbers in string\nvar REMOVENUMBERINSTRING = /[^A-Z]+/;\n// To split number and string\nvar SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;\n/**\n * Method to generate string from date\n *\n * @param {Date} date Accepts the date value\n * @returns {string} Returns the string value\n */\nexport function getRecurrenceStringFromDate(date) {\n    return [date.getUTCFullYear(),\n        roundDateValues(date.getUTCMonth() + 1),\n        roundDateValues(date.getUTCDate()),\n        'T',\n        roundDateValues(date.getUTCHours()),\n        roundDateValues(date.getUTCMinutes()),\n        roundDateValues(date.getUTCSeconds()),\n        'Z'].join('');\n}\n/**\n * Internal method to round the date values\n *\n * @param {string | number} date Accepts the date value in either string or number format\n * @returns {string} Returns the date value in string format\n * @private\n */\nfunction roundDateValues(date) {\n    return ('0' + date).slice(-2);\n}\n","/**\n * Constants\n */\n/** @private */\nexport var cellClick = 'cellClick';\n/** @private */\nexport var cellDoubleClick = 'cellDoubleClick';\n/** @private */\nexport var moreEventsClick = 'moreEventsClick';\n/** @private */\nexport var select = 'select';\n/** @private */\nexport var hover = 'hover';\n/** @private */\nexport var actionBegin = 'actionBegin';\n/** @private */\nexport var actionComplete = 'actionComplete';\n/** @private */\nexport var actionFailure = 'actionFailure';\n/** @private */\nexport var navigating = 'navigating';\n/** @private */\nexport var renderCell = 'renderCell';\n/** @private */\nexport var eventClick = 'eventClick';\n/** @private */\nexport var eventDoubleClick = 'eventDoubleClick';\n/** @private */\nexport var eventRendered = 'eventRendered';\n/** @private */\nexport var dataBinding = 'dataBinding';\n/** @private */\nexport var dataBound = 'dataBound';\n/** @private */\nexport var popupOpen = 'popupOpen';\n/** @private */\nexport var popupClose = 'popupClose';\n/** @private */\nexport var dragStart = 'dragStart';\n/** @private */\nexport var drag = 'drag';\n/** @private */\nexport var dragStop = 'dragStop';\n/** @private */\nexport var resizeStart = 'resizeStart';\n/** @private */\nexport var resizing = 'resizing';\n/** @private */\nexport var resizeStop = 'resizeStop';\n/** @private */\nexport var inlineClick = 'inlineClick';\n/** @private */\nexport var cellSelect = 'cellSelect';\n/** @private */\nexport var virtualScrollStart = 'virtualScrollStart';\n/** @private */\nexport var virtualScrollStop = 'virtualScrollStop';\n/** @private */\nexport var noEvents = 'noEvents';\n/** @private */\nexport var agendaCells = 'agendaCells';\n/** @private */\nexport var resourceHeader = 'resourceHeader';\n/** @private */\nexport var dateHeader = 'dateHeader';\n/** @private */\nexport var beforePaste = 'beforePaste';\n/**\n * Specifies schedule internal events\n */\n/** @private */\nexport var initialLoad = 'initial-load';\n/** @private */\nexport var initialEnd = 'initial-end';\n/** @private */\nexport var print = 'print';\n/** @private */\nexport var dataReady = 'data-ready';\n/** @private */\nexport var eventsLoaded = 'events-loaded';\n/** @private */\nexport var contentReady = 'content-ready';\n/** @private */\nexport var scroll = 'scroll';\n/** @private */\nexport var virtualScroll = 'virtual-scroll';\n/** @private */\nexport var scrollUiUpdate = 'scroll-ui-update';\n/** @private */\nexport var uiUpdate = 'ui-update';\n/** @private */\nexport var documentClick = 'document-click';\n/** @private */\nexport var documentPaste = 'document-paste';\n/** @private */\nexport var cellMouseDown = 'cell-mouse-down';\n","/**\n * CSS Constants\n */\n/** @private */\nexport var ROOT = 'e-schedule';\n/** @private */\nexport var RTL = 'e-rtl';\n/** @private */\nexport var DEVICE_CLASS = 'e-device';\n/** @private */\nexport var ADAPTIVE_CLASS = 'e-adaptive';\n/** @private */\nexport var MULTI_DRAG = 'e-multi-drag';\n/** @private */\nexport var ICON = 'e-icons';\n/** @private */\nexport var ENABLE_CLASS = 'e-enable';\n/** @private */\nexport var DISABLE_CLASS = 'e-disable';\n/** @private */\nexport var TABLE_CONTAINER_CLASS = 'e-table-container';\n/** @private */\nexport var SCHEDULE_TABLE_CLASS = 'e-schedule-table';\n/** @private */\nexport var ALLDAY_CELLS_CLASS = 'e-all-day-cells';\n/** @private */\nexport var HEADER_POPUP_CLASS = 'e-header-popup';\n/** @private */\nexport var HEADER_CALENDAR_CLASS = 'e-header-calendar';\n/** @private */\nexport var ALLDAY_ROW_CLASS = 'e-all-day-row';\n/** @private */\nexport var CONTENT_TABLE_CLASS = 'e-content-table';\n/** @private */\nexport var WORK_CELLS_CLASS = 'e-work-cells';\n/** @private */\nexport var WORK_HOURS_CLASS = 'e-work-hours';\n/** @private */\nexport var POPUP_OPEN = 'e-popup-open';\n/** @private */\nexport var POPUP_CLOSE = 'e-popup-close';\n/** @private */\nexport var DATE_HEADER_WRAP_CLASS = 'e-date-header-wrap';\n/** @private */\nexport var DATE_HEADER_CONTAINER_CLASS = 'e-date-header-container';\n/** @private */\nexport var HEADER_CELLS_CLASS = 'e-header-cells';\n/** @private */\nexport var HEADER_WEEK_CELLS_CLASS = 'e-header-week-cell';\n/** @private */\nexport var HEADER_MONTH_CELLS_CLASS = 'e-header-month-cell';\n/** @private */\nexport var HEADER_YEAR_CELLS_CLASS = 'e-header-year-cell';\n/** @private */\nexport var WORKDAY_CLASS = 'e-work-days';\n/** @private */\nexport var OTHERMONTH_CLASS = 'e-other-month';\n/** @private */\nexport var CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nexport var CURRENTDATE_CLASS = 'e-current-date';\n/** @private */\nexport var CURRENT_PANEL_CLASS = 'e-current-panel';\n/** @private */\nexport var PREVIOUS_PANEL_CLASS = 'e-previous-panel';\n/** @private */\nexport var NEXT_PANEL_CLASS = 'e-next-panel';\n/** @private */\nexport var PREVIOUS_DATE_CLASS = 'e-prev';\n/** @private */\nexport var NEXT_DATE_CLASS = 'e-next';\n/** @private */\nexport var TRANSLATE_CLASS = 'e-translate';\n/** @private */\nexport var LEFT_INDENT_CLASS = 'e-left-indent';\n/** @private */\nexport var LEFT_INDENT_WRAP_CLASS = 'e-left-indent-wrap';\n/** @private */\nexport var EVENT_TABLE_CLASS = 'e-event-table';\n/** @private */\nexport var RESOURCE_LEFT_TD_CLASS = 'e-resource-left-td';\n/** @private */\nexport var RESOURCE_GROUP_CELLS_CLASS = 'e-resource-group-cells';\n/** @private */\nexport var RESOURCE_TEXT_CLASS = 'e-resource-text';\n/** @private */\nexport var RESOURCE_COLUMN_WRAP_CLASS = 'e-resource-column-wrap';\n/** @private */\nexport var RESOURCE_COLUMN_TABLE_CLASS = 'e-resource-column-table';\n/** @private */\nexport var RESOURCE_CHILD_CLASS = 'e-child-node';\n/** @private */\nexport var RESOURCE_PARENT_CLASS = 'e-parent-node';\n/** @private */\nexport var RESOURCE_EXPAND_CLASS = 'e-resource-expand';\n/** @private */\nexport var RESOURCE_COLLAPSE_CLASS = 'e-resource-collapse';\n/** @private */\nexport var RESOURCE_TREE_ICON_CLASS = 'e-resource-tree-icon';\n/** @private */\nexport var RESOURCE_CELLS_CLASS = 'e-resource-cells';\n/** @private */\nexport var TIME_CELLS_WRAP_CLASS = 'e-time-cells-wrap';\n/** @private */\nexport var TIME_CELLS_CLASS = 'e-time-cells';\n/** @private */\nexport var TIME_SLOT_CLASS = 'e-time-slots';\n/** @private */\nexport var ALTERNATE_CELLS_CLASS = 'e-alternate-cells';\n/** @private */\nexport var CURRENT_TIME_CLASS = 'e-current-time';\n/** @private */\nexport var CURRENT_TIMELINE_CLASS = 'e-current-timeline';\n/** @private */\nexport var PREVIOUS_TIMELINE_CLASS = 'e-previous-timeline';\n/** @private */\nexport var HIDE_CHILDS_CLASS = 'e-hide-childs';\n/** @private */\nexport var SCROLL_CONTAINER_CLASS = 'e-scroll-container';\n/** @private */\nexport var WRAPPER_CLASS = 'e-wrapper';\n/** @private */\nexport var TIMELINE_WRAPPER_CLASS = 'e-timeline-wrapper';\n/** @private */\nexport var APPOINTMENT_WRAPPER_CLASS = 'e-appointment-wrapper';\n/** @private */\nexport var APPOINTMENT_WRAPPER_HIDDEN_CLASS = 'e-appointment-wrapper-hidden';\n/** @private */\nexport var DAY_WRAPPER_CLASS = 'e-day-wrapper';\n/** @private */\nexport var TOOLBAR_CONTAINER = 'e-schedule-toolbar-container';\n/** @private */\nexport var RESOURCE_TOOLBAR_CONTAINER = 'e-schedule-resource-toolbar-container';\n/** @private */\nexport var HEADER_TOOLBAR = 'e-schedule-toolbar';\n/** @private */\nexport var RESOURCE_HEADER_TOOLBAR = 'e-schedule-resource-toolbar';\n/** @private */\nexport var SELECTED_CELL_CLASS = 'e-selected-cell';\n/** @private */\nexport var WEEK_NUMBER_WRAPPER_CLASS = 'e-week-number-wrapper';\n/** @private */\nexport var WEEK_NUMBER_CLASS = 'e-week-number';\n/** @private */\nexport var APPOINTMENT_WRAP_CLASS = 'e-appointment-wrap';\n/** @private */\nexport var WRAPPER_CONTAINER_CLASS = 'e-wrapper-container';\n/** @private */\nexport var APPOINTMENT_CONTAINER_CLASS = 'e-appointment-container';\n/** @private */\nexport var APPOINTMENT_CLASS = 'e-appointment';\n/** @private */\nexport var BLOCK_APPOINTMENT_CLASS = 'e-block-appointment';\n/** @private */\nexport var BLOCK_INDICATOR_CLASS = 'e-block-indicator';\n/** @private */\nexport var APPOINTMENT_BORDER = 'e-appointment-border';\n/** @private */\nexport var APPOINTMENT_DETAILS = 'e-appointment-details';\n/** @private */\nexport var SUBJECT_WRAP = 'e-subject-wrap';\n/** @private */\nexport var RESOURCE_NAME = 'e-resource-name';\n/** @private */\nexport var APPOINTMENT_TIME = 'e-time';\n/** @private */\nexport var TABLE_WRAP_CLASS = 'e-table-wrap';\n/** @private */\nexport var OUTER_TABLE_CLASS = 'e-outer-table';\n/** @private */\nexport var CONTENT_WRAP_CLASS = 'e-content-wrap';\n/** @private */\nexport var VIRTUAL_TRACK_CLASS = 'e-virtual-track';\n/** @private */\nexport var AGENDA_CELLS_CLASS = 'e-agenda-cells';\n/** @private */\nexport var AGENDA_CURRENT_DAY_CLASS = 'e-current-day';\n/** @private */\nexport var AGENDA_SELECTED_CELL = 'e-active-appointment-agenda';\n/** @private */\nexport var MONTH_HEADER_CLASS = 'e-month-header';\n/** @private */\nexport var AGENDA_HEADER_CLASS = 'e-day-date-header';\n/** @private */\nexport var AGENDA_RESOURCE_CLASS = 'e-resource-column';\n/** @private */\nexport var AGENDA_DATE_CLASS = 'e-date-column';\n/** @private */\nexport var NAVIGATE_CLASS = 'e-navigate';\n/** @private */\nexport var DATE_HEADER_CLASS = 'e-date-header';\n/** @private */\nexport var AGENDA_DAY_BORDER_CLASS = 'e-day-border';\n/** @private */\nexport var DATE_BORDER_CLASS = 'e-date-border';\n/** @private */\nexport var AGENDA_DAY_PADDING_CLASS = 'e-day-padding';\n/** @private */\nexport var DATE_TIME_CLASS = 'e-date-time';\n/** @private */\nexport var DATE_TIME_WRAPPER_CLASS = 'e-date-time-wrapper';\n/** @private */\nexport var AGENDA_EMPTY_EVENT_CLASS = 'e-empty-event';\n/** @private */\nexport var AGENDA_NO_EVENT_CLASS = 'e-no-event';\n/** @private */\nexport var APPOINTMENT_INDICATOR_CLASS = 'e-appointment-indicator';\n/** @private */\nexport var EVENT_INDICATOR_CLASS = 'e-indicator';\n/** @private */\nexport var EVENT_ICON_UP_CLASS = 'e-up-icon';\n/** @private */\nexport var EVENT_ICON_DOWN_CLASS = 'e-down-icon';\n/** @private */\nexport var EVENT_ICON_LEFT_CLASS = 'e-left-icon';\n/** @private */\nexport var EVENT_ICON_RIGHT_CLASS = 'e-right-icon';\n/** @private */\nexport var EVENT_ACTION_CLASS = 'e-event-action';\n/** @private */\nexport var NEW_EVENT_CLASS = 'e-new-event';\n/** @private */\nexport var CLONE_ELEMENT_CLASS = 'e-schedule-event-clone';\n/** @private */\nexport var MONTH_CLONE_ELEMENT_CLASS = 'e-month-event';\n/** @private */\nexport var CLONE_TIME_INDICATOR_CLASS = 'e-clone-time-indicator';\n/** @private */\nexport var DRAG_CLONE_CLASS = 'e-drag-clone';\n/** @private */\nexport var EVENT_RESIZE_CLASS = 'e-event-resize';\n/** @private */\nexport var RESIZE_CLONE_CLASS = 'e-resize-clone';\n/** @private */\nexport var LEFT_RESIZE_HANDLER = 'e-left-handler';\n/** @private */\nexport var RIGHT_RESIZE_HANDLER = 'e-right-handler';\n/** @private */\nexport var TOP_RESIZE_HANDLER = 'e-top-handler';\n/** @private */\nexport var BOTTOM_RESIZE_HANDLER = 'e-bottom-handler';\n/** @private */\nexport var EVENT_RECURRENCE_ICON_CLASS = 'e-recurrence-icon';\n/** @private */\nexport var EVENT_RECURRENCE_EDIT_ICON_CLASS = 'e-recurrence-edit-icon';\n/** @private */\nexport var HEADER_ROW_CLASS = 'e-header-row';\n/** @private */\nexport var ALLDAY_APPOINTMENT_WRAPPER_CLASS = 'e-all-day-appointment-wrapper';\n/** @private */\nexport var ALLDAY_APPOINTMENT_CLASS = 'e-all-day-appointment';\n/** @private */\nexport var EVENT_COUNT_CLASS = 'e-appointment-hide';\n/** @private */\nexport var ROW_COUNT_WRAPPER_CLASS = 'e-row-count-wrapper';\n/** @private */\nexport var ALLDAY_APPOINTMENT_SECTION_CLASS = 'e-all-day-appointment-section';\n/** @private */\nexport var APPOINTMENT_ROW_EXPAND_CLASS = 'e-appointment-expand';\n/** @private */\nexport var APPOINTMENT_ROW_COLLAPSE_CLASS = 'e-appointment-collapse';\n/** @private */\nexport var MORE_INDICATOR_CLASS = 'e-more-indicator';\n/** @private */\nexport var CELL_POPUP_CLASS = 'e-cell-popup';\n/** @private */\nexport var EVENT_POPUP_CLASS = 'e-event-popup';\n/** @private */\nexport var MULTIPLE_EVENT_POPUP_CLASS = 'e-multiple-event-popup';\n/** @private */\nexport var POPUP_HEADER_CLASS = 'e-popup-header';\n/** @private */\nexport var POPUP_HEADER_ICON_WRAPPER = 'e-header-icon-wrapper';\n/** @private */\nexport var POPUP_CONTENT_CLASS = 'e-popup-content';\n/** @private */\nexport var POPUP_FOOTER_CLASS = 'e-popup-footer';\n/** @private */\nexport var DATE_TIME_DETAILS_CLASS = 'e-date-time-details';\n/** @private */\nexport var RECURRENCE_SUMMARY_CLASS = 'e-recurrence-summary';\n/** @private */\nexport var QUICK_POPUP_EVENT_DETAILS_CLASS = 'e-event-details';\n/** @private */\nexport var EVENT_CREATE_CLASS = 'e-event-create';\n/** @private */\nexport var EDIT_EVENT_CLASS = 'e-event-edit';\n/** @private */\nexport var DELETE_EVENT_CLASS = 'e-event-delete';\n/** @private */\nexport var TEXT_ELLIPSIS = 'e-text-ellipsis';\n/** @private */\nexport var MORE_POPUP_WRAPPER_CLASS = 'e-more-popup-wrapper';\n/** @private */\nexport var MORE_EVENT_POPUP_CLASS = 'e-more-event-popup';\n/** @private */\nexport var MORE_EVENT_HEADER_CLASS = 'e-more-event-header';\n/** @private */\nexport var MORE_EVENT_DATE_HEADER_CLASS = 'e-more-event-date-header';\n/** @private */\nexport var MORE_EVENT_HEADER_DAY_CLASS = 'e-header-day';\n/** @private */\nexport var MORE_EVENT_HEADER_DATE_CLASS = 'e-header-date';\n/** @private */\nexport var MORE_EVENT_CLOSE_CLASS = 'e-more-event-close';\n/** @private */\nexport var MORE_EVENT_CONTENT_CLASS = 'e-more-event-content';\n/** @private */\nexport var MORE_EVENT_WRAPPER_CLASS = 'e-more-appointment-wrapper';\n/** @private */\nexport var QUICK_DIALOG_CLASS = 'e-quick-dialog';\n/** @private */\nexport var QUICK_DIALOG_OCCURRENCE_CLASS = 'e-quick-dialog-occurrence-event';\n/** @private */\nexport var QUICK_DIALOG_SERIES_CLASS = 'e-quick-dialog-series-event';\n/** @private */\nexport var QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = 'e-quick-dialog-following-events';\n/** @private */\nexport var FOLLOWING_EVENTS_DIALOG = 'e-following-events-dialog';\n/** @private */\nexport var QUICK_DIALOG_DELETE_CLASS = 'e-quick-dialog-delete';\n/** @private */\nexport var QUICK_DIALOG_CANCEL_CLASS = 'e-quick-dialog-cancel';\n/** @private */\nexport var QUICK_DIALOG_ALERT_OK = 'e-quick-alertok';\n/** @private */\nexport var QUICK_DIALOG_ALERT_CANCEL = 'e-quick-alertcancel';\n/** @private */\nexport var QUICK_DIALOG_ALERT_FOLLOWING = 'e-quick-alertfollowing';\n/** @private */\nexport var QUICK_DIALOG_ALERT_BTN_CLASS = 'e-quick-dialog-alert-btn';\n/** @private */\nexport var EVENT_WINDOW_DIALOG_CLASS = 'e-schedule-dialog';\n/** @private */\nexport var FORM_CONTAINER_CLASS = 'e-form-container';\n/** @private */\nexport var FORM_CLASS = 'e-schedule-form';\n/** @private */\nexport var EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = 'e-all-day-time-zone-row';\n/** @private */\nexport var EVENT_WINDOW_ALL_DAY_CLASS = 'e-all-day';\n/** @private */\nexport var TIME_ZONE_CLASS = 'e-time-zone';\n/** @private */\nexport var TIME_ZONE_ICON_CLASS = 'e-time-zone-icon';\n/** @private */\nexport var TIME_ZONE_DETAILS_CLASS = 'e-time-zone-details';\n/** @private */\nexport var EVENT_WINDOW_REPEAT_DIV_CLASS = 'e-repeat-parent-row';\n/** @private */\nexport var EVENT_WINDOW_REPEAT_CLASS = 'e-repeat';\n/** @private */\nexport var EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = 'e-title-location-row';\n/** @private */\nexport var SUBJECT_CLASS = 'e-subject';\n/** @private */\nexport var LOCATION_CLASS = 'e-location';\n/** @private */\nexport var LOCATION_ICON_CLASS = 'e-location-icon';\n/** @private */\nexport var LOCATION_DETAILS_CLASS = 'e-location-details';\n/** @private */\nexport var EVENT_WINDOW_START_END_DIV_CLASS = 'e-start-end-row';\n/** @private */\nexport var EVENT_WINDOW_START_CLASS = 'e-start';\n/** @private */\nexport var EVENT_WINDOW_END_CLASS = 'e-end';\n/** @private */\nexport var EVENT_WINDOW_RESOURCES_DIV_CLASS = 'e-resources-row';\n/** @private */\nexport var DESCRIPTION_CLASS = 'e-description';\n/** @private */\nexport var DESCRIPTION_ICON_CLASS = 'e-description-icon';\n/** @private */\nexport var DESCRIPTION_DETAILS_CLASS = 'e-description-details';\n/** @private */\nexport var EVENT_WINDOW_TIME_ZONE_DIV_CLASS = 'e-time-zone-row';\n/** @private */\nexport var EVENT_WINDOW_START_TZ_CLASS = 'e-start-time-zone';\n/** @private */\nexport var EVENT_WINDOW_END_TZ_CLASS = 'e-end-time-zone';\n/** @private */\nexport var EVENT_WINDOW_BACK_ICON_CLASS = 'e-back-icon';\n/** @private */\nexport var EVENT_WINDOW_SAVE_ICON_CLASS = 'e-save-icon';\n/** @private */\nexport var EVENT_WINDOW_CANCEL_BUTTON_CLASS = 'e-event-cancel';\n/** @private */\nexport var EVENT_WINDOW_SAVE_BUTTON_CLASS = 'e-event-save';\n/** @private */\nexport var EVENT_WINDOW_DIALOG_PARENT_CLASS = 'e-dialog-parent';\n/** @private */\nexport var EVENT_WINDOW_TITLE_TEXT_CLASS = 'e-title-text';\n/** @private */\nexport var EVENT_WINDOW_ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nexport var EDIT_CLASS = 'e-edit';\n/** @private */\nexport var EDIT_ICON_CLASS = 'e-edit-icon';\n/** @private */\nexport var DELETE_CLASS = 'e-delete';\n/** @private */\nexport var DELETE_ICON_CLASS = 'e-delete-icon';\n/** @private */\nexport var CLOSE_CLASS = 'e-close';\n/** @private */\nexport var CLOSE_ICON_CLASS = 'e-close-icon';\n/** @private */\nexport var ERROR_VALIDATION_CLASS = 'e-schedule-error';\n/** @private */\nexport var EVENT_TOOLTIP_ROOT_CLASS = 'e-schedule-event-tooltip';\n/** @private */\nexport var ALLDAY_ROW_ANIMATE_CLASS = 'e-animate';\n/** @private */\nexport var TIMESCALE_DISABLE = 'e-timescale-disable';\n/** @private */\nexport var DISABLE_DATE = 'e-disable-date';\n/** @private */\nexport var HIDDEN_CLASS = 'e-hidden';\n/** @private */\nexport var DISABLE_DATES = 'e-disable-dates';\n/** @private */\nexport var POPUP_WRAPPER_CLASS = 'e-quick-popup-wrapper';\n/** @private */\nexport var POPUP_TABLE_CLASS = 'e-popup-table';\n/** @private */\nexport var RESOURCE_MENU = 'e-resource-menu';\n/** @private */\nexport var RESOURCE_MENU_ICON = 'e-icon-menu';\n/** @private */\nexport var RESOURCE_LEVEL_TITLE = 'e-resource-level-title';\n/** @private */\nexport var RESOURCE_TREE = 'e-resource-tree';\n/** @private */\nexport var RESOURCE_TREE_POPUP_OVERLAY = 'e-resource-tree-popup-overlay';\n/** @private */\nexport var RESOURCE_TREE_POPUP = 'e-resource-tree-popup';\n/** @private */\nexport var RESOURCE_CLASS = 'e-resource';\n/** @private */\nexport var RESOURCE_ICON_CLASS = 'e-resource-icon';\n/** @private */\nexport var RESOURCE_DETAILS_CLASS = 'e-resource-details';\n/** @private */\nexport var DATE_TIME_ICON_CLASS = 'e-date-time-icon';\n/** @private */\nexport var VIRTUAL_SCROLL_CLASS = 'e-virtual-scroll';\n/** @private */\nexport var ICON_DISABLE_CLASS = 'e-icon-disable';\n/** @private */\nexport var AUTO_HEIGHT = 'e-auto-height';\n/** @private */\nexport var IGNORE_WHITESPACE = 'e-ignore-whitespace';\n/** @private */\nexport var EVENT_TEMPLATE = 'e-template';\n/** @private */\nexport var READ_ONLY = 'e-read-only';\n/** @private */\nexport var MONTH_HEADER_WRAPPER = 'e-month-header-wrapper';\n/** @private */\nexport var INLINE_SUBJECT_CLASS = 'e-inline-subject';\n/** @private */\nexport var INLINE_APPOINTMENT_CLASS = 'e-inline-appointment';\n/** @hidden */\nexport var SCROLL_HIDDEN = 'e-scroll-hidden';\n/** @private */\nexport var ALLDAY_APPOINTMENT_SCROLL = 'e-all-day-scroll';\n/** @private */\nexport var ALLDAY_APPOINTMENT_AUTO = 'e-all-day-auto';\n/** @private */\nexport var CLIPBOARD_CLASS = 'e-clipboard';\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend, append } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\nvar HeaderRenderer = /** @class */ (function () {\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.isAdaptive) {\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\n                this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n                addClass([contentWrap], cls.SCROLL_HIDDEN);\n            }\n            else {\n                removeClass([contentWrap], cls.SCROLL_HIDDEN);\n                var popupEle = this.element.querySelector('.e-toolbar-pop');\n                if (!isNullOrUndefined(popupEle)) {\n                    var popupObj = popupEle.ej2_instances[0];\n                    if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\n                        popupEle.classList.contains(cls.POPUP_OPEN))) {\n                        popupObj.hide();\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var _this = this;\n        var items = (this.parent.toolbarItems && this.parent.toolbarItems.length > 0) ?\n            this.getToolbarItems() : this.getItems();\n        this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n            _this.toolbarObj = new Toolbar({\n                items: args.items,\n                overflowMode: 'Popup',\n                clicked: _this.toolbarClickHandler.bind(_this),\n                created: _this.toolbarCreateHandler.bind(_this),\n                enableRtl: _this.parent.enableRtl,\n                enableHtmlSanitizer: _this.parent.enableHtmlSanitizer,\n                locale: _this.parent.locale\n            });\n            _this.toolbarObj.isStringTemplate = true;\n            _this.toolbarObj.root = _this.parent.root ? _this.parent.root : _this.parent;\n            _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n            _this.toolbarObj.element.setAttribute('aria-label', 'Scheduler');\n            var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n            if (prevNavEle) {\n                prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n            }\n            var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n            if (nextNavEle) {\n                nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n            }\n            _this.updateAddIcon();\n            _this.updateActiveView();\n            _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n        });\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        var _this = this;\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\n                _this.toolbarObj.items = args.items;\n                _this.toolbarObj.dataBind();\n                _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\n            });\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (date) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (!selEle) {\n            return;\n        }\n        selEle.firstElementChild.setAttribute('aria-haspopup', 'true');\n        var textEle = selEle.querySelector('.e-tbar-btn-text');\n        if (this.parent.activeViewOptions.dateRangeTemplate) {\n            textEle.textContent = '';\n            var args = {\n                startDate: this.parent.activeView.getStartDate(),\n                endDate: this.parent.activeView.getEndDate(), currentView: this.parent.currentView\n            };\n            var viewName = this.parent.activeViewOptions.dateRangeTemplateName;\n            var templateId = this.parent.element.id + '_' + viewName + 'dateRangeTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateRangeTemplate()(args, this.parent, 'dateRangeTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(dateTemplate, textEle);\n        }\n        else {\n            var text = this.parent.activeView.getDateRangeText(date);\n            selEle.firstElementChild.setAttribute('aria-label', text);\n            textEle.textContent = text;\n        }\n        this.refresh();\n    };\n    HeaderRenderer.prototype.refresh = function () {\n        if (this.toolbarObj) {\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.updateAddIcon = function () {\n        var addEle = this.toolbarObj.element.querySelector('.e-add');\n        if (addEle) {\n            if (!this.parent.eventSettings.allowAdding) {\n                addClass([addEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([addEle], cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n            format: 'MMMM y', calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(dateString, 'single');\n    };\n    HeaderRenderer.prototype.getItemModel = function (propItem) {\n        var item = {};\n        if (propItem.id) {\n            item.id = propItem.id;\n        }\n        if (propItem.text) {\n            item.text = propItem.text;\n        }\n        if (propItem.tooltipText) {\n            item.tooltipText = propItem.tooltipText;\n        }\n        if (propItem.prefixIcon) {\n            item.prefixIcon = propItem.prefixIcon;\n        }\n        if (propItem.cssClass) {\n            item.cssClass = propItem.cssClass;\n        }\n        if (propItem.showTextOn !== 'Both') {\n            item.showTextOn = propItem.showTextOn;\n        }\n        if (propItem.template) {\n            item.template = propItem.template;\n        }\n        if (propItem.disabled) {\n            item.disabled = propItem.disabled;\n        }\n        if (propItem.width !== 'auto') {\n            item.width = propItem.width;\n        }\n        if (propItem.suffixIcon) {\n            item.suffixIcon = propItem.suffixIcon;\n        }\n        if (propItem.align !== 'Left') {\n            item.align = propItem.align;\n        }\n        if (propItem.overflow !== 'None') {\n            item.overflow = propItem.overflow;\n        }\n        if (propItem.htmlAttributes) {\n            item.htmlAttributes = propItem.htmlAttributes;\n        }\n        if (propItem.type !== 'Button') {\n            item.type = propItem.type;\n        }\n        if (propItem.visible !== true) {\n            item.visible = propItem.visible;\n        }\n        if (propItem.showAlwaysInPopup) {\n            item.showAlwaysInPopup = propItem.showAlwaysInPopup;\n        }\n        if (propItem.tabIndex !== -1) {\n            item.tabIndex = propItem.tabIndex;\n        }\n        return item;\n    };\n    HeaderRenderer.prototype.getToolbarItems = function () {\n        var items = [];\n        var propItem;\n        for (var _i = 0, _a = this.parent.toolbarItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            propItem = this.getItemModel(item);\n            var tbItem = void 0;\n            if (item.name) {\n                switch (item.name) {\n                    case 'Today':\n                        tbItem = {\n                            showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\n                            text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n                        };\n                        tbItem.align = propItem.align ? propItem.align : item.align;\n                        items.push(__assign({}, tbItem, propItem));\n                        break;\n                    case 'Previous':\n                        tbItem = {\n                            prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n                            cssClass: 'e-prev', htmlAttributes: { 'role': 'navigation' }\n                        };\n                        tbItem.align = propItem.align ? propItem.align : item.align;\n                        items.push(__assign({}, tbItem, propItem));\n                        break;\n                    case 'Next':\n                        tbItem = {\n                            prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n                            cssClass: 'e-next', htmlAttributes: { 'role': 'navigation' }\n                        };\n                        tbItem.align = propItem.align ? propItem.align : item.align;\n                        items.push(__assign({}, tbItem, propItem));\n                        break;\n                    case 'DateRangeText':\n                        tbItem = {\n                            text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n                            overflow: 'Show',\n                            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'role': 'navigation' }\n                        };\n                        tbItem.align = propItem.align ? propItem.align : item.align;\n                        items.push(__assign({}, tbItem, propItem));\n                        break;\n                    case 'NewEvent':\n                        tbItem = {\n                            showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-add',\n                            text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\n                        };\n                        tbItem.align = propItem.align ? propItem.align : item.align;\n                        items.push(__assign({}, tbItem, propItem));\n                        break;\n                    case 'Views':\n                        if (!isNullOrUndefined(this.parent.views) && this.parent.views.length > 1) {\n                            for (var _b = 0, _c = this.parent.views; _b < _c.length; _b++) {\n                                var view = _c[_b];\n                                tbItem = this.getItemObject(view);\n                                tbItem.align = propItem.align ? propItem.align : item.align;\n                                items.push(__assign({}, tbItem, propItem));\n                            }\n                        }\n                        break;\n                    case 'Custom':\n                        items.push(item);\n                        break;\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev'\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next'\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive' }\n        });\n        if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-add',\n                text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\n            });\n            if (!isNullOrUndefined(this.parent.views) && this.parent.views.length > 1) {\n                items.push({ align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator' });\n            }\n        }\n        if (!isNullOrUndefined(this.parent.views) && this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                items.push(this.getItemObject(item));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (item) {\n        var viewName;\n        var displayName;\n        if (typeof (item) === 'string') {\n            viewName = item.toLowerCase();\n            displayName = null;\n        }\n        else {\n            viewName = item.option.toLowerCase();\n            displayName = item.displayName;\n        }\n        var view;\n        var orientationClass;\n        var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            case 'year':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-year',\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n                };\n                break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-agenda',\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month-agenda',\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\n                view = {\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            collision: { X: 'fit' },\n            viewPortElement: this.element,\n            enableRtl: this.parent.enableRtl\n        });\n        var calendarView = this.getCalendarView();\n        var isDisplayDate = this.parent.currentView === 'Month' &&\n            !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\n        this.headerCalendar = new Calendar({\n            value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.setCalendarTimezone();\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            var calendarDate = util.resetTime(new Date(args.value));\n            this.parent.changeDate(calendarDate);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.setCalendarTimezone = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        }\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarCreateHandler = function () {\n        if (this.parent && this.parent.portals && this.toolbarObj && this.toolbarObj.portals) {\n            this.parent.portals = this.parent.portals.concat(this.toolbarObj.portals);\n            this.parent['renderReactTemplates']();\n        }\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        var data;\n        var isSameTime;\n        var currentTime;\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-year':\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                currentTime = util.resetTime(this.parent.getCurrentTime());\n                if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda' || !this.parent.isSelectedDate(currentTime) ||\n                    this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() &&\n                        util.resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' &&\n                    this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate()\n                    && util.resetTime(util.firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\n                    this.parent.changeDate(currentTime, args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Next'), args.originalEvent);\n                break;\n            case 'e-add':\n                isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    var currentTime_1 = this.parent.getCurrentTime();\n                    startTime.setHours(currentTime_1.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        if (isNullOrUndefined(this.toolbarObj)) {\n            return;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.hasSelectedDate = function () {\n        var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n        return selectedTime >= this.parent.activeView.getStartDate().getTime() &&\n            selectedTime <= this.parent.activeView.getEndDate().getTime();\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            if (classType === 'add') {\n                addClass([prevNavEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([prevNavEle], cls.HIDDEN_CLASS);\n            }\n        }\n        if (nextNavEle) {\n            if (classType === 'add') {\n                addClass([nextNavEle], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([nextNavEle], cls.HIDDEN_CLASS);\n            }\n        }\n        if (dateRangeEle) {\n            if (classType === 'add') {\n                addClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n            }\n            else {\n                removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n            }\n        }\n    };\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\n        var dates = (this.parent.currentView === 'Agenda' ?\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n        var firstDate = new Date(dates[0].getTime());\n        var lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        else if (this.parent.currentView === 'Month') {\n            var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) ||\n                this.parent.activeViewOptions.numberOfWeeks > 0;\n            firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : util.firstDateOfMonth(this.parent.selectedDate);\n            lastDate = isCustomMonth ? this.parent.activeView.getEndDate() :\n                util.lastDateOfMonth(util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > util.resetTime(this.parent.minDate));\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < util.resetTime(this.parent.maxDate));\n        }\n        this.setCalendarMinMaxDate();\n    };\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n        this.element = null;\n        this.parent = null;\n        this.l10n = null;\n    };\n    return HeaderRenderer;\n}());\nexport { HeaderRenderer };\n","import { formatUnit } from '@syncfusion/ej2-base';\nimport { contentReady, uiUpdate, scrollUiUpdate } from '../base/constant';\n/**\n * `Scroll` module\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the scrolling.\n     *\n     * @param {Schedule} parent Accepts the Schedule instance\n     */\n    function Scroll(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     *\n     * @returns {string} Returns the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * Internal method to set the element width\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n    };\n    /**\n     * Internal method to set the element height\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setHeight = function () {\n        this.parent.element.style.height = formatUnit(this.parent.height);\n    };\n    /**\n     * Internal method to bind events\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.addEventListener = function () {\n        this.parent.on(contentReady, this.setDimensions, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    /**\n     * Internal method to unbind events\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.removeEventListener = function () {\n        this.parent.off(contentReady, this.setDimensions);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    /**\n     * Internal method to set the dimensions\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.setDimensions = function () {\n        this.setWidth();\n        this.setHeight();\n        var data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };\n        this.parent.notify(scrollUiUpdate, data);\n    };\n    /**\n     * Internal method to set the dimensions dynamically\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.onPropertyChanged = function () {\n        this.setDimensions();\n    };\n    /**\n     * Destroy the scroll module\n     *\n     * @returns {void}\n     * @private\n     */\n    Scroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { addClass, removeClass, Touch, remove, EventHandler, Browser } from '@syncfusion/ej2-base';\nimport { closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * `touch` module is used to handle touch interactions.\n */\nvar ScheduleTouch = /** @class */ (function () {\n    function ScheduleTouch(parent) {\n        this.parent = parent;\n        this.element = this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS);\n        this.touchObj = new Touch(this.element, {\n            scroll: this.scrollHandler.bind(this),\n            swipe: this.swipeHandler.bind(this),\n            tapHold: this.tapHoldHandler.bind(this),\n            swipeSettings: { swipeThresholdDistance: 1 }\n        });\n        EventHandler.add(this.element, 'transitionend', this.onTransitionEnd, this);\n        this.touchLeftDirection = this.parent.enableRtl ? 'Right' : 'Left';\n        this.touchRightDirection = this.parent.enableRtl ? 'Left' : 'Right';\n    }\n    ScheduleTouch.prototype.scrollHandler = function (e) {\n        if (!isNullOrUndefined(this.parent.eventTooltip)) {\n            this.parent.eventTooltip.close();\n        }\n        var blockSwipe = !this.parent.isAdaptive && e.originalEvent && e.originalEvent.target &&\n            !isNullOrUndefined(closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS));\n        this.parent.uiStateValues.isTouchScroll = blockSwipe && e.originalEvent.type === 'touchmove' && !this.parent.uiStateValues.action;\n        if (blockSwipe || this.parent.currentView === 'Agenda' || this.parent.uiStateValues.action || !this.parent.allowSwiping ||\n            this.parent.uiStateValues.isTapHold) {\n            return;\n        }\n        this.parent.uiStateValues.isSwipeScroll = true;\n        if (!this.timeStampStart) {\n            this.timeStampStart = Date.now();\n        }\n        if (this.element.classList.contains(cls.TRANSLATE_CLASS)) {\n            this.onTransitionEnd();\n        }\n        if (e.scrollDirection === 'Left' || e.scrollDirection === 'Right') {\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            var scrollDiv = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {\n                return;\n            }\n            else {\n                this.isScrollTriggered = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n            }\n        }\n        if (e.scrollDirection === this.touchLeftDirection) {\n            if (!this.nextPanel) {\n                this.renderPanel(cls.NEXT_PANEL_CLASS, 'Next');\n                this.nextPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime()),\n                    renderDates: this.parent.activeView.renderDates,\n                    colLevels: this.parent.activeView.colLevels\n                };\n                this.setDimensions(this.nextPanel.element);\n            }\n            var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n        else if (e.scrollDirection === this.touchRightDirection) {\n            var prevWidth = 0;\n            if (!this.previousPanel) {\n                this.renderPanel(cls.PREVIOUS_PANEL_CLASS, 'Previous');\n                this.previousPanel = {\n                    element: this.parent.activeView.getPanel(),\n                    selectedDate: new Date(this.parent.selectedDate.getTime()),\n                    renderDates: this.parent.activeView.renderDates,\n                    colLevels: this.parent.activeView.colLevels\n                };\n                this.setDimensions(this.previousPanel.element);\n                prevWidth = this.previousPanel.element.offsetWidth;\n            }\n            var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;\n            this.element.style.transform = 'translatex(' + (this.getTranslateX(this.element) + x) + 'px)';\n        }\n    };\n    ScheduleTouch.prototype.swipeHandler = function (e) {\n        if (!this.isScrollTriggered || this.parent.uiStateValues.action || !this.parent.allowSwiping ||\n            this.parent.uiStateValues.isTapHold) {\n            return;\n        }\n        this.isScrollTriggered = false;\n        var swipeDate = e.swipeDirection === 'Left' ?\n            this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];\n        if ((e.swipeDirection === 'Left' && swipeDate < this.parent.maxDate) ||\n            (e.swipeDirection === 'Right' && swipeDate >= this.parent.minDate)) {\n            var time = Date.now() - this.timeStampStart;\n            var offsetDist = (e.distanceX * (Browser.isDevice ? 6 : 1.66));\n            if (offsetDist > time || (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                this.swapPanels(e.swipeDirection);\n                if (offsetDist > time && (e.distanceX > (this.parent.element.offsetWidth / 2))) {\n                    this.element.style.transitionDuration = (((Browser.isDevice ? e.distanceX : offsetDist) / time) / 10) + 's';\n                }\n                this.confirmSwipe(e.swipeDirection);\n            }\n            else {\n                this.cancelSwipe();\n            }\n            var args = { requestType: 'dateNavigate', cancel: false, event: e.originalEvent };\n            this.parent.trigger(events.actionComplete, args);\n        }\n        else {\n            this.cancelSwipe();\n        }\n        this.timeStampStart = null;\n    };\n    ScheduleTouch.prototype.tapHoldHandler = function (e) {\n        var target = closest(e.originalEvent.target, '.' + cls.APPOINTMENT_CLASS);\n        if (!isNullOrUndefined(target)) {\n            this.parent.uiStateValues.isTapHold = true;\n            if (this.parent.isAdaptive) {\n                if (Browser.isIos) {\n                    EventHandler.add(this.element, 'touchend', this.preventEventClick, this);\n                }\n                this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);\n            }\n            else if (['Agenda', 'MonthAgenda', 'Year'].indexOf(this.parent.currentView) < 0) {\n                this.parent.selectedElements = [];\n                this.parent.eventBase.getSelectedEventElements(target);\n                if (this.parent.resizeModule && closest(e.originalEvent.target, '.' + cls.EVENT_RESIZE_CLASS)) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this.parent.resizeModule.resizeStart(e.originalEvent);\n                }\n            }\n        }\n    };\n    ScheduleTouch.prototype.preventEventClick = function (e) {\n        e.preventDefault();\n        EventHandler.remove(this.element, 'touchend', this.preventEventClick);\n    };\n    ScheduleTouch.prototype.renderPanel = function (clsName, nextPrevType) {\n        if (!this.currentPanel) {\n            this.currentPanel = {\n                element: this.parent.activeView.getPanel(),\n                selectedDate: new Date(this.parent.selectedDate.getTime()),\n                renderDates: this.parent.activeView.renderDates,\n                colLevels: this.parent.activeView.colLevels\n            };\n            this.setDimensions(this.currentPanel.element);\n        }\n        else {\n            this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        }\n        this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n        }\n        this.parent.activeView.getRenderDates();\n        this.parent.activeView.renderLayout(clsName);\n    };\n    ScheduleTouch.prototype.swapPanels = function (direction) {\n        if (direction === this.touchLeftDirection) {\n            var temp = this.nextPanel;\n            this.nextPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n        else {\n            var temp = this.previousPanel;\n            this.previousPanel = this.currentPanel;\n            this.currentPanel = temp;\n        }\n    };\n    ScheduleTouch.prototype.confirmSwipe = function (swipeDirection) {\n        var _this = this;\n        var previousDate = swipeDirection === this.touchLeftDirection ?\n            this.nextPanel.selectedDate : this.previousPanel.selectedDate;\n        var args = {\n            action: 'date', cancel: false, previousDate: previousDate, currentDate: this.currentPanel.selectedDate\n        };\n        this.parent.trigger(events.navigating, args, function (navArgs) {\n            if (navArgs.cancel) {\n                _this.swapPanels(swipeDirection);\n                _this.cancelSwipe();\n            }\n            else {\n                _this.parent.activeView.setPanel(_this.currentPanel.element);\n                _this.parent.setProperties({ selectedDate: _this.currentPanel.selectedDate }, true);\n                var translateX = void 0;\n                if (_this.parent.enableRtl) {\n                    translateX = swipeDirection === _this.touchLeftDirection ?\n                        (_this.previousPanel ? _this.previousPanel.element.offsetLeft : _this.currentPanel.element.offsetWidth) : 0;\n                }\n                else {\n                    translateX = swipeDirection === _this.touchLeftDirection ? -_this.currentPanel.element.offsetLeft : 0;\n                }\n                _this.parent.activeView.renderDates = _this.currentPanel.renderDates;\n                _this.parent.activeView.colLevels = _this.currentPanel.colLevels;\n                addClass([_this.element], cls.TRANSLATE_CLASS);\n                _this.element.style.transform = 'translatex(' + translateX + 'px)';\n                if (_this.parent.headerModule) {\n                    _this.parent.headerModule.updateDateRange();\n                }\n                _this.parent.renderTemplates();\n                _this.parent.crudModule.refreshDataManager();\n            }\n        });\n    };\n    ScheduleTouch.prototype.cancelSwipe = function () {\n        this.parent.activeView.setPanel(this.currentPanel.element);\n        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);\n        this.parent.activeView.renderDates = this.currentPanel.renderDates;\n        this.parent.activeView.colLevels = this.currentPanel.colLevels;\n        addClass([this.element], cls.TRANSLATE_CLASS);\n        var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;\n        this.element.style.transform = 'translatex(' + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + 'px)';\n    };\n    ScheduleTouch.prototype.onTransitionEnd = function () {\n        if (!isNullOrUndefined(this.element) && !this.element.classList.contains(cls.TRANSLATE_CLASS)) {\n            return;\n        }\n        this.parent.uiStateValues.isSwipeScroll = false;\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n        this.element.style.transitionDuration = '';\n        this.element.style.transform = '';\n        if (this.previousPanel) {\n            remove(this.previousPanel.element);\n            this.previousPanel = null;\n            removeClass([this.currentPanel.element], cls.PREVIOUS_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        if (this.nextPanel) {\n            remove(this.nextPanel.element);\n            this.nextPanel = null;\n            removeClass([this.currentPanel.element], cls.NEXT_PANEL_CLASS);\n            addClass([this.currentPanel.element], cls.CURRENT_PANEL_CLASS);\n        }\n        this.currentPanel = null;\n        this.parent.activeView.getPanel().style.width = '';\n    };\n    ScheduleTouch.prototype.getTranslateX = function (element) {\n        var style = window.getComputedStyle(element);\n        return new WebKitCSSMatrix(style.webkitTransform).m41;\n    };\n    ScheduleTouch.prototype.setDimensions = function (element) {\n        element.style.width = (this.parent.element.clientWidth) + 'px';\n    };\n    ScheduleTouch.prototype.resetValues = function () {\n        this.currentPanel = null;\n        this.previousPanel = null;\n        this.nextPanel = null;\n        this.timeStampStart = null;\n        this.element.style.transform = '';\n        this.element.style.transitionDuration = '';\n        util.removeChildren(this.element);\n        removeClass([this.element], cls.TRANSLATE_CLASS);\n    };\n    ScheduleTouch.prototype.destroy = function () {\n        if (this.touchObj) {\n            this.touchObj.destroy();\n            this.touchObj = null;\n        }\n        EventHandler.remove(this.element, 'transitionend', this.onTransitionEnd);\n        this.resetValues();\n    };\n    return ScheduleTouch;\n}());\nexport { ScheduleTouch };\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { KeyboardEvents, closest, EventHandler, extend, Browser } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport { cellSelect } from '../base/constant';\n/**\n * Keyboard interaction\n */\nvar KeyboardInteraction = /** @class */ (function () {\n    function KeyboardInteraction(parent) {\n        this.selectedCells = [];\n        this.isCutContentPasted = false;\n        this.isCutAction = false;\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDownArrow: 'shift+downarrow',\n            shiftUpArrow: 'shift+uparrow',\n            shiftRightArrow: 'shift+rightarrow',\n            shiftLeftArrow: 'shift+leftarrow',\n            ctrlLeftArrow: 'ctrl+leftarrow',\n            ctrlRightArrow: 'ctrl+rightarrow',\n            altOne: 'alt+1',\n            altTwo: 'alt+2',\n            altThree: 'alt+3',\n            altFour: 'alt+4',\n            altFive: 'alt+5',\n            altSix: 'alt+6',\n            altSeven: 'alt+7',\n            altEight: 'alt+8',\n            altNine: 'alt+9',\n            enter: 'enter',\n            escape: 'escape',\n            delete: 'delete',\n            backspace: 'backspace',\n            home: 'home',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            ctrlShiftUpArrow: 'ctrl+shift+uparrow',\n            ctrlShiftDownArrow: 'ctrl+shift+downarrow',\n            ctrlShiftLeftArrow: 'ctrl+shift+leftarrow',\n            ctrlShiftRightArrow: 'ctrl+shift+rightarrow',\n            shiftAltY: 'shift+alt+y',\n            shiftAltN: 'shift+alt+n',\n            cut: 'ctrl+x',\n            copy: 'ctrl+c',\n            cmdCut: 'cmd+x',\n            cmdCopy: 'cmd+c'\n        };\n        this.parent = parent;\n        this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;\n        this.keyboardModule = new KeyboardEvents(this.parent.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        this.addEventListener();\n        this.createClipboardElement();\n    }\n    KeyboardInteraction.prototype.keyActionHandler = function (e) {\n        switch (e.action) {\n            case 'downArrow':\n            case 'shiftDownArrow':\n                this.processDown(e, e.shiftKey);\n                break;\n            case 'upArrow':\n            case 'shiftUpArrow':\n                this.processUp(e, e.shiftKey);\n                break;\n            case 'leftArrow':\n            case 'shiftLeftArrow':\n                this.processLeft(e, e.shiftKey);\n                break;\n            case 'rightArrow':\n            case 'shiftRightArrow':\n                this.processRight(e, e.shiftKey);\n                break;\n            case 'ctrlLeftArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Previous'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-prev button').focus();\n                }\n                break;\n            case 'ctrlRightArrow':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Next'), e);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.element.querySelector('.e-next button').focus();\n                }\n                break;\n            case 'altOne':\n            case 'altTwo':\n            case 'altThree':\n            case 'altFour':\n            case 'altFive':\n            case 'altSix':\n            case 'altSeven':\n            case 'altEight':\n            case 'altNine':\n                this.processViewNavigation(e);\n                break;\n            case 'enter':\n                this.processEnter(e);\n                break;\n            case 'home':\n                this.focusFirstCell();\n                break;\n            case 'tab':\n            case 'shiftTab':\n                this.processTab(e, e.shiftKey);\n                break;\n            case 'delete':\n            case 'backspace':\n                this.processDelete(e);\n                break;\n            case 'ctrlShiftUpArrow':\n            case 'ctrlShiftDownArrow':\n            case 'ctrlShiftLeftArrow':\n            case 'ctrlShiftRightArrow':\n                this.processCtrlShiftNavigationArrows(e);\n                break;\n            case 'escape':\n                this.processEscape(e);\n                break;\n            case 'fTwelve':\n                if (this.parent.allowInline && this.parent.inlineModule) {\n                    e.preventDefault();\n                    this.processFTwelve(e);\n                }\n                break;\n            case 'shiftAltY':\n                this.parent.changeDate(new Date(), e);\n                break;\n            case 'shiftAltN':\n                if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda' ||\n                    this.parent.currentView === 'Year') {\n                    return;\n                }\n                this.processShiftAltN(e);\n                break;\n            case 'cut':\n            case 'cmdCut':\n                this.processClipboardAction(true, undefined, e);\n                break;\n            case 'copy':\n            case 'cmdCopy':\n                this.processClipboardAction(false, undefined, e);\n                break;\n        }\n    };\n    KeyboardInteraction.prototype.processShiftAltN = function (e) {\n        var selectedCells = this.parent.getSelectedCells();\n        var target = e.target;\n        var cellData = extend({}, null, true);\n        if (selectedCells.length > 0 && (closest(target, '.' + cls.WORK_CELLS_CLASS)\n            || closest(target, '.' + cls.ALLDAY_CELLS_CLASS) || closest(target, '.' + cls.HEADER_CELLS_CLASS))) {\n            cellData = this.getSelectedElements(target);\n        }\n        else if (closest(target, '.' + cls.APPOINTMENT_CLASS) && !isNullOrUndefined(this.parent.activeEventData.event)) {\n            var event_1 = this.parent.activeEventData.event;\n            cellData.startTime = event_1.StartTime;\n            cellData.endTime = event_1.EndTime;\n            cellData.isAllDay = event_1.IsAllDay;\n        }\n        else {\n            var workHour = this.parent.getStartEndTime(this.parent.workHours.start);\n            var slotInterval = this.parent.activeViewOptions.timeScale.interval /\n                this.parent.activeViewOptions.timeScale.slotCount;\n            cellData.startTime = new Date(this.parent.selectedDate);\n            cellData.startTime.setHours(workHour.getHours(), workHour.getMinutes(), 0, 0);\n            cellData.endTime = new Date(cellData.startTime.getTime() + slotInterval * 60000);\n        }\n        var args = extend(cellData, { cancel: false, event: e });\n        if (args != null) {\n            this.parent.eventWindow.openEditor(args, 'Add');\n        }\n    };\n    KeyboardInteraction.prototype.processFTwelve = function (e) {\n        var target = e.target;\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            var inlineArgs = {\n                element: args.element,\n                groupIndex: args.groupIndex, type: 'Cell'\n            };\n            this.parent.notify(event.inlineClick, inlineArgs);\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            target.click();\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.addEventListener = function () {\n        this.parent.on(event.cellMouseDown, this.onCellMouseDown, this);\n        if (this.parent.allowClipboard) {\n            this.parent.on(event.documentPaste, this.pasteHandler, this);\n        }\n    };\n    KeyboardInteraction.prototype.removeEventListener = function () {\n        this.parent.off(event.cellMouseDown, this.onCellMouseDown);\n        this.parent.off(event.documentPaste, this.pasteHandler);\n    };\n    KeyboardInteraction.prototype.onCellMouseDown = function (e) {\n        if (e.event.shiftKey) {\n            return;\n        }\n        this.initialTarget = this.getClosestCell(e.event);\n        if (this.parent.activeViewOptions.readonly || this.parent.currentView === 'MonthAgenda' || !this.initialTarget) {\n            return;\n        }\n        if (e.event.target.classList.contains(cls.WORK_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            EventHandler.add(this.parent.getContentTable(), 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(this.parent.getContentTable(), 'mouseup', this.onMoveUp, this);\n        }\n        if (e.event.target.classList.contains(cls.ALLDAY_CELLS_CLASS) && e.event.which !== 3) {\n            this.parent.removeSelectedClass();\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.add(allDayRow, 'mousemove', this.onMouseSelection, this);\n            EventHandler.add(allDayRow, 'mouseup', this.onMoveUp, this);\n        }\n    };\n    KeyboardInteraction.prototype.onMouseSelection = function (e) {\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        addClass(appointments, 'e-allow-select');\n        var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);\n        if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {\n            var parent_1 = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 &&\n                parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;\n            var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 &&\n                parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;\n            if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {\n                parent_1.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;\n            }\n            if (xInBounds && (selectionEdges.left || selectionEdges.right)) {\n                parent_1.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;\n            }\n        }\n        var target = this.getClosestCell(e);\n        if (target) {\n            this.selectCells(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.getClosestCell = function (e) {\n        return closest(e.target, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n    };\n    KeyboardInteraction.prototype.onMoveUp = function (e) {\n        var _this = this;\n        var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        removeClass(appointments, 'e-allow-select');\n        if (e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            EventHandler.remove(this.parent.getContentTable(), 'mousemove', this.onMouseSelection);\n            EventHandler.remove(this.parent.getContentTable(), 'mouseup', this.onMoveUp);\n        }\n        if (e.target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            EventHandler.remove(allDayRow, 'mousemove', this.onMouseSelection);\n            EventHandler.remove(allDayRow, 'mouseup', this.onMoveUp);\n        }\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        var selectedCells = this.parent.getSelectedCells();\n        if (selectedCells.length > 0 && selectedCells.indexOf(target) === -1) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (this.parent.currentView === 'TimelineYear' && target.classList.contains(cls.OTHERMONTH_CLASS)) {\n            return;\n        }\n        this.parent.activeCellsData = this.getSelectedElements(target);\n        var cellData = {};\n        if (this.parent.eventWindow) {\n            this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);\n        }\n        var args = {\n            data: cellData, element: this.parent.activeCellsData.element, event: e,\n            requestType: cellSelect, showQuickPopup: false\n        };\n        this.parent.trigger(event.select, args, function (selectArgs) {\n            var isPopupShow = selectArgs.showQuickPopup || _this.parent.quickInfoOnSelectionEnd;\n            if (isPopupShow && selectedCells.length > 1) {\n                var cellArgs = extend(_this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n                _this.parent.notify(event.cellClick, cellArgs);\n            }\n        });\n    };\n    KeyboardInteraction.prototype.processEnter = function (e) {\n        if ((this.parent.activeViewOptions.readonly && !e.target.classList.contains(cls.APPOINTMENT_CLASS))\n            || this.isPreventAction(e)) {\n            return;\n        }\n        if (this.parent.currentView === 'TimelineYear' && e.target.classList.contains(cls.OTHERMONTH_CLASS)) {\n            return;\n        }\n        var target = e.target;\n        if (closest(target, '.' + cls.POPUP_WRAPPER_CLASS)) {\n            if (target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) ||\n                target.classList.contains(cls.EVENT_CREATE_CLASS) ||\n                target.classList.contains(cls.EDIT_EVENT_CLASS) ||\n                target.classList.contains(cls.DELETE_EVENT_CLASS) ||\n                target.classList.contains(cls.CLOSE_CLASS)) {\n                target.click();\n                e.preventDefault();\n            }\n            else if (target.classList.contains(cls.SUBJECT_CLASS)) {\n                this.parent.element.querySelector('.' + cls.EVENT_CREATE_CLASS).click();\n                e.preventDefault();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_CELLS_CLASS) && target.classList.contains(cls.RESOURCE_PARENT_CLASS)) {\n            var resourceIcon = target.querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n            if (resourceIcon) {\n                resourceIcon.click();\n            }\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            this.parent.activeCellsData = this.getSelectedElements(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e });\n            if (this.parent.allowInline) {\n                var inlineArgs = {\n                    element: args.element,\n                    groupIndex: args.groupIndex, type: 'Cell'\n                };\n                this.parent.notify(event.inlineClick, inlineArgs);\n            }\n            else {\n                if (this.parent.currentView === 'Year') {\n                    target.click();\n                }\n                else {\n                    this.parent.notify(event.cellClick, args);\n                }\n            }\n            return;\n        }\n        if (target.classList.contains(cls.INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {\n            this.parent.inlineModule.inlineCrudActions(target);\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS) || target.classList.contains(cls.MORE_EVENT_CLOSE_CLASS) ||\n            target.classList.contains(cls.ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            target.click();\n            return;\n        }\n        if (target.classList.contains(cls.MORE_EVENT_HEADER_DATE_CLASS)) {\n            this.parent.setProperties({ selectedDate: this.parent.getDateFromElement(target) }, true);\n            this.parent.changeView(this.parent.getNavigateView(), e);\n            this.processEscape(e);\n            return;\n        }\n    };\n    KeyboardInteraction.prototype.getSelectedElements = function (target) {\n        var cellDetails;\n        if (this.selectedCells.length > 1 && target.classList.contains(cls.SELECTED_CELL_CLASS)) {\n            var start = this.parent.getCellDetails(this.selectedCells[0]);\n            var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);\n            start.endTime = end.endTime;\n            start.element = target;\n            cellDetails = start;\n        }\n        else {\n            cellDetails = this.parent.getCellDetails(target);\n        }\n        return cellDetails;\n    };\n    KeyboardInteraction.prototype.getCells = function (isInverseTable, start, end) {\n        var tableEle = this.parent.getContentTable();\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        var query = isTimelineYear && !isInverseTable ? '.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')' : 'td';\n        var cells = [].slice.call(tableEle.querySelectorAll(query));\n        var maxRow = tableEle.rows.length;\n        var maxColumn = tableEle.rows[0].cells.length;\n        if (start && start.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var allDayRow = this.parent.getAllDayRow();\n            cells = [].slice.call(allDayRow.cells);\n            maxRow = 1;\n            maxColumn = allDayRow.cells.length;\n        }\n        var startIndex = cells.indexOf(start);\n        var endIndex = cells.indexOf(end);\n        var inverseCells = [];\n        if (isInverseTable) {\n            for (var i = 0; i < maxColumn; i++) {\n                for (var j = 0; j < maxRow; j++) {\n                    var cell = cells[maxColumn * j + i];\n                    if (isTimelineYear && cell.classList.contains(cls.OTHERMONTH_CLASS)) {\n                        continue;\n                    }\n                    inverseCells.push(cell);\n                }\n            }\n            startIndex = inverseCells.indexOf(start);\n            endIndex = inverseCells.indexOf(end);\n        }\n        if (startIndex > endIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        var sCells = isInverseTable ? inverseCells : cells;\n        return sCells.slice(startIndex, endIndex + 1);\n    };\n    KeyboardInteraction.prototype.focusFirstCell = function () {\n        if (this.parent.currentView === 'Agenda') {\n            var focusCell = this.parent.getContentTable().querySelector('.' + cls.AGENDA_CELLS_CLASS);\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus();\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            var cell = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS +\n                ' tr:not(.' + cls.HIDDEN_CLASS + ') .' + cls.WORK_CELLS_CLASS + ':not(.' + cls.RESOURCE_GROUP_CELLS_CLASS + ')');\n            this.selectCells(false, cell);\n        }\n        else if (this.parent.currentView.indexOf('Year') > -1) {\n            var query = '.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')' + ':not(.' + cls.RESOURCE_GROUP_CELLS_CLASS + ')';\n            var isVerticalYear = this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.orientation === 'Vertical';\n            query += isVerticalYear ? '[data-date=\"' + this.parent.activeView.startDate().getTime() + '\"]' : '';\n            this.selectCells(false, this.parent.element.querySelector(query));\n        }\n        else {\n            this.selectCells(false, this.parent.getWorkCellElements()[0]);\n        }\n    };\n    KeyboardInteraction.prototype.isInverseTableSelect = function () {\n        return this.parent.activeView.isInverseTableSelect;\n    };\n    /**\n     * Internal method to select cells\n     *\n     * @param {boolean} isMultiple Accepts to select multiple cells or not\n     * @param {HTMLTableCellElement} targetCell Accepts the target cells\n     * @returns {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.selectCells = function (isMultiple, targetCell) {\n        var _this = this;\n        this.parent.removeSelectedClass();\n        var target = (targetCell instanceof Array) ? targetCell.slice(-1)[0] : targetCell;\n        if (isMultiple) {\n            var initialId_1;\n            var views_1 = ['Day', 'Week', 'WorkWeek', 'TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth', 'TimelineYear'];\n            var args = { element: targetCell, requestType: 'mousemove', allowMultipleRow: true };\n            this.parent.inlineModule.removeInlineAppointmentElement();\n            this.parent.trigger(event.select, args, function (selectArgs) {\n                var allowMultipleRow = (!selectArgs.allowMultipleRow) || (!_this.parent.allowMultiRowSelection);\n                if (allowMultipleRow) {\n                    var isTimelineYear = _this.parent.currentView === 'TimelineYear';\n                    if (isTimelineYear && _this.parent.activeViewOptions.orientation === 'Horizontal' || _this.parent.currentView === 'Month') {\n                        var isGroupYear = isTimelineYear && _this.parent.activeViewOptions.group.resources.length > 0;\n                        target = isGroupYear ? _this.initialTarget :\n                            _this.initialTarget.parentElement.children[target.cellIndex];\n                    }\n                    else if (views_1.indexOf(_this.parent.currentView) > -1) {\n                        target = target.parentElement.children[_this.initialTarget.cellIndex];\n                    }\n                }\n                var selectedCells = _this.getCells(_this.isInverseTableSelect(), _this.initialTarget, target);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    initialId_1 = _this.initialTarget.getAttribute('data-group-index');\n                    var resourceSelectedCells = [];\n                    for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n                        var cell = selectedCells_1[_i];\n                        if (cell.getAttribute('data-group-index') === initialId_1) {\n                            resourceSelectedCells.push(cell);\n                        }\n                    }\n                    selectedCells = resourceSelectedCells;\n                }\n                if (!_this.parent.allowMultiCellSelection) {\n                    selectedCells = [_this.initialTarget];\n                }\n                _this.selectedCells = selectedCells;\n                if (selectedCells.length > 2 && !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n                    var allDayCells = _this.getAllDayCells(selectedCells);\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        var resourceAllDayCells = [];\n                        for (var _a = 0, allDayCells_1 = allDayCells; _a < allDayCells_1.length; _a++) {\n                            var cell = allDayCells_1[_a];\n                            if (cell.getAttribute('data-group-index') === initialId_1) {\n                                resourceAllDayCells.push(cell);\n                            }\n                        }\n                        allDayCells = resourceAllDayCells;\n                    }\n                    selectedCells = selectedCells.concat(allDayCells);\n                }\n                if ((target.getAttribute('data-group-index') !== initialId_1) && _this.parent.activeViewOptions.group.resources.length > 0) {\n                    target = _this.selectedCells[_this.selectedCells.length - 1];\n                }\n                _this.parent.addSelectedClass(selectedCells, target);\n            });\n        }\n        else {\n            var args = {\n                element: target, requestType: cellSelect\n            };\n            // activeCellsData is not reset on schedule property changed(group properties)\n            // const cellData: Record<string, any> = {};\n            // const cellDetails: CellClickEventArgs = this.parent.getCellDetails(target);\n            // if (this.parent.eventWindow && cellDetails) {\n            //     if (this.parent.activeCellsData.element !== cellDetails.element) {\n            //         this.parent.activeCellsData = cellDetails;\n            //     }\n            //     this.parent.eventWindow.convertToEventData(this.parent.activeCellsData as unknown as Record<string, any>, cellData);\n            //     args.data = cellData;\n            // }\n            this.parent.trigger(event.select, args, function () {\n                _this.initialTarget = target;\n                _this.selectedCells = [target];\n                _this.parent.addSelectedClass([target], target);\n            });\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointment = function (isReverse, target) {\n        var appointments = this.getAppointmentElements();\n        if (appointments.length < 0) {\n            return;\n        }\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        var nextAppEle;\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var targetIndex = appointments.indexOf(target);\n            nextAppEle = appointments[(isReverse ? targetIndex - 1 : targetIndex + 1)];\n        }\n        else {\n            nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];\n        }\n        if (nextAppEle) {\n            this.parent.eventBase.addSelectedAppointments([nextAppEle], true);\n            nextAppEle.focus();\n            addClass([nextAppEle], cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    KeyboardInteraction.prototype.selectAppointmentElementFromWorkCell = function (isReverse, target) {\n        var _this = this;\n        this.parent.eventBase.removeSelectedAppointmentClass();\n        this.parent.removeSelectedClass();\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) || target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var appointmentElements_1 = this.getUniqueAppointmentElements();\n            var filteredElements_1 = [];\n            var selectedDate_1 = this.parent.getDateFromElement(target).getTime();\n            var selectedSeriesEvents = this.parent.eventsProcessed.filter(function (eventObject) {\n                return (!isReverse ? (eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1) :\n                    (eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1));\n            });\n            selectedSeriesEvents.filter(function (event) {\n                appointmentElements_1.filter(function (element) {\n                    if (JSON.stringify(event.Guid) === JSON.stringify(element.getAttribute('data-guid'))) {\n                        filteredElements_1.push(element);\n                    }\n                });\n            });\n            if (filteredElements_1.length > 0) {\n                var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];\n                var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute('data-guid'));\n                this.parent.eventBase.addSelectedAppointments(focusElements, true);\n                (focusElements[focusElements.length - 1]).focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getAllDayCells = function (cells) {\n        var allDayRow = this.parent.getAllDayRow();\n        if (!allDayRow) {\n            return [];\n        }\n        var startCell = cells[0];\n        var endCell = cells[cells.length - 1];\n        var start = this.parent.getCellDetails(startCell);\n        var end = this.parent.getCellDetails(endCell);\n        if (end.endTime.getTime() - start.startTime.getTime() >= util.MS_PER_DAY) {\n            var allDayCells = [].slice.call(allDayRow.cells);\n            return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);\n        }\n        return [];\n    };\n    KeyboardInteraction.prototype.getAppointmentElements = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n    };\n    KeyboardInteraction.prototype.getAppointmentElementsByGuid = function (guid) {\n        return [].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]'));\n    };\n    KeyboardInteraction.prototype.getUniqueAppointmentElements = function () {\n        var appointments = this.getAppointmentElements();\n        var appointmentElements = [];\n        appointments.map(function (value) { return value.getAttribute('data-guid'); }).filter(function (value, index, self) {\n            if (self.indexOf(value) === index) {\n                appointmentElements.push(appointments[parseInt(index.toString(), 10)]);\n            }\n        });\n        return appointmentElements;\n    };\n    KeyboardInteraction.prototype.getWorkCellFromAppointmentElement = function (target) {\n        var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute('data-guid'));\n        return this.parent.eventBase.selectWorkCellByTime([selectedObject]);\n    };\n    KeyboardInteraction.prototype.processViewNavigation = function (e) {\n        if (isNullOrUndefined(e.code)) {\n            return;\n        }\n        var index = parseInt(e.code.slice(e.code.length - 1), 10) - 1;\n        if (!isNaN(index) && !isNullOrUndefined(this.parent.views) && index < this.parent.views.length) {\n            var view = this.parent.viewCollections[parseInt(index.toString(), 10)].option;\n            this.parent.changeView(view, e, undefined, index);\n            if (this.parent.headerModule) {\n                this.parent.headerModule.element.querySelector('.e-active-view button').focus();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.isCalendarTarget = function (e) {\n        var keyTarget = e.currentTarget || e.target;\n        if (keyTarget && !isNullOrUndefined(keyTarget.querySelector('.e-header-popup.e-popup-open'))) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.cancelUpDownAction = function (isTimelineYear) {\n        var isVerticalYear = isTimelineYear && this.parent.activeViewOptions.orientation === 'Vertical';\n        var isGroup = this.parent.activeViewOptions.group.resources.length > 0;\n        if (isVerticalYear && isGroup || isTimelineYear && this.initialTarget.classList.contains(cls.OTHERMONTH_CLASS)) {\n            return true;\n        }\n        if (this.parent.activeView.isTimelineView() && !isTimelineYear || this.parent.currentView === 'MonthAgenda') {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processUp = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (isMultiple && this.cancelUpDownAction(isTimelineYear) || (this.isCalendarTarget(e))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedElements = this.parent.getSelectedCells();\n        var selectedEventElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedElements.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedElements[selectedElements.length - 1];\n        }\n        if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var tableRows = this.parent.getTableRows();\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            var targetCell = void 0;\n            if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {\n                targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, true) :\n                    this.getHorizontalUpDownCell(tableRows, target, curRowIndex, true);\n            }\n            if ((curRowIndex > 0 || targetCell) && curRowIndex < tableRows.length) {\n                targetCell = targetCell ? targetCell : (tableRows[curRowIndex - 1]).cells[target.cellIndex];\n                if (this.parent.currentView === 'Year' && targetCell.classList.contains(cls.OTHERMONTH_CLASS)) {\n                    if (this.parent.activeView.getStartDate().getTime() < +targetCell.getAttribute('data-date')) {\n                        targetCell = this.getYearUpDownCell(tableRows, curRowIndex - 1, target.cellIndex, true);\n                    }\n                    else {\n                        return;\n                    }\n                }\n                e.preventDefault();\n                this.selectCells(isMultiple, targetCell);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(true, target);\n        }\n    };\n    KeyboardInteraction.prototype.processDown = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (isMultiple && this.cancelUpDownAction(isTimelineYear) || (this.isCalendarTarget(e))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedCells();\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (selectedCells.length > 0 && !e.target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(cls.POPUP_OPEN) &&\n            !quickPopupWrapper.classList.contains(cls.POPUP_OPEN) &&\n            ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.parent.currentView) !== -1) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n        }\n        var tableRows = this.parent.getTableRows();\n        if (!target) {\n            return;\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) && !this.parent.element.querySelector('.' + cls.POPUP_OPEN)) {\n            var curRowIndex = tableRows.indexOf(target.parentElement);\n            var targetCell = void 0;\n            if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {\n                targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, false)\n                    : this.getHorizontalUpDownCell(tableRows, target, curRowIndex, false);\n            }\n            if (curRowIndex >= 0 && ((curRowIndex < tableRows.length - 1) || targetCell)) {\n                targetCell = targetCell ? targetCell : (tableRows[curRowIndex + 1]).cells[target.cellIndex];\n                if (this.parent.currentView === 'Year' && targetCell.classList.contains(cls.OTHERMONTH_CLASS)) {\n                    if (this.parent.activeView.getEndDate().getTime() > +targetCell.getAttribute('data-date')) {\n                        targetCell = this.getYearUpDownCell(tableRows, curRowIndex + 1, target.cellIndex, false);\n                    }\n                    else {\n                        return;\n                    }\n                }\n                e.preventDefault();\n                this.selectCells(isMultiple, targetCell);\n            }\n        }\n        else if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            this.selectAppointment(false, target);\n        }\n    };\n    KeyboardInteraction.prototype.getYearUpDownCell = function (tableRows, rowIndex, cellIndex, isUp) {\n        while (tableRows[parseInt(rowIndex.toString(), 10)] &&\n            tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)].classList.contains(cls.OTHERMONTH_CLASS)) {\n            rowIndex = rowIndex + (isUp ? -1 : 1);\n        }\n        return tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)];\n    };\n    // eslint-disable-next-line max-len\n    KeyboardInteraction.prototype.getHorizontalUpDownCell = function (tableRows, target, curRowIndex, isUp) {\n        var row = tableRows[curRowIndex + (isUp ? -1 : 1)];\n        var cell = row ? row.cells[target.cellIndex] : target;\n        if (cell.classList.contains(cls.OTHERMONTH_CLASS)) {\n            var workCell = row.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n            var date = new Date(+workCell.getAttribute('data-date'));\n            var query = '[data-date=\"' + new Date(date.getFullYear(), date.getMonth() + 1, 0).getTime() + '\"]';\n            cell = cell.cellIndex < workCell.cellIndex ? workCell : row.querySelector(query);\n        }\n        return cell;\n    };\n    // eslint-disable-next-line max-len\n    KeyboardInteraction.prototype.getVerticalUpDownCell = function (tableRows, target, curRowIndex, isUp) {\n        var hasRow = isUp && curRowIndex > 0 || !isUp && curRowIndex < tableRows.length - 1;\n        var targetCell = hasRow ? tableRows[curRowIndex + (isUp ? -1 : 1)].cells[target.cellIndex] : undefined;\n        if (!targetCell || targetCell.classList.contains(cls.OTHERMONTH_CLASS)) {\n            var column = tableRows[parseInt(curRowIndex.toString(), 10)].cells[target.cellIndex - (isUp ? 1 : -1)];\n            if (column) {\n                var dateAttr = +target.getAttribute('data-date') - (isUp ? util.MS_PER_DAY : -util.MS_PER_DAY);\n                return this.parent.getContentTable().querySelector('.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + dateAttr + '\"]');\n            }\n            targetCell = target;\n        }\n        return targetCell;\n    };\n    KeyboardInteraction.prototype.processLeftRight = function (target) {\n        var tableEle = (this.parent.currentView === 'Year' ? target.closest('tbody') : this.parent.getContentTable());\n        var curRowIndex = target.parentNode.sectionRowIndex;\n        var key = {\n            element: tableEle,\n            rowIndex: curRowIndex,\n            columnIndex: target.cellIndex,\n            maxIndex: tableEle.rows[parseInt(curRowIndex.toString(), 10)].cells.length\n        };\n        return key;\n    };\n    KeyboardInteraction.prototype.getQuickPopupElement = function () {\n        return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n    };\n    KeyboardInteraction.prototype.isCancelLeftRightAction = function (e, isMultiple, isTimelineYear) {\n        var prevent = this.parent.currentView === 'MonthAgenda' || isTimelineYear && this.initialTarget.classList.contains(cls.OTHERMONTH_CLASS);\n        if (this.parent.currentView === 'Agenda' || (isMultiple && prevent)) {\n            return true;\n        }\n        if (this.isPreventAction(e) && isMultiple) {\n            return true;\n        }\n        var moreEventWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        var quickPopupWrapper = this.getQuickPopupElement();\n        if (moreEventWrapper.classList.contains(cls.POPUP_OPEN) || quickPopupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processRight = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear) || (this.isCalendarTarget(e))) {\n            return;\n        }\n        var selectedCells = this.parent.getSelectedCells();\n        var targetCell;\n        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n        var target = (e.target);\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        if (selectedAppointments.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if (target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            (e.target).classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            var targetDate = new Date(+target.getAttribute('data-date'));\n            var isMonthEnd = this.parent.currentView === 'Year' && targetDate.getTime() === util.lastDateOfMonth(targetDate).getTime();\n            if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1 && !isMonthEnd) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], 'right');\n                if (isTimelineYear && isMultiple && targetCell.classList.contains(cls.OTHERMONTH_CLASS)) {\n                    targetCell = this.getTimelineYearTargetCell(key, target, true);\n                }\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === key.maxIndex - 1 || isMonthEnd) {\n                if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1 && !isMonthEnd) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], 'right');\n                    var changeTargetCell = isTimelineYear && isMultiple && targetCell.classList.contains(cls.OTHERMONTH_CLASS);\n                    targetCell = changeTargetCell ? this.getHorizontalLeftRightCell(key, target, true) : targetCell;\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    if (isMonthEnd && targetDate.getTime() !== this.parent.activeView.getEndDate().getTime()) {\n                        this.selectCells(isMultiple, this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + (targetDate.getTime() + util.MS_PER_DAY) + '\"]'));\n                        return;\n                    }\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Next'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var cell = isMonthEnd ? tableEle.rows[parseInt(rowIndex.toString(), 10)].querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')')\n                        : tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[0];\n                    this.selectCells(false, cell);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);\n            }\n            else if (curColIndex === maxColIndex - 1 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Next'), e);\n                var allDayRow_1 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_1.cells[0]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processLeft = function (e, isMultiple) {\n        var isTimelineYear = this.parent.currentView === 'TimelineYear';\n        if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear) || (this.isCalendarTarget(e))) {\n            return;\n        }\n        var target = (e.target);\n        var selectedCells = this.parent.getSelectedCells();\n        var targetCell;\n        if (selectedCells.length > 0 && !target.classList.contains(cls.WORK_CELLS_CLASS) &&\n            !target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n        }\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!target) {\n                return;\n            }\n        }\n        if ((e.target).classList.contains(cls.WORK_CELLS_CLASS) &&\n            target.classList.contains(cls.WORK_CELLS_CLASS)) {\n            var key = this.processLeftRight(target);\n            var targetDate = new Date(+target.getAttribute('data-date'));\n            var isMonthStart = this.parent.currentView === 'Year' && targetDate.getTime() === util.firstDateOfMonth(targetDate).getTime();\n            if (key.columnIndex > 0 && key.columnIndex < key.maxIndex && !isMonthStart) {\n                targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], 'left');\n                if (isTimelineYear && isMultiple && targetCell.classList.contains(cls.OTHERMONTH_CLASS)) {\n                    targetCell = this.getTimelineYearTargetCell(key, target, false);\n                }\n                if (!isNullOrUndefined(targetCell)) {\n                    this.selectCells(isMultiple, targetCell);\n                }\n            }\n            else if (key.columnIndex === 0 || isMonthStart) {\n                if (!this.isInverseTableSelect() && key.rowIndex > 0) {\n                    targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], 'left');\n                    var otherMonthCell = isTimelineYear && isMultiple && targetCell.classList.contains(cls.OTHERMONTH_CLASS);\n                    targetCell = otherMonthCell ? this.getHorizontalLeftRightCell(key, target, false) : targetCell;\n                    if (!isNullOrUndefined(targetCell)) {\n                        this.selectCells(isMultiple, targetCell);\n                    }\n                }\n                else if (!isMultiple) {\n                    if (isMonthStart && targetDate.getTime() !== this.parent.activeView.getStartDate().getTime()) {\n                        this.selectCells(isMultiple, this.parent.element.querySelector('[data-date=\"' + (targetDate.getTime() - util.MS_PER_DAY) + '\"]'));\n                        return;\n                    }\n                    this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Previous'), e);\n                    var tableEle = this.parent.getContentTable();\n                    var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;\n                    var cell = tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[key.maxIndex - 1];\n                    if (isMonthStart) {\n                        var tbody = this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n                        cell = tbody.item(tbody.length - 1).querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + this.parent.activeView.getEndDate().getTime() + '\"]');\n                    }\n                    this.selectCells(false, cell);\n                }\n            }\n        }\n        else if (target.classList.contains(cls.ALLDAY_CELLS_CLASS)) {\n            var curColIndex = target.cellIndex;\n            var allDayRow = this.parent.getAllDayRow();\n            var maxColIndex = allDayRow.cells.length;\n            if (curColIndex > 0 && curColIndex < maxColIndex) {\n                this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);\n            }\n            else if (curColIndex === 0 && !isMultiple) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('Previous'), e);\n                var allDayRow_2 = this.parent.getAllDayRow();\n                this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getTimelineYearTargetCell = function (key, target, isRight) {\n        return this.isInverseTableSelect() ? this.getVerticalLeftRightCell(target, isRight) :\n            this.getHorizontalLeftRightCell(key, target, isRight);\n    };\n    KeyboardInteraction.prototype.getHorizontalLeftRightCell = function (key, target, isRight) {\n        var row = key.element.rows[target.parentNode.sectionRowIndex + (isRight ? 1 : -1)];\n        if (row) {\n            var query = isRight ? '.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')'\n                : '[data-date=\"' + ((+target.getAttribute('data-date')) - util.MS_PER_DAY) + '\"]';\n            return row.querySelector(query);\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getVerticalLeftRightCell = function (target, isRight) {\n        var date = new Date(+target.getAttribute('data-date'));\n        var start = new Date(date.getFullYear(), date.getMonth() + (isRight ? 1 : -1), 1);\n        var tableEle = this.parent.getContentTable();\n        var targetCell = tableEle.querySelector('[data-date=\"' + start.getTime() + '\"]');\n        if (targetCell.parentNode.sectionRowIndex > target.parentNode.sectionRowIndex) {\n            return targetCell;\n        }\n        return tableEle.querySelector('[data-date=\"' + new Date(start.getFullYear(), start.getMonth() + 1, 0).getTime() + '\"]');\n    };\n    KeyboardInteraction.prototype.calculateNextPrevDate = function (currentCell, target, type) {\n        var initialId = this.initialTarget.getAttribute('data-group-index');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === 'Month') {\n            if (currentCell && target && target.getAttribute('data-group-index') !== initialId) {\n                var currentDate = this.parent.getDateFromElement(currentCell);\n                var nextPrevDate = (type === 'right') ? new Date(currentDate.setDate(currentDate.getDate() + 1))\n                    : new Date(currentDate.setDate(currentDate.getDate() - 1));\n                target = [].slice.call(this.parent.element.querySelectorAll('td[data-date=\"'\n                    + nextPrevDate.getTime().toString() + '\"]' + '[data-group-index=\"' + initialId + '\"]'))[0];\n            }\n        }\n        return target;\n    };\n    KeyboardInteraction.prototype.getFocusableElements = function (container) {\n        var queryString = 'a[href]:not([tabindex=\"-1\"]),input:not([disabled]):not([tabindex=\"-1\"]),' +\n            'textarea:not([disabled]):not([tabindex=\"-1\"]),button:not([disabled]):not([tabindex=\"-1\"]),' +\n            'select:not([disabled]):not([tabindex=\"-1\"]),[tabindex]:not([tabindex=\"-1\"]),[contentEditable=true]:not([tabindex=\"-1\"])';\n        return [].slice.call(container.querySelectorAll(queryString));\n    };\n    KeyboardInteraction.prototype.processTabOnPopup = function (e, popupElement) {\n        var _this = this;\n        var focusableElements = this.getFocusableElements(popupElement);\n        focusableElements = focusableElements.filter(function (element) {\n            var footerEle = _this.parent.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n            if (footerEle && footerEle.offsetParent) {\n                return !(element.classList.contains(cls.EDIT_CLASS) || element.classList.contains(cls.DELETE_CLASS));\n            }\n            else {\n                return !(element.classList.contains(cls.EDIT_EVENT_CLASS) || element.classList.contains(cls.DELETE_EVENT_CLASS));\n            }\n        });\n        var firstEle = focusableElements[0];\n        var lastEle = focusableElements[focusableElements.length - 1];\n        if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {\n            e.preventDefault();\n            firstEle.focus();\n        }\n        if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {\n            e.preventDefault();\n            lastEle.focus();\n        }\n    };\n    KeyboardInteraction.prototype.processTab = function (e, isReverse) {\n        var target = e.target;\n        if (target.classList.contains(cls.INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {\n            target = target.closest('.e-appointment');\n            this.parent.inlineModule.inlineCrudActions(e.target);\n        }\n        if (this.parent.currentView === 'TimelineYear' && target.classList.contains(cls.OTHERMONTH_CLASS)) {\n            if (target.classList.contains(cls.SELECTED_CELL_CLASS)) {\n                this.parent.removeSelectedClass();\n            }\n            return;\n        }\n        var popupWrapper = closest(target, '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.MORE_POPUP_WRAPPER_CLASS);\n        if (popupWrapper && popupWrapper.classList.contains(cls.POPUP_OPEN)) {\n            if (popupWrapper.classList.contains(cls.MORE_POPUP_WRAPPER_CLASS)) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n            }\n            this.processTabOnPopup(e, popupWrapper);\n            return;\n        }\n        if (target.classList.contains(cls.ROOT)) {\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            return;\n        }\n        if (target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            var index = parseInt(target.getAttribute('data-group-index'), 10);\n            var appSelector = \".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index - 1 : index) + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment], true);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n            else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {\n                this.parent.element.focus();\n                e.preventDefault();\n            }\n            else if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.parent.resourceBase.expandedResources.length);\n                this.parent.element.querySelector('.e-content-wrap').scrollTop = ((isReverse ? index - 1 : index + 1) * averageRowHeight);\n                this.parent.virtualScrollModule.virtualScrolling();\n            }\n            else {\n                this.setScrollPosition(index);\n            }\n            return;\n        }\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            var isTimelineYear = this.parent.currentView === 'TimelineYear';\n            var isTimeline = this.parent.activeView.isTimelineView() && !isTimelineYear;\n            if ((isTimeline || isTimelineYear && this.parent.activeViewOptions.orientation === 'Vertical') && this.parent.activeViewOptions.group.resources.length > 0) {\n                var index = parseInt(target.getAttribute('data-group-index'), 10);\n                appElements = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                var resCellSelector = \".\" + cls.RESOURCE_CELLS_CLASS + \"[data-group-index=\\\"\" + (isReverse ? index : index + 1) + \"\\\"]\";\n                var resourceCell = this.parent.element.querySelector(resCellSelector);\n                if (resourceCell && (isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid') ||\n                    !isReverse && target.getAttribute('data-guid') === appElements.slice(-1)[0].getAttribute('data-guid'))) {\n                    this.parent.eventBase.removeSelectedAppointmentClass();\n                    if (this.parent.virtualScrollModule) {\n                        resourceCell.focus({ preventScroll: true });\n                    }\n                    else {\n                        resourceCell.focus();\n                    }\n                    if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n                        isNullOrUndefined(this.parent.virtualScrollModule)) {\n                        this.setScrollPosition(index);\n                    }\n                    e.preventDefault();\n                    return;\n                }\n            }\n            var selectedAppointments = this.parent.eventBase.getSelectedAppointments();\n            if (selectedAppointments.length > 0) {\n                target = selectedAppointments[selectedAppointments.length - 1];\n            }\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            if (!isReverse && target.getAttribute('data-guid') === appElements[appElements.length - 1].getAttribute('data-guid') ||\n                isReverse && target.getAttribute('data-guid') === appElements[0].getAttribute('data-guid')) {\n                return;\n            }\n            if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n                this.selectAppointment(isReverse, target);\n                e.preventDefault();\n            }\n            return;\n        }\n        var selectedCells = this.parent.getSelectedCells();\n        if (selectedCells.length > 0 && !target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            target = selectedCells[selectedCells.length - 1];\n            this.selectAppointmentElementFromWorkCell(isReverse, target);\n            e.preventDefault();\n            return;\n        }\n        if (target && !target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.processTabOnResourceCells(target, isReverse);\n        }\n    };\n    KeyboardInteraction.prototype.processDelete = function (e) {\n        var activeEle = document.activeElement;\n        if (this.parent.currentView === 'MonthAgenda') {\n            var selectedEle = this.parent.eventBase.getSelectedEvents().element;\n            activeEle = ((selectedEle && isNullOrUndefined(selectedEle.length)) ? selectedEle : selectedEle[0]);\n        }\n        if (activeEle && activeEle.classList.contains(cls.APPOINTMENT_CLASS)) {\n            addClass([activeEle], cls.APPOINTMENT_BORDER);\n            this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n            if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(cls.READ_ONLY) ||\n                !this.parent.eventSettings.allowDeleting) {\n                return;\n            }\n            this.parent.quickPopup.deleteClick(e);\n        }\n    };\n    KeyboardInteraction.prototype.processCtrlShiftNavigationArrows = function (e) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var groupIndex = parseInt(document.activeElement.getAttribute('data-group-index'), 10);\n            var index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? groupIndex - 1 : groupIndex + 1;\n            index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ?\n                this.parent.resourceBase.lastResourceLevel.length : index;\n            var eventEle = [];\n            while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {\n                eventEle = [].slice.call(this.parent.element.querySelectorAll(\".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\"));\n                index = (e.action === 'ctrlShiftLeftArrow' || e.action === 'ctrlShiftUpArrow') ? index - 1 : index + 1;\n            }\n            var nextAppEle = eventEle[0];\n            if (nextAppEle) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                this.parent.eventBase.addSelectedAppointments([nextAppEle], true);\n                nextAppEle.focus();\n            }\n        }\n        else if (this.parent.activeViewOptions.group.resources.length > 0 &&\n            !document.activeElement.classList.contains(cls.APPOINTMENT_CLASS)) {\n            var index = this.parent.resourceBase.renderedResources[0].groupIndex;\n            var appSelector = \".\" + cls.APPOINTMENT_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\";\n            var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));\n            if (appElements.length > 0) {\n                this.parent.eventBase.removeSelectedAppointmentClass();\n                var focusAppointment = appElements[0];\n                this.parent.eventBase.addSelectedAppointments([focusAppointment], true);\n                focusAppointment.focus();\n                e.preventDefault();\n            }\n        }\n    };\n    KeyboardInteraction.prototype.processEscape = function (event) {\n        this.parent.quickPopup.onClosePopup(event);\n        this.parent.quickPopup.morePopup.hide();\n        if (this.parent.headerModule) {\n            this.parent.headerModule.hideHeaderPopup();\n        }\n        if (this.parent.inlineModule) {\n            this.parent.inlineModule.removeInlineAppointmentElement();\n        }\n    };\n    KeyboardInteraction.prototype.isPreventAction = function (e) {\n        var target = closest(e.target, '.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    KeyboardInteraction.prototype.processTabOnResourceCells = function (target, isReverse) {\n        var tabElements = [].slice.call(this.parent.element.querySelectorAll('[tabIndex=\"0\"]'));\n        var currentTabIndex = tabElements.indexOf(target);\n        var nextTabElement = !isReverse ? tabElements[currentTabIndex + 1] : tabElements[currentTabIndex - 1];\n        if (nextTabElement && nextTabElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            var groupIndex = parseInt(nextTabElement.getAttribute('data-group-index'), 10);\n            if (this.parent.virtualScrollModule) {\n                var resColWrap_1 = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n                resCells.forEach(function (element) {\n                    if (element.getBoundingClientRect().top < resColWrap_1.getBoundingClientRect().top) {\n                        element.setAttribute('tabindex', '-1');\n                    }\n                });\n            }\n            else {\n                this.setScrollPosition(groupIndex);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.setScrollPosition = function (index) {\n        var workCell = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n        if (workCell) {\n            this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).scrollTop = workCell.offsetTop;\n        }\n    };\n    KeyboardInteraction.prototype.createClipboardElement = function () {\n        if (!this.parent.allowClipboard) {\n            return;\n        }\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: cls.CLIPBOARD_CLASS,\n            attrs: {\n                tabindex: '-1'\n            }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    KeyboardInteraction.prototype.setCopy = function (copiedEventData, e) {\n        var _this = this;\n        if (window.getSelection().toString() !== '') {\n            return;\n        }\n        this.clipBoardTextArea.value = '';\n        var eventDetails = { elements: [], eventDatas: [] };\n        if (copiedEventData) {\n            var filteredContent = this.filterReadOnlyEvent(copiedEventData);\n            eventDetails.eventDatas = filteredContent;\n        }\n        else {\n            if (!this.parent || !this.parent.eventBase) {\n                return;\n            }\n            var selectedEvents = this.parent.eventBase.getSelectedEvents();\n            selectedEvents.event = selectedEvents && selectedEvents.event ? Array.isArray(selectedEvents.event)\n                ? this.filterReadOnlyEvent(selectedEvents.event) :\n                this.filterReadOnlyEvent([selectedEvents.event]) : undefined;\n            if (selectedEvents.element && selectedEvents.event) {\n                eventDetails = {\n                    elements: selectedEvents.element,\n                    eventDatas: selectedEvents.event\n                };\n            }\n            else {\n                eventDetails.element = [e.target];\n                eventDetails.eventDatas = [this.parent.getEventDetails(e.target)];\n            }\n        }\n        this.clipBoardTextArea.value = JSON.stringify(eventDetails.eventDatas, undefined, 2);\n        if (!/ipad|ipod|iphone/i.test(Browser.userAgent)) {\n            this.clipBoardTextArea.select();\n        }\n        else {\n            this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n        }\n        if (!isNullOrUndefined(navigator.clipboard)) {\n            navigator.clipboard.writeText(this.clipBoardTextArea.value)\n                .then(function () {\n                _this.clipBoardTextArea.blur();\n                window.getSelection().removeAllRanges();\n                if (e) {\n                    var closestAppointment = e.target.closest('.' + cls.APPOINTMENT_CLASS);\n                    if (closestAppointment) {\n                        closestAppointment.focus();\n                    }\n                }\n            })\n                .catch(function (err) {\n                throw err;\n            });\n        }\n    };\n    KeyboardInteraction.prototype.filterReadOnlyEvent = function (args) {\n        var _this = this;\n        return args.filter(function (event) { return !event[_this.parent.eventFields.isReadonly]; });\n    };\n    KeyboardInteraction.prototype.processClipboardAction = function (isCut, copiedEventData, e) {\n        if (!this.parent.allowClipboard) {\n            return;\n        }\n        this.isCutAction = isCut;\n        this.isCutContentPasted = false;\n        this.parent.closeQuickInfoPopup();\n        this.setCopy(copiedEventData ? copiedEventData : undefined, e);\n    };\n    KeyboardInteraction.prototype.pasteHandler = function (clipboardEvent, targetElement) {\n        var _this = this;\n        if (!this.parent.allowClipboard || this.isCutContentPasted) {\n            return;\n        }\n        var target = this.parent.getSelectedCells().length > 0\n            ? this.parent.getSelectedCells()\n            : (targetElement ? [targetElement] : []);\n        if (target.length === 0 || this.parent.eventWindow.dialogObject.visible ||\n            this.parent.quickPopup.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            return;\n        }\n        var clipboardData = clipboardEvent.clipboardData || clipboardEvent.event.clipboardData\n            || window.clipboardData;\n        var pastedData = clipboardData.getData('text');\n        if (pastedData === '[]' || pastedData === '') {\n            return;\n        }\n        var parsedData;\n        try {\n            parsedData = JSON.parse(pastedData);\n        }\n        catch (_a) {\n            parsedData = pastedData;\n        }\n        var args = { cancel: false, data: parsedData, element: target };\n        this.parent.trigger(event.beforePaste, args, function (pasteEventArgs) {\n            if (!pasteEventArgs.cancel) {\n                if (!Array.isArray(pasteEventArgs.data) || !pasteEventArgs.data.every(function (item) { return typeof item === 'object'; })) {\n                    _this.clipBoardTextArea.value = '';\n                    return;\n                }\n                _this.processPaste(pasteEventArgs.data, targetElement);\n                if (_this.isCutAction) {\n                    _this.isCutContentPasted = true;\n                }\n            }\n            else {\n                _this.parent.closeQuickInfoPopup();\n                return;\n            }\n        });\n    };\n    KeyboardInteraction.prototype.processPaste = function (data, targetElement) {\n        if (!this.parent || !this.parent.eventWindow || !this.parent.eventBase || !data || !data.length) {\n            return;\n        }\n        var target = this.getTargetElements(targetElement);\n        var cellDetails = this.parent.getCellDetails(target);\n        var eventDetails = {};\n        this.parent.eventWindow.convertToEventData(cellDetails, eventDetails);\n        var isAllDay = this.isAllDayEvent(target);\n        var resources = this.parent.getResourcesByIndex(cellDetails.groupIndex);\n        var processedData = this.processEventData(data, isAllDay, cellDetails, resources);\n        var selectedEventData = this.parent.eventBase.sortByDateTime(processedData);\n        var saveData = this.prepareEventData(selectedEventData, eventDetails);\n        removeClass(target, cls.SELECTED_CELL_CLASS);\n        if (saveData.length > 0) {\n            if (this.isCutAction) {\n                this.parent.saveEvent(saveData);\n            }\n            else {\n                this.parent.addEvent(saveData);\n            }\n        }\n    };\n    KeyboardInteraction.prototype.getTargetElements = function (targetElement) {\n        return this.parent.getSelectedCells().length > 0\n            ? this.parent.getSelectedCells()\n            : (targetElement ? [targetElement] : []);\n    };\n    KeyboardInteraction.prototype.isAllDayEvent = function (target) {\n        return !target.some(function (cell) { return cell.classList.contains(cls.WORK_CELLS_CLASS); });\n    };\n    KeyboardInteraction.prototype.processEventData = function (data, isAllDay, cellDetails, resources) {\n        var _this = this;\n        return data.map(function (item) {\n            var _a;\n            var processedItem = __assign({}, item, (_a = {}, _a[_this.parent.eventFields.startTime] = new Date(item[_this.parent.eventFields.startTime]), _a[_this.parent.eventFields.endTime] = new Date(item[_this.parent.eventFields.endTime]), _a[_this.parent.eventFields.recurrenceID] = null, _a[_this.parent.eventFields.isAllDay] = isAllDay, _a));\n            _this.adjustEventTime(processedItem, isAllDay, item.IsAllDay, cellDetails);\n            if (resources && resources.groupData) {\n                Object.assign(processedItem, resources.groupData);\n            }\n            return processedItem;\n        });\n    };\n    KeyboardInteraction.prototype.adjustEventTime = function (processedItem, isAllDay, itemIsAllDay, cellDetails) {\n        var isTimeScaleEnabled = this.parent.activeViewOptions.timeScale.enable;\n        if ((['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) && isTimeScaleEnabled) {\n            if (isAllDay) {\n                processedItem[this.parent.eventFields.endTime] = new Date(processedItem[this.parent.eventFields.startTime]);\n                processedItem[this.parent.eventFields.endTime].setDate(processedItem[this.parent.eventFields.startTime].getDate() + 1);\n            }\n            else if (itemIsAllDay) {\n                processedItem[this.parent.eventFields.startTime] = new Date(processedItem[this.parent.eventFields.startTime]\n                    .setHours(0, 0, 0, 0));\n                processedItem[this.parent.eventFields.endTime] = new Date(processedItem[this.parent.eventFields.startTime].getTime() + (cellDetails.endTime.getTime() - cellDetails.startTime.getTime()));\n            }\n        }\n        else if (itemIsAllDay) {\n            processedItem[this.parent.eventFields.isAllDay] = true;\n            processedItem[this.parent.eventFields.startTime] = new Date(processedItem[this.parent.eventFields.startTime]\n                .setHours(0, 0, 0, 0));\n            processedItem[this.parent.eventFields.endTime] = new Date(processedItem[this.parent.eventFields.startTime].getTime() +\n                (processedItem[this.parent.eventFields.endTime].getTime() - processedItem[this.parent.eventFields.startTime].getTime()));\n        }\n    };\n    KeyboardInteraction.prototype.prepareEventData = function (selectedEventData, eventDetails) {\n        var _this = this;\n        var initialEventTime = new Date(selectedEventData[0][this.parent.eventFields.startTime]);\n        var uniqueId = this.parent.getEventMaxID();\n        return selectedEventData.map(function (events) {\n            var totalDuration = _this.calculateTotalDuration(events, eventDetails, initialEventTime);\n            var cloneDetails = _this.isCutAction ? events : __assign({}, events);\n            if (!events[_this.parent.eventFields.recurrenceRule]) {\n                cloneDetails[_this.parent.eventFields.startTime] =\n                    new Date(new Date(cloneDetails[_this.parent.eventFields.startTime]).setMilliseconds(totalDuration));\n                cloneDetails[_this.parent.eventFields.endTime] =\n                    new Date(new Date(cloneDetails[_this.parent.eventFields.endTime]).setMilliseconds(totalDuration));\n            }\n            if (!_this.isCutAction) {\n                cloneDetails[_this.parent.eventFields.id] = uniqueId++;\n            }\n            return cloneDetails;\n        });\n    };\n    KeyboardInteraction.prototype.calculateTotalDuration = function (events, eventDetails, initialEventTime) {\n        if ((['Month', 'TimelineMonth', 'TimelineYear'].indexOf(this.parent.currentView) !== -1) || !this.parent.activeViewOptions.timeScale.enable) {\n            var eventStartTime = new Date(events[this.parent.eventFields.startTime]);\n            return eventDetails[this.parent.eventFields.startTime].getTime() - initialEventTime.getTime() +\n                (eventStartTime.getHours() * 3600000 + eventStartTime.getMinutes() * 60000 + eventStartTime.getSeconds() * 1000);\n        }\n        else {\n            return eventDetails[this.parent.eventFields.startTime].getTime() - initialEventTime.getTime();\n        }\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    KeyboardInteraction.prototype.getModuleName = function () {\n        return 'keyboard';\n    };\n    /**\n     * To destroy the keyboard module.\n     *\n     * @returns {void}\n     * @private\n     */\n    KeyboardInteraction.prototype.destroy = function () {\n        this.removeEventListener();\n        this.selectedCells = [];\n        this.clipBoardTextArea = null;\n        this.keyboardModule.destroy();\n    };\n    return KeyboardInteraction;\n}());\nexport { KeyboardInteraction };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * data module is used to generate query and data source.\n *\n * @private\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module\n     *\n     * @param {Schedule} parent Accepts the schedule element instance\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @private\n     */\n    function Data(parent, dataSource, query) {\n        this.parent = parent;\n        this.initDataManager(dataSource, query);\n    }\n    /**\n     * The function used to initialize dataManager and query\n     *\n     * @param {Object | DataManager} dataSource Accepts the datasource as JSON objects or DataManager\n     * @param {Query} query Accepts the query to process the data\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.initDataManager = function (dataSource, query) {\n        this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);\n        this.query = query instanceof Query ? query : new Query();\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.generateQuery = function (startDate, endDate) {\n        var query = this.query.clone();\n        if (this.parent && startDate && endDate) {\n            if (this.parent.activeViewOptions && this.parent.activeViewOptions.enableLazyLoading &&\n                !isNullOrUndefined(this.parent.activeViewOptions.group.resources) &&\n                this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase &&\n                this.parent.resourceBase.resourceCollection.length > 0 && this.parent.resourceBase.renderedResources.length > 0) {\n                var resIdCollection_1 = [];\n                this.parent.resourceBase.resourceCollection.forEach(function () { return resIdCollection_1.push([]); });\n                this.parent.resourceBase.renderedResources.forEach(function (resource) {\n                    resIdCollection_1.forEach(function (resId, index) {\n                        var groupId = resource.groupOrder[parseInt(index.toString(), 10)];\n                        if (groupId && resId.indexOf(groupId) < 0) {\n                            resId.push(groupId);\n                        }\n                    });\n                });\n                this.parent.resourceBase.resourceCollection.forEach(function (resource, index) {\n                    query.addParams(resource.field, resIdCollection_1[parseInt(index.toString(), 10)].toString());\n                });\n            }\n            if (this.parent.timezone) {\n                startDate = this.parent.tzModule.remove(new Date(+startDate.getTime()), this.parent.timezone);\n                endDate = this.parent.tzModule.remove(new Date(+endDate.getTime()), this.parent.timezone);\n            }\n            if (this.parent.eventSettings.includeFiltersInQuery) {\n                var dateQuery = this.getStartEndQuery(startDate, endDate);\n                var recurrenceQuery = new Predicate(this.parent.eventFields.recurrenceRule, 'notequal', null).and(new Predicate(this.parent.eventFields.recurrenceRule, 'notequal', ''));\n                return query.where(dateQuery.or(recurrenceQuery));\n            }\n            query.addParams('StartDate', startDate.toISOString());\n            query.addParams('EndDate', endDate.toISOString());\n        }\n        return query;\n    };\n    /**\n     * The function used to generate updated Query from schedule model\n     *\n     * @param {Date} startDate Accepts the start date\n     * @param {Date} endDate Accepts the end date\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getStartEndQuery = function (startDate, endDate) {\n        var fieldMapping = this.parent.eventFields;\n        var dateQuery = new Predicate(fieldMapping.startTime, 'greaterthanorequal', startDate)\n            .and(new Predicate(fieldMapping.endTime, 'greaterthanorequal', startDate))\n            .and(new Predicate(fieldMapping.startTime, 'lessthan', endDate))\n            .or(new Predicate(fieldMapping.startTime, 'lessthanorequal', startDate)\n            .and(new Predicate(fieldMapping.endTime, 'greaterthan', startDate)));\n        return dateQuery;\n    };\n    /**\n     * The function used to get dataSource by executing given Query\n     *\n     * @param  {Query} query - A Query that specifies to generate dataSource\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.getData = function (query) {\n        return this.dataManager.executeQuery(query);\n    };\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n    Data.prototype.destroy = function () {\n        this.dataManager = null;\n        this.query = null;\n    };\n    return Data;\n}());\nexport { Data };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { HijriParser, isNullOrUndefined } from '@syncfusion/ej2-base';\n/** @private */\nvar Gregorian = /** @class */ (function () {\n    function Gregorian() {\n    }\n    Gregorian.prototype.firstDateOfMonth = function (date) {\n        return new Date(date.getFullYear(), date.getMonth());\n    };\n    Gregorian.prototype.lastDateOfMonth = function (dt) {\n        return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);\n    };\n    Gregorian.prototype.isMonthStart = function (date) {\n        return (date.getDate() === 1);\n    };\n    Gregorian.prototype.getLeapYearDaysCount = function () {\n        return 366;\n    };\n    Gregorian.prototype.getYearDaysCount = function (date, interval) {\n        return ((date.getFullYear() + interval) % 4 === 0) ? 366 : 365;\n    };\n    Gregorian.prototype.getDate = function (date) {\n        return date.getDate();\n    };\n    Gregorian.prototype.getMonth = function (date) {\n        return (date.getMonth() + 1);\n    };\n    Gregorian.prototype.getFullYear = function (date) {\n        return date.getFullYear();\n    };\n    Gregorian.prototype.getYearLastDate = function (date, interval) {\n        return new Date(date.getFullYear() + interval, 0, 0);\n    };\n    Gregorian.prototype.getMonthDaysCount = function (date) {\n        return this.lastDateOfMonth(date).getDate();\n    };\n    Gregorian.prototype.getMonthStartDate = function (date) {\n        return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());\n    };\n    Gregorian.prototype.getMonthEndDate = function (date) {\n        date.setDate(1);\n        return new Date(date.setMonth(date.getMonth() + 1));\n    };\n    Gregorian.prototype.getExpectedDays = function (date, days) {\n        return days;\n    };\n    Gregorian.prototype.setDate = function (dateObj, date) {\n        dateObj.setDate(date);\n    };\n    Gregorian.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        if (!isNullOrUndefined(beginDate)) {\n            date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);\n        }\n        else {\n            date.setMonth(date.getMonth() + interval, startDate);\n        }\n    };\n    Gregorian.prototype.setMonth = function (date, interval, startDate) {\n        date.setDate(1);\n        date.setFullYear(date.getFullYear());\n        date.setMonth(interval - 1);\n        var maxDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n        date.setDate(Math.min(startDate, maxDay));\n    };\n    Gregorian.prototype.addYears = function (date, interval) {\n        date.setFullYear(date.getFullYear() + interval);\n    };\n    Gregorian.prototype.isSameMonth = function (date1, date2) {\n        return (date1.getMonth() === date2.getMonth());\n    };\n    Gregorian.prototype.checkMonth = function (date, months) {\n        return (months.indexOf(date.getMonth() + 1) === -1);\n    };\n    Gregorian.prototype.compareMonth = function (date1, date2) {\n        return (date1.getMonth() > date2.getMonth());\n    };\n    Gregorian.prototype.isSameYear = function (date1, date2) {\n        return (date1.getFullYear() === date2.getFullYear());\n    };\n    Gregorian.prototype.isLastMonth = function (date) {\n        return (date.getMonth() === 11);\n    };\n    Gregorian.prototype.isLeapYear = function (year, interval) {\n        return ((year + interval) % 4 === 0);\n    };\n    return Gregorian;\n}());\nexport { Gregorian };\n/** @private */\nvar Islamic = /** @class */ (function () {\n    function Islamic() {\n    }\n    Islamic.prototype.firstDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);\n        return gDate;\n    };\n    Islamic.prototype.lastDateOfMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        var daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);\n        var finalGDate = new Date(gDate.getTime());\n        finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));\n        var finalHDate = this.getHijriDate(finalGDate);\n        if (hDate.month === finalHDate.month) {\n            return finalGDate;\n        }\n        finalHDate = this.getHijriDate(gDate);\n        if (hDate.month === finalHDate.month) {\n            return gDate;\n        }\n        return new Date(gDate.setDate(gDate.getDate() - 1));\n    };\n    Islamic.prototype.isMonthStart = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return (hijriDate.date === 1);\n    };\n    Islamic.prototype.getLeapYearDaysCount = function () {\n        return 355;\n    };\n    Islamic.prototype.getYearDaysCount = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        return this.isLeapYear(hDate.year, interval) ? 355 : 354;\n    };\n    Islamic.prototype.getDate = function (date) {\n        var hijriDate = this.getHijriDate(date);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.month;\n    };\n    Islamic.prototype.getFullYear = function (date) {\n        var hDate = this.getHijriDate(date);\n        return hDate.year;\n    };\n    Islamic.prototype.getYearLastDate = function (date, interval) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);\n        return gDate;\n    };\n    Islamic.prototype.getMonthDaysCount = function (date) {\n        var maxDate = this.lastDateOfMonth(date);\n        var hijriDate = this.getHijriDate(maxDate);\n        return hijriDate.date;\n    };\n    Islamic.prototype.getMonthStartDate = function (date) {\n        var firstDate = this.firstDateOfMonth(date);\n        return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());\n    };\n    Islamic.prototype.getMonthEndDate = function (date) {\n        var lastDate = this.lastDateOfMonth(date);\n        lastDate.setDate(lastDate.getDate() + 1);\n        return new Date(lastDate.setMonth(lastDate.getMonth()));\n    };\n    Islamic.prototype.getExpectedDays = function (date, days) {\n        var hDate = this.getHijriDate(date);\n        var day = [];\n        for (var i = 0; i < days.length; i++) {\n            var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[parseInt(i.toString(), 10)]);\n            day.push(gDate.getDate());\n        }\n        return day;\n    };\n    Islamic.prototype.setDate = function (dateObj, date) {\n        var hDate = this.getHijriDate(dateObj);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);\n        this.updateDateObj(dateObj, gDate);\n    };\n    Islamic.prototype.setValidDate = function (date, interval, startDate, monthValue, beginDate) {\n        var firstDate = (!isNullOrUndefined(beginDate)) ? this.firstDateOfMonth(beginDate) : date;\n        var hDate = this.getHijriDate(firstDate);\n        var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.setMonth = function (date, interval, startDate) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.addYears = function (date, interval, monthValue) {\n        var hDate = this.getHijriDate(date);\n        var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);\n        this.updateDateObj(date, gDate);\n    };\n    Islamic.prototype.isSameMonth = function (date1, date2) {\n        var currentHijri = this.getHijriDate(date1);\n        var tempHijri = this.getHijriDate(date2);\n        return (currentHijri.month === tempHijri.month);\n    };\n    Islamic.prototype.checkMonth = function (date, months) {\n        var hDate = this.getHijriDate(date);\n        return (months.indexOf(hDate.month) === -1);\n    };\n    Islamic.prototype.compareMonth = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.month > hDate1.month);\n    };\n    Islamic.prototype.isSameYear = function (date1, date2) {\n        var hDate = this.getHijriDate(date1);\n        var hDate1 = this.getHijriDate(date2);\n        return (hDate.year === hDate1.year);\n    };\n    Islamic.prototype.isLastMonth = function (date) {\n        var hDate = this.getHijriDate(date);\n        return (hDate.month === 12);\n    };\n    Islamic.prototype.updateDateObj = function (date, gDate) {\n        date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());\n    };\n    Islamic.prototype.isLeapYear = function (year, interval) {\n        return (14 + 11 * (year + interval)) % 30 < 11;\n    };\n    Islamic.prototype.getDaysInMonth = function (month, year) {\n        var length = 0;\n        length = 29 + ((month + 1) % 2);\n        if (month === 11 && this.isLeapYear(year, 0)) {\n            length++;\n        }\n        return length;\n    };\n    Islamic.prototype.getHijriDate = function (date) {\n        return HijriParser.getHijriDate(date);\n    };\n    return Islamic;\n}());\nexport { Islamic };\n","/**\n * Time zone\n */\nvar Timezone = /** @class */ (function () {\n    function Timezone() {\n        this.timezoneData = [];\n        this.timezoneData = this.getTimezoneData();\n    }\n    Timezone.prototype.offset = function (date, timezone) {\n        var localOffset = date.getTimezoneOffset();\n        try {\n            var convertedDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\n            if (!isNaN(convertedDate.getTime())) {\n                return ((date.getTime() - convertedDate.getTime()) / 60000) + localOffset;\n            }\n            return 0;\n        }\n        catch (error) {\n            return 0;\n        }\n    };\n    Timezone.prototype.convert = function (date, fromOffset, toOffset) {\n        if (typeof fromOffset === 'string') {\n            fromOffset = this.offset(date, fromOffset);\n        }\n        if (typeof toOffset === 'string') {\n            toOffset = this.offset(date, toOffset);\n        }\n        var fromLocalOffset = date.getTimezoneOffset();\n        date = new Date(date.getTime() + (fromOffset - toOffset) * 60000);\n        var toLocalOffset = date.getTimezoneOffset();\n        return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 60000);\n    };\n    Timezone.prototype.add = function (date, timezone) {\n        return this.convert(date, date.getTimezoneOffset(), timezone);\n    };\n    Timezone.prototype.remove = function (date, timezone) {\n        return this.convert(date, timezone, date.getTimezoneOffset());\n    };\n    Timezone.prototype.removeLocalOffset = function (date) {\n        return new Date(date.getTime() - (date.getTimezoneOffset() * 60000));\n    };\n    Timezone.prototype.getLocalTimezoneName = function () {\n        return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC' : 'UTC';\n    };\n    Timezone.prototype.getTimezoneData = function () {\n        return timezoneData;\n    };\n    return Timezone;\n}());\nexport { Timezone };\nexport var timezoneData = [\n    { Value: 'Pacific/Niue', Text: '(UTC-11:00) Niue' },\n    { Value: 'Pacific/Pago_Pago', Text: '(UTC-11:00) Pago Pago' },\n    { Value: 'Pacific/Honolulu', Text: '(UTC-10:00) Hawaii Time' },\n    { Value: 'Pacific/Rarotonga', Text: '(UTC-10:00) Rarotonga' },\n    { Value: 'Pacific/Tahiti', Text: '(UTC-10:00) Tahiti' },\n    { Value: 'Pacific/Marquesas', Text: '(UTC-09:30) Marquesas' },\n    { Value: 'America/Anchorage', Text: '(UTC-09:00) Alaska Time' },\n    { Value: 'Pacific/Gambier', Text: '(UTC-09:00) Gambier' },\n    { Value: 'America/Los_Angeles', Text: '(UTC-08:00) Pacific Time' },\n    { Value: 'America/Tijuana', Text: '(UTC-08:00) Pacific Time - Tijuana' },\n    { Value: 'America/Vancouver', Text: '(UTC-08:00) Pacific Time - Vancouver' },\n    { Value: 'America/Whitehorse', Text: '(UTC-08:00) Pacific Time - Whitehorse' },\n    { Value: 'Pacific/Pitcairn', Text: '(UTC-08:00) Pitcairn' },\n    { Value: 'America/Denver', Text: '(UTC-07:00) Mountain Time' },\n    { Value: 'America/Phoenix', Text: '(UTC-07:00) Mountain Time - Arizona' },\n    { Value: 'America/Mazatlan', Text: '(UTC-07:00) Mountain Time - Chihuahua, Mazatlan' },\n    { Value: 'America/Dawson_Creek', Text: '(UTC-07:00) Mountain Time - Dawson Creek' },\n    { Value: 'America/Edmonton', Text: '(UTC-07:00) Mountain Time - Edmonton' },\n    { Value: 'America/Hermosillo', Text: '(UTC-07:00) Mountain Time - Hermosillo' },\n    { Value: 'America/Yellowknife', Text: '(UTC-07:00) Mountain Time - Yellowknife' },\n    { Value: 'America/Belize', Text: '(UTC-06:00) Belize' },\n    { Value: 'America/Chicago', Text: '(UTC-06:00) Central Time' },\n    { Value: 'America/Mexico_City', Text: '(UTC-06:00) Central Time - Mexico City' },\n    { Value: 'America/Regina', Text: '(UTC-06:00) Central Time - Regina' },\n    { Value: 'America/Tegucigalpa', Text: '(UTC-06:00) Central Time - Tegucigalpa' },\n    { Value: 'America/Winnipeg', Text: '(UTC-06:00) Central Time - Winnipeg' },\n    { Value: 'America/Costa_Rica', Text: '(UTC-06:00) Costa Rica' },\n    { Value: 'America/El_Salvador', Text: '(UTC-06:00) El Salvador' },\n    { Value: 'Pacific/Galapagos', Text: '(UTC-06:00) Galapagos' },\n    { Value: 'America/Guatemala', Text: '(UTC-06:00) Guatemala' },\n    { Value: 'America/Managua', Text: '(UTC-06:00) Managua' },\n    { Value: 'America/Cancun', Text: '(UTC-05:00) America Cancun' },\n    { Value: 'America/Bogota', Text: '(UTC-05:00) Bogota' },\n    { Value: 'Pacific/Easter', Text: '(UTC-05:00) Easter Island' },\n    { Value: 'America/New_York', Text: '(UTC-05:00) Eastern Time' },\n    { Value: 'America/Iqaluit', Text: '(UTC-05:00) Eastern Time - Iqaluit' },\n    { Value: 'America/Toronto', Text: '(UTC-05:00) Eastern Time - Toronto' },\n    { Value: 'America/Guayaquil', Text: '(UTC-05:00) Guayaquil' },\n    { Value: 'America/Havana', Text: '(UTC-05:00) Havana' },\n    { Value: 'America/Jamaica', Text: '(UTC-05:00) Jamaica' },\n    { Value: 'America/Lima', Text: '(UTC-05:00) Lima' },\n    { Value: 'America/Nassau', Text: '(UTC-05:00) Nassau' },\n    { Value: 'America/Panama', Text: '(UTC-05:00) Panama' },\n    { Value: 'America/Port-au-Prince', Text: '(UTC-05:00) Port-au-Prince' },\n    { Value: 'America/Rio_Branco', Text: '(UTC-05:00) Rio Branco' },\n    { Value: 'America/Halifax', Text: '(UTC-04:00) Atlantic Time - Halifax' },\n    { Value: 'America/Barbados', Text: '(UTC-04:00) Barbados' },\n    { Value: 'Atlantic/Bermuda', Text: '(UTC-04:00) Bermuda' },\n    { Value: 'America/Boa_Vista', Text: '(UTC-04:00) Boa Vista' },\n    { Value: 'America/Caracas', Text: '(UTC-04:00) Caracas' },\n    { Value: 'America/Curacao', Text: '(UTC-04:00) Curacao' },\n    { Value: 'America/Grand_Turk', Text: '(UTC-04:00) Grand Turk' },\n    { Value: 'America/Guyana', Text: '(UTC-04:00) Guyana' },\n    { Value: 'America/La_Paz', Text: '(UTC-04:00) La Paz' },\n    { Value: 'America/Manaus', Text: '(UTC-04:00) Manaus' },\n    { Value: 'America/Martinique', Text: '(UTC-04:00) Martinique' },\n    { Value: 'America/Port_of_Spain', Text: '(UTC-04:00) Port of Spain' },\n    { Value: 'America/Porto_Velho', Text: '(UTC-04:00) Porto Velho' },\n    { Value: 'America/Puerto_Rico', Text: '(UTC-04:00) Puerto Rico' },\n    { Value: 'America/Santo_Domingo', Text: '(UTC-04:00) Santo Domingo' },\n    { Value: 'America/Thule', Text: '(UTC-04:00) Thule' },\n    { Value: 'America/St_Johns', Text: '(UTC-03:30) Newfoundland Time - St. Johns' },\n    { Value: 'America/Araguaina', Text: '(UTC-03:00) Araguaina' },\n    { Value: 'America/Asuncion', Text: '(UTC-03:00) Asuncion' },\n    { Value: 'America/Belem', Text: '(UTC-03:00) Belem' },\n    { Value: 'America/Argentina/Buenos_Aires', Text: '(UTC-03:00) Buenos Aires' },\n    { Value: 'America/Campo_Grande', Text: '(UTC-03:00) Campo Grande' },\n    { Value: 'America/Cayenne', Text: '(UTC-03:00) Cayenne' },\n    { Value: 'America/Cuiaba', Text: '(UTC-03:00) Cuiaba' },\n    { Value: 'America/Fortaleza', Text: '(UTC-03:00) Fortaleza' },\n    { Value: 'America/Godthab', Text: '(UTC-03:00) Godthab' },\n    { Value: 'America/Maceio', Text: '(UTC-03:00) Maceio' },\n    { Value: 'America/Miquelon', Text: '(UTC-03:00) Miquelon' },\n    { Value: 'America/Montevideo', Text: '(UTC-03:00) Montevideo' },\n    { Value: 'Antarctica/Palmer', Text: '(UTC-03:00) Palmer' },\n    { Value: 'America/Paramaribo', Text: '(UTC-03:00) Paramaribo' },\n    { Value: 'America/Punta_Arenas', Text: '(UTC-03:00) Punta Arenas' },\n    { Value: 'America/Recife', Text: '(UTC-03:00) Recife' },\n    { Value: 'Antarctica/Rothera', Text: '(UTC-03:00) Rothera' },\n    { Value: 'America/Bahia', Text: '(UTC-03:00) Salvador' },\n    { Value: 'America/Santiago', Text: '(UTC-03:00) Santiago' },\n    { Value: 'Atlantic/Stanley', Text: '(UTC-03:00) Stanley' },\n    { Value: 'America/Noronha', Text: '(UTC-02:00) Noronha' },\n    { Value: 'America/Sao_Paulo', Text: '(UTC-02:00) Sao Paulo' },\n    { Value: 'Atlantic/South_Georgia', Text: '(UTC-02:00) South Georgia' },\n    { Value: 'Atlantic/Azores', Text: '(UTC-01:00) Azores' },\n    { Value: 'Atlantic/Cape_Verde', Text: '(UTC-01:00) Cape Verde' },\n    { Value: 'America/Scoresbysund', Text: '(UTC-01:00) Scoresbysund' },\n    { Value: 'Africa/Abidjan', Text: '(UTC+00:00) Abidjan' },\n    { Value: 'Africa/Accra', Text: '(UTC+00:00) Accra' },\n    { Value: 'Africa/Bissau', Text: '(UTC+00:00) Bissau' },\n    { Value: 'Atlantic/Canary', Text: '(UTC+00:00) Canary Islands' },\n    { Value: 'Africa/Casablanca', Text: '(UTC+00:00) Casablanca' },\n    { Value: 'America/Danmarkshavn', Text: '(UTC+00:00) Danmarkshavn' },\n    { Value: 'Europe/Dublin', Text: '(UTC+00:00) Dublin' },\n    { Value: 'Africa/El_Aaiun', Text: '(UTC+00:00) El Aaiun' },\n    { Value: 'Atlantic/Faroe', Text: '(UTC+00:00) Faeroe' },\n    { Value: 'Etc/UTC', Text: '(UTC+00:00) UTC (no daylight saving)' },\n    { Value: 'Europe/Lisbon', Text: '(UTC+00:00) Lisbon' },\n    { Value: 'Europe/London', Text: '(UTC+00:00) London' },\n    { Value: 'Africa/Monrovia', Text: '(UTC+00:00) Monrovia' },\n    { Value: 'Atlantic/Reykjavik', Text: '(UTC+00:00) Reykjavik' },\n    { Value: 'UTC', Text: 'UTC' },\n    { Value: 'Africa/Algiers', Text: '(UTC+01:00) Algiers' },\n    { Value: 'Europe/Amsterdam', Text: '(UTC+01:00) Amsterdam' },\n    { Value: 'Europe/Andorra', Text: '(UTC+01:00) Andorra' },\n    { Value: 'Europe/Berlin', Text: '(UTC+01:00) Berlin' },\n    { Value: 'Europe/Brussels', Text: '(UTC+01:00) Brussels' },\n    { Value: 'Europe/Budapest', Text: '(UTC+01:00) Budapest' },\n    { Value: 'Europe/Belgrade', Text: '(UTC+01:00) Central European Time - Belgrade' },\n    { Value: 'Europe/Prague', Text: '(UTC+01:00) Central European Time - Prague' },\n    { Value: 'Africa/Ceuta', Text: '(UTC+01:00) Ceuta' },\n    { Value: 'Europe/Copenhagen', Text: '(UTC+01:00) Copenhagen' },\n    { Value: 'Europe/Gibraltar', Text: '(UTC+01:00) Gibraltar' },\n    { Value: 'Africa/Lagos', Text: '(UTC+01:00) Lagos' },\n    { Value: 'Europe/Luxembourg', Text: '(UTC+01:00) Luxembourg' },\n    { Value: 'Europe/Madrid', Text: '(UTC+01:00) Madrid' },\n    { Value: 'Europe/Malta', Text: '(UTC+01:00) Malta' },\n    { Value: 'Europe/Monaco', Text: '(UTC+01:00) Monaco' },\n    { Value: 'Africa/Ndjamena', Text: '(UTC+01:00) Ndjamena' },\n    { Value: 'Europe/Oslo', Text: '(UTC+01:00) Oslo' },\n    { Value: 'Europe/Paris', Text: '(UTC+01:00) Paris' },\n    { Value: 'Europe/Rome', Text: '(UTC+01:00) Rome' },\n    { Value: 'Europe/Stockholm', Text: '(UTC+01:00) Stockholm' },\n    { Value: 'Europe/Tirane', Text: '(UTC+01:00) Tirane' },\n    { Value: 'Africa/Tunis', Text: '(UTC+01:00) Tunis' },\n    { Value: 'Europe/Vienna', Text: '(UTC+01:00) Vienna' },\n    { Value: 'Europe/Warsaw', Text: '(UTC+01:00) Warsaw' },\n    { Value: 'Europe/Zurich', Text: '(UTC+01:00) Zurich' },\n    { Value: 'Asia/Amman', Text: '(UTC+02:00) Amman' },\n    { Value: 'Europe/Athens', Text: '(UTC+02:00) Athens' },\n    { Value: 'Asia/Beirut', Text: '(UTC+02:00) Beirut' },\n    { Value: 'Europe/Bucharest', Text: '(UTC+02:00) Bucharest' },\n    { Value: 'Africa/Cairo', Text: '(UTC+02:00) Cairo' },\n    { Value: 'Europe/Chisinau', Text: '(UTC+02:00) Chisinau' },\n    { Value: 'Asia/Damascus', Text: '(UTC+02:00) Damascus' },\n    { Value: 'Asia/Gaza', Text: '(UTC+02:00) Gaza' },\n    { Value: 'Europe/Helsinki', Text: '(UTC+02:00) Helsinki' },\n    { Value: 'Asia/Jerusalem', Text: '(UTC+02:00) Jerusalem' },\n    { Value: 'Africa/Johannesburg', Text: '(UTC+02:00) Johannesburg' },\n    { Value: 'Africa/Khartoum', Text: '(UTC+02:00) Khartoum' },\n    { Value: 'Europe/Kiev', Text: '(UTC+02:00) Kiev' },\n    { Value: 'Africa/Maputo', Text: '(UTC+02:00) Maputo' },\n    { Value: 'Europe/Kaliningrad', Text: '(UTC+02:00) Moscow-01 - Kaliningrad' },\n    { Value: 'Asia/Nicosia', Text: '(UTC+02:00) Nicosia' },\n    { Value: 'Europe/Riga', Text: '(UTC+02:00) Riga' },\n    { Value: 'Europe/Sofia', Text: '(UTC+02:00) Sofia' },\n    { Value: 'Europe/Tallinn', Text: '(UTC+02:00) Tallinn' },\n    { Value: 'Africa/Tripoli', Text: '(UTC+02:00) Tripoli' },\n    { Value: 'Europe/Vilnius', Text: '(UTC+02:00) Vilnius' },\n    { Value: 'Africa/Windhoek', Text: '(UTC+02:00) Windhoek' },\n    { Value: 'Asia/Baghdad', Text: '(UTC+03:00) Baghdad' },\n    { Value: 'Europe/Istanbul', Text: '(UTC+03:00) Istanbul' },\n    { Value: 'Europe/Minsk', Text: '(UTC+03:00) Minsk' },\n    { Value: 'Europe/Moscow', Text: '(UTC+03:00) Moscow+00 - Moscow' },\n    { Value: 'Africa/Nairobi', Text: '(UTC+03:00) Nairobi' },\n    { Value: 'Asia/Qatar', Text: '(UTC+03:00) Qatar' },\n    { Value: 'Asia/Riyadh', Text: '(UTC+03:00) Riyadh' },\n    { Value: 'Antarctica/Syowa', Text: '(UTC+03:00) Syowa' },\n    { Value: 'Asia/Tehran', Text: '(UTC+03:30) Tehran' },\n    { Value: 'Asia/Baku', Text: '(UTC+04:00) Baku' },\n    { Value: 'Asia/Dubai', Text: '(UTC+04:00) Dubai' },\n    { Value: 'Indian/Mahe', Text: '(UTC+04:00) Mahe' },\n    { Value: 'Indian/Mauritius', Text: '(UTC+04:00) Mauritius' },\n    { Value: 'Europe/Samara', Text: '(UTC+04:00) Moscow+01 - Samara' },\n    { Value: 'Indian/Reunion', Text: '(UTC+04:00) Reunion' },\n    { Value: 'Asia/Tbilisi', Text: '(UTC+04:00) Tbilisi' },\n    { Value: 'Asia/Yerevan', Text: '(UTC+04:00) Yerevan' },\n    { Value: 'Asia/Kabul', Text: '(UTC+04:30) Kabul' },\n    { Value: 'Asia/Aqtau', Text: '(UTC+05:00) Aqtau' },\n    { Value: 'Asia/Aqtobe', Text: '(UTC+05:00) Aqtobe' },\n    { Value: 'Asia/Ashgabat', Text: '(UTC+05:00) Ashgabat' },\n    { Value: 'Asia/Dushanbe', Text: '(UTC+05:00) Dushanbe' },\n    { Value: 'Asia/Karachi', Text: '(UTC+05:00) Karachi' },\n    { Value: 'Indian/Kerguelen', Text: '(UTC+05:00) Kerguelen' },\n    { Value: 'Indian/Maldives', Text: '(UTC+05:00) Maldives' },\n    { Value: 'Antarctica/Mawson', Text: '(UTC+05:00) Mawson' },\n    { Value: 'Asia/Yekaterinburg', Text: '(UTC+05:00) Moscow+02 - Yekaterinburg' },\n    { Value: 'Asia/Tashkent', Text: '(UTC+05:00) Tashkent' },\n    { Value: 'Asia/Colombo', Text: '(UTC+05:30) Colombo' },\n    { Value: 'Asia/Kolkata', Text: '(UTC+05:30) India Standard Time' },\n    { Value: 'Asia/Katmandu', Text: '(UTC+05:45) Katmandu' },\n    { Value: 'Asia/Almaty', Text: '(UTC+06:00) Almaty' },\n    { Value: 'Asia/Bishkek', Text: '(UTC+06:00) Bishkek' },\n    { Value: 'Indian/Chagos', Text: '(UTC+06:00) Chagos' },\n    { Value: 'Asia/Dhaka', Text: '(UTC+06:00) Dhaka' },\n    { Value: 'Asia/Omsk', Text: '(UTC+06:00) Moscow+03 - Omsk' },\n    { Value: 'Asia/Thimphu', Text: '(UTC+06:00) Thimphu' },\n    { Value: 'Antarctica/Vostok', Text: '(UTC+06:00) Vostok' },\n    { Value: 'Indian/Cocos', Text: '(UTC+06:30) Cocos' },\n    { Value: 'Asia/Yangon', Text: '(UTC+06:30) Rangoon' },\n    { Value: 'Asia/Bangkok', Text: '(UTC+07:00) Bangkok' },\n    { Value: 'Indian/Christmas', Text: '(UTC+07:00) Christmas' },\n    { Value: 'Antarctica/Davis', Text: '(UTC+07:00) Davis' },\n    { Value: 'Asia/Saigon', Text: '(UTC+07:00) Hanoi' },\n    { Value: 'Asia/Hovd', Text: '(UTC+07:00) Hovd' },\n    { Value: 'Asia/Jakarta', Text: '(UTC+07:00) Jakarta' },\n    { Value: 'Asia/Krasnoyarsk', Text: '(UTC+07:00) Moscow+04 - Krasnoyarsk' },\n    { Value: 'Asia/Brunei', Text: '(UTC+08:00) Brunei' },\n    { Value: 'Asia/Shanghai', Text: '(UTC+08:00) China Time - Beijing' },\n    { Value: 'Asia/Choibalsan', Text: '(UTC+08:00) Choibalsan' },\n    { Value: 'Asia/Hong_Kong', Text: '(UTC+08:00) Hong Kong' },\n    { Value: 'Asia/Kuala_Lumpur', Text: '(UTC+08:00) Kuala Lumpur' },\n    { Value: 'Asia/Macau', Text: '(UTC+08:00) Macau' },\n    { Value: 'Asia/Makassar', Text: '(UTC+08:00) Makassar' },\n    { Value: 'Asia/Manila', Text: '(UTC+08:00) Manila' },\n    { Value: 'Asia/Irkutsk', Text: '(UTC+08:00) Moscow+05 - Irkutsk' },\n    { Value: 'Asia/Singapore', Text: '(UTC+08:00) Singapore' },\n    { Value: 'Asia/Taipei', Text: '(UTC+08:00) Taipei' },\n    { Value: 'Asia/Ulaanbaatar', Text: '(UTC+08:00) Ulaanbaatar' },\n    { Value: 'Australia/Perth', Text: '(UTC+08:00) Western Time - Perth' },\n    { Value: 'Asia/Pyongyang', Text: '(UTC+08:30) Pyongyang' },\n    { Value: 'Asia/Dili', Text: '(UTC+09:00) Dili' },\n    { Value: 'Asia/Jayapura', Text: '(UTC+09:00) Jayapura' },\n    { Value: 'Asia/Yakutsk', Text: '(UTC+09:00) Moscow+06 - Yakutsk' },\n    { Value: 'Pacific/Palau', Text: '(UTC+09:00) Palau' },\n    { Value: 'Asia/Seoul', Text: '(UTC+09:00) Seoul' },\n    { Value: 'Asia/Tokyo', Text: '(UTC+09:00) Tokyo' },\n    { Value: 'Australia/Darwin', Text: '(UTC+09:30) Central Time - Darwin' },\n    { Value: 'Antarctica/DumontDUrville', Text: '(UTC+10:00) Dumont D\"Urville' },\n    { Value: 'Australia/Brisbane', Text: '(UTC+10:00) Eastern Time - Brisbane' },\n    { Value: 'Pacific/Guam', Text: '(UTC+10:00) Guam' },\n    { Value: 'Asia/Vladivostok', Text: '(UTC+10:00) Moscow+07 - Vladivostok' },\n    { Value: 'Pacific/Port_Moresby', Text: '(UTC+10:00) Port Moresby' },\n    { Value: 'Pacific / Chuuk', Text: '(UTC+10:00) Truk' },\n    { Value: 'Australia/Adelaide', Text: '(UTC+10:30) Central Time - Adelaide' },\n    { Value: 'Antarctica/Casey', Text: '(UTC+11:00) Casey' },\n    { Value: 'Australia/Hobart', Text: '(UTC+11:00) Eastern Time - Hobart' },\n    { Value: 'Australia/Sydney', Text: '(UTC+11:00) Eastern Time - Melbourne, Sydney' },\n    { Value: 'Pacific/Efate', Text: '(UTC+11:00) Efate' },\n    { Value: 'Pacific/Guadalcanal', Text: '(UTC+11:00) Guadalcanal' },\n    { Value: 'Pacific/Kosrae', Text: '(UTC+11:00) Kosrae' },\n    { Value: 'Asia/Magadan', Text: '(UTC+11:00) Moscow+08 - Magadan' },\n    { Value: 'Pacific / Norfolk', Text: '(UTC+11:00) Norfolk' },\n    { Value: 'Pacific/Noumea', Text: '(UTC+11:00) Noumea' },\n    { Value: 'Pacific/Pohnpei', Text: '(UTC+11:00) Ponape' },\n    { Value: 'Pacific/Funafuti', Text: '(UTC+12:00) Funafuti' },\n    { Value: 'Pacific/Kwajalein', Text: '(UTC+12:00) Kwajalein' },\n    { Value: 'Pacific/Majuro', Text: '(UTC+12:00) Majuro' },\n    { Value: 'Asia/Kamchatka', Text: '(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy' },\n    { Value: 'Pacific / Nauru', Text: '(UTC+12:00) Nauru' },\n    { Value: 'Pacific/Tarawa', Text: '(UTC+12:00) Tarawa' },\n    { Value: 'Pacific/Wake', Text: '(UTC+12:00) Wake' },\n    { Value: 'Pacific/Wallis', Text: '(UTC+12:00) Wallis' },\n    { Value: 'Pacific/Auckland', Text: '(UTC+13:00) Auckland' },\n    { Value: 'Pacific/Enderbury', Text: '(UTC+13:00) Enderbury' },\n    { Value: 'Pacific/Fakaofo', Text: '(UTC+13:00) Fakaofo' },\n    { Value: 'Pacific/Fiji', Text: '(UTC+13:00) Fiji' },\n    { Value: 'Pacific/Tongatapu', Text: '(UTC+13:00) Tongatapu' },\n    { Value: 'Pacific/Apia', Text: '(UTC+14:00) Apia' },\n    { Value: 'Pacific/Kiritimati', Text: '(UTC+14:00) Kiritimati' }\n];\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { isNullOrUndefined, closest, extend, EventHandler, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { createElement, prepend, append, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\nimport { generate, getDateFromRecurrenceDateString } from '../../recurrence-editor/date-generator';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\n/**\n * EventBase for appointment rendering\n */\nvar EventBase = /** @class */ (function () {\n    /**\n     * Constructor for EventBase\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function EventBase(parent) {\n        this.slots = [];\n        this.isDoubleTapped = false;\n        this.parent = parent;\n    }\n    EventBase.prototype.processData = function (events, timeZonePropChanged, oldTimezone) {\n        var _this = this;\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var fields = this.parent.eventFields;\n        var processed = [];\n        var temp = 1;\n        var generateID = false;\n        var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];\n        if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {\n            generateID = true;\n        }\n        var _loop_1 = function (event_1) {\n            if (generateID) {\n                event_1[fields.id] = temp++;\n            }\n            event_1 = this_1.updateEventDateTime(event_1);\n            if (timeZonePropChanged) {\n                this_1.processTimezoneChange(event_1, oldTimezone);\n            }\n            else if (!this_1.parent.isPrinting && !this_1.parent.uiStateValues.isPreventTimezone) {\n                event_1 = this_1.processTimezone(event_1);\n            }\n            for (var level = 0; level < resourceCollection.length; level++) {\n                if (event_1[resourceCollection[parseInt(level.toString(), 10)].field] === null || event_1[resourceCollection[parseInt(level.toString(), 10)].field] === 0) {\n                    event_1[resourceCollection[parseInt(level.toString(), 10)].field] = undefined;\n                }\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && event_1[fields.recurrenceRule] === '') {\n                event_1[fields.recurrenceRule] = null;\n            }\n            if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID]) &&\n                !(this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction)) {\n                processed = processed.concat(this_1.generateOccurrence(event_1, null, true));\n            }\n            else {\n                if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction) {\n                    if (!isNullOrUndefined(event_1[fields.recurrenceRule]) && isNullOrUndefined(event_1[fields.recurrenceID])) {\n                        var recurrenceEvent = this_1.generateOccurrence(event_1, null, true);\n                        var _loop_2 = function (occurrence) {\n                            var app = this_1.parent.eventsProcessed.filter(function (data) {\n                                return data[fields.startTime].getTime() - occurrence[fields.startTime].getTime() === 0 &&\n                                    data[fields.id] === occurrence[fields.id];\n                            });\n                            occurrence.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                            processed.push(occurrence);\n                        };\n                        for (var _i = 0, recurrenceEvent_1 = recurrenceEvent; _i < recurrenceEvent_1.length; _i++) {\n                            var occurrence = recurrenceEvent_1[_i];\n                            _loop_2(occurrence);\n                        }\n                    }\n                    else {\n                        var app = this_1.parent.eventsProcessed.filter(function (data) {\n                            return data[_this.parent.eventFields.id] === event_1[_this.parent.eventFields.id];\n                        });\n                        event_1.Guid = (app.length > 0) ? app[0].Guid : this_1.generateGuid();\n                        processed.push(event_1);\n                    }\n                }\n                else {\n                    event_1.Guid = this_1.generateGuid();\n                    processed.push(event_1);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            _loop_1(event_1);\n        }\n        this.parent.eventsProcessed = [];\n        var eventData = processed.filter(function (data) {\n            return !data[_this.parent.eventFields.isBlock];\n        });\n        this.parent.eventsProcessed = this.filterEvents(start, end, eventData);\n        var blockData = processed.filter(function (data) {\n            return data[_this.parent.eventFields.isBlock];\n        });\n        for (var _a = 0, blockData_1 = blockData; _a < blockData_1.length; _a++) {\n            var eventObj = blockData_1[_a];\n            if (eventObj[fields.isAllDay]) {\n                var isDifferentDate = util.resetTime(new Date(eventObj[fields.startTime].getTime())) <\n                    util.resetTime(new Date(eventObj[fields.endTime].getTime()));\n                if (!isDifferentDate) {\n                    eventObj[fields.startTime] = util.resetTime(eventObj[fields.startTime]);\n                    eventObj[fields.endTime] = util.addDays(util.resetTime(eventObj[fields.endTime]), 1);\n                }\n            }\n        }\n        this.parent.blockProcessed = blockData;\n        return eventData;\n    };\n    EventBase.prototype.updateEventDateTime = function (eventData) {\n        if (typeof eventData[this.parent.eventFields.startTime] === 'string') {\n            eventData[this.parent.eventFields.startTime] = util.getDateFromString(eventData[this.parent.eventFields.startTime]);\n        }\n        if (typeof eventData[this.parent.eventFields.endTime] === 'string') {\n            eventData[this.parent.eventFields.endTime] = util.getDateFromString(eventData[this.parent.eventFields.endTime]);\n        }\n        return eventData;\n    };\n    EventBase.prototype.getProcessedEvents = function (eventCollection) {\n        if (eventCollection === void 0) { eventCollection = this.parent.eventsData; }\n        var processed = [];\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_2 = eventCollection_1[_i];\n            if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) &&\n                isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {\n                processed = processed.concat(this.generateOccurrence(event_2));\n            }\n            else {\n                processed.push(event_2);\n            }\n        }\n        return processed;\n    };\n    EventBase.prototype.timezonePropertyChange = function (oldTimezone) {\n        var data = this.parent.eventsData.concat(this.parent.blockData);\n        var processed = this.processData(data, true, oldTimezone);\n        this.parent.notify(event.dataReady, { processedData: processed });\n    };\n    EventBase.prototype.timezoneConvert = function (eventData) {\n        var fields = this.parent.eventFields;\n        eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];\n        eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];\n        if (this.parent.timezone) {\n            var startTz = eventData[fields.startTimezone];\n            var endTz = eventData[fields.endTimezone];\n            eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);\n            eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);\n        }\n    };\n    EventBase.prototype.processTimezoneChange = function (event, oldTimezone) {\n        var fields = this.parent.eventFields;\n        if (event[fields.isAllDay]) {\n            return;\n        }\n        if (oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);\n        }\n        else if (!oldTimezone && this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n            event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n        }\n        else if (oldTimezone && !this.parent.timezone) {\n            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);\n            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);\n        }\n    };\n    EventBase.prototype.processTimezone = function (event, isReverse) {\n        if (isReverse === void 0) { isReverse = false; }\n        var fields = this.parent.eventFields;\n        if (event[fields.isAllDay]) {\n            return event;\n        }\n        if (event[fields.startTimezone] || event[fields.endTimezone]) {\n            var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];\n            var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];\n            if (isReverse) {\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n                }\n                else {\n                    event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);\n                    event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);\n                }\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);\n                if (this.parent.timezone) {\n                    event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);\n                    event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);\n                }\n            }\n        }\n        else if (this.parent.timezone) {\n            if (isReverse) {\n                event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);\n            }\n            else {\n                event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);\n                event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);\n            }\n        }\n        return event;\n    };\n    EventBase.prototype.filterBlockEvents = function (eventObj) {\n        var fields = this.parent.eventFields;\n        var eStart = eventObj[fields.startTime];\n        var eEnd = eventObj[fields.endTime];\n        var resourceData;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var data = this.getGroupIndexFromEvent(eventObj);\n            resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(data.toString(), 10)];\n        }\n        var blockEvents = extend([], this.parent.blockProcessed, null, true);\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var eventObj_1 = blockEvents_1[_i];\n            if (eventObj_1[fields.isAllDay]) {\n                var isDifferentTime = eventObj_1[fields.endTime].getTime() >\n                    util.resetTime(new Date(eventObj_1[fields.endTime].getTime())).getTime();\n                if (isDifferentTime) {\n                    eventObj_1[fields.startTime] = util.resetTime(eventObj_1[fields.startTime]);\n                    eventObj_1[fields.endTime] = util.addDays(util.resetTime(eventObj_1[fields.endTime]), 1);\n                }\n            }\n        }\n        return this.filterEvents(eStart, eEnd, blockEvents, resourceData);\n    };\n    EventBase.prototype.filterEvents = function (startDate, endDate, appointments, resourceTdData) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate = this.parent.dataModule.getStartEndQuery(startDate, endDate);\n        var filter = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));\n        if (resourceTdData) {\n            filter = this.filterEventsByResource(resourceTdData, filter);\n        }\n        return this.sortByTime(filter);\n    };\n    EventBase.prototype.filterEventsByRange = function (eventCollection, startDate, endDate) {\n        var _this = this;\n        var filteredEvents = [];\n        if (startDate && endDate) {\n            filteredEvents = this.filterEvents(startDate, endDate, eventCollection);\n        }\n        else if (startDate && !endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.startTime] >= startDate; });\n        }\n        else if (!startDate && endDate) {\n            filteredEvents = eventCollection.filter(function (e) { return e[_this.parent.eventFields.endTime] <= endDate; });\n        }\n        else {\n            filteredEvents = eventCollection;\n        }\n        return this.sortByTime(filteredEvents);\n    };\n    EventBase.prototype.filterEventsByResource = function (resourceTdData, appointments) {\n        if (appointments === void 0) { appointments = this.parent.eventsProcessed; }\n        var predicate = {};\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var level = 0; level < resourceCollection.length; level++) {\n            predicate[resourceCollection[parseInt(level.toString(), 10)].field] = resourceTdData.groupOrder[parseInt(level.toString(), 10)];\n        }\n        var keys = Object.keys(predicate);\n        var filteredCollection = appointments.filter(function (eventObj) { return keys.every(function (key) {\n            if (eventObj[\"\" + key] instanceof Array) {\n                return eventObj[\"\" + key].indexOf(predicate[\"\" + key]) > -1;\n            }\n            else {\n                return eventObj[\"\" + key] === predicate[\"\" + key];\n            }\n        }); });\n        return filteredCollection;\n    };\n    EventBase.prototype.sortByTime = function (appointmentsCollection) {\n        if (this.parent.eventSettings.sortComparer && (typeof (this.parent.eventSettings.sortComparer) === 'function' || typeof (this.parent.eventSettings.sortComparer) === 'string')) {\n            appointmentsCollection = this.customSorting(appointmentsCollection);\n        }\n        else {\n            var fieldMappings_1 = this.parent.eventFields;\n            appointmentsCollection.sort(function (a, b) {\n                var d1 = a[fieldMappings_1.startTime];\n                var d2 = b[fieldMappings_1.startTime];\n                return d1.getTime() - d2.getTime();\n            });\n        }\n        return appointmentsCollection;\n    };\n    EventBase.prototype.sortByDateTime = function (appointments) {\n        if (this.parent.eventSettings.sortComparer && (typeof (this.parent.eventSettings.sortComparer) === 'function' || typeof (this.parent.eventSettings.sortComparer) === 'string')) {\n            appointments = this.customSorting(appointments);\n        }\n        else {\n            var fieldMapping_1 = this.parent.eventFields;\n            appointments.sort(function (object1, object2) {\n                var d3 = object1[fieldMapping_1.startTime];\n                var d4 = object2[fieldMapping_1.startTime];\n                var d5 = object1[fieldMapping_1.endTime];\n                var d6 = object2[fieldMapping_1.endTime];\n                var d1 = d5.getTime() - d3.getTime();\n                var d2 = d6.getTime() - d4.getTime();\n                return (d3.getTime() - d4.getTime() || d2 - d1);\n            });\n        }\n        return appointments;\n    };\n    EventBase.prototype.customSorting = function (appointments) {\n        if (typeof (this.parent.eventSettings.sortComparer) === 'function') {\n            return this.parent.eventSettings.sortComparer.call(this.parent, appointments);\n        }\n        else if (typeof (this.parent.eventSettings.sortComparer) === 'string') {\n            var splits = this.parent.eventSettings.sortComparer.split('.');\n            var sortFn = void 0;\n            if (!isNullOrUndefined(window)) {\n                sortFn = window[splits[splits.length - 1]];\n            }\n            if (sortFn) {\n                return sortFn(appointments);\n            }\n        }\n        return appointments;\n    };\n    EventBase.prototype.getSmallestMissingNumber = function (array) {\n        var large = Math.max.apply(Math, array);\n        for (var i = 0; i < large; i++) {\n            if (array.indexOf(i) === -1) {\n                return i;\n            }\n        }\n        return large + 1;\n    };\n    EventBase.prototype.splitEventByDay = function (event) {\n        var eventFields = this.parent.eventFields;\n        var data = [];\n        var eventStartTime = event[eventFields.startTime];\n        var eventEndTime = event[eventFields.endTime];\n        var isDifferentDate = util.resetTime(new Date(eventStartTime.getTime())) <\n            util.resetTime(new Date(eventEndTime.getTime()));\n        if (isDifferentDate) {\n            var start = new Date(eventStartTime.getTime());\n            var end = util.addDays(util.resetTime(new Date(eventStartTime.getTime())), 1);\n            var endDate = (eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0) ?\n                eventEndTime : util.addDays(eventEndTime, 1);\n            var index = 1;\n            var eventLength = util.getDaysCount(eventStartTime.getTime(), endDate.getTime());\n            while (end <= eventEndTime && start.getTime() !== end.getTime()) {\n                var app = extend({}, event);\n                app[eventFields.startTime] = start;\n                app[eventFields.endTime] = end;\n                app.data = { index: index, count: eventLength };\n                app.Guid = this.generateGuid();\n                app.isSpanned = true;\n                data.push(app);\n                start = end;\n                if ((util.resetTime(new Date(start.getTime())).getTime() === util.resetTime(new Date(eventEndTime.getTime())).getTime())\n                    && !(end.getTime() === eventEndTime.getTime())) {\n                    end = new Date(start.getTime());\n                    end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));\n                }\n                else {\n                    end = util.addDays(util.resetTime(new Date(start.getTime())), 1);\n                }\n                index++;\n            }\n        }\n        else {\n            data.push(event);\n        }\n        return data;\n    };\n    EventBase.prototype.splitEvent = function (event, dateRender) {\n        var fields = this.parent.eventFields;\n        var start = util.resetTime(event[fields.startTime]).getTime();\n        var end = util.resetTime(event[fields.endTime]).getTime();\n        if (util.getDateInMs(event[fields.endTime]) <= 0) {\n            var temp = util.addDays(util.resetTime(event[fields.endTime]), -1).getTime();\n            end = start > temp ? start : temp;\n        }\n        var orgStart = start;\n        var orgEnd = end;\n        var ranges = [];\n        if (start !== end) {\n            if (start < dateRender[0].getTime()) {\n                start = dateRender[0].getTime();\n            }\n            if (end > dateRender[dateRender.length - 1].getTime()) {\n                end = dateRender[dateRender.length - 1].getTime();\n            }\n            var cStart = start;\n            for (var level = 0; level < this.slots.length; level++) {\n                var slot = this.slots[parseInt(level.toString(), 10)];\n                if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek'\n                    || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {\n                    var slotDates = [];\n                    for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {\n                        var s = slot_1[_i];\n                        slotDates.push(new Date(s));\n                    }\n                    var renderedDates = this.getRenderedDates(slotDates);\n                    if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {\n                        slot = [];\n                        for (var _a = 0, renderedDates_1 = renderedDates; _a < renderedDates_1.length; _a++) {\n                            var date = renderedDates_1[_a];\n                            slot.push(date.getTime());\n                        }\n                    }\n                }\n                if (typeof (slot) === 'number') {\n                    var temp = slot;\n                    slot = [];\n                    slot.push(temp);\n                }\n                var firstSlot = slot[0];\n                cStart = (cStart <= firstSlot && end >= firstSlot) ? firstSlot : cStart;\n                if (cStart > end || firstSlot > end) {\n                    break;\n                }\n                if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend &&\n                    this.parent.currentView !== 'WorkWeek' && this.parent.currentView !== 'TimelineWorkWeek') {\n                    var startIndex = slot.indexOf(cStart);\n                    if (startIndex !== -1) {\n                        var endIndex = slot.indexOf(end);\n                        var hasBreak = endIndex !== -1;\n                        endIndex = hasBreak ? endIndex : slot.length - 1;\n                        var count = ((endIndex - startIndex) + 1);\n                        var isLeft = (slot[parseInt(startIndex.toString(), 10)] !== orgStart);\n                        var isRight = (slot[parseInt(endIndex.toString(), 10)] !== orgEnd);\n                        ranges.push(this.cloneEventObject(event, slot[parseInt(startIndex.toString(), 10)], slot[parseInt(endIndex.toString(), 10)], count, isLeft, isRight));\n                        if (hasBreak) {\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {\n                        var availSlot = [];\n                        for (var i = 0; i < slot.length; i++) {\n                            if (this.dateInRange(slot[parseInt(i.toString(), 10)], orgStart, orgEnd)) {\n                                availSlot.push(slot[parseInt(i.toString(), 10)]);\n                            }\n                        }\n                        if (availSlot.length > 0) {\n                            if (!this.parent.activeViewOptions.group.byDate) {\n                                var isLeft = (availSlot[0] !== orgStart);\n                                var isRight = (availSlot[availSlot.length - 1] !== orgEnd);\n                                ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));\n                            }\n                            else {\n                                for (var _b = 0, availSlot_1 = availSlot; _b < availSlot_1.length; _b++) {\n                                    var slot_2 = availSlot_1[_b];\n                                    ranges.push(this.cloneEventObject(event, slot_2, slot_2, 1, (slot_2 !== orgStart), (slot_2 !== orgEnd)));\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            ranges.push(this.cloneEventObject(event, start, end, 1, false, false));\n        }\n        return ranges;\n    };\n    EventBase.prototype.cloneEventObject = function (event, start, end, count, isLeft, isRight) {\n        var fields = this.parent.eventFields;\n        var e = extend({}, event, null, true);\n        var data = { count: count, isLeft: isLeft, isRight: isRight };\n        data[fields.startTime] = event[fields.startTime];\n        data[fields.endTime] = event[fields.endTime];\n        e.data = data;\n        e[fields.startTime] = new Date(start);\n        e[fields.endTime] = new Date(end);\n        return e;\n    };\n    EventBase.prototype.dateInRange = function (date, start, end) {\n        return start <= date && date <= end;\n    };\n    EventBase.prototype.getSelectedEventElements = function (target) {\n        this.removeSelectedAppointmentClass();\n        if (this.parent.selectedElements.length <= 0) {\n            this.parent.selectedElements.push(target);\n        }\n        else {\n            var isAlreadySelected = this.parent.selectedElements.filter(function (element) {\n                return element.getAttribute('data-guid') === target.getAttribute('data-guid');\n            });\n            if (isAlreadySelected.length <= 0) {\n                var elementSelector = 'div[data-guid=\"' + target.getAttribute('data-guid') + '\"]';\n                var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n                for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {\n                    var element = focusElements_1[_i];\n                    this.parent.selectedElements.push(element);\n                }\n            }\n            else {\n                var selectedElements = this.parent.selectedElements.filter(function (element) {\n                    return element.getAttribute('data-guid') !== target.getAttribute('data-guid');\n                });\n                this.parent.selectedElements = selectedElements;\n            }\n        }\n        if (target && this.parent.selectedElements.length > 0) {\n            this.addSelectedAppointments(this.parent.selectedElements, false);\n        }\n        return this.parent.selectedElements;\n    };\n    EventBase.prototype.getSelectedEvents = function () {\n        var _this = this;\n        var eventSelect = [];\n        var elementSelect = [];\n        var selectAppointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n        selectAppointments.filter(function (element) {\n            var isAlreadyAdded = eventSelect.filter(function (event) {\n                return event.Guid === element.getAttribute('data-guid');\n            });\n            if (isAlreadyAdded.length === 0) {\n                eventSelect.push(_this.getEventByGuid(element.getAttribute('data-guid')));\n            }\n            elementSelect.push(element);\n        });\n        return {\n            event: eventSelect.length > 1 ? eventSelect : eventSelect[0],\n            element: elementSelect.length > 1 ? elementSelect : elementSelect[0]\n        };\n    };\n    EventBase.prototype.removeSelectedAppointmentClass = function () {\n        var selectedAppointments = this.getSelectedAppointments();\n        removeClass(selectedAppointments, cls.APPOINTMENT_BORDER);\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            removeClass(selectedAppointments, cls.AGENDA_SELECTED_CELL);\n        }\n    };\n    EventBase.prototype.addSelectedAppointments = function (cells, preventFocus) {\n        if (this.parent.currentView !== 'MonthAgenda') {\n            this.parent.removeSelectedClass();\n        }\n        addClass(cells, cls.APPOINTMENT_BORDER);\n        if (cells.length > 0 && !preventFocus) {\n            cells[cells.length - 1].focus();\n        }\n    };\n    EventBase.prototype.getSelectedAppointments = function () {\n        return [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER + ',.' + cls.APPOINTMENT_CLASS + ':focus'));\n    };\n    EventBase.prototype.focusElement = function (isFocused) {\n        if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {\n            return;\n        }\n        var activeEle = document.activeElement;\n        var selectedCell = this.parent.getSelectedCells();\n        if (selectedCell.length > 0 && ((activeEle && (this.parent.element.contains(activeEle) ||\n            selectedCell.indexOf(activeEle) !== -1)) || isFocused)) {\n            if (this.parent.keyboardInteractionModule) {\n                var target = ((!isNullOrUndefined(this.parent.activeCellsData) &&\n                    this.parent.activeCellsData.element) || selectedCell[selectedCell.length - 1]);\n                this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);\n            }\n            return;\n        }\n        var selectedAppointments = this.getSelectedAppointments();\n        if (selectedAppointments.length > 0) {\n            if (this.parent.activeEventData && this.parent.activeEventData.element && selectedAppointments.indexOf(this.parent.activeEventData.element) > -1) {\n                this.parent.activeEventData.element.focus();\n                return;\n            }\n            selectedAppointments[selectedAppointments.length - 1].focus();\n            return;\n        }\n    };\n    EventBase.prototype.selectWorkCellByTime = function (eventsData) {\n        var target;\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            return target;\n        }\n        if (eventsData.length > 0) {\n            var selectedObject = eventsData[eventsData.length - 1];\n            var eventStartTime = selectedObject[this.parent.eventFields.startTime];\n            var nearestTime = void 0;\n            var isAllDay = this.isAllDayAppointment(selectedObject);\n            if (this.parent.currentView === 'Month' || isAllDay || !this.parent.activeViewOptions.timeScale.enable) {\n                nearestTime = new Date(+eventStartTime).setHours(0, 0, 0, 0);\n            }\n            else {\n                nearestTime = this.findNearestSlot(eventStartTime);\n            }\n            var targetArea = void 0;\n            if (isAllDay && ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) !== -1) {\n                targetArea = this.parent.getAllDayRow();\n            }\n            else {\n                targetArea = this.parent.getContentTable();\n            }\n            var queryString = '[data-date=\"' + new Date(nearestTime).getTime() + '\"]';\n            if (!isNullOrUndefined(this.parent.activeViewOptions.group.resources) &&\n                this.parent.activeViewOptions.group.resources.length > 0) {\n                queryString += '[data-group-index=\"' + this.getGroupIndexFromEvent(selectedObject) + '\"]';\n            }\n            target = targetArea.querySelector(queryString);\n            if (target) {\n                this.parent.activeCellsData = this.parent.getCellDetails(target);\n                if (this.parent.keyboardInteractionModule) {\n                    this.parent.keyboardInteractionModule.selectCells(false, target);\n                }\n                return target;\n            }\n        }\n        return target;\n    };\n    EventBase.prototype.findNearestSlot = function (appointmentTime) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var numberOfSlots = Math.round(util.MS_PER_DAY / msInterval);\n        var startTime = new Date(appointmentTime);\n        startTime.setHours(0, 0, 0, 0);\n        var slots = Array.from({ length: numberOfSlots }, function (_, i) {\n            var slotTime = new Date(startTime.getTime() + i * msInterval);\n            return slotTime;\n        });\n        var nearestSlot = slots.reduce(function (nearest, slot) {\n            var difference = Math.abs(appointmentTime.getTime() - slot.getTime());\n            if (!nearest || difference < Math.abs(appointmentTime.getTime() - nearest.getTime())) {\n                return slot;\n            }\n            return nearest;\n        }, null);\n        return Math.trunc(nearestSlot.getTime() / 1000) * 1000;\n    };\n    EventBase.prototype.getGroupIndexFromEvent = function (eventData) {\n        var levelIndex;\n        var resource;\n        var levelName;\n        var idField;\n        for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n            var resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n            if (!isNullOrUndefined(resourceData)) {\n                resource = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n                levelIndex = i;\n                levelName = resource.name;\n                idField = resource.field;\n                break;\n            }\n        }\n        if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {\n            levelName = this.parent.resourceCollection.slice(-1)[0].name;\n            levelIndex = this.parent.resourceCollection.length - 1;\n            idField = this.parent.resourceCollection.slice(-1)[0].field;\n            resource = this.parent.resourceCollection.filter(function (e, index) {\n                if (e.name === levelName) {\n                    levelIndex = index;\n                    return e;\n                }\n                return null;\n            })[0];\n        }\n        var id = ((eventData[\"\" + idField] instanceof Array) ?\n            eventData[\"\" + idField][0] : eventData[\"\" + idField]);\n        if (levelIndex > 0) {\n            var parentField = this.parent.resourceCollection[levelIndex - 1].field;\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);\n        }\n        else {\n            return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);\n        }\n    };\n    EventBase.prototype.isAllDayAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var isAllDay = event[fieldMapping.isAllDay];\n        var isFullDay = ((util.getUniversalTime(event[fieldMapping.endTime]) - util.getUniversalTime(event[fieldMapping.startTime]))\n            / util.MS_PER_DAY) >= 1;\n        return (isAllDay || (this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' && isFullDay)) ? true : false;\n    };\n    EventBase.prototype.addEventListener = function () {\n        this.parent.on(event.documentClick, this.appointmentBorderRemove, this);\n    };\n    EventBase.prototype.removeEventListener = function () {\n        this.parent.off(event.documentClick, this.appointmentBorderRemove);\n    };\n    EventBase.prototype.appointmentBorderRemove = function (event) {\n        var element = event.event.target;\n        if (closest(element, '.' + cls.APPOINTMENT_CLASS)) {\n            if (this.parent.currentView !== 'MonthAgenda') {\n                this.parent.removeSelectedClass();\n            }\n        }\n        else if (!closest(element, '.' + cls.POPUP_OPEN)) {\n            if (this.parent.uiStateValues.isTapHold && closest(element, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS)) {\n                return;\n            }\n            this.parent.uiStateValues.isTapHold = false;\n            this.removeSelectedAppointmentClass();\n            this.parent.selectedElements = [];\n        }\n    };\n    EventBase.prototype.wireAppointmentEvents = function (element, event, isPreventCrud) {\n        if (isPreventCrud === void 0) { isPreventCrud = false; }\n        var isReadOnly = (!isNullOrUndefined(event)) ? event[this.parent.eventFields.isReadonly] : false;\n        EventHandler.add(element, 'click', this.eventClick, this);\n        if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {\n            EventHandler.add(element, 'touchend', this.eventTouchClick, this);\n            EventHandler.add(element, 'dblclick', this.eventDoubleClick, this);\n        }\n        if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {\n            if (this.parent.resizeModule) {\n                this.parent.resizeModule.wireResizeEvent(element);\n            }\n            if (this.parent.dragAndDropModule) {\n                this.parent.dragAndDropModule.wireDragEvent(element);\n            }\n        }\n    };\n    EventBase.prototype.eventTouchClick = function (e) {\n        var _this = this;\n        if (this.parent.uiStateValues.isTouchScroll || this.parent.uiStateValues.isTapHold || this.parent.uiStateValues.action) {\n            this.parent.uiStateValues.isTouchScroll = this.parent.uiStateValues.isTapHold = false;\n            return;\n        }\n        setTimeout(function () { return _this.isDoubleTapped = false; }, 250);\n        e.preventDefault();\n        if (this.isDoubleTapped) {\n            this.eventDoubleClick(e);\n        }\n        else if (!this.isDoubleTapped) {\n            this.isDoubleTapped = true;\n            this.eventClick(e);\n        }\n    };\n    EventBase.prototype.renderResizeHandler = function (element, spanEvent, isReadOnly) {\n        if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {\n            var resizeEdge = _a[_i];\n            var resizeHandler = createElement('div', { className: cls.EVENT_RESIZE_CLASS });\n            switch (resizeEdge) {\n                case 'isLeft':\n                    if (!spanEvent.isLeft) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.RIGHT_RESIZE_HANDLER : cls.LEFT_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isRight':\n                    if (!spanEvent.isRight) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-left-right-resize' }));\n                        addClass([resizeHandler], this.parent.enableRtl ? cls.LEFT_RESIZE_HANDLER : cls.RIGHT_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n                case 'isTop':\n                    if (!spanEvent.isTop) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.TOP_RESIZE_HANDLER);\n                        prepend([resizeHandler], element);\n                    }\n                    break;\n                case 'isBottom':\n                    if (!spanEvent.isBottom) {\n                        resizeHandler.appendChild(createElement('div', { className: 'e-top-bottom-resize' }));\n                        addClass([resizeHandler], cls.BOTTOM_RESIZE_HANDLER);\n                        append([resizeHandler], element);\n                    }\n                    break;\n            }\n        }\n    };\n    EventBase.prototype.eventClick = function (eventData) {\n        var _this = this;\n        var target = eventData.target;\n        if (target.classList.contains(cls.DRAG_CLONE_CLASS) || target.classList.contains(cls.RESIZE_CLONE_CLASS) ||\n            target.classList.contains(cls.INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        if ((eventData.ctrlKey || eventData.metaKey) && eventData.which === 1 && this.parent.keyboardInteractionModule) {\n            this.parent.quickPopup.quickPopup.hide();\n            this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_BORDER));\n            var target_1 = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n            this.getSelectedEventElements(target_1);\n            this.activeEventData(eventData, false);\n            var selectArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(event.select, selectArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(event.eventClick, args);\n        }\n        else {\n            this.removeSelectedAppointmentClass();\n            this.activeEventData(eventData, true);\n            var selectEventArgs = {\n                data: this.parent.activeEventData.event,\n                element: this.parent.activeEventData.element,\n                event: eventData, requestType: 'eventSelect'\n            };\n            this.parent.trigger(event.select, selectEventArgs);\n            var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n            this.parent.trigger(event.eventClick, args, function (eventClickArgs) {\n                if (eventClickArgs.cancel) {\n                    _this.removeSelectedAppointmentClass();\n                    _this.parent.selectedElements = [];\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n                else {\n                    if (_this.parent.currentView === 'Agenda' || _this.parent.currentView === 'MonthAgenda') {\n                        addClass([_this.parent.activeEventData.element], cls.AGENDA_SELECTED_CELL);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            data: eventClickArgs.event,\n                            element: eventClickArgs.element,\n                            type: 'Event'\n                        };\n                        _this.parent.notify(event.inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(event.eventClick, eventClickArgs);\n                    }\n                }\n            });\n        }\n    };\n    EventBase.prototype.eventDoubleClick = function (eventData) {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if (eventData.type === 'touchend') {\n            this.activeEventData(eventData, true);\n        }\n        this.removeSelectedAppointmentClass();\n        this.parent.selectedElements = [];\n        if (this.parent.activeEventData.element.classList.contains(cls.INLINE_APPOINTMENT_CLASS) ||\n            this.parent.activeEventData.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS)) {\n            return;\n        }\n        var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });\n        this.parent.trigger(event.eventDoubleClick, args, function (eventDoubleClickArgs) {\n            if (!eventDoubleClickArgs.cancel) {\n                if (!isNullOrUndefined(_this.parent.activeEventData.event) &&\n                    isNullOrUndefined(_this.parent.activeEventData.event[_this.parent.eventFields.recurrenceID])) {\n                    _this.parent.eventWindow.openEditor(_this.parent.activeEventData.event, 'Save');\n                }\n                else {\n                    _this.parent.currentAction = 'EditOccurrence';\n                    _this.parent.quickPopup.openRecurrenceAlert();\n                }\n            }\n        });\n    };\n    EventBase.prototype.getEventByGuid = function (guid) {\n        return this.parent.eventsProcessed.filter(function (data) { return data.Guid === guid; })[0];\n    };\n    EventBase.prototype.getEventById = function (id) {\n        var _this = this;\n        return this.parent.eventsData.filter(function (data) {\n            return data[_this.parent.eventFields.id] === id;\n        })[0];\n    };\n    EventBase.prototype.generateGuid = function () {\n        return 'xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0;\n            var v = (c === 'x') ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    EventBase.prototype.getEventIDType = function () {\n        if (this.parent.eventsData.length !== 0) {\n            return typeof (this.parent.eventsData[0][this.parent.eventFields.id]);\n        }\n        if (this.parent.blockData.length !== 0) {\n            return typeof (this.parent.blockData[0][this.parent.eventFields.id]);\n        }\n        return 'string';\n    };\n    EventBase.prototype.getEventMaxID = function (resourceId) {\n        var _this = this;\n        if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {\n            return 1;\n        }\n        var eventId;\n        var idType = this.getEventIDType();\n        if (idType === 'string') {\n            eventId = this.generateGuid();\n        }\n        if (idType === 'number') {\n            var datas = this.parent.eventsData.concat(this.parent.blockData);\n            var appIds = datas.map(function (event) { return event[_this.parent.eventFields.id]; });\n            var maxId = appIds.reduce(function (a, b) { return Math.max(a, b); });\n            maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;\n            eventId = maxId + 1;\n        }\n        return eventId;\n    };\n    EventBase.prototype.activeEventData = function (eventData, isMultiple) {\n        var _this = this;\n        var target = closest(eventData.target, '.' + cls.APPOINTMENT_CLASS);\n        var guid = target.getAttribute('data-guid');\n        if (isMultiple) {\n            this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid=\"' + guid + '\"]')), true);\n            target.focus();\n        }\n        var eventObject = this.getEventByGuid(guid);\n        if (eventObject && eventObject.isSpanned) {\n            eventObject = this.parent.eventsData.filter(function (obj) {\n                return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];\n            })[0];\n        }\n        this.parent.activeEventData = { event: eventObject, element: target };\n    };\n    EventBase.prototype.generateOccurrence = function (event, viewDate, isMaxCount) {\n        var _this = this;\n        var startDate = event[this.parent.eventFields.startTime];\n        var endDate = event[this.parent.eventFields.endTime];\n        var eventRule = event[this.parent.eventFields.recurrenceRule];\n        var timeZoneDiff = endDate.getTimezoneOffset() - startDate.getTimezoneOffset();\n        var duration = (endDate.getTime() - startDate.getTime()) - (timeZoneDiff * 60000);\n        viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);\n        var exception = event[this.parent.eventFields.recurrenceException];\n        var maxCount;\n        if (this.parent.currentView !== 'Agenda' && isMaxCount) {\n            maxCount = util.getDateCount(viewDate, this.parent.activeView.endDate()) + 1;\n        }\n        var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var firstDay = this.parent.activeViewOptions.firstDayOfWeek;\n        var calendarMode = this.parent.calendarMode;\n        if (event[this.parent.eventFields.recurrenceRule] && this.isDayBasedRecurrence(event) &&\n            this.parent.timezone && event[this.parent.eventFields.startTimezone] && event[this.parent.eventFields.endTimezone]) {\n            startDate = this.parent.tzModule.convert(event[this.parent.eventFields.startTime], this.parent.timezone, event[this.parent.eventFields.startTimezone]);\n        }\n        var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, newTimezone);\n        if (this.parent.currentView === 'Agenda' && eventRule.indexOf('COUNT') === -1 && eventRule.indexOf('UNTIL') === -1) {\n            if (isNullOrUndefined(event.generatedDates)) {\n                event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };\n            }\n            else {\n                if (dates[0] < event.generatedDates.start.getTime()) {\n                    event.generatedDates.start = new Date(dates[0]);\n                }\n                if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {\n                    event.generatedDates.end = new Date(dates[dates.length - 1]);\n                }\n            }\n        }\n        var isDSTAdjusted = false;\n        var convertedDates = [];\n        if (event[this.parent.eventFields.recurrenceRule] && this.isDayBasedRecurrence(event) &&\n            this.parent.timezone && event[this.parent.eventFields.startTimezone] && event[this.parent.eventFields.endTimezone]) {\n            isDSTAdjusted = true;\n            convertedDates.push.apply(convertedDates, dates.map(function (date) {\n                return _this.parent.tzModule.convert(new Date(date), event[_this.parent.eventFields.startTimezone], _this.parent.timezone).getTime();\n            }));\n        }\n        convertedDates = convertedDates.length > 0 ? convertedDates : dates;\n        var occurrenceCollection = [];\n        for (var _i = 0, convertedDates_1 = convertedDates; _i < convertedDates_1.length; _i++) {\n            var date = convertedDates_1[_i];\n            var clonedObject = extend({}, event, null, true);\n            date = !isDSTAdjusted ? this.getDSTAdjustedTime(date, clonedObject) : date;\n            clonedObject[this.parent.eventFields.startTime] = new Date(date);\n            clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));\n            clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];\n            delete clonedObject[this.parent.eventFields.recurrenceException];\n            delete clonedObject[this.parent.eventFields.followingID];\n            clonedObject.Guid = this.generateGuid();\n            occurrenceCollection.push(clonedObject);\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.isDayBasedRecurrence = function (event) {\n        return (event[this.parent.eventFields.recurrenceRule].includes('BYMONTHDAY')\n            || event[this.parent.eventFields.recurrenceRule].includes('BYDAY'));\n    };\n    EventBase.prototype.getDSTAdjustedTime = function (date, event) {\n        var occurDate = date;\n        if (this.parent.timezone &&\n            (event[this.parent.eventFields.startTimezone] || event[this.parent.eventFields.endTimezone])) {\n            var eventOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), event[this.parent.eventFields.startTimezone]);\n            var schOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), this.parent.timezone);\n            occurDate = (new Date(date).getTime() - (eventOffset - schOffset) * 60000);\n        }\n        return occurDate;\n    };\n    EventBase.prototype.getDSTDiff = function (startDate, occurDate, timezone) {\n        var startOffset = this.parent.tzModule.offset(new Date(startDate), timezone);\n        var occurOffset = this.parent.tzModule.offset(new Date(occurDate), timezone);\n        return startOffset - occurOffset;\n    };\n    EventBase.prototype.getParentEvent = function (eventObj, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent;\n        do {\n            eventObj = this.getFollowingEvent(eventObj);\n            if (eventObj) {\n                parentEvent = extend({}, eventObj, null, true);\n            }\n        } while (eventObj && isParent);\n        if (isParent && parentEvent) {\n            var collection = this.getEventCollections(parentEvent);\n            var followObj = collection.follow.slice(-1)[0];\n            if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {\n                followObj = collection.occurrence.slice(-1)[0];\n            }\n            if (followObj) {\n                parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];\n            }\n        }\n        return parentEvent;\n    };\n    EventBase.prototype.getEventCollections = function (parentObj, childObj) {\n        var followingCollection = [];\n        var occurrenceCollection = [];\n        var followingEvent = parentObj;\n        do {\n            followingEvent = this.getFollowingEvent(followingEvent, true);\n            if (followingEvent) {\n                followingCollection.push(followingEvent);\n            }\n            occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));\n        } while (followingEvent);\n        var collections = {};\n        if (childObj) {\n            var fields_1 = this.parent.eventFields;\n            collections = {\n                follow: followingCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                }),\n                occurrence: occurrenceCollection.filter(function (eventData) {\n                    return eventData[fields_1.startTime] >= childObj[fields_1.startTime];\n                })\n            };\n        }\n        else {\n            collections = { follow: followingCollection, occurrence: occurrenceCollection };\n        }\n        return collections;\n    };\n    EventBase.prototype.getFollowingEvent = function (parentObj, isReverse) {\n        var fields = this.parent.eventFields;\n        var fieldValue;\n        if (isReverse) {\n            fieldValue = parentObj[fields.id];\n        }\n        else {\n            fieldValue = (parentObj[fields.recurrenceID] || parentObj[fields.followingID]);\n        }\n        var parentApp = this.parent.eventsData.filter(function (data) {\n            return data[isReverse ? fields.followingID : fields.id] === fieldValue;\n        });\n        return parentApp.shift();\n    };\n    EventBase.prototype.isFollowingEvent = function (parentObj, childObj) {\n        var parentStart = parentObj[this.parent.eventFields.startTime];\n        var childStart = childObj[this.parent.eventFields.startTime];\n        return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() &&\n            parentStart.getSeconds() === childStart.getSeconds();\n    };\n    EventBase.prototype.getOccurrenceEvent = function (eventObj, isGuid, isFollowing) {\n        if (isGuid === void 0) { isGuid = false; }\n        if (isFollowing === void 0) { isFollowing = false; }\n        var idField = isGuid ? 'Guid' : (isFollowing) ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;\n        var fieldKey = isGuid ? 'Guid' : this.parent.eventFields.id;\n        var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;\n        return dataSource.filter(function (data) { return data[\"\" + idField] === eventObj[\"\" + fieldKey]; });\n    };\n    EventBase.prototype.getOccurrencesByID = function (id) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        var parentObject = this.parent.eventsData.filter(function (obj) { return obj[fields.id] === id; });\n        for (var _i = 0, parentObject_1 = parentObject; _i < parentObject_1.length; _i++) {\n            var event_3 = parentObject_1[_i];\n            if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));\n            }\n        }\n        return occurrenceCollection;\n    };\n    EventBase.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        var fields = this.parent.eventFields;\n        var occurrenceCollection = [];\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_4 = _a[_i];\n            if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {\n                occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));\n            }\n        }\n        var filter = occurrenceCollection.filter(function (obj) {\n            return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);\n        });\n        return filter;\n    };\n    EventBase.prototype.getDeletedOccurrences = function (recurrenceData) {\n        var fields = this.parent.eventFields;\n        var parentObject;\n        var deletedOccurrences = [];\n        if (typeof recurrenceData === 'string' || typeof recurrenceData === 'number') {\n            parentObject = this.parent.eventsData.filter(function (obj) {\n                return obj[fields.id] === recurrenceData;\n            })[0];\n        }\n        else {\n            parentObject = extend({}, recurrenceData, null, true);\n        }\n        if (parentObject[fields.recurrenceException]) {\n            var exDateString_1 = parentObject[fields.recurrenceException].split(',');\n            var _loop_3 = function (i, len) {\n                var edited = this_2.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString_1[parseInt(i.toString(), 10)];\n                });\n                if (edited.length === 0) {\n                    var exDate = getDateFromRecurrenceDateString(exDateString_1[parseInt(i.toString(), 10)]);\n                    var childObject = extend({}, recurrenceData, null, true);\n                    childObject[fields.recurrenceID] = parentObject[fields.id];\n                    delete childObject[fields.followingID];\n                    childObject[fields.recurrenceException] = exDateString_1[parseInt(i.toString(), 10)];\n                    var startDate = new Date(exDate.getTime());\n                    var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();\n                    var endDate = new Date(startDate.getTime());\n                    endDate.setMilliseconds(time);\n                    childObject[fields.startTime] = new Date(startDate.getTime());\n                    childObject[fields.endTime] = new Date(endDate.getTime());\n                    deletedOccurrences.push(childObject);\n                }\n            };\n            var this_2 = this;\n            for (var i = 0, len = exDateString_1.length; i < len; i++) {\n                _loop_3(i, len);\n            }\n        }\n        return deletedOccurrences;\n    };\n    EventBase.prototype.applyResourceColor = function (element, data, type, index, alpha) {\n        if (!this.parent.resourceBase) {\n            return;\n        }\n        var alphaColor = function (color, alpha) {\n            color = color.replace('#', '');\n            var r = parseInt(color.substring(0, color.length / 3), 16);\n            var g = parseInt(color.substring(color.length / 3, 2 * color.length / 3), 16);\n            var b = parseInt(color.substring(2 * color.length / 3, 3 * color.length / 3), 16);\n            return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n        };\n        // index refers groupOrder\n        var color = this.parent.resourceBase.getResourceColor(data, index);\n        if (color) {\n            element.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;\n        }\n    };\n    EventBase.prototype.createBlockAppointmentElement = function (record, resIndex, isResourceEventTemplate) {\n        var eventSubject = (record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default);\n        var appointmentWrapper = createElement('div', {\n            className: cls.BLOCK_APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.parent.eventFields.id],\n                'aria-disabled': 'true'\n            }\n        });\n        var templateElement;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var templateName = isResourceEventTemplate && this.parent.currentView.indexOf('Year') === -1 ?\n                this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS });\n            this.parent.sanitize(eventSubject, appointmentSubject);\n            templateElement = [appointmentSubject];\n        }\n        append(templateElement, appointmentWrapper);\n        this.setWrapperAttributes(appointmentWrapper, resIndex);\n        return appointmentWrapper;\n    };\n    EventBase.prototype.setWrapperAttributes = function (appointmentWrapper, resIndex) {\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n    };\n    EventBase.prototype.getReadonlyAttribute = function (event) {\n        return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();\n    };\n    EventBase.prototype.isBlockRange = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var isBlockAlert = false;\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {\n            var event_5 = _a[_i];\n            var dataCol = [];\n            if (!isNullOrUndefined(event_5[fields.recurrenceRule]) &&\n                (isNullOrUndefined(event_5[fields.recurrenceID]) || event_5[fields.id] === event_5[fields.recurrenceID])) {\n                dataCol = this.generateOccurrence(event_5);\n            }\n            else {\n                dataCol.push(event_5);\n            }\n            for (var _b = 0, dataCol_1 = dataCol; _b < dataCol_1.length; _b++) {\n                var data = dataCol_1[_b];\n                var filterBlockEvents = this.filterBlockEvents(data);\n                if (filterBlockEvents.length > 0) {\n                    isBlockAlert = true;\n                    break;\n                }\n            }\n        }\n        this.parent.uiStateValues.isBlock = isBlockAlert;\n        return isBlockAlert;\n    };\n    EventBase.prototype.getFilterEventsList = function (dataSource, query) {\n        return new DataManager(dataSource).executeLocal(new Query().where(query));\n    };\n    EventBase.prototype.getSeriesEvents = function (parentEvent, startTime) {\n        var fields = this.parent.eventFields;\n        startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;\n        var deleteFutureEditEvents;\n        var futureEvents;\n        var deleteFutureEditEventList = [];\n        var delId = parentEvent[fields.id];\n        var followingId = parentEvent[fields.followingID];\n        var deleteFutureEvent;\n        var startTimeQuery = this.parent.currentAction === 'EditSeries' ? 'greaterthan' : 'greaterthanorequal';\n        do {\n            deleteFutureEvent = ((new Predicate(fields.followingID, 'equal', delId))).\n                and(new Predicate(fields.startTime, startTimeQuery, startTime));\n            futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);\n            deleteFutureEditEvents = futureEvents.slice(-1)[0];\n            if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {\n                deleteFutureEditEventList.push(deleteFutureEditEvents);\n                delId = deleteFutureEditEvents[fields.id];\n                followingId = deleteFutureEditEvents[fields.followingID];\n            }\n            else {\n                followingId = null;\n            }\n        } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));\n        return deleteFutureEditEventList;\n    };\n    EventBase.prototype.getEditedOccurrences = function (deleteFutureEditEventList, startTime) {\n        var fields = this.parent.eventFields;\n        var deleteRecurrenceEventList = [];\n        var delEditedEvents;\n        for (var _i = 0, deleteFutureEditEventList_1 = deleteFutureEditEventList; _i < deleteFutureEditEventList_1.length; _i++) {\n            var event_6 = deleteFutureEditEventList_1[_i];\n            var delEventQuery = new Predicate(fields.recurrenceID, 'equal', event_6[fields.id]).\n                or(new Predicate(fields.recurrenceID, 'equal', event_6[fields.followingID]).\n                and(new Predicate(fields.recurrenceID, 'notequal', undefined)).\n                and(new Predicate(fields.recurrenceID, 'notequal', null)));\n            if (this.parent.currentAction === 'EditFollowingEvents' || this.parent.currentAction === 'DeleteFollowingEvents') {\n                delEventQuery = delEventQuery.and(new Predicate(fields.startTime, 'greaterthanorequal', startTime));\n            }\n            delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);\n            deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);\n        }\n        return deleteRecurrenceEventList;\n    };\n    EventBase.prototype.getRenderedDates = function (dateRender) {\n        var firstDate = 0;\n        var lastDate = dateRender.length;\n        var filteredDates;\n        var maxDate = isNullOrUndefined(this.parent.maxDate) ? new Date(2099, 11, 31) : this.parent.maxDate;\n        var minDate = isNullOrUndefined(this.parent.minDate) ? new Date(1900, 0, 1) : this.parent.minDate;\n        if (dateRender[0] < minDate && dateRender[dateRender.length - 1] > maxDate) {\n            for (var i = 0; i < dateRender.length; i++) {\n                if (util.resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === util.resetTime(new Date(minDate)).getTime()) {\n                    firstDate = i;\n                }\n                if (util.resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === util.resetTime(new Date(maxDate)).getTime()) {\n                    lastDate = i;\n                }\n            }\n            filteredDates = dateRender.filter(function (date) { return date >= dateRender[parseInt(firstDate.toString(), 10)] && date <= dateRender[parseInt(lastDate.toString(), 10)]; });\n        }\n        return filteredDates;\n    };\n    EventBase.prototype.isValidEvent = function (eventObj, start, end, schedule) {\n        var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();\n        var isSameRange = schedule.startHour.getTime() <= start.getTime() &&\n            eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() &&\n            eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();\n        return isHourRange || isSameRange;\n    };\n    EventBase.prototype.allDayExpandScroll = function (dateHeader) {\n        var indentHeight = 0;\n        var headerRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.HEADER_ROW_CLASS));\n        headerRows.forEach(function (element) {\n            var tdEle = [].slice.call(element.children);\n            tdEle.forEach(function (ele) { ele.style.top = indentHeight + 'px'; });\n            indentHeight += element.offsetHeight;\n        });\n        indentHeight = dateHeader.offsetHeight - indentHeight;\n        this.parent.element.querySelector('.' + cls.ALLDAY_CELLS_CLASS).style.height = (indentHeight / 12) + 'em';\n        if (this.parent.uiStateValues.expand) {\n            addClass([dateHeader], cls.ALLDAY_APPOINTMENT_SCROLL);\n        }\n        else {\n            removeClass([dateHeader], cls.ALLDAY_APPOINTMENT_SCROLL);\n        }\n    };\n    EventBase.prototype.updateEventMinimumDuration = function (startEndHours, startTime, endTime) {\n        if (startTime.getTime() < endTime.getTime() || (startTime.getTime() === endTime.getTime() &&\n            (startEndHours.startHour.getTime() < endTime.getTime() && startEndHours.endHour.getTime() > startTime.getTime()) &&\n            this.parent.currentView.indexOf('Timeline') === -1)) {\n            var eventDuration = (util.getUniversalTime(endTime) - util.getUniversalTime(startTime)) / util.MS_PER_MINUTE;\n            if (eventDuration < this.parent.eventSettings.minimumEventDuration) {\n                var tempEnd = new Date(startTime);\n                tempEnd.setMinutes(tempEnd.getMinutes() + this.parent.eventSettings.minimumEventDuration);\n                endTime = tempEnd;\n                if (endTime.getTime() > startEndHours.endHour.getTime()) {\n                    var tempStart = new Date(startEndHours.endHour.getTime());\n                    tempStart.setMinutes(tempStart.getMinutes() - this.parent.eventSettings.minimumEventDuration);\n                    startTime = tempStart;\n                    endTime = startEndHours.endHour;\n                }\n            }\n        }\n        return { startDate: startTime, endDate: endTime };\n    };\n    EventBase.prototype.createEventWrapper = function (type, index) {\n        if (type === void 0) { type = ''; }\n        if (index === void 0) { index = 0; }\n        var tr = createElement('tr');\n        var levels = this.parent.activeView.colLevels.slice(-1)[0];\n        var className = this.parent.isReact && this.parent.activeViewOptions.eventTemplate ?\n            ' ' + cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS : '';\n        for (var i = 0, len = levels.length; i < len; i++) {\n            var col = levels[parseInt(i.toString(), 10)];\n            var appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + className : (type === 'timeIndicator') ?\n                    cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS + className, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                var innerWrapper = createElement('div', {\n                    id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + index.toString(),\n                    className: cls.APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n            index = index + 1;\n        }\n        return tr;\n    };\n    EventBase.prototype.getPageCoordinates = function (e) {\n        if (isNullOrUndefined(e)) {\n            return e;\n        }\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    EventBase.prototype.renderSpannedIcon = function (element, spanEvent) {\n        var iconElement = createElement('div', { className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON });\n        if (spanEvent.isLeft) {\n            var iconLeft = iconElement.cloneNode();\n            addClass([iconLeft], cls.EVENT_ICON_LEFT_CLASS);\n            prepend([iconLeft], element);\n        }\n        if (spanEvent.isRight) {\n            var iconRight = iconElement.cloneNode();\n            addClass([iconRight], cls.EVENT_ICON_RIGHT_CLASS);\n            append([iconRight], element);\n        }\n        if (spanEvent.isTop) {\n            var iconTop = iconElement.cloneNode();\n            addClass([iconTop], cls.EVENT_ICON_UP_CLASS);\n            prepend([iconTop], element);\n        }\n        if (spanEvent.isBottom) {\n            var iconBottom = iconElement.cloneNode();\n            addClass([iconBottom], cls.EVENT_ICON_DOWN_CLASS);\n            append([iconBottom], element);\n        }\n    };\n    EventBase.prototype.addCellHeight = function (selector, eventHeight, eventGap, headerHeight, indHeight, isScrollUpdate) {\n        if (isScrollUpdate === void 0) { isScrollUpdate = true; }\n        if (this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight) {\n            var rows = [].slice.call(this.parent.element.querySelectorAll(selector));\n            var weekNumberRows = this.parent.showWeekNumber\n                ? [].slice.call(this.parent.element.querySelectorAll('.' + cls.WEEK_NUMBER_WRAPPER_CLASS + ' tbody tr'))\n                : [];\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var height = (this.parent.activeViewOptions.maxEventsPerRow *\n                    ((eventHeight + (this.parent.currentView === 'Month' ? eventGap : 2)))) + headerHeight + indHeight;\n                if (weekNumberRows.length > 0) {\n                    setStyleAttribute(weekNumberRows[rows.indexOf(row)].firstElementChild, { 'height': height + 'px' });\n                }\n                setStyleAttribute(row.firstElementChild, { 'height': height + 'px' });\n            }\n            if (!this.parent.enablePersistence && !this.parent.activeViewOptions.allowVirtualScrolling && isScrollUpdate) {\n                this.parent.notify(event.contentReady, {});\n            }\n        }\n    };\n    EventBase.prototype.unWireEvents = function () {\n        var appElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var _i = 0, appElements_1 = appElements; _i < appElements_1.length; _i++) {\n            var element = appElements_1[_i];\n            EventHandler.clearEvents(element);\n        }\n    };\n    EventBase.prototype.destroy = function () {\n        this.unWireEvents();\n        this.parent = null;\n    };\n    return EventBase;\n}());\nexport { EventBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, createElement, extend, EventHandler, Animation, formatUnit, closest } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Vertical view appointment rendering\n */\nvar VerticalEvent = /** @class */ (function (_super) {\n    __extends(VerticalEvent, _super);\n    function VerticalEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dateRender = [];\n        _this.renderedEvents = [];\n        _this.renderedAllDayEvents = [];\n        _this.overlapEvents = [];\n        _this.moreEvents = [];\n        _this.overlapList = [];\n        _this.allDayEvents = [];\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.allDayLevel = 0;\n        _this.startHour = _this.getStartEndHours(_this.parent.activeViewOptions.startHour);\n        _this.endHour = _this.getStartEndHours(_this.parent.activeViewOptions.endHour);\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.animation = new Animation({ progress: _this.animationUiUpdate.bind(_this) });\n        _this.addEventListener();\n        return _this;\n    }\n    VerticalEvent.prototype.renderAppointments = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.parent)) {\n            return;\n        }\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n        var wrapperElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS +\n            ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        var isDragging = (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) ? true : false;\n        var hideWrapper = function (wrapper) {\n            if (_this.parent.isReact && !isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n                var appWrapper = closest(wrapper, '.' + cls.DAY_WRAPPER_CLASS + ',.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS);\n                if (appWrapper && !appWrapper.classList.contains(cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS)) {\n                    addClass([appWrapper], cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS);\n                }\n            }\n        };\n        for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {\n            var wrapper = wrapperElements_1[_i];\n            if (isDragging && !(wrapper.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ||\n                wrapper.classList.contains(cls.ROW_COUNT_WRAPPER_CLASS))) {\n                var groupIndex = parseInt(wrapper.getAttribute('data-group-index'), 10);\n                for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {\n                    if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[parseInt(j.toString(), 10)].groupIndex ||\n                        groupIndex === this.parent.crudModule.crudObj.targetEvent[parseInt(j.toString(), 10)].groupIndex) {\n                        hideWrapper(wrapper);\n                        remove(wrapper);\n                    }\n                }\n            }\n            else {\n                hideWrapper(wrapper);\n                remove(wrapper);\n            }\n        }\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.updateFocusedWorkCell();\n        }\n        this.allDayElement = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n        this.setAllDayRowHeight(0);\n        if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {\n            return;\n        }\n        var expandCollapse = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        EventHandler.remove(expandCollapse, 'click', this.rowExpandCollapse);\n        EventHandler.add(expandCollapse, 'click', this.rowExpandCollapse, this);\n        this.renderedEvents = [];\n        this.renderedAllDayEvents = [];\n        this.initializeValues();\n        this.processBlockEvents();\n        this.renderEvents('normalEvents');\n        if (this.allDayEvents.length > 0) {\n            this.allDayEvents = this.allDayEvents.filter(function (item, index, arr) {\n                return index === arr.map(function (item) { return item.Guid; }).indexOf(item.Guid);\n            });\n            removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n            this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            this.renderEvents('allDayEvents');\n            this.animation.animate(this.allDayElement[0]);\n        }\n        this.parent.notify(events.contentReady, {});\n        addClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        if (isDragging) {\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        this.parent.renderTemplates(function () {\n            if (_this.parent && _this.parent.isReact && _this.parent.activeViewOptions.eventTemplate) {\n                var wraps = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS));\n                removeClass(wraps, cls.APPOINTMENT_WRAPPER_HIDDEN_CLASS);\n            }\n        });\n    };\n    VerticalEvent.prototype.initializeValues = function () {\n        this.resources = (this.parent.activeViewOptions.group.resources.length > 0) ? this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.lastResourceLevel : [];\n        if (this.resources.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.virtualScrollModule) {\n            this.resources = this.parent.resourceBase.renderedResources;\n        }\n        this.cellHeight =\n            parseFloat(this.parent.getElementHeight(this.parent.element.querySelector('.e-content-wrap tbody tr')).toFixed(2));\n        this.dateRender[0] = this.parent.activeView.renderDates;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var i = 0, len = this.resources.length; i < len; i++) {\n                this.dateRender[parseInt(i.toString(), 10)] = this.resources[parseInt(i.toString(), 10)].renderDates;\n            }\n        }\n    };\n    VerticalEvent.prototype.getHeight = function (start, end) {\n        var appHeight = (util.getUniversalTime(end) - util.getUniversalTime(start)) /\n            util.MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;\n        appHeight = (appHeight <= 0) ? this.cellHeight : appHeight;\n        return appHeight;\n    };\n    VerticalEvent.prototype.appendEvent = function (eventObj, appointmentElement, index, appLeft) {\n        var appointmentWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS + '[id=\"' + cls.APPOINTMENT_WRAPPER_CLASS + '-' + index + '\"]');\n        if (this.parent.enableRtl) {\n            setStyleAttribute(appointmentElement, { 'right': appLeft });\n        }\n        else {\n            setStyleAttribute(appointmentElement, { 'left': appLeft });\n        }\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var args = {\n            data: extend({}, eventObj, null, true),\n            element: appointmentElement, cancel: false, type: eventType\n        };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                appointmentWrap.appendChild(appointmentElement);\n            }\n        });\n    };\n    VerticalEvent.prototype.processBlockEvents = function () {\n        var resources = this.getResourceList();\n        var dateCount = this.getStartCount();\n        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n            var resource = resources_1[_i];\n            var renderDates = this.dateRender[parseInt(resource.toString(), 10)];\n            for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {\n                var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n                var endDate = util.resetTime(util.addDays(renderDates[parseInt(day.toString(), 10)], 1));\n                var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[parseInt(resource.toString(), 10)]);\n                for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {\n                    var event_1 = filterEvents_1[_a];\n                    if (this.parent.resourceBase) {\n                        this.setValues(event_1, resource);\n                    }\n                    this.renderBlockEvents(event_1, day, resource, dateCount);\n                    this.cssClass = null;\n                    this.groupOrder = null;\n                }\n                dateCount += 1;\n            }\n        }\n    };\n    VerticalEvent.prototype.renderBlockEvents = function (eventObj, dayIndex, resource, dayCount) {\n        var spannedData = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = spannedData[this.fields.startTime];\n        var eEnd = spannedData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule) && this.isWorkDayAvailable(resource, eStart)) {\n            var blockTop = void 0;\n            var blockHeight = void 0;\n            if (spannedData[this.fields.isAllDay]) {\n                var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                blockHeight = formatUnit(contentWrap.offsetHeight);\n                blockTop = formatUnit(0);\n            }\n            else {\n                blockHeight = formatUnit(this.getHeight(eStart, eEnd));\n                blockTop = formatUnit(this.getTopValue(eStart));\n            }\n            var appointmentElement = this.createBlockAppointmentElement(eventObj, resource, this.isResourceEventTemplate);\n            setStyleAttribute(appointmentElement, { 'width': '100%', 'height': blockHeight, 'top': blockTop });\n            var index = this.getDayIndex(dayIndex, resource, dayCount);\n            this.appendEvent(eventObj, appointmentElement, index, '0px');\n        }\n    };\n    VerticalEvent.prototype.renderEvents = function (eventType) {\n        removeClass(this.allDayElement, cls.ALLDAY_ROW_ANIMATE_CLASS);\n        var eventCollection = (eventType === 'allDayEvents') ? this.sortByDateTime(this.allDayEvents) : undefined;\n        var resources = this.getResourceList();\n        var dateCount = this.getStartCount();\n        var isRender;\n        var appHeight = eventType === 'allDayEvents' ? this.parent.getElementHeightFromClass(this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS), cls.APPOINTMENT_CLASS) : 0;\n        var allDayRowTop = eventType === 'allDayEvents' && this.allDayElement.length > 0 ? this.allDayElement[0].offsetTop : 0;\n        var _loop_1 = function (resource) {\n            isRender = true;\n            if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== 'allDayEvents'\n                && !this_1.parent.uiStateValues.isGroupAdaptive) {\n                if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0 &&\n                    this_1.parent.crudModule.crudObj.targetEvent.filter(function (data) { return data.groupIndex === resource; }).length === 0) {\n                    isRender = false;\n                }\n            }\n            this_1.slots = [];\n            var renderDates = this_1.dateRender[parseInt(resource.toString(), 10)];\n            var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;\n            this_1.slots.push(renderDates.map(function (date) { return +date; }));\n            for (var day = 0, length_2 = renderDates.length; day < length_2 &&\n                renderDates[parseInt(day.toString(), 10)] <= renderedDate[renderedDate.length - 1]; day++) {\n                this_1.renderedEvents = [];\n                var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());\n                var endDate = util.resetTime(util.addDays(renderDates[parseInt(day.toString(), 10)], 1));\n                var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[parseInt(resource.toString(), 10)]);\n                if (isRender) {\n                    for (var _i = 0, filterEvents_2 = filterEvents; _i < filterEvents_2.length; _i++) {\n                        var event_2 = filterEvents_2[_i];\n                        if (this_1.parent.resourceBase) {\n                            this_1.setValues(event_2, resource);\n                        }\n                        if (eventType === 'allDayEvents') {\n                            this_1.renderAllDayEvents(event_2, day, resource, dateCount, false, allDayRowTop, appHeight);\n                        }\n                        else {\n                            if (this_1.isAllDayAppointment(event_2)) {\n                                this_1.allDayEvents.push(extend({}, event_2, null, true));\n                            }\n                            else {\n                                if (this_1.parent.eventSettings.enableMaxHeight) {\n                                    if (this_1.getOverlapIndex(event_2, day, false, resource) > 0) {\n                                        continue;\n                                    }\n                                }\n                                this_1.renderNormalEvents(event_2, day, resource, dateCount);\n                            }\n                        }\n                        this_1.cssClass = null;\n                        this_1.groupOrder = null;\n                    }\n                }\n                else {\n                    for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {\n                        var event_3 = filterEvents_3[_a];\n                        if (this_1.isAllDayAppointment(event_3)) {\n                            this_1.allDayEvents.push(extend({}, event_3, null, true));\n                        }\n                    }\n                }\n                dateCount += 1;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            _loop_1(resource);\n        }\n    };\n    VerticalEvent.prototype.getStartCount = function () {\n        return this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.timeScale.enable ?\n            parseInt(this.element.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).getAttribute('id').split('-').slice(-1)[0], 10) : 0;\n    };\n    VerticalEvent.prototype.getDayIndex = function (dayIndex, resource, dayCount) {\n        var _this = this;\n        if (!this.parent.activeViewOptions.group.byDate) {\n            return dayCount;\n        }\n        if (this.parent.activeViewOptions.group.byDate && !this.parent.activeViewOptions.group.hideNonWorkingDays) {\n            var renderedIndex = this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]);\n            return (this.resources.length * renderedIndex) + resource;\n        }\n        var dateIndex = 0;\n        var firstColumn = this.parent.activeView.colLevels[0];\n        var currentDate = this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime();\n        var currentResources = [];\n        for (var i = 0; i < firstColumn.length; i++) {\n            currentResources = this.parent.resourceBase.resourceDateTree[parseInt(i.toString(), 10)];\n            if (currentDate === firstColumn[parseInt(i.toString(), 10)].date.getTime()) {\n                break;\n            }\n            dateIndex = dateIndex + firstColumn[parseInt(i.toString(), 10)].colSpan;\n        }\n        var resIndex = currentResources.findIndex(function (x) { return x.groupOrder.toString() ===\n            _this.resources[parseInt(resource.toString(), 10)].groupOrder.toString(); });\n        if (resIndex < 0) {\n            return dateIndex;\n        }\n        return dateIndex + resIndex;\n    };\n    VerticalEvent.prototype.setValues = function (event, resourceIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.cssClass = this.resources[parseInt(resourceIndex.toString(), 10)].cssClass;\n            this.groupOrder = this.resources[parseInt(resourceIndex.toString(), 10)].groupOrder;\n        }\n        else {\n            this.cssClass = this.parent.resourceBase.getCssClass(event);\n        }\n    };\n    VerticalEvent.prototype.getResourceList = function () {\n        // eslint-disable-next-line prefer-spread\n        var resources = Array.apply(null, {\n            length: (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) ?\n                this.resources.length : 1\n        }).map(function (value, index) { return index; });\n        return resources;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.createAppointmentElement = function (record, isAllDay, data, resource) {\n        var fieldMapping = this.parent.eventFields;\n        var recordSubject = (record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[fieldMapping.id],\n                'data-guid': record.Guid,\n                'role': 'button',\n                'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            appointmentWrapper.setAttribute('data-group-index', resourceIndex.toString());\n        }\n        var templateElement;\n        var eventData = data;\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var elementId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = elementId + viewName + 'eventTemplate';\n            var resIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;\n            var templateName = this.isResourceEventTemplate ? this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS });\n            this.parent.sanitize(recordSubject, appointmentSubject);\n            if (isAllDay) {\n                if (record[fieldMapping.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    var appointmentStartTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])\n                    });\n                    var appointmentEndTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                        innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])\n                    });\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + ' - ' +\n                    this.parent.getTimeString(record[fieldMapping.endTime]);\n                var appointmentTime = createElement('div', {\n                    className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                    innerHTML: timeStr\n                });\n                var appointmentLocation = createElement('div', { className: cls.LOCATION_CLASS });\n                this.parent.sanitize((record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || ''), appointmentLocation);\n                templateElement = [appointmentSubject, appointmentTime, appointmentLocation];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        if (!this.parent.isAdaptive &&\n            (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {\n            var iconClass = (record[fieldMapping.id] === record[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            var recurrenceIcon = createElement('div', { className: cls.ICON + ' ' + iconClass });\n            if (isAllDay) {\n                appointmentDetails.appendChild(recurrenceIcon);\n            }\n            else {\n                appointmentWrapper.appendChild(recurrenceIcon);\n            }\n        }\n        this.parent.eventBase.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        this.applyResourceColor(appointmentWrapper, record, 'backgroundColor', this.groupOrder);\n        this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    VerticalEvent.prototype.createMoreIndicator = function (allDayRow, count, currentDay) {\n        var index = currentDay + count;\n        var countWrapper = allDayRow[parseInt(index.toString(), 10)];\n        if (countWrapper.childElementCount <= 0) {\n            var innerCountWrap = createElement('div', {\n                className: cls.ROW_COUNT_WRAPPER_CLASS,\n                id: cls.ROW_COUNT_WRAPPER_CLASS + '-' + index.toString()\n            });\n            var moreIndicatorElement = createElement('div', {\n                className: cls.MORE_INDICATOR_CLASS,\n                attrs: { 'tabindex': '0', 'data-index': index.toString(), 'data-count': '1' },\n                innerHTML: '+1&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'))\n            });\n            innerCountWrap.appendChild(moreIndicatorElement);\n            countWrapper.appendChild(innerCountWrap);\n            EventHandler.add(moreIndicatorElement, 'click', this.rowExpandCollapse, this);\n        }\n        else {\n            var countCell = countWrapper.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n            var moreCount = parseInt(countCell.getAttribute('data-count'), 10) + 1;\n            countCell.setAttribute('data-count', moreCount.toString());\n            countCell.innerHTML = '+' + this.parent.globalize.formatNumber(moreCount) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n        }\n    };\n    VerticalEvent.prototype.isSpannedEvent = function (record, day, resource) {\n        var currentDate = util.resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]);\n        var renderedDate = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || [currentDate];\n        var currentDay = renderedDate.filter(function (date) { return date.getDay() === day; });\n        if (currentDay.length === 0) {\n            currentDate = util.resetTime(renderedDate[0]);\n        }\n        var field = this.parent.eventFields;\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var event = extend({}, record, null, true);\n        event.isSpanned = {\n            isBottom: false, isTop: false,\n            isSameDuration: event[field.startTime].getTime() === event[field.endTime].getTime()\n        };\n        if (record[field.startTime].getTime() < schedule.startHour.getTime()) {\n            event[field.startTime] = schedule.startHour;\n            event.isSpanned.isTop = true;\n        }\n        if (record[field.endTime].getTime() > schedule.endHour.getTime()) {\n            event[field.endTime] = schedule.endHour;\n            event.isSpanned.isBottom = true;\n        }\n        var eventDates = this.updateEventMinimumDuration(schedule, event[field.startTime], event[field.endTime]);\n        event[field.startTime] = eventDates.startDate;\n        event[field.endTime] = eventDates.endDate;\n        return event;\n    };\n    VerticalEvent.prototype.isWorkDayAvailable = function (resource, start) {\n        if (this.parent.activeViewOptions.group.hideNonWorkingDays && this.resources.length > 0) {\n            var workDays = this.resources[parseInt(resource.toString(), 10)].\n                resourceData[this.resources[parseInt(resource.toString(), 10)].resource.workDaysField] ||\n                this.parent.activeViewOptions.workDays;\n            return workDays && workDays.indexOf(start.getDay()) >= 0;\n        }\n        return true;\n    };\n    // eslint-disable-next-line max-len\n    VerticalEvent.prototype.renderAllDayEvents = function (eventObj, dayIndex, resource, dayCount, inline, cellTop, eventHeight) {\n        var _this = this;\n        var currentDates = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) ||\n            this.dateRender[parseInt(resource.toString(), 10)];\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.slots[0] = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()];\n            currentDates = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)]];\n        }\n        var record = this.splitEvent(eventObj, currentDates)[0];\n        var eStart = new Date(record[this.parent.eventFields.startTime].getTime());\n        var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());\n        var appWidth = 0;\n        var topValue = 1;\n        var isDateRange = currentDates[0].getTime() <= eStart.getTime() &&\n            util.addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();\n        if (eStart <= eEnd && isDateRange && this.isWorkDayAvailable(resource, eStart)) {\n            var isAlreadyRendered = [];\n            if (this.renderedAllDayEvents[parseInt(resource.toString(), 10)]) {\n                isAlreadyRendered = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (event) {\n                    return event.Guid === eventObj.Guid;\n                });\n                if (this.parent.activeViewOptions.group.byDate) {\n                    isAlreadyRendered = isAlreadyRendered.filter(function (event) {\n                        return event[_this.parent.eventFields.startTime] >= currentDates[parseInt(dayIndex.toString(), 10)] &&\n                            event[_this.parent.eventFields.endTime] <=\n                                util.addDays(new Date(+currentDates[parseInt(dayIndex.toString(), 10)]), 1);\n                    });\n                }\n            }\n            if (isAlreadyRendered.length === 0) {\n                var allDayDifference_1 = record.data.count;\n                var allDayIndex_1 = this.getOverlapIndex(record, dayIndex, true, resource);\n                record.Index = allDayIndex_1;\n                this.allDayLevel = (this.allDayLevel < allDayIndex_1) ? allDayIndex_1 : this.allDayLevel;\n                var widthAdjustment = record.data.isRight ? 0 :\n                    this.parent.currentView === 'Day' ? 4 : 7;\n                if (allDayDifference_1 >= 0) {\n                    appWidth = (allDayDifference_1 * 100) - widthAdjustment;\n                }\n                if (isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n                    this.renderedAllDayEvents[parseInt(resource.toString(), 10)] = [];\n                }\n                this.renderedAllDayEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n                var allDayRow_1 = [].slice.call(this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).children);\n                var wIndex_1 = this.getDayIndex(dayIndex, resource, dayCount);\n                var eventWrapper_1 = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS +\n                    ':nth-child(' + (wIndex_1 + 1) + ')');\n                var appointmentElement_1;\n                if (inline) {\n                    appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n                }\n                else {\n                    appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);\n                }\n                addClass([appointmentElement_1], cls.ALLDAY_APPOINTMENT_CLASS);\n                var eventData = extend({}, record.data, null, true);\n                eventObj.data = eventData;\n                var args = { data: eventObj, element: appointmentElement_1, cancel: false };\n                this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        eventWrapper_1.appendChild(appointmentElement_1);\n                        topValue += (allDayIndex_1 === 0 ? cellTop : (cellTop + (allDayIndex_1 * eventHeight))) + 1;\n                        setStyleAttribute(appointmentElement_1, { 'width': appWidth + '%', 'top': formatUnit(topValue) });\n                        if (allDayIndex_1 > 1) {\n                            _this.moreEvents.push(appointmentElement_1);\n                            for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {\n                                _this.createMoreIndicator(allDayRow_1, count, wIndex_1);\n                            }\n                        }\n                        _this.allDayElement[0].setAttribute('data-count', _this.allDayLevel.toString());\n                        var allDayRowHeight = ((!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) ?\n                            (3 * eventHeight) : ((_this.allDayLevel + 1) * eventHeight)) + 4;\n                        _this.setAllDayRowHeight(allDayRowHeight);\n                        _this.addOrRemoveClass();\n                        _this.wireAppointmentEvents(appointmentElement_1, eventObj);\n                    }\n                });\n            }\n        }\n    };\n    VerticalEvent.prototype.renderNormalEvents = function (eventObj, dayIndex, resource, dayCount, inline) {\n        var record = this.isSpannedEvent(eventObj, dayIndex, resource);\n        var eStart = record[this.fields.startTime];\n        var eEnd = record[this.fields.endTime];\n        var appWidth = '0%';\n        var appLeft = '0%';\n        var topValue = 0;\n        var currentDate = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex.toString(), 10)].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);\n        if ((eStart.getTime() < this.parent.minDate.getTime()) || (eEnd.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        if (eStart <= eEnd && isValidEvent && this.isWorkDayAvailable(resource, eStart)) {\n            var appHeight = record.isSpanned.isSameDuration ? this.cellHeight : this.getHeight(eStart, eEnd);\n            if (eStart.getTime() >= schedule.startHour.getTime()) {\n                topValue = this.getTopValue(eStart);\n            }\n            var appIndex = this.getOverlapIndex(record, dayIndex, false, resource);\n            record.Index = appIndex;\n            this.overlapList.push(record);\n            if (this.overlapList.length > 1) {\n                if (isNullOrUndefined(this.overlapEvents[parseInt(appIndex.toString(), 10)])) {\n                    this.overlapEvents[parseInt(appIndex.toString(), 10)] = [];\n                }\n                this.overlapEvents[parseInt(appIndex.toString(), 10)].push(record);\n            }\n            else {\n                this.overlapEvents = [];\n                this.overlapEvents.push([record]);\n            }\n            appWidth = this.getEventWidth();\n            var argsData = {\n                index: appIndex, left: appLeft, width: appWidth,\n                day: dayCount, dayIndex: dayIndex, record: record, resource: resource\n            };\n            var tempData = this.adjustOverlapElements(argsData);\n            appWidth = (tempData.appWidth);\n            if (isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)])) {\n                this.renderedEvents[parseInt(resource.toString(), 10)] = [];\n            }\n            this.renderedEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));\n            var appointmentElement = void 0;\n            if (inline) {\n                appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);\n            }\n            else {\n                appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);\n            }\n            setStyleAttribute(appointmentElement, {\n                'width': (this.parent.eventSettings.enableMaxHeight ? '100%' : tempData.appWidth),\n                'height': appHeight + 'px', 'top': topValue + 'px'\n            });\n            var iconHeight = appointmentElement.querySelectorAll('.' + cls.EVENT_INDICATOR_CLASS).length * 15;\n            var maxHeight = appHeight - 40 - iconHeight;\n            var subjectElement = appointmentElement.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!this.parent.isAdaptive && subjectElement) {\n                subjectElement.style.maxHeight = formatUnit(maxHeight);\n            }\n            var index = this.getDayIndex(dayIndex, resource, dayCount);\n            var eventData = {};\n            eventData[this.fields.startTime] = eventObj[this.fields.startTime];\n            eventData[this.fields.endTime] = eventObj[this.fields.endTime];\n            record.data = eventData;\n            this.appendEvent(record, appointmentElement, index, tempData.appLeft);\n            this.wireAppointmentEvents(appointmentElement, eventObj);\n        }\n    };\n    VerticalEvent.prototype.getEventWidth = function () {\n        var width = this.parent.currentView === 'Day' ? 97 : 94;\n        var tempWidth = ((width - this.overlapEvents.length) / this.overlapEvents.length);\n        return (tempWidth < 0 ? 0 : tempWidth) + '%';\n    };\n    VerticalEvent.prototype.getEventLeft = function (appWidth, index) {\n        var tempLeft = (parseFloat(appWidth) + 1) * index;\n        return (tempLeft > 99 ? 99 : tempLeft) + '%';\n    };\n    VerticalEvent.prototype.getStartEndHours = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = new Date(2000, 0, 0, 0);\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    };\n    VerticalEvent.prototype.getTopValue = function (date) {\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (this.parent.activeViewOptions.timeScale.enable) ? ((diffInMinutes * this.cellHeight * this.slotCount) / this.interval) : 0;\n    };\n    VerticalEvent.prototype.getOverlapIndex = function (record, day, isAllDay, resource) {\n        var _this = this;\n        var fieldMapping = this.parent.eventFields;\n        var eventsList = [];\n        var appIndex = -1;\n        this.overlapEvents = [];\n        if (isAllDay) {\n            if (!isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {\n                var date_1 = util.resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)].getTime()));\n                eventsList = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function (app) {\n                    return util.resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() &&\n                        util.resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();\n                });\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    eventsList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], eventsList);\n                }\n            }\n        }\n        else {\n            var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)]) ?\n                this.renderedEvents[parseInt(resource.toString(), 10)] : [];\n            var appointment_1 = [];\n            var recordStart_1 = record[fieldMapping.startTime];\n            var recordEnd_1 = record[fieldMapping.endTime];\n            this.overlapList = appointmentList_1.filter(function (data) {\n                return (data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1) ||\n                    (data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1) ||\n                    (data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() &&\n                        data[fieldMapping.startTime].getTime() === recordStart_1.getTime() && data[fieldMapping.endTime] < recordEnd_1);\n            });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.overlapList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], this.overlapList);\n            }\n            var queue_1 = [];\n            this.overlapList.forEach(function (obj) {\n                queue_1.push(obj);\n                var filterList = [];\n                var processedIds = new Set();\n                var _loop_2 = function () {\n                    var currentObj = queue_1.shift();\n                    var overlaps = appointmentList_1.filter(function (data) {\n                        return data[fieldMapping.endTime] > currentObj[fieldMapping.startTime] &&\n                            data[fieldMapping.startTime] <= currentObj[fieldMapping.endTime] &&\n                            !processedIds.has(data[fieldMapping.id]);\n                    });\n                    overlaps.forEach(function (overlap) {\n                        filterList.push(overlap);\n                        processedIds.add(overlap[fieldMapping.id]);\n                        queue_1.push(overlap);\n                    });\n                    if (processedIds.size < appointmentList_1.length - 1) {\n                        return \"break\";\n                    }\n                };\n                while (queue_1.length > 0) {\n                    var state_1 = _loop_2();\n                    if (state_1 === \"break\")\n                        break;\n                }\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    filterList = _this.filterEventsByResource(_this.resources[parseInt(resource.toString(), 10)], filterList);\n                }\n                var collection = filterList.filter(function (val) {\n                    return _this.overlapList.indexOf(val) === -1;\n                });\n                if (collection.length > 0) {\n                    appointment_1 = appointment_1.concat(collection);\n                }\n            });\n            for (var i = 0; i < appointment_1.length - 1; i++) {\n                for (var j = i + 1; j < appointment_1.length; j++) {\n                    if (appointment_1[parseInt(i.toString(), 10)][fieldMapping.id] ===\n                        appointment_1[parseInt(j.toString(), 10)][fieldMapping.id]) {\n                        appointment_1.splice(j, 1);\n                        j--;\n                    }\n                }\n            }\n            this.overlapList = this.overlapList.concat(appointment_1);\n            eventsList = this.overlapList;\n            for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n                var event_4 = eventsList_1[_i];\n                var record_1 = event_4;\n                var index = record_1.Index;\n                if (isNullOrUndefined(this.overlapEvents[parseInt(index.toString(), 10)])) {\n                    this.overlapEvents[parseInt(index.toString(), 10)] = [event_4];\n                }\n                else {\n                    this.overlapEvents[parseInt(index.toString(), 10)].push(event_4);\n                }\n            }\n        }\n        if (!isAllDay) {\n            eventsList = eventsList.filter(function (obj) { return (obj[fieldMapping.startTime] === record[fieldMapping.startTime] &&\n                obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] &&\n                obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime]\n                && obj[fieldMapping.startTime] === record[fieldMapping.endTime]) ||\n                ((obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                    obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime())\n                    || (obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() &&\n                        obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() ||\n                        obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime())); });\n        }\n        if (eventsList.length > 0) {\n            var appLevel = eventsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    VerticalEvent.prototype.adjustOverlapElements = function (args) {\n        var data = { appWidth: args.width, appLeft: args.left };\n        for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {\n            if (!isNullOrUndefined(this.overlapEvents[parseInt(i.toString(), 10)])) {\n                for (var j = 0, length2 = this.overlapEvents[parseInt(i.toString(), 10)].length; j < length2; j++) {\n                    var dayCount = this.getDayIndex(args.dayIndex, args.resource, args.day);\n                    var element = this.element.querySelector('#e-appointment-wrapper-' + dayCount);\n                    if (element && element.childElementCount > 0) {\n                        var eleGuid = this.overlapEvents[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)].Guid;\n                        if (element.querySelectorAll('div[data-guid=\"' + eleGuid + '\"]').length > 0 && eleGuid !== args.record.Guid) {\n                            var apps = element.querySelector('div[data-guid=\"' + eleGuid + '\"]');\n                            if (parseFloat(args.width) <= parseFloat(apps.style.width)) {\n                                if (this.parent.enableRtl) {\n                                    apps.style.right = this.getEventLeft(args.width, i);\n                                }\n                                else {\n                                    apps.style.left = this.getEventLeft(args.width, i);\n                                }\n                                apps.style.width = ((parseFloat(args.width))) + '%';\n                                data.appWidth = apps.style.width;\n                            }\n                            else {\n                                data.appWidth = apps.style.width;\n                            }\n                        }\n                        else {\n                            var appWidth = args.width;\n                            if (isNullOrUndefined(this.overlapEvents[i - 1])) {\n                                appWidth = this.getEventWidth();\n                            }\n                            data.appWidth = appWidth;\n                            data.appLeft = this.getEventLeft(appWidth, args.index);\n                        }\n                    }\n                }\n            }\n        }\n        return data;\n    };\n    VerticalEvent.prototype.setAllDayRowHeight = function (height) {\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        if (this.parent.height === 'auto' || !this.parent.enableAllDayScroll) {\n            addClass([dateHeader], cls.ALLDAY_APPOINTMENT_AUTO);\n        }\n        var allDayRow = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        allDayRow.style.height = '';\n        if (this.parent.uiStateValues.expand && this.parent.height !== 'auto' && this.parent.enableAllDayScroll) {\n            allDayRow.style.height = (height / 12) + 'em';\n            this.parent.eventBase.allDayExpandScroll(dateHeader);\n        }\n        else {\n            for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {\n                var element = _a[_i];\n                element.style.height = (height / 12) + 'em';\n            }\n            removeClass([dateHeader], cls.ALLDAY_APPOINTMENT_SCROLL);\n        }\n    };\n    VerticalEvent.prototype.addOrRemoveClass = function () {\n        var _this = this;\n        this.moreEvents.filter(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                addClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '-1');\n            }\n            else {\n                removeClass([element], cls.EVENT_COUNT_CLASS);\n                element.setAttribute('tabindex', '0');\n            }\n        });\n        var moreEventCount = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        if (this.parent.uiStateValues.expand) {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n        }\n        else {\n            removeClass([moreEventCount], cls.APPOINTMENT_ROW_COLLAPSE_CLASS);\n            addClass([moreEventCount], cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        }\n        if (this.allDayLevel > 2) {\n            removeClass([moreEventCount], cls.DISABLE_CLASS);\n        }\n        else {\n            addClass([moreEventCount], cls.DISABLE_CLASS);\n        }\n        var countCell = [].slice.call(this.element.querySelectorAll('.' + cls.ROW_COUNT_WRAPPER_CLASS));\n        countCell.forEach(function (element) {\n            if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {\n                removeClass([element], cls.DISABLE_CLASS);\n            }\n            else {\n                addClass([element], cls.DISABLE_CLASS);\n            }\n        });\n    };\n    VerticalEvent.prototype.getEventHeight = function () {\n        var eventElement = createElement('div', { className: cls.APPOINTMENT_CLASS, styles: 'visibility:hidden' });\n        var eventWrapper = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS + ':first-child');\n        eventWrapper.appendChild(eventElement);\n        var height = eventElement.offsetHeight;\n        remove(eventElement);\n        return height;\n    };\n    VerticalEvent.prototype.rowExpandCollapse = function () {\n        var target = this.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_SECTION_CLASS);\n        this.parent.uiStateValues.expand = target.classList.contains(cls.APPOINTMENT_ROW_EXPAND_CLASS);\n        var rowHeight;\n        if (this.parent.uiStateValues.expand) {\n            target.setAttribute('title', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            target.setAttribute('aria-label', this.parent.localeObj.getConstant('collapseAllDaySection'));\n            rowHeight = ((this.allDayLevel + 1) * this.getEventHeight()) + 4;\n        }\n        else {\n            target.setAttribute('title', this.parent.localeObj.getConstant('expandAllDaySection'));\n            target.setAttribute('aria-label', this.parent.localeObj.getConstant('expandAllDaySection'));\n            rowHeight = (3 * this.getEventHeight()) + 4;\n            this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS).scrollTop = 0;\n        }\n        this.setAllDayRowHeight(rowHeight);\n        this.animation.animate(this.allDayElement[0]);\n        this.addOrRemoveClass();\n        this.animation.animate(target);\n    };\n    VerticalEvent.prototype.animationUiUpdate = function () {\n        this.parent.notify(events.contentReady, {});\n    };\n    VerticalEvent.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n        this.allDayElement = null;\n        this.renderedAllDayEvents = null;\n        this.renderedEvents = null;\n        this.slotCount = null;\n        this.interval = null;\n        this.startHour = null;\n        this.endHour = null;\n        this.element = null;\n        this.fields = null;\n        this.animation = null;\n        _super.prototype.destroy.call(this);\n    };\n    return VerticalEvent;\n}(EventBase));\nexport { VerticalEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, prepend, createElement, extend, EventHandler, closest, addClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { EventBase } from './event-base';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_GAP = 0;\n/**\n * Month view events render\n */\nvar MonthEvent = /** @class */ (function (_super) {\n    __extends(MonthEvent, _super);\n    function MonthEvent(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.renderedEvents = [];\n        _this.monthHeaderHeight = 0;\n        _this.moreIndicatorHeight = 19;\n        _this.renderType = 'day';\n        _this.element = _this.parent.activeView.getPanel();\n        _this.fields = _this.parent.eventFields;\n        _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator\n            && !_this.parent.rowAutoHeight;\n        _this.maxOrIndicator = (_this.maxHeight || _this.withIndicator);\n        _this.moreIndicatorHeight =\n            (_this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace) ? 0 : _this.moreIndicatorHeight;\n        _this.addEventListener();\n        return _this;\n    }\n    MonthEvent.prototype.removeEventWrapper = function (appElement) {\n        if (appElement.length > 0) {\n            appElement = (this.parent.currentView === 'Month' || (!this.parent.activeView.isTimelineView() &&\n                !this.parent.activeViewOptions.timeScale.enable)) ? appElement : [appElement[0]];\n            for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {\n                var wrap = appElement_1[_i];\n                if (wrap.parentElement && wrap.parentElement.parentNode) {\n                    remove(wrap.parentElement);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.rowAutoHeight) {\n            this.parent.uiStateValues.top = conWrap.scrollTop;\n            this.parent.uiStateValues.left = conWrap.scrollLeft;\n        }\n        var appointmentWrapper = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                    this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n                this.removeEventWrapper(appElement);\n                if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] &&\n                    this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                        this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper ' + '[data-group-index=\"' +\n                        this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex + '\"]'));\n                    this.removeEventWrapper(ele);\n                }\n            }\n        }\n        else {\n            for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {\n                var wrap = appointmentWrapper_1[_i];\n                remove(wrap);\n            }\n        }\n        this.removeHeightProperty(cls.CONTENT_TABLE_CLASS);\n        if (!this.element.querySelector('.' + cls.WORK_CELLS_CLASS)) {\n            return;\n        }\n        if (this.parent.currentView === 'Month') {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            var cellTd = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            cellTd.appendChild(wrapper);\n            this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;\n            cellTd.removeChild(wrapper);\n        }\n        this.eventHeight = this.parent.getElementHeightFromClass(this.element, cls.APPOINTMENT_CLASS);\n        var selector = '.' + cls.CONTENT_TABLE_CLASS + ' tbody tr';\n        this.addCellHeight(selector, this.eventHeight, (this.parent.currentView === 'Month' ? EVENT_GAP : 2), this.monthHeaderHeight, this.moreIndicatorHeight);\n        var scrollTop = conWrap.scrollTop;\n        if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll\n            && !isNullOrUndefined(this.parent.currentAction)) {\n            conWrap.scrollTop = conWrap.scrollTop - 1;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.renderResourceEvents();\n            if (this.parent.virtualScrollModule) {\n                this.parent.virtualScrollModule.updateFocusedWorkCell();\n            }\n        }\n        else {\n            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);\n        }\n        if (this.parent.rowAutoHeight) {\n            this.updateBlockElements();\n            var data = {\n                cssProperties: this.parent.getCssProperties(),\n                module: this.parent.getModuleName(),\n                isPreventScrollUpdate: true,\n                scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }\n            };\n            if (this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll) {\n                if (this.parent.currentAction) {\n                    conWrap.scrollTop = scrollTop;\n                    this.parent.currentAction = null;\n                }\n                else {\n                    this.parent.virtualScrollModule.updateVirtualScrollHeight();\n                }\n            }\n            if (!this.parent.enablePersistence) {\n                this.parent.notify(events.contentReady, {});\n            }\n            this.parent.notify(events.scrollUiUpdate, data);\n            if (this.parent.currentView === 'Month' && this.parent.showWeekNumber) {\n                var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n                var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WEEK_NUMBER_CLASS));\n                weekNumberCells.forEach(function (cell, i) {\n                    var height = totalCells_1[parseInt(i.toString(), 10)].offsetHeight;\n                    setStyleAttribute(cell, { 'height': height + 'px' });\n                });\n                this.parent.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS).scrollTop =\n                    this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).scrollTop;\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    MonthEvent.prototype.renderEventsHandler = function (dateRender, workDays, resData) {\n        this.renderedEvents = [];\n        var eventsList;\n        var blockList;\n        var resIndex = 0;\n        if (resData) {\n            resIndex = resData.groupIndex;\n            this.cssClass = resData.cssClass;\n            this.groupOrder = resData.groupOrder;\n            eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);\n            blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + resIndex + '\"]'));\n        }\n        else {\n            eventsList = this.parent.eventsProcessed;\n            blockList = this.parent.blockProcessed;\n            this.workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        }\n        this.sortByDateTime(eventsList);\n        this.sortByDateTime(blockList);\n        if (this.parent.currentView === 'Month' && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {\n            var totalCells = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap table tr td:first-child'));\n            var height_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).clientHeight / totalCells.length;\n            totalCells.forEach(function (cell) {\n                setStyleAttribute(cell, { 'height': height_1 + 'px' });\n            });\n        }\n        var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ? 0 : this.workCells.length - 1];\n        this.cellWidth = this.parent.getElementWidth(cellDetail);\n        this.cellHeight = this.parent.getElementHeight(cellDetail);\n        this.dateRender = dateRender;\n        var filteredDates = this.getRenderedDates(dateRender);\n        this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);\n        this.processBlockEvents(blockList, resIndex, resData);\n        var events = [];\n        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {\n            var event_1 = eventsList_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_1);\n            }\n            events = events.concat(this.splitEvent(event_1, filteredDates || this.dateRender));\n        }\n        for (var level = 0; level < this.slots.length; level++) {\n            this.renderedEvents = [];\n            var slot = this.slots[parseInt(level.toString(), 10)];\n            var endDate = util.addDays(new Date(slot[slot.length - 1]), 1);\n            var spannedEvents = this.filterEvents(new Date(slot[0]), endDate, events);\n            for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n                var event_2 = spannedEvents_1[_a];\n                if (this.maxHeight) {\n                    var sDate = this.parent.currentView === 'Month' ? event_2[this.fields.startTime] :\n                        this.getStartTime(event_2, event_2.data);\n                    if (this.getIndex(sDate) > 0) {\n                        continue;\n                    }\n                }\n                this.updateIndicatorIcon(event_2);\n                this.renderEvents(event_2, resIndex, eventsList);\n            }\n        }\n        this.cssClass = null;\n        this.groupOrder = null;\n    };\n    MonthEvent.prototype.processBlockEvents = function (blockEvents, resIndex, resData) {\n        for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {\n            var event_3 = blockEvents_1[_i];\n            if (this.parent.resourceBase && !resData) {\n                this.cssClass = this.parent.resourceBase.getCssClass(event_3);\n            }\n            var blockSpannedList = [];\n            if (this.renderType === 'day' && !event_3[this.fields.isAllDay]) {\n                var temp = extend({}, event_3, null, true);\n                var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                temp.isBlockIcon = isSameDate;\n                if (!isSameDate && util.getDateInMs(temp[this.fields.startTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.endTime] = util.addDays(util.resetTime(new Date(event_3[this.fields.startTime] + '')), 1);\n                    e.isBlockIcon = true;\n                    temp[this.fields.startTime] = e[this.fields.endTime];\n                    blockSpannedList.push(e);\n                }\n                isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);\n                if (!isSameDate && util.getDateInMs(temp[this.fields.endTime]) > 0) {\n                    var e = extend({}, event_3, null, true);\n                    e[this.fields.startTime] = util.resetTime(new Date(event_3[this.fields.endTime] + ''));\n                    e.isBlockIcon = true;\n                    blockSpannedList.push(e);\n                    temp[this.fields.endTime] = e[this.fields.startTime];\n                }\n                blockSpannedList.push(temp);\n            }\n            else {\n                blockSpannedList.push(event_3);\n            }\n            for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {\n                var blockEvent = blockSpannedList_1[_a];\n                var spannedEvents = this.splitEvent(blockEvent, this.dateRender);\n                for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {\n                    var event_4 = spannedEvents_2[_b];\n                    this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.isSameDate = function (start, end) {\n        return new Date(+start).setHours(0, 0, 0, 0) === new Date(+end).setHours(0, 0, 0, 0);\n    };\n    MonthEvent.prototype.renderBlockEvents = function (event, resIndex, isIcon) {\n        var eventData = event.data;\n        var startTime = this.getStartTime(event, eventData);\n        var endTime = this.getEndTime(event, eventData);\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (day < 0 || startTime > endTime) {\n            return;\n        }\n        var cellTd = this.getCellTd(day);\n        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);\n        if (!isIcon) {\n            var diffInDays = eventData.count;\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth;\n            var appLeft = (this.parent.enableRtl) ? 0 : position;\n            var appRight = (this.parent.enableRtl) ? position : 0;\n            var appHeight = this.cellHeight - this.monthHeaderHeight;\n            var appTop = this.getRowTop(resIndex);\n            var blockElement = this.createBlockAppointmentElement(event, resIndex, this.isResourceEventTemplate);\n            setStyleAttribute(blockElement, {\n                'width': appWidth + 'px', 'height': appHeight + 'px', 'left': appLeft + 'px',\n                'right': appRight + 'px', 'top': appTop + 'px'\n            });\n            this.renderEventElement(event, blockElement, cellTd);\n        }\n        else {\n            this.renderBlockIndicator(cellTd, position, resIndex);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n        if (isNullOrUndefined(cellTd.querySelector('.' + cls.BLOCK_INDICATOR_CLASS))) {\n            cellTd.appendChild(blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getStartTime = function (event, eventData) {\n        return event[this.fields.startTime];\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getEndTime = function (event, eventData) {\n        return event[this.fields.endTime];\n    };\n    MonthEvent.prototype.getCellTd = function (day) {\n        return this.workCells[parseInt(day.toString(), 10)];\n    };\n    MonthEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        return count * this.cellWidth - 1;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        return 0;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.getRowTop = function (resIndex) {\n        return 0;\n    };\n    MonthEvent.prototype.updateIndicatorIcon = function (event) {\n        if (this.parent.currentView.indexOf('Timeline') === -1 || this.parent.currentView === 'TimelineMonth'\n            || event[this.fields.isAllDay]) {\n            return;\n        }\n        var cloneData = event.data;\n        var start = this.parent.activeView.getStartHour();\n        var end = this.parent.activeView.getEndHour();\n        var startHour = util.getStartEndHours(event[this.fields.startTime], start, end);\n        var endHour = util.getStartEndHours(event[this.fields.endTime], start, end);\n        var actualStartTime = cloneData[this.fields.startTime];\n        var actualEndTime = cloneData[this.fields.endTime];\n        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();\n        cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();\n        if (util.resetTime(actualStartTime).getTime() !== util.resetTime(actualEndTime).getTime()) {\n            var actualStartHour = startHour.startHour;\n            var actualEndHour = endHour.endHour;\n            var startTime = new Date(util.resetTime(actualStartTime));\n            startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());\n            cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ?\n                startTime.getTime() : util.addDays(startTime, 1).getTime());\n            if (actualEndTime.getTime() !== util.resetTime(actualEndTime).getTime()) {\n                var endTime = new Date(util.resetTime(actualEndTime));\n                cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <=\n                    endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());\n            }\n        }\n    };\n    MonthEvent.prototype.renderResourceEvents = function () {\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var sourceRes = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n                if (!this.parent.uiStateValues.isGroupAdaptive ||\n                    (this.parent.uiStateValues.groupIndex === sourceRes.groupIndex && this.parent.uiStateValues.isGroupAdaptive)) {\n                    this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);\n                }\n                if (this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n                    this.renderEventsHandler(target.renderDates, target.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {\n                var slotData = resources_1[_i];\n                this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);\n            }\n        }\n    };\n    MonthEvent.prototype.getSlotDates = function (workDays) {\n        this.slots = [];\n        var dates = this.dateRender.map(function (date) { return +date; });\n        var noOfDays = !this.parent.activeViewOptions.showWeekend || (this.parent.activeViewOptions.group.byDate &&\n            this.parent.activeViewOptions.group.hideNonWorkingDays) ? workDays.length : util.WEEK_LENGTH;\n        while (dates.length > 0) {\n            this.slots.push(dates.splice(0, noOfDays));\n        }\n    };\n    MonthEvent.prototype.createAppointmentElement = function (record, resIndex, isCloneElement) {\n        if (isCloneElement === void 0) { isCloneElement = false; }\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default ||\n            this.parent.localeObj.getConstant('addTitle'));\n        var newRecord = extend({}, record, record.data, true);\n        var attrs = {\n            'data-id': 'Appointment_' + record[this.fields.id],\n            'role': 'button', 'tabindex': '0',\n            'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n            'aria-label': this.parent.getAnnouncementString(newRecord, eventSubject)\n        };\n        if (!isCloneElement) {\n            attrs['data-guid'] = record.Guid;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            attrs['data-group-index'] = resIndex.toString();\n        }\n        var appointmentWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS, attrs: attrs });\n        if (!isNullOrUndefined(this.cssClass)) {\n            addClass([appointmentWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([appointmentWrapper], 'e-read-only');\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        appointmentWrapper.appendChild(appointmentDetails);\n        var templateElement;\n        var eventData = record.data;\n        var eventObj = this.getEventData(record);\n        if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.eventTemplateName;\n            var templateId = scheduleId + viewName + 'eventTemplate';\n            var eventTemplate = this.isResourceEventTemplate ? this.parent.getEventTemplateName(resIndex) : 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var eventLocation = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var appointmentSubject = createElement('div', { className: cls.SUBJECT_CLASS });\n            this.parent.sanitize((eventSubject + (eventLocation ? '; ' + eventLocation : '')), appointmentSubject);\n            var appointmentStartTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])\n            });\n            var appointmentEndTime = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])\n            });\n            if (this.parent.currentView === 'Month') {\n                if (record[this.fields.isAllDay]) {\n                    templateElement = [appointmentSubject];\n                    addClass([appointmentSubject], 'e-text-center');\n                }\n                else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {\n                    templateElement = [appointmentStartTime, appointmentSubject];\n                }\n                else {\n                    templateElement = [];\n                    addClass([appointmentSubject], 'e-text-center');\n                    if (!eventData.isLeft) {\n                        templateElement.push(appointmentStartTime);\n                    }\n                    templateElement.push(appointmentSubject);\n                    if (!eventData.isRight) {\n                        templateElement.push(appointmentEndTime);\n                    }\n                }\n            }\n            else {\n                var innerElement = void 0;\n                if (record[this.fields.isAllDay]) {\n                    var allDayString = createElement('div', {\n                        className: cls.APPOINTMENT_TIME, innerHTML: this.parent.localeObj.getConstant('allDay')\n                    });\n                    innerElement = [appointmentSubject, allDayString];\n                }\n                else {\n                    var timeString = this.parent.getTimeString(eventData[this.fields.startTime])\n                        + ' - ' + this.parent.getTimeString(eventData[this.fields.endTime]);\n                    var appTime = createElement('div', {\n                        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''), innerHTML: timeString\n                    });\n                    var appLocation = createElement('div', { className: cls.LOCATION_CLASS });\n                    this.parent.sanitize(eventLocation, appLocation);\n                    innerElement = [appointmentSubject, appTime, appLocation];\n                }\n                var wrap = createElement('div', { className: 'e-inner-wrap' });\n                append(innerElement, wrap);\n                templateElement = [wrap];\n            }\n        }\n        append(templateElement, appointmentDetails);\n        this.appendEventIcons(record, appointmentDetails);\n        this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);\n        return appointmentWrapper;\n    };\n    MonthEvent.prototype.appendEventIcons = function (record, appointmentDetails) {\n        var eventData = record.data;\n        if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {\n            var iconClass = (record[this.fields.id] === record[this.fields.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appointmentDetails.appendChild(createElement('div', {\n                className: cls.ICON + ' ' + iconClass + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : '')\n            }));\n        }\n        if (eventData.isLeft) {\n            var iconLeft = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_LEFT_CLASS\n            });\n            prepend([iconLeft], appointmentDetails);\n        }\n        if (eventData.isRight) {\n            var iconRight = createElement('div', {\n                className: cls.EVENT_INDICATOR_CLASS + ' ' + cls.ICON + ' ' + cls.EVENT_ICON_RIGHT_CLASS\n            });\n            append([iconRight], appointmentDetails);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MonthEvent.prototype.renderEvents = function (event, resIndex, eventsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        var day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(startTime));\n        if ((day < 0) || (startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventsPerRow = this.parent.rowAutoHeight ? 1 : this.parent.activeViewOptions.maxEventsPerRow;\n        var overlapCount = this.getIndex(startTime);\n        event.Index = overlapCount;\n        var diffInDays = event.data.count;\n        if (startTime.getTime() <= endTime.getTime()) {\n            var appWidth = (diffInDays * this.cellWidth) - 5;\n            var cellTd = this.workCells[parseInt(day.toString(), 10)];\n            var appTop = (overlapCount * (this.eventHeight + EVENT_GAP));\n            var height = this.monthHeaderHeight + ((overlapCount + 1) * (this.eventHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var enableAppRender = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight &&\n                !this.parent.eventSettings.enableIndicator ? overlapCount < eventsPerRow : this.maxOrIndicator ? overlapCount < 1\n                ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || enableAppRender) {\n                this.renderedEvents.push(extend({}, event, null, true));\n                var appointmentElement = void 0;\n                if (this.inlineValue) {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                else {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                this.wireAppointmentEvents(appointmentElement, event);\n                setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'top': appTop + 'px' });\n                this.renderEventElement(event, appointmentElement, cellTd);\n                if (this.parent.rowAutoHeight) {\n                    var firstChild = cellTd.parentElement.firstElementChild;\n                    this.updateCellHeight(firstChild, height);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    if (this.workCells[day + i]) {\n                        var indicator = this.workCells[day + i].querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                        if (indicator) {\n                            var count = parseInt(indicator.getAttribute('data-count'), 10) + 1;\n                            indicator.setAttribute('data-count', count.toString());\n                            indicator.setAttribute('aria-label', count + ' ' + this.parent.localeObj.getConstant('moreEvents'));\n                            indicator.innerHTML = this.getMoreIndicatorText(count);\n                        }\n                        else {\n                            var startDate = new Date(this.dateRender[day + i].getTime());\n                            var endDate = util.addDays(this.dateRender[day + i], 1);\n                            var groupIndex = this.workCells[day + i].getAttribute('data-group-index');\n                            var moreIndicatorElement = this.getMoreIndicatorElement(1, startDate, endDate);\n                            if (!isNullOrUndefined(groupIndex)) {\n                                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n                            }\n                            moreIndicatorElement.style.top = (this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight) + 'px';\n                            moreIndicatorElement.style.width = this.cellWidth - 2 + 'px';\n                            this.renderElement(this.workCells[day + i], moreIndicatorElement);\n                            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    MonthEvent.prototype.updateCellHeight = function (cell, height) {\n        if ((height > cell.offsetHeight)) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n        }\n    };\n    MonthEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var target = closest(element, 'tr');\n            this.monthHeaderHeight = element.offsetParent.offsetTop - target.offsetTop;\n            element.style.height = ((target.offsetHeight - 1) - this.monthHeaderHeight) + 'px';\n            var firstChild = target.firstElementChild;\n            var width = Math.round(element.offsetWidth / firstChild.offsetWidth);\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n    };\n    // eslint-disable-next-line max-len\n    MonthEvent.prototype.getFilteredEvents = function (startDate, endDate, groupIndex, eventsList) {\n        var filteredEvents;\n        if (isNullOrUndefined(groupIndex)) {\n            filteredEvents = this.filterEvents(startDate, endDate);\n        }\n        else {\n            var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? undefined : eventsList, data);\n        }\n        return filteredEvents;\n    };\n    MonthEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateTime = util.resetTime(date).getTime();\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            if ((util.resetTime(app[this.fields.startTime]).getTime() <= dateTime) &&\n                (util.resetTime(app[this.fields.endTime]).getTime() >= dateTime)) {\n                appointmentsList.push(app);\n            }\n        }\n        return appointmentsList;\n    };\n    MonthEvent.prototype.getIndex = function (date) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapEvents(date, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    MonthEvent.prototype.moreIndicatorClick = function (event) {\n        var _this = this;\n        var target = closest(event.target, '.' + cls.MORE_INDICATOR_CLASS);\n        var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n        var endDate = new Date(parseInt(target.getAttribute('data-end-date'), 10));\n        var groupIndex = target.getAttribute('data-group-index');\n        var moreArgs = {\n            cancel: false, event: event, element: target, isPopupOpen: true,\n            startTime: startDate, endTime: endDate, viewName: this.parent.getNavigateView()\n        };\n        if (groupIndex) {\n            moreArgs.groupIndex = parseInt(groupIndex, 10);\n        }\n        this.parent.trigger(events.moreEventsClick, moreArgs, function (clickArgs) {\n            if (!clickArgs.cancel) {\n                if (clickArgs.isPopupOpen) {\n                    var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);\n                    var moreArgs_1 = { date: startDate, event: filteredEvents, element: event.target };\n                    _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);\n                }\n                else {\n                    _this.parent.setProperties({ selectedDate: startDate }, true);\n                    _this.parent.changeView(clickArgs.viewName, event);\n                }\n            }\n        });\n    };\n    MonthEvent.prototype.renderEventElement = function (event, appointmentElement, cellTd) {\n        var _this = this;\n        var eventType = appointmentElement.classList.contains(cls.BLOCK_APPOINTMENT_CLASS) ? 'blockEvent' : 'event';\n        var isAppointment = appointmentElement.classList.contains(cls.APPOINTMENT_CLASS);\n        var eventObj = this.parent.currentView === 'Month' ? this.getSpannedTime(event) : this.getEventData(event);\n        var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (eventArgs.cancel) {\n                _this.renderedEvents.pop();\n            }\n            else {\n                _this.renderElement(cellTd, appointmentElement, isAppointment);\n            }\n        });\n    };\n    MonthEvent.prototype.getSpannedTime = function (event) {\n        var eventObj = extend({}, event, null, true);\n        if ((eventObj[this.fields.startTime]).getDate() === (eventObj.data[this.fields.startTime]).getDate()) {\n            eventObj[this.fields.startTime] = eventObj.data[this.fields.startTime];\n        }\n        if ((eventObj[this.fields.endTime]).getDate() === (eventObj.data[this.fields.endTime]).getDate()) {\n            eventObj[this.fields.endTime] = eventObj.data[this.fields.endTime];\n        }\n        return eventObj;\n    };\n    MonthEvent.prototype.getEventData = function (event) {\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = event.data[this.fields.startTime];\n        eventObj[this.fields.endTime] = event.data[this.fields.endTime];\n        return eventObj;\n    };\n    MonthEvent.prototype.renderElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (this.maxOrIndicator && isAppointment) {\n            this.setMaxEventHeight(element, cellTd);\n        }\n        var wrapperEle = cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (wrapperEle) {\n            wrapperEle.appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    MonthEvent.prototype.getMoreIndicatorElement = function (count, startDate, endDate) {\n        var moreIndicatorElement = createElement('div', {\n            className: cls.MORE_INDICATOR_CLASS,\n            innerHTML: this.getMoreIndicatorText(count),\n            attrs: {\n                'role': 'button',\n                'tabindex': '0',\n                'aria-label': this.parent.globalize.formatNumber(count) + ' ' + this.parent.localeObj.getConstant('moreEvents'),\n                'data-count': count.toString(),\n                'data-start-date': startDate.getTime().toString(),\n                'data-end-date': endDate.getTime().toString()\n            }\n        });\n        return moreIndicatorElement;\n    };\n    MonthEvent.prototype.getMoreIndicatorText = function (count) {\n        return '+' + this.parent.globalize.formatNumber(count) + '&nbsp;' + (this.parent.isAdaptive ? '' : this.parent.localeObj.getConstant('more'));\n    };\n    MonthEvent.prototype.removeHeightProperty = function (selector) {\n        var rows = [].slice.call(this.element.querySelectorAll('.' + selector + ' tbody tr'));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    MonthEvent.prototype.setMaxEventHeight = function (event, cell) {\n        var headerHeight = util.getOuterHeight(cell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var height = (cell.offsetHeight - headerHeight) - (this.maxHeight ? 0 : this.moreIndicatorHeight);\n        setStyleAttribute(event, { 'height': height + 'px', 'align-items': 'center' });\n    };\n    MonthEvent.prototype.destroy = function () {\n        this.element = null;\n        this.fields = null;\n        this.maxHeight = null;\n        this.withIndicator = null;\n        this.maxOrIndicator = null;\n        this.moreIndicatorHeight = null;\n        this.removeEventListener();\n        _super.prototype.destroy.call(this);\n    };\n    return MonthEvent;\n}(EventBase));\nexport { MonthEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, setStyleAttribute, extend, EventHandler, createElement } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { MonthEvent } from './month';\nvar EVENT_GAP = 2;\nvar BLOCK_INDICATOR_WIDTH = 22;\nvar BLOCK_INDICATOR_HEIGHT = 18;\n/**\n * Timeline view events render\n */\nvar TimelineEvent = /** @class */ (function (_super) {\n    __extends(TimelineEvent, _super);\n    function TimelineEvent(parent, type) {\n        var _this = _super.call(this, parent) || this;\n        _this.startHour = _this.parent.activeView.getStartHour();\n        _this.endHour = _this.parent.activeView.getEndHour();\n        _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;\n        _this.interval = _this.parent.activeViewOptions.timeScale.interval;\n        _this.day = 0;\n        _this.rowIndex = 0;\n        _this.cellTops = [];\n        _this.renderType = type;\n        _this.eventContainers = [].slice.call(_this.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var tr = [].slice.call(_this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n        _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;\n        _this.content = _this.parent.element.querySelector('.' + cls.SCHEDULE_TABLE_CLASS + '.' + cls.CONTENT_TABLE_CLASS);\n        return _this;\n    }\n    TimelineEvent.prototype.getSlotDates = function () {\n        this.slots = [];\n        this.slots.push(this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            this.renderType = 'day';\n            var workCell = this.content.querySelector('.' + cls.WORK_CELLS_CLASS);\n            this.cellWidth = this.parent.getElementWidth(workCell) / +(workCell.getAttribute('colspan') || 1);\n            this.slotsPerDay = 1;\n        }\n        else {\n            this.slotsPerDay = (this.dayLength / this.dateRender.length);\n        }\n    };\n    TimelineEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        if (this.renderType === 'day') {\n            for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n                var app = appointments_1[_i];\n                if ((util.resetTime(app[this.fields.startTime]).getTime() <= util.resetTime(new Date(date.getTime())).getTime()) &&\n                    (util.resetTime(app[this.fields.endTime]).getTime() >= util.resetTime(new Date(date.getTime())).getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        else {\n            for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {\n                var app = appointments_2[_a];\n                var eventData = app.data;\n                if ((eventData.trimStartTime.getTime() <= date.getTime() &&\n                    eventData.trimEndTime.getTime() > date.getTime()) ||\n                    (eventData.trimStartTime.getTime() === date.getTime() &&\n                        eventData.trimEndTime.getTime() === date.getTime())) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    TimelineEvent.prototype.getSortComparerIndex = function (startDate, endDate) {\n        var appIndex = -1;\n        var appointments = this.renderedEvents;\n        if (appointments.length > 0) {\n            var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);\n            var appLevel = appointmentsList.map(function (obj) { return obj.Index; });\n            appIndex = (appLevel.length > 0) ? this.getSmallestMissingNumber(appLevel) : 0;\n        }\n        return (appIndex === -1) ? 0 : appIndex;\n    };\n    TimelineEvent.prototype.getOverlapSortComparerEvents = function (startDate, endDate, appointmentsCollection) {\n        var appointments = [];\n        var _loop_1 = function (app) {\n            if (this_1.renderType === 'day') {\n                var start_1 = util.resetTime(startDate).getTime();\n                var end_1 = util.resetTime(endDate).getTime();\n                var appStart_1 = util.resetTime(app[this_1.fields.startTime]).getTime();\n                var appEnd_1 = util.resetTime(app[this_1.fields.endTime]).getTime();\n                var isEndOverlap = function () {\n                    var endTime = (end_1 - (util.getDateInMs(endDate) <= 0 ? util.MS_PER_DAY : 0));\n                    endTime = start_1 > endTime ? start_1 : endTime;\n                    return appEnd_1 >= endTime && appStart_1 <= endTime;\n                };\n                if (appStart_1 <= start_1 && appEnd_1 >= start_1 || isEndOverlap() || appStart_1 > start_1 && appEnd_1 < end_1) {\n                    appointments.push(app);\n                }\n            }\n            else {\n                var eventData = app.data;\n                if (((eventData.trimStartTime.getTime() <= startDate.getTime()) && (startDate.getTime() < eventData.trimEndTime.getTime())) ||\n                    ((startDate.getTime() <= eventData.trimStartTime.getTime()) && (eventData.trimStartTime.getTime() < endDate.getTime()))) {\n                    appointments.push(app);\n                }\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, appointmentsCollection_1 = appointmentsCollection; _i < appointmentsCollection_1.length; _i++) {\n            var app = appointmentsCollection_1[_i];\n            _loop_1(app);\n        }\n        return appointments;\n    };\n    TimelineEvent.prototype.renderResourceEvents = function () {\n        this.removeHeightProperty(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        var selector = '.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' tbody tr';\n        this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.moreIndicatorHeight, 0, false);\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.resourceBase.renderedResources;\n        if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {\n            for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {\n                var source = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];\n                this.rowIndex = source.groupIndex;\n                if (!this.parent.uiStateValues.isGroupAdaptive ||\n                    (this.parent.uiStateValues.groupIndex === source.groupIndex && this.parent.uiStateValues.isGroupAdaptive)) {\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);\n                }\n                if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                    this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                    var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];\n                    this.rowIndex = target.groupIndex;\n                    this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);\n                }\n            }\n            this.parent.crudModule.crudObj.isCrudAction = false;\n        }\n        else {\n            for (var i = 0; i < resources.length; i++) {\n                this.rowIndex = i;\n                this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[parseInt(i.toString(), 10)]);\n            }\n        }\n    };\n    TimelineEvent.prototype.renderEvents = function (event, resIndex, appointmentsList) {\n        var startTime = event[this.fields.startTime];\n        var endTime = event[this.fields.endTime];\n        if ((startTime.getTime() < this.parent.minDate.getTime()) || (endTime.getTime() > this.parent.maxDate.getTime())) {\n            return;\n        }\n        var eventData = event.data;\n        startTime = this.getStartTime(event, eventData);\n        endTime = this.getEndTime(event, eventData);\n        var startEndHours = util.getStartEndHours(event[this.fields.startTime], this.startHour, this.endHour);\n        var eventDates = this.updateEventMinimumDuration(startEndHours, startTime, endTime);\n        startTime = eventDates.startDate;\n        endTime = eventDates.endDate;\n        this.day = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        if (this.day < 0) {\n            return;\n        }\n        var cellTd = this.getCellTd();\n        var eventsPerRow = this.parent.rowAutoHeight ? 1 : this.parent.activeViewOptions.maxEventsPerRow;\n        var overlapCount = (isNullOrUndefined(this.parent.eventSettings.sortComparer)) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);\n        event.Index = overlapCount;\n        var appHeight = this.eventHeight;\n        var diffInDays = eventData.count;\n        var eventObj = extend({}, event, null, true);\n        eventObj[this.fields.startTime] = eventData[this.fields.startTime];\n        eventObj[this.fields.endTime] = eventData[this.fields.endTime];\n        var currentDate = util.resetTime(new Date(this.dateRender[this.day].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var isValidEvent = true;\n        if (this.isDayProcess() || eventObj[this.fields.isAllDay]) {\n            isValidEvent = true;\n        }\n        else {\n            isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);\n        }\n        if (startTime <= endTime && isValidEvent) {\n            var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);\n            appWidth = this.renderType === 'day' ? appWidth - 2 : appWidth;\n            var appLeft = 0;\n            var appRight = 0;\n            var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);\n            appWidth = (appWidth <= 0) ? this.cellWidth : appWidth; // appWidth 0 when start and end time as same\n            this.renderedEvents.push(extend({}, event, null, true));\n            if (isNullOrUndefined(this.cellTops[parseInt(resIndex.toString(), 10)])) {\n                this.cellTops[parseInt(resIndex.toString(), 10)] = this.getRowTop(resIndex);\n            }\n            var top_1 = this.cellTops[parseInt(resIndex.toString(), 10)];\n            var appTop = (top_1 + (this.maxHeight ? 0 : EVENT_GAP)) + (overlapCount * (appHeight + EVENT_GAP));\n            appLeft = (this.parent.enableRtl) ? 0 : position;\n            appRight = (this.parent.enableRtl) ? position : 0;\n            var height = ((overlapCount + 1) * (appHeight + EVENT_GAP)) + this.moreIndicatorHeight;\n            var renderApp = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.rowAutoHeight && !this.parent.eventSettings.enableIndicator\n                ? overlapCount < eventsPerRow : this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;\n            if (this.parent.rowAutoHeight || renderApp) {\n                var appointmentElement = void 0;\n                if (isNullOrUndefined(this.inlineValue)) {\n                    appointmentElement = this.createAppointmentElement(event, resIndex);\n                }\n                else {\n                    appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();\n                }\n                this.applyResourceColor(appointmentElement, event, 'backgroundColor', this.groupOrder);\n                setStyleAttribute(appointmentElement, {\n                    'width': appWidth + 'px', 'left': appLeft + 'px', 'right': appRight + 'px', 'top': appTop + 'px'\n                });\n                this.wireAppointmentEvents(appointmentElement, event);\n                if (this.parent.rowAutoHeight) {\n                    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n                    var conWidth = this.parent.getElementWidth(conWrap);\n                    var isWithoutScroll = conWrap.offsetHeight === conWrap.clientHeight &&\n                        conWrap.offsetWidth === conWrap.clientWidth;\n                    this.renderEventElement(event, appointmentElement, cellTd);\n                    var firstChild = this.getFirstChild(resIndex);\n                    this.updateCellHeight(firstChild, height);\n                    if (isWithoutScroll &&\n                        (conWrap.offsetWidth > conWrap.clientWidth || conWidth !== this.parent.getElementWidth(conWrap))) {\n                        this.adjustAppointments(conWidth);\n                    }\n                }\n                else {\n                    this.renderEventElement(event, appointmentElement, cellTd);\n                }\n            }\n            else {\n                for (var i = 0; i < diffInDays; i++) {\n                    var moreIndicator = cellTd.querySelector('.' + cls.MORE_INDICATOR_CLASS);\n                    var appPos = (this.parent.enableRtl) ? appRight : appLeft;\n                    appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n                    var interval = this.interval / this.slotCount;\n                    var startDate = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day' || i !== 0) ?\n                        new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);\n                    var endDate = util.addDays(this.dateRender[this.day + i], 1);\n                    if (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') {\n                        var position_1 = this.getPosition(startDate, endDate, event[this.fields.isAllDay], (this.day + i));\n                        this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_1);\n                    }\n                    else {\n                        var slotCount = (util.getUniversalTime(endTime) - util.getUniversalTime(startTime)) / util.MS_PER_MINUTE *\n                            this.slotCount / this.interval;\n                        for (var k = 0; k < slotCount; k++) {\n                            startDate = (k === 0) ? new Date(startDate.getTime()) : new Date(startDate.getTime() + (60000 * interval));\n                            if (slotCount < 1) {\n                                startDate = this.adjustToNearestTimeSlot(startDate, interval);\n                            }\n                            endDate = new Date(startDate.getTime() + (60000 * interval));\n                            if (slotCount >= 1 && endDate.getTime() > endTime.getTime()) {\n                                break;\n                            }\n                            var position_2 = this.getPosition(startDate, endDate, false, (this.day + i));\n                            if (appPos > position_2) {\n                                break;\n                            }\n                            appPos = position_2;\n                            this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_2);\n                        }\n                    }\n                }\n            }\n        }\n        this.parent.renderTemplates();\n    };\n    TimelineEvent.prototype.adjustToNearestTimeSlot = function (inputTime, interval) {\n        // Parse the input time\n        var parsedTime = new Date(inputTime);\n        // Get the minutes of the input time in milliseconds\n        var minutesInMilliseconds = parsedTime.getHours() * 60 * 60 * 1000 + parsedTime.getMinutes() * 60 * 1000;\n        // Calculate the adjusted time in milliseconds (nearest time slot)\n        var adjustedMinutesInMilliseconds = Math.floor(minutesInMilliseconds / (interval * 60 * 1000)) * (interval * 60 * 1000);\n        // Create a new Date object with the adjusted time\n        var adjustedTime = new Date(parsedTime.getTime());\n        adjustedTime.setHours(adjustedMinutesInMilliseconds / (60 * 60 * 1000) % 24);\n        adjustedTime.setMinutes((adjustedMinutesInMilliseconds % (60 * 60 * 1000)) / (60 * 1000));\n        // Return the adjusted time in string format\n        return adjustedTime;\n    };\n    TimelineEvent.prototype.renderTimelineMoreIndicator = function (startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {\n        appLeft = (this.parent.enableRtl) ? appRight = position : position;\n        appPos = (this.parent.enableRtl) ? appRight : appLeft;\n        appPos = (Math.floor(appPos / this.cellWidth) * this.cellWidth);\n        if ((cellTd && isNullOrUndefined(moreIndicator)) ||\n            (!this.isAlreadyAvail(appPos, cellTd))) {\n            var startDateTime = (this.parent.activeViewOptions.option === 'TimelineMonth' || this.renderType === 'day') ? new Date(+startTime) : startDate;\n            var slotStartTime = (new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval)));\n            var slotEndTime = new Date(slotStartTime.getTime() + (60000 * interval));\n            var groupIndex = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {\n                groupIndex = resIndex.toString();\n            }\n            var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);\n            var appArea = this.cellHeight - this.moreIndicatorHeight;\n            appHeight = this.withIndicator ? appArea - EVENT_GAP : appHeight;\n            var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP));\n            var count = this.parent.activeViewOptions.maxEventsPerRow && !this.parent.eventSettings.enableIndicator\n                ? filterEvents.length - this.parent.activeViewOptions.maxEventsPerRow : (filterEvents.length - renderedAppCount) <= 0 ? 1\n                : filterEvents.length - renderedAppCount;\n            var moreIndicatorElement = void 0;\n            if (this.renderType === 'day') {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);\n            }\n            else {\n                moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);\n            }\n            if (!isNullOrUndefined(groupIndex)) {\n                moreIndicatorElement.setAttribute('data-group-index', groupIndex);\n            }\n            moreIndicatorElement.style.top = top + appArea + 'px';\n            moreIndicatorElement.style.width = this.cellWidth + 'px';\n            moreIndicatorElement.style.left = (Math.floor(appLeft / this.cellWidth) * this.cellWidth) + 'px';\n            moreIndicatorElement.style.right = (Math.floor(appRight / this.cellWidth) * this.cellWidth) + 'px';\n            this.renderElement(cellTd, moreIndicatorElement);\n            EventHandler.add(moreIndicatorElement, 'click', this.moreIndicatorClick, this);\n        }\n    };\n    TimelineEvent.prototype.updateCellHeight = function (cell, height) {\n        var cellHeight = cell.style.height === '' ? this.cellHeight : parseInt(cell.style.height, 10);\n        if (height > cellHeight) {\n            setStyleAttribute(cell, { 'height': height + 'px' });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                var resourceCell = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS + ' ' + 'tbody td[data-group-index=\"' +\n                    cell.getAttribute('data-group-index') + '\"]');\n                if (resourceCell) {\n                    setStyleAttribute(resourceCell, { 'height': height + 'px' });\n                }\n            }\n            var monthHeader = this.parent.element.querySelector('.e-month-header-wrapper table tr:nth-child(' +\n                (cell.parentElement.rowIndex + 1) + ') td');\n            if (monthHeader) {\n                setStyleAttribute(monthHeader, { 'height': height + 'px' });\n            }\n        }\n    };\n    TimelineEvent.prototype.adjustAppointments = function (conWidth) {\n        var _this = this;\n        var tr = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr');\n        var actualCellWidth = this.parent.getElementWidth(this.workCells[0]);\n        this.cellWidth = actualCellWidth / +(this.workCells[0].getAttribute('colspan') || 1);\n        var currentPercentage = (actualCellWidth * tr.children.length) / (conWidth / 100);\n        var apps = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        apps.forEach(function (app) {\n            if (_this.parent.enableRtl && app.style.right !== '0px') {\n                app.style.right = ((parseFloat(app.style.right) / 100) * currentPercentage) + 'px';\n            }\n            else if (app.style.left !== '0px') {\n                app.style.left = ((parseFloat(app.style.left) / 100) * currentPercentage) + 'px';\n            }\n            app.style.width = ((parseFloat(app.style.width) / 100) * currentPercentage) + 'px';\n        });\n    };\n    TimelineEvent.prototype.getFirstChild = function (index) {\n        var query = '.' + cls.CONTENT_TABLE_CLASS + ' tbody td';\n        var groupIndex = '';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            groupIndex = '[data-group-index=\"' + index.toString() + '\"]';\n        }\n        var td = this.parent.element.querySelector(query + groupIndex);\n        return td;\n    };\n    TimelineEvent.prototype.updateBlockElements = function () {\n        var blockElement = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_APPOINTMENT_CLASS));\n        for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {\n            var element = blockElement_1[_i];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            var firstChild = this.getFirstChild(resIndex);\n            element.style.height = firstChild.offsetHeight + 'px';\n            var width = element.offsetWidth / firstChild.offsetWidth;\n            element.style.width = (firstChild.offsetWidth * width) + 'px';\n        }\n        var blockIndicator = [].slice.call(this.element.querySelectorAll('.' + cls.BLOCK_INDICATOR_CLASS));\n        for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {\n            var element = blockIndicator_1[_a];\n            var resIndex = parseInt(element.getAttribute('data-group-index'), 10);\n            element.style.top = this.getRowTop(resIndex) +\n                this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n        }\n    };\n    TimelineEvent.prototype.getStartTime = function (event, eventData) {\n        var startTime = event[this.fields.startTime];\n        var schedule = util.getStartEndHours(startTime, this.startHour, this.endHour);\n        if (this.isDayProcess()) {\n            startTime = event[this.fields.startTime];\n        }\n        else {\n            if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {\n                startTime = schedule.startHour;\n            }\n            else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {\n                startTime = this.getNextDay(schedule.startHour, eventData);\n            }\n            else {\n                startTime = eventData[this.fields.startTime];\n            }\n        }\n        // To overcome the overflow\n        eventData.trimStartTime = (event[this.fields.isAllDay]) ? schedule.startHour : eventData[this.fields.startTime];\n        return startTime;\n    };\n    TimelineEvent.prototype.getNextDay = function (startTime, eventData) {\n        var startDate;\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            startDate = util.addDays(startTime, i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                eventData.count = eventData.count - 1;\n                return startDate;\n            }\n        }\n        return startDate;\n    };\n    TimelineEvent.prototype.getEndTime = function (event, eventData) {\n        var endTime = event[this.fields.endTime];\n        var schedule = util.getStartEndHours(endTime, this.startHour, this.endHour);\n        if (this.isDayProcess()) {\n            endTime = eventData[this.fields.endTime];\n        }\n        else {\n            endTime = eventData[this.fields.endTime];\n            if (schedule.endHour.getTime() <= eventData[this.fields.endTime] || event[this.fields.isAllDay]) {\n                endTime = schedule.endHour;\n            }\n            if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event[this.fields.isAllDay]) {\n                endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);\n            }\n        }\n        // To overcome the overflow\n        eventData.trimEndTime = (event[this.fields.isAllDay]) ? schedule.endHour : eventData[this.fields.endTime];\n        return endTime;\n    };\n    TimelineEvent.prototype.getPreviousDay = function (startTime, endTime, eventData) {\n        for (var i = 1; i <= this.dateRender.length; i++) {\n            var endDate = util.addDays(endTime, -i);\n            if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime()))) !== -1) {\n                endDate = util.resetTime(new Date(endDate.getTime()));\n                endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());\n                var count = eventData.count;\n                var actualEndTime = eventData[this.fields.endTime];\n                eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;\n                return endDate;\n            }\n        }\n        return eventData[this.fields.endTime];\n    };\n    TimelineEvent.prototype.getEventWidth = function (startDate, endDate, isAllDay, count) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (count * this.slotsPerDay) * this.cellWidth;\n        }\n        if (this.isSameDay(startDate, endDate)) {\n            return this.getSameDayEventsWidth(startDate, endDate);\n        }\n        else {\n            return this.getSpannedEventsWidth(startDate, endDate, count);\n        }\n    };\n    TimelineEvent.prototype.getSameDayEventsWidth = function (startDate, endDate) {\n        return ((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) /\n            util.MS_PER_MINUTE * (this.cellWidth * this.slotCount) / this.getIntervalInMinutes(startDate));\n    };\n    TimelineEvent.prototype.getSpannedEventsWidth = function (startDate, endDate, diffInDays) {\n        var width = (diffInDays * this.slotsPerDay) * this.cellWidth;\n        var endWidth;\n        var start = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);\n        if (this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endDate.getTime()))) === -1) {\n            endWidth = 0;\n        }\n        else {\n            var end = util.getStartEndHours(util.resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);\n            endWidth = this.getSameDayEventsWidth(endDate, end.endHour);\n            endWidth = ((this.slotsPerDay * this.cellWidth) === endWidth) ? 0 : endWidth;\n        }\n        var spannedWidth = startWidth + endWidth;\n        return (width > spannedWidth) ? width - spannedWidth : width - startWidth;\n    };\n    TimelineEvent.prototype.isSameDay = function (startTime, endTime) {\n        var startDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(startTime.getTime())));\n        var endDay = this.parent.getIndexOfDate(this.dateRender, util.resetTime(new Date(endTime.getTime())));\n        return (startDay === endDay);\n    };\n    TimelineEvent.prototype.getAppointmentLeft = function (schedule, startTime, day) {\n        var slotTd = (this.isSameDay(startTime, schedule.startHour)) ?\n            ((util.getUniversalTime(startTime) - util.getUniversalTime(schedule.startHour)) /\n                (util.MS_PER_MINUTE * this.getIntervalInMinutes(startTime))) * this.slotCount : 0;\n        if (day === 0) {\n            return slotTd;\n        }\n        else {\n            var daySlot = Math.round((((util.getUniversalTime(schedule.endHour) - util.getUniversalTime(schedule.startHour)) /\n                util.MS_PER_MINUTE) / this.getIntervalInMinutes(startTime)) * this.slotCount);\n            return (daySlot * day) + slotTd;\n        }\n    };\n    TimelineEvent.prototype.getPosition = function (startTime, endTime, isAllDay, day) {\n        if (this.renderType === 'day' || isAllDay) {\n            return (day * this.slotsPerDay) * this.cellWidth;\n        }\n        var currentDate = util.resetTime(new Date(this.dateRender[parseInt(day.toString(), 10)].getTime()));\n        var schedule = util.getStartEndHours(currentDate, this.startHour, this.endHour);\n        var cellIndex;\n        if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else if (schedule.endHour.getTime() <= endTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        else if (schedule.startHour.getTime() >= startTime.getTime()) {\n            cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);\n        }\n        else {\n            cellIndex = this.getAppointmentLeft(schedule, startTime, day);\n        }\n        return cellIndex * this.cellWidth;\n    };\n    TimelineEvent.prototype.getFilterEvents = function (startDate, endDate, startTime, endTime, gIndex, eventsList) {\n        if (this.renderType === 'day') {\n            return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);\n        }\n        else {\n            return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);\n        }\n    };\n    TimelineEvent.prototype.getIntervalInMinutes = function (startDate) {\n        if (this.slotsPerDay !== 1) {\n            return this.interval;\n        }\n        var hoursRange = util.getStartEndHours(util.resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);\n        return (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n    };\n    TimelineEvent.prototype.isAlreadyAvail = function (appPos, cellTd) {\n        var moreIndicator = [].slice.call(cellTd.querySelectorAll('.' + cls.MORE_INDICATOR_CLASS));\n        for (var i = 0; i < moreIndicator.length; i++) {\n            var indicatorPos = void 0;\n            if (moreIndicator) {\n                indicatorPos = (this.parent.enableRtl) ? moreIndicator[parseInt(i.toString(), 10)].style.right : moreIndicator[parseInt(i.toString(), 10)].style.left;\n            }\n            if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    TimelineEvent.prototype.getRowTop = function (resIndex) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                ' ' + 'tbody td[data-group-index=\"' + resIndex.toString() + '\"]').offsetTop;\n        }\n        return 0;\n    };\n    TimelineEvent.prototype.getCellTd = function () {\n        var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;\n        return this.eventContainers[parseInt(wrapIndex.toString(), 10)];\n    };\n    TimelineEvent.prototype.renderBlockIndicator = function (cellTd, position, resIndex) {\n        // No need to render block icon for Year, Month and Week header rows\n        if (this.parent.headerRows.length > 0 &&\n            (this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Hour' ||\n                this.parent.headerRows[this.parent.headerRows.length - 1].option !== 'Date')) {\n            return;\n        }\n        position = (Math.floor(position / this.cellWidth) * this.cellWidth) + this.cellWidth - BLOCK_INDICATOR_WIDTH;\n        if (!this.isAlreadyAvail(position, cellTd)) {\n            var blockIndicator = createElement('div', { className: 'e-icons ' + cls.BLOCK_INDICATOR_CLASS });\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                blockIndicator.setAttribute('data-group-index', resIndex.toString());\n            }\n            if (this.parent.enableRtl) {\n                blockIndicator.style.right = position + 'px';\n            }\n            else {\n                blockIndicator.style.left = position + 'px';\n            }\n            blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + 'px';\n            this.renderElement(cellTd, blockIndicator);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineEvent.prototype.setMaxEventHeight = function (event, cell) {\n        setStyleAttribute(event, {\n            'height': (this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP) - (this.maxHeight ? 0 : this.moreIndicatorHeight)) + 'px'\n        });\n    };\n    TimelineEvent.prototype.isDayProcess = function () {\n        if (this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ||\n            (this.parent.activeViewOptions.headerRows.length > 0 &&\n                this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour')) {\n            return true;\n        }\n        return false;\n    };\n    TimelineEvent.prototype.destroy = function () {\n        this.renderType = null;\n        this.eventContainers = null;\n        this.dayLength = null;\n        this.content = null;\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return TimelineEvent;\n}(MonthEvent));\nexport { TimelineEvent };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, closest, remove, removeClass, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\n/**\n * Inline Edit interactions\n */\nvar InlineEdit = /** @class */ (function () {\n    function InlineEdit(parent) {\n        this.parent = parent;\n        this.parent.on(events.inlineClick, this.inlineEdit, this);\n    }\n    InlineEdit.prototype.inlineEdit = function (args) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (args.type === 'Cell') {\n            var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_POPUP_WRAPPER_CLASS);\n            if (moreWrapper && moreWrapper.classList.contains(cls.POPUP_OPEN)) {\n                this.parent.quickPopup.morePopup.hide();\n            }\n            this.removeInlineAppointmentElement();\n            this.cellEdit(args);\n        }\n        else {\n            if (this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS) !==\n                args.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS)) {\n                this.removeInlineAppointmentElement();\n            }\n            this.eventEdit(args);\n        }\n    };\n    InlineEdit.prototype.cellEdit = function (args) {\n        var saveObj = this.generateEventData();\n        var cellIndex = args.element.cellIndex;\n        var count = this.getEventDaysCount(saveObj);\n        if (count > 1) {\n            count = Math.round(count);\n            count--;\n            cellIndex = cellIndex - count;\n        }\n        var start = util.resetTime(new Date('' + saveObj[this.parent.eventFields.startTime])).getTime();\n        var end = util.resetTime(new Date('' + saveObj[this.parent.eventFields.endTime])).getTime();\n        var resIndex = args.groupIndex || 0;\n        var isVertical = this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek';\n        if (this.parent.activeViewOptions.timeScale.enable && isVertical) {\n            var dayIndex = saveObj[this.parent.eventFields.startTime].getDay();\n            this.createVerticalViewInline(saveObj, dayIndex, resIndex, cellIndex);\n        }\n        else if (this.parent.currentView === 'Month' || (!this.parent.activeViewOptions.timeScale.enable && isVertical)) {\n            this.createMonthViewInline(saveObj, resIndex, start, end);\n        }\n        else {\n            this.createTimelineViewInline(saveObj, start, end, resIndex);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            inlineSubject.focus();\n        }\n    };\n    InlineEdit.prototype.eventEdit = function (args) {\n        var inlineSubject = args.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        var subject;\n        if (inlineSubject) {\n            subject = inlineSubject.value;\n        }\n        else {\n            var subEle = args.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!isNullOrUndefined(subEle)) {\n                addClass([subEle], cls.DISABLE_CLASS);\n                subject = subEle.innerText;\n            }\n            else {\n                subject = args.data[this.parent.eventFields.subject];\n            }\n            inlineSubject = createElement('input', { className: cls.INLINE_SUBJECT_CLASS, attrs: { value: subject } });\n            if (closest(args.element, '.' + cls.MORE_POPUP_WRAPPER_CLASS)) {\n                args.element.insertBefore(inlineSubject, subEle);\n            }\n            else if (['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n                var subjectWrap = args.element.querySelector('.' + cls.SUBJECT_WRAP);\n                if (isNullOrUndefined(subjectWrap)) {\n                    subjectWrap = createElement('div', { className: cls.SUBJECT_WRAP });\n                    args.element.prepend(subjectWrap);\n                }\n                subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);\n            }\n            else {\n                var elementSelector = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek', 'TimelineMonth'].indexOf(this.parent.currentView) > -1 ?\n                    '.e-inner-wrap' : '.e-appointment-details';\n                var innerWrapElement = args.element.querySelector(elementSelector);\n                if (isNullOrUndefined(innerWrapElement)) {\n                    args.element.querySelector('.e-appointment-details').prepend(inlineSubject);\n                }\n                else {\n                    innerWrapElement.prepend(inlineSubject);\n                }\n            }\n            inlineSubject.focus();\n        }\n        inlineSubject.setSelectionRange(subject.length, subject.length);\n    };\n    InlineEdit.prototype.createVerticalViewInline = function (saveObj, dayIndex, resIndex, daysCount) {\n        var _a;\n        var count = this.getEventDaysCount(saveObj);\n        var verticalEvent = new VerticalEvent(this.parent);\n        verticalEvent.initializeValues();\n        var index = verticalEvent.dateRender[parseInt(resIndex.toString(), 10)].map(function (date) { return date.getDay(); }).indexOf(dayIndex);\n        if (count >= 1) {\n            verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n            (_a = verticalEvent.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n            var allDayElements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_APPOINTMENT_CLASS));\n            var allDayLevel = 0;\n            if (allDayElements.length > 0) {\n                allDayLevel = Math.floor(this.parent.getElementHeight(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS)) /\n                    allDayElements[0].offsetHeight) - 1;\n            }\n            verticalEvent.allDayLevel = allDayLevel;\n            var appHeight = this.parent.getElementHeightFromClass(this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS), cls.APPOINTMENT_CLASS);\n            var cellTop = verticalEvent.allDayElement.length > 0 ? verticalEvent.allDayElement[0].offsetTop : 0;\n            verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline, cellTop, appHeight);\n        }\n        else {\n            verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);\n        }\n    };\n    InlineEdit.prototype.createMonthViewInline = function (saveObj, index, start, end) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var monthEvent = new MonthEvent(this.parent);\n        monthEvent.dateRender = this.parent.activeView.renderDates;\n        monthEvent.inlineValue = this.parent.allowInline;\n        var renderDates = this.parent.activeView.renderDates;\n        var workDays = this.parent.activeViewOptions.workDays;\n        var monthCellSelector = '.' + cls.WORK_CELLS_CLASS;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            monthCellSelector += '[data-group-index=\"' + index + '\"]';\n            var resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n            renderDates = resourceData.renderDates;\n            workDays = resourceData.workDays;\n        }\n        monthEvent.dateRender = renderDates;\n        monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));\n        monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;\n        monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;\n        monthEvent.eventHeight =\n            this.parent.getElementHeightFromClass(this.parent.monthModule.element || monthEvent.element, cls.APPOINTMENT_CLASS);\n        monthEvent.getSlotDates(workDays);\n        var filteredDates = monthEvent.getRenderedDates(renderDates);\n        var spannedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);\n        for (var _i = 0, spannedEvents_1 = spannedEvents; _i < spannedEvents_1.length; _i++) {\n            var eventData = spannedEvents_1[_i];\n            monthEvent.renderEvents(eventData, index);\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        inlineSubject.focus();\n    };\n    InlineEdit.prototype.createTimelineViewInline = function (saveObj, start, end, resIndex) {\n        var count = this.getEventDaysCount(saveObj);\n        var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);\n        var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        timelineView.dateRender = this.parent.activeView.renderDates;\n        timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        timelineView.inlineValue = this.parent.allowInline;\n        timelineView.cellWidth = workCell.offsetWidth;\n        timelineView.cellHeight = workCell.offsetHeight;\n        var dayLength = this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr').length === 0 ?\n            0 : this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr')[0].children.length;\n        timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;\n        timelineView.eventHeight = this.parent.getElementHeightFromClass(timelineView.element, cls.APPOINTMENT_CLASS);\n        timelineView.renderEvents(saveObject, resIndex);\n    };\n    InlineEdit.prototype.getEventDaysCount = function (saveObj) {\n        var startDate = saveObj[this.parent.eventFields.startTime];\n        var endDate = saveObj[this.parent.eventFields.endTime];\n        var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n        return daysCount;\n    };\n    InlineEdit.prototype.generateEventData = function (target) {\n        var inlineElement = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : '';\n        var saveObj = {};\n        saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        saveObj[this.parent.eventFields.subject] = subject;\n        saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        this.parent.eventWindow.setDefaultValueToObject(saveObj);\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);\n        }\n        return saveObj;\n    };\n    InlineEdit.prototype.documentClick = function () {\n        var target = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (target && target.value !== '') {\n            this.inlineCrudActions(target);\n        }\n        else {\n            this.removeInlineAppointmentElement();\n        }\n    };\n    InlineEdit.prototype.inlineCrudActions = function (target) {\n        if (closest(target, '.' + cls.INLINE_APPOINTMENT_CLASS)) {\n            var saveObj = this.generateEventData(target);\n            this.parent.addEvent(saveObj);\n        }\n        else {\n            var eventTarget = closest(target, '.' + cls.APPOINTMENT_CLASS);\n            var eventDetails = this.parent.getEventDetails(eventTarget);\n            eventDetails[this.parent.eventFields.subject] = target.value;\n            var currentAction = void 0;\n            if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {\n                currentAction = 'EditOccurrence';\n                eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n            }\n            this.parent.saveEvent(eventDetails, currentAction);\n        }\n        this.removeInlineAppointmentElement();\n    };\n    InlineEdit.prototype.createInlineAppointmentElement = function (inlineData) {\n        var inlineAppointmentElement = createElement('div', {\n            className: cls.APPOINTMENT_CLASS + ' ' + cls.INLINE_APPOINTMENT_CLASS\n        });\n        var inlineDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        inlineAppointmentElement.appendChild(inlineDetails);\n        var inline = createElement('input', { className: cls.INLINE_SUBJECT_CLASS });\n        inlineDetails.appendChild(inline);\n        if (inlineData) {\n            this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, 'backgroundColor');\n        }\n        return inlineAppointmentElement;\n    };\n    InlineEdit.prototype.removeInlineAppointmentElement = function () {\n        var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll('.' + cls.INLINE_APPOINTMENT_CLASS));\n        if (inlineAppointment.length > 0) {\n            inlineAppointment.forEach(function (node) { return remove(node); });\n        }\n        var inlineSubject = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (inlineSubject) {\n            var appointmentSubject = closest(inlineSubject, '.' + cls.APPOINTMENT_CLASS);\n            var subject = appointmentSubject.querySelector('.' + cls.SUBJECT_CLASS);\n            if (!isNullOrUndefined(subject)) {\n                removeClass([subject], cls.DISABLE_CLASS);\n            }\n            remove(inlineSubject);\n        }\n    };\n    InlineEdit.prototype.destroy = function () {\n        this.parent.off(events.inlineClick, this.inlineEdit);\n    };\n    return InlineEdit;\n}());\nexport { InlineEdit };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport * as cls from '../base/css-constant';\n/**\n * Appointment window field validation\n */\nvar FieldValidator = /** @class */ (function () {\n    function FieldValidator() {\n    }\n    FieldValidator.prototype.renderFormValidator = function (form, rules, element, locale) {\n        var _this = this;\n        this.element = element;\n        this.formObj = new FormValidator(form, {\n            locale: locale,\n            customPlacement: function (inputElement, error) {\n                _this.errorPlacement(inputElement, error);\n            },\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            focusout: function (args) {\n                _this.focusOut(args);\n            }\n        });\n    };\n    FieldValidator.prototype.focusOut = function (args) {\n        var target = args.relatedTarget;\n        if (target && (target.classList.contains('e-dlg-closeicon-btn') || target.classList.contains('e-close')\n            || target.classList.contains(cls.ALLDAY_CELLS_CLASS) || target.classList.contains(cls.HEADER_CELLS_CLASS)\n            || target.classList.contains(cls.QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(cls.WORK_CELLS_CLASS)\n            || target.classList.contains(cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {\n            this.ignoreError = true;\n        }\n        else {\n            this.ignoreError = false;\n        }\n    };\n    FieldValidator.prototype.validationComplete = function (args) {\n        var elem = this.element.querySelector('#' + args.inputName + '_Error');\n        if (elem) {\n            elem.style.display = (args.status === 'failure') ? '' : 'none';\n        }\n    };\n    FieldValidator.prototype.errorPlacement = function (inputElement, error) {\n        var id = error.getAttribute('for');\n        var elem = this.element.querySelector('#' + id + '_Error');\n        if (!elem && !this.ignoreError) {\n            this.createTooltip(inputElement, error, id, '');\n        }\n        if (!isNullOrUndefined(elem)) {\n            elem.querySelector('.e-error').innerHTML = error.innerHTML;\n        }\n    };\n    FieldValidator.prototype.createTooltip = function (element, error, name, display) {\n        var dlgContent;\n        var client;\n        var inputClient = element.getBoundingClientRect();\n        if (this.element.classList.contains(cls.POPUP_WRAPPER_CLASS)) {\n            dlgContent = this.element;\n            client = this.element.getBoundingClientRect();\n        }\n        else {\n            dlgContent = this.element.querySelector('.e-schedule-dialog .e-dlg-content');\n            client = dlgContent.getBoundingClientRect();\n        }\n        var div = createElement('div', {\n            className: 'e-tooltip-wrap e-popup ' + cls.ERROR_VALIDATION_CLASS,\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + 'px;'\n        });\n        var content = createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        dlgContent.appendChild(div);\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n    };\n    FieldValidator.prototype.destroyToolTip = function () {\n        if (this.element) {\n            var elements = [].slice.call(this.element.querySelectorAll('.' + cls.ERROR_VALIDATION_CLASS));\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var elem = elements_1[_i];\n                remove(elem);\n            }\n        }\n        if (this.formObj && this.formObj.element) {\n            this.formObj.reset();\n        }\n    };\n    FieldValidator.prototype.destroy = function () {\n        if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.formObj = null;\n        this.element = null;\n    };\n    return FieldValidator;\n}());\nexport { FieldValidator };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { closest, EventHandler, isNullOrUndefined, formatUnit, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, createElement, remove, extend } from '@syncfusion/ej2-base';\nimport { Dialog, Popup, isCollide } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { FieldValidator } from './form-validator';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\n/**\n * Quick Popups interactions\n */\nvar QuickPopups = /** @class */ (function () {\n    function QuickPopups(parent) {\n        this.isMultipleEventSelect = false;\n        this.isCrudAction = false;\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fieldValidator = new FieldValidator();\n        this.render();\n        this.addEventListener();\n    }\n    QuickPopups.prototype.render = function () {\n        this.renderQuickPopup();\n        this.renderMorePopup();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.renderQuickPopup = function () {\n        var quickPopupWrapper = createElement('div', { className: cls.POPUP_WRAPPER_CLASS + ' e-popup-close', attrs: { role: 'dialog' } });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(quickPopupWrapper);\n            addClass([quickPopupWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(quickPopupWrapper);\n        }\n        this.quickPopup = new Popup(quickPopupWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            open: this.quickPopupOpen.bind(this),\n            close: this.quickPopupClose.bind(this),\n            hideAnimation: (this.parent.isAdaptive ? { name: 'ZoomOut' } : { name: 'FadeOut', duration: 150 }),\n            showAnimation: (this.parent.isAdaptive ? { name: 'ZoomIn' } : { name: 'FadeIn', duration: 150 }),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'none', Y: 'fit' })),\n            position: (this.parent.isAdaptive || this.parent.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1004 : 3)\n        });\n    };\n    QuickPopups.prototype.renderMorePopup = function () {\n        var moreEventPopup = \"<div class=\\\"\" + cls.MORE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_CLASS + \"\\\">\" +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\" tabindex=\\\"0\\\" role=\\\"button\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_DATE_HEADER_CLASS + \"\\\"><div class=\\\"\" + cls.MORE_EVENT_HEADER_DAY_CLASS + \"\\\" id=\\\"\" + this.parent.element.id + \"_more_popup\\\"></div>\") +\n            (\"<div class=\\\"\" + cls.MORE_EVENT_HEADER_DATE_CLASS + \" \" + cls.NAVIGATE_CLASS + \"\\\" tabindex=\\\"0\\\" role=\\\"link\\\"></div></div></div></div>\");\n        var moreEventWrapper = createElement('div', {\n            className: cls.MORE_POPUP_WRAPPER_CLASS + ' e-popup-close',\n            innerHTML: moreEventPopup\n        });\n        if (this.parent.isAdaptive) {\n            document.body.appendChild(moreEventWrapper);\n            addClass([moreEventWrapper], cls.DEVICE_CLASS);\n        }\n        else {\n            this.parent.element.appendChild(moreEventWrapper);\n        }\n        this.morePopup = new Popup(moreEventWrapper, {\n            targetType: (this.parent.isAdaptive ? 'container' : 'relative'),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'ZoomOut', duration: 300 },\n            showAnimation: { name: 'ZoomIn', duration: 300 },\n            open: this.morePopupOpen.bind(this),\n            close: this.morePopupClose.bind(this),\n            collision: (this.parent.isAdaptive ? { X: 'fit', Y: 'fit' } :\n                (this.parent.enableRtl ? { X: 'flip', Y: 'fit' } : { X: 'flip', Y: 'flip' })),\n            viewPortElement: (this.parent.isAdaptive ? document.body : this.parent.element),\n            zIndex: (this.parent.isAdaptive ? 1002 : 2)\n        });\n        this.morePopup.element.setAttribute('role', 'dialog');\n        this.morePopup.element.setAttribute('aria-labelledby', this.parent.element.id + '_more_popup');\n        var closeButton = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CLOSE_CLASS);\n        this.renderButton('e-round', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeButton, this.closeClick);\n        EventHandler.add(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS), 'click', this.navigationClick, this);\n    };\n    QuickPopups.prototype.renderQuickDialog = function () {\n        var buttonModel = [\n            { buttonModel: { cssClass: 'e-quick-alertok e-flat', isPrimary: true }, click: this.dialogButtonClick.bind(this) },\n            { buttonModel: { cssClass: 'e-quick-alertcancel e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this) },\n            {\n                buttonModel: { cssClass: 'e-quick-dialog-cancel e-disable e-flat', isPrimary: false },\n                click: this.dialogButtonClick.bind(this)\n            }\n        ];\n        if (this.parent.eventSettings.editFollowingEvents) {\n            var followingSeriesButton = {\n                buttonModel: { cssClass: 'e-quick-alertfollowing e-flat', isPrimary: false }, click: this.dialogButtonClick.bind(this)\n            };\n            buttonModel.splice(1, 0, followingSeriesButton);\n        }\n        this.quickDialog = new Dialog({\n            animationSettings: { effect: 'Zoom' },\n            buttons: buttonModel,\n            cssClass: cls.QUICK_DIALOG_CLASS,\n            closeOnEscape: true,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            beforeClose: this.beforeQuickDialogClose.bind(this),\n            isModal: true,\n            position: { X: 'center', Y: 'center' },\n            showCloseIcon: true,\n            target: document.body,\n            visible: false,\n            width: 'auto'\n        });\n        var dialogElement = createElement('div', { id: this.parent.element.id + 'QuickDialog' });\n        this.parent.element.appendChild(dialogElement);\n        this.quickDialog.appendTo(dialogElement);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.setAttribute('aria-label', this.l10n.getConstant('occurrence'));\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.setAttribute('aria-label', this.l10n.getConstant('series'));\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        if (this.quickDialog.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.quickDialog.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n    };\n    // eslint-disable-next-line max-len\n    QuickPopups.prototype.renderButton = function (className, iconName, isDisabled, element, clickEvent) {\n        var buttonObj = new Button({\n            cssClass: className,\n            disabled: isDisabled,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            iconCss: iconName\n        });\n        buttonObj.appendTo(element);\n        EventHandler.add(element, 'click', clickEvent, this);\n        removeClass([element], cls.ICON);\n    };\n    QuickPopups.prototype.quickDialogClass = function (action) {\n        var classList = [\n            cls.QUICK_DIALOG_OCCURRENCE_CLASS, cls.QUICK_DIALOG_SERIES_CLASS, cls.QUICK_DIALOG_DELETE_CLASS,\n            cls.QUICK_DIALOG_CANCEL_CLASS, cls.QUICK_DIALOG_ALERT_BTN_CLASS, cls.DISABLE_CLASS\n        ];\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var followingEventButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        removeClass([okButton, cancelButton], classList);\n        addClass([this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS)], cls.DISABLE_CLASS);\n        if (this.parent.eventSettings.editFollowingEvents) {\n            addClass([followingEventButton], cls.DISABLE_CLASS);\n            removeClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n        }\n        switch (action) {\n            case 'Recurrence':\n                addClass([okButton], cls.QUICK_DIALOG_OCCURRENCE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_SERIES_CLASS);\n                if (this.parent.eventSettings.editFollowingEvents) {\n                    removeClass([followingEventButton], cls.DISABLE_CLASS);\n                    addClass([this.quickDialog.element], cls.FOLLOWING_EVENTS_DIALOG);\n                    addClass([followingEventButton], cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);\n                }\n                break;\n            case 'Delete':\n                addClass([okButton], cls.QUICK_DIALOG_DELETE_CLASS);\n                addClass([cancelButton], cls.QUICK_DIALOG_CANCEL_CLASS);\n                break;\n            case 'Alert':\n                addClass([okButton], [cls.QUICK_DIALOG_ALERT_OK, cls.QUICK_DIALOG_ALERT_BTN_CLASS]);\n                addClass([cancelButton], [cls.QUICK_DIALOG_ALERT_CANCEL, cls.DISABLE_CLASS]);\n                break;\n        }\n    };\n    QuickPopups.prototype.applyFormValidation = function () {\n        var form = this.quickPopup.element.querySelector('.' + cls.FORM_CLASS);\n        var rules = {};\n        rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;\n        this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);\n    };\n    QuickPopups.prototype.openRecurrenceAlert = function () {\n        var editDeleteOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (editDeleteOnly) {\n            editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteEvent' : 'editEvent');\n            editDeleteOnly.setAttribute('aria-label', editDeleteOnly.innerHTML);\n        }\n        var editFollowingEventsOnly = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_FOLLOWING);\n        if (editFollowingEventsOnly) {\n            editFollowingEventsOnly.innerHTML = this.l10n.getConstant('editFollowingEvent');\n            editFollowingEventsOnly.setAttribute('aria-label', editFollowingEventsOnly.innerHTML);\n        }\n        var editDeleteSeries = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (editDeleteSeries) {\n            editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteSeries' : 'editSeries');\n            editDeleteSeries.setAttribute('aria-label', editDeleteSeries.innerHTML);\n        }\n        this.quickDialog.content = this.l10n.getConstant('editContent');\n        this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === 'Delete' ? 'deleteTitle' : 'editTitle');\n        this.quickDialogClass('Recurrence');\n        this.showQuickDialog('RecurrenceAlert');\n    };\n    QuickPopups.prototype.openRecurrenceValidationAlert = function (type) {\n        this.quickDialogClass('Alert');\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        okButton.innerHTML = this.l10n.getConstant('ok');\n        okButton.setAttribute('aria-label', okButton.innerHTML);\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        cancelButton.innerHTML = this.l10n.getConstant('cancel');\n        cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        var dialogCancel;\n        switch (type) {\n            case 'wrongPattern':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('wrongPattern');\n                break;\n            case 'createError':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('createError');\n                break;\n            case 'sameDayAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('sameDayAlert');\n                break;\n            case 'seriesChangeAlert':\n                dialogCancel = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_CANCEL_CLASS);\n                removeClass([cancelButton, dialogCancel], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('seriesChangeAlert');\n                okButton.innerHTML = this.l10n.getConstant('yes');\n                cancelButton.innerHTML = this.l10n.getConstant('no');\n                dialogCancel.innerHTML = this.l10n.getConstant('cancel');\n                break;\n            case 'occurrenceAlert':\n                addClass([cancelButton], cls.DISABLE_CLASS);\n                this.quickDialog.content = this.l10n.getConstant('occurenceAlert');\n                break;\n        }\n        if ((!this.parent.enableRecurrenceValidation && type === 'wrongPattern') || this.parent.enableRecurrenceValidation) {\n            this.showQuickDialog('RecurrenceValidationAlert');\n        }\n    };\n    QuickPopups.prototype.openDeleteAlert = function () {\n        if (this.parent.activeViewOptions.readonly) {\n            return;\n        }\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('delete');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            cancelButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialog.content = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleContent') : this.l10n.getConstant('deleteContent');\n        this.quickDialog.header = (this.parent.activeEventData.event.length > 1) ?\n            this.l10n.getConstant('deleteMultipleEvent') : this.l10n.getConstant('deleteEvent');\n        this.quickDialogClass('Delete');\n        this.showQuickDialog('DeleteAlert');\n    };\n    QuickPopups.prototype.openValidationError = function (type, eventData) {\n        this.quickDialog.header = this.l10n.getConstant('alert');\n        this.quickDialog.content = this.l10n.getConstant(type);\n        var okButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_OK);\n        if (okButton) {\n            okButton.innerHTML = this.l10n.getConstant('ok');\n            okButton.setAttribute('aria-label', okButton.innerHTML);\n        }\n        var cancelButton = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        if (cancelButton) {\n            cancelButton.innerHTML = this.l10n.getConstant('cancel');\n            okButton.setAttribute('aria-label', cancelButton.innerHTML);\n        }\n        this.quickDialogClass('Alert');\n        this.showQuickDialog('ValidationAlert', eventData);\n    };\n    QuickPopups.prototype.showQuickDialog = function (popupType, eventData) {\n        var _this = this;\n        this.quickDialog.dataBind();\n        var eventProp = {\n            type: popupType, cancel: false, element: this.quickDialog.element,\n            data: extend({}, (eventData || this.parent.activeEventData.event), null, true)\n        };\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            if (!popupArgs.cancel) {\n                _this.quickDialog.show();\n            }\n        });\n    };\n    QuickPopups.prototype.createMoreEventList = function (eventCollection, groupOrder, groupIndex) {\n        var _this = this;\n        var fields = this.parent.eventFields;\n        var moreEventContentEle = createElement('div', { className: cls.MORE_EVENT_CONTENT_CLASS });\n        var moreEventWrapperEle = createElement('div', { className: cls.MORE_EVENT_WRAPPER_CLASS });\n        if (eventCollection.length === 0) {\n            moreEventWrapperEle = createElement('div', {\n                className: cls.MORE_EVENT_CONTENT_CLASS,\n                innerHTML: this.l10n.getConstant('emptyContainer')\n            });\n        }\n        else {\n            var _loop_1 = function (eventData) {\n                var eventText = (eventData[fields.subject] || this_1.parent.eventSettings.fields.subject.default\n                    || this_1.parent.localeObj.getConstant('addTitle'));\n                var appointmentElement = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS,\n                    attrs: {\n                        'data-id': '' + eventData[fields.id],\n                        'data-guid': eventData.Guid, 'role': 'button', 'tabindex': '0',\n                        'aria-disabled': this_1.parent.eventBase.getReadonlyAttribute(eventData),\n                        'aria-label': this_1.parent.getAnnouncementString(eventData)\n                    }\n                });\n                if (eventData[fields.isReadonly]) {\n                    addClass([appointmentElement], 'e-read-only');\n                }\n                var templateElement = void 0;\n                if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {\n                    var tempId = this_1.parent.element.id + '_' + this_1.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n                    templateElement = this_1.parent.getAppointmentTemplate()(eventData, this_1.parent, 'eventTemplate', tempId, false, undefined, undefined, this_1.parent.root);\n                    append(templateElement, appointmentElement);\n                }\n                else {\n                    appointmentElement.appendChild(createElement('div', { className: cls.SUBJECT_CLASS }));\n                    this_1.parent.sanitize(eventText, appointmentElement.firstElementChild);\n                }\n                if (!isNullOrUndefined(groupIndex)) {\n                    appointmentElement.setAttribute('data-group-index', groupIndex);\n                }\n                if (!isNullOrUndefined(eventData[fields.recurrenceRule])) {\n                    var iconClass = (eventData[fields.id] === eventData[fields.recurrenceID]) ?\n                        cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                    appointmentElement.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                }\n                var args = {\n                    data: extend({}, eventData, null, true),\n                    element: appointmentElement, cancel: false\n                };\n                this_1.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        moreEventWrapperEle.appendChild(appointmentElement);\n                        var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === 'Year';\n                        _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData, isPreventCrud);\n                        _this.parent.eventBase.applyResourceColor(appointmentElement, eventData, 'backgroundColor', groupOrder);\n                    }\n                });\n            };\n            var this_1 = this;\n            for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n                var eventData = eventCollection_1[_i];\n                _loop_1(eventData);\n            }\n        }\n        moreEventContentEle.appendChild(moreEventWrapperEle);\n        return moreEventContentEle;\n    };\n    QuickPopups.prototype.tapHoldEventPopup = function (e) {\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS);\n        this.parent.selectedElements = [];\n        this.isMultipleEventSelect = true;\n        this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        var guid = target.getAttribute('data-guid');\n        var eventObj = this.parent.eventBase.getEventByGuid(guid);\n        if (isNullOrUndefined(eventObj)) {\n            return;\n        }\n        var eventTitle = (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle'));\n        var eventTemplate = \"<div class=\\\"\" + cls.MULTIPLE_EVENT_POPUP_CLASS + \"\\\"><div class=\\\"\" + cls.POPUP_HEADER_CLASS + \"\\\">\" +\n            (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button>\") +\n            (\"<div class=\\\"\" + cls.SUBJECT_CLASS + \"\\\">\" + eventTitle + \"</div>\") +\n            (\"<button class=\\\"\" + cls.EDIT_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n            (\"<button class=\\\"\" + cls.DELETE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button></div></div>\");\n        this.quickPopup.element.innerHTML = eventTemplate;\n        var closeIcon = this.quickPopup.element.querySelector('.' + cls.CLOSE_CLASS);\n        this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);\n        var readonly = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];\n        var editAction = !this.parent.eventSettings.allowEditing || readonly;\n        var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n        var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n        if (editIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n        }\n        var deleteIcon = this.quickPopup.element.querySelector('.' + cls.DELETE_CLASS);\n        if (deleteIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n        }\n        this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(e));\n    };\n    QuickPopups.prototype.isCellBlocked = function (args) {\n        var tempObj = {};\n        tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var targetCell = args.element instanceof Array ? args.element[0] : args.element;\n            var groupIndex = parseInt(targetCell.getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);\n        }\n        return this.parent.eventBase.isBlockRange(tempObj);\n    };\n    QuickPopups.prototype.cellClick = function (args) {\n        var date = new Date(args.startTime.getTime());\n        if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding ||\n            this.parent.currentView === 'MonthAgenda' || this.isCellBlocked(args) ||\n            !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n            this.quickPopupHide();\n            return;\n        }\n        var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;\n        if (this.parent.isAdaptive) {\n            this.quickPopupHide();\n            var newEventClone = this.parent.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n            if (isNullOrUndefined(newEventClone)) {\n                newEventClone = createElement('div', {\n                    className: cls.NEW_EVENT_CLASS,\n                    innerHTML: \"<div class=\\\"e-title\\\">+ \" + this.l10n.getConstant('newEvent') + \"</div>\"\n                });\n            }\n            var targetCell = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS);\n            if (targetCell) {\n                targetCell.appendChild(newEventClone);\n            }\n            return;\n        }\n        var target = closest(targetEle, '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS);\n        if (isNullOrUndefined(target) || targetEle.classList.contains(cls.MORE_INDICATOR_CLASS)) {\n            return;\n        }\n        var isSameTarget = this.quickPopup.relateTo === target;\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var subjectElement_1 = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement_1) {\n                subjectElement_1.focus();\n            }\n            return;\n        }\n        else if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n        }\n        var temp = {};\n        temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;\n        temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;\n        temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;\n        var quickCellPopup = createElement('div', { className: cls.CELL_POPUP_CLASS });\n        quickCellPopup.appendChild(this.getPopupHeader('Cell', temp));\n        quickCellPopup.appendChild(this.getPopupContent('Cell', args, temp));\n        quickCellPopup.appendChild(this.getPopupFooter('Cell', temp));\n        this.quickPopup.element.setAttribute('aria-label', this.l10n.getConstant('newEvent'));\n        var subjectElement = quickCellPopup.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectElement) {\n            Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant('addTitle') } });\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            subjectElement.value = this.parent.eventSettings.fields.subject.default;\n        }\n        var closeIcon = quickCellPopup.querySelector('.' + cls.CLOSE_CLASS);\n        if (closeIcon) {\n            this.renderButton('e-flat e-round e-small', cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n        }\n        var moreButton = quickCellPopup.querySelector('.' + cls.QUICK_POPUP_EVENT_DETAILS_CLASS);\n        if (moreButton) {\n            this.renderButton('e-flat', '', false, moreButton, this.detailsClick);\n        }\n        var saveButton = quickCellPopup.querySelector('.' + cls.EVENT_CREATE_CLASS);\n        if (saveButton) {\n            this.renderButton('e-flat e-primary', '', this.parent.activeViewOptions.readonly, saveButton, this.saveClick);\n        }\n        if (this.morePopup) {\n            this.morePopup.hide();\n        }\n        this.quickPopup.content = quickCellPopup;\n        this.quickPopup.relateTo = target;\n        this.quickPopup.dataBind();\n        this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(args.event));\n    };\n    QuickPopups.prototype.isSameEventClick = function (events) {\n        var isSameTarget = this.quickPopup.relateTo === closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n        if (isSameTarget && this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n            if (!this.parent.isAdaptive) {\n                var editButton = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n                if (editButton) {\n                    editButton.focus();\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    QuickPopups.prototype.isQuickTemplate = function (type) {\n        return this.parent.quickInfoTemplates.templateType === 'Both' || this.parent.quickInfoTemplates.templateType === type;\n    };\n    QuickPopups.prototype.eventClick = function (events) {\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        if (!this.parent.showQuickInfo) {\n            return;\n        }\n        if (this.parent.isAdaptive && this.isMultipleEventSelect) {\n            this.updateTapHoldEventPopup(closest(events.element, '.' + cls.APPOINTMENT_CLASS));\n        }\n        else {\n            var isSameTarget = this.isSameEventClick(events);\n            this.parent.selectedElements = [];\n            if (isSameTarget) {\n                return;\n            }\n            else if (this.quickPopup.element) {\n                this.destroyPopupButtons('quickPopup');\n            }\n            var eventData = events.event;\n            var quickEventPopup = createElement('div', { className: cls.EVENT_POPUP_CLASS });\n            quickEventPopup.appendChild(this.getPopupHeader('Event', eventData));\n            quickEventPopup.appendChild(this.getPopupContent('Event', events, eventData));\n            quickEventPopup.appendChild(this.getPopupFooter('Event', eventData));\n            this.quickPopup.element.setAttribute('aria-label', this.l10n.getConstant('editEvent'));\n            var readonly = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];\n            var editAction = !this.parent.eventSettings.allowEditing || readonly;\n            var deleteAction = !this.parent.eventSettings.allowDeleting || readonly;\n            var editIcon = quickEventPopup.querySelector('.' + cls.EDIT_CLASS);\n            var buttonClass = 'e-flat e-round e-small';\n            if (editIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.EDIT_ICON_CLASS, editAction, editIcon, this.editClick);\n            }\n            var deleteIcon = quickEventPopup.querySelector('.' + cls.DELETE_CLASS);\n            if (deleteIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);\n            }\n            var closeIcon = quickEventPopup.querySelector('.' + cls.CLOSE_CLASS);\n            if (closeIcon) {\n                this.renderButton(buttonClass, cls.ICON + ' ' + cls.CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);\n            }\n            var editButton = quickEventPopup.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editButton) {\n                this.renderButton('e-flat e-primary', '', editAction, editButton, this.editClick);\n            }\n            var deleteButton = quickEventPopup.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            if (deleteButton) {\n                this.renderButton('e-flat', '', deleteAction, deleteButton, this.deleteClick);\n            }\n            if (this.morePopup && !closest(events.element, '.' + cls.MORE_EVENT_WRAPPER_CLASS)) {\n                this.morePopup.hide();\n            }\n            this.quickPopup.content = quickEventPopup;\n            this.quickPopup.relateTo = this.parent.isAdaptive ? document.body :\n                closest(events.element, '.' + cls.APPOINTMENT_CLASS);\n            this.quickPopup.dataBind();\n            this.beforeQuickPopupOpen(events.element, this.parent.eventBase.getPageCoordinates(events.originalEvent));\n        }\n    };\n    QuickPopups.prototype.getPopupHeader = function (headerType, headerData) {\n        var headerTemplate = createElement('div', { className: cls.POPUP_HEADER_CLASS });\n        if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {\n            var headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, 'header', templateId + '_headerTemplate', false));\n            append([].slice.call(headerTemp), headerTemplate);\n        }\n        else {\n            var header = void 0;\n            var args = void 0;\n            switch (headerType) {\n                case 'Cell':\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\"><button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\");\n                    break;\n                case 'Event':\n                    args = this.getFormattedString(headerData);\n                    header = \"<div class=\\\"\" + cls.POPUP_HEADER_ICON_WRAPPER + \"\\\">\" +\n                        (\"<button class=\\\"\" + (cls.EDIT_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + (cls.DELETE_CLASS + ' ' + cls.ICON) + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\"></button>\") +\n                        (\"<button class=\\\"\" + cls.CLOSE_CLASS + \"\\\" title=\\\"\" + this.l10n.getConstant('close') + \"\\\"></button></div>\") +\n                        (\"<div class=\\\"\" + cls.SUBJECT_WRAP + \"\\\"><div class=\\\"\" + cls.SUBJECT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" \") +\n                        (\"title=\\\"\" + (args.eventSubject ? args.eventSubject.replaceAll('\"', '\\'') : args.eventSubject) + \"\\\"></div></div >\");\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: header });\n            if (headerType === 'Event') {\n                var subjectText = templateWrapper.querySelector('.' + cls.SUBJECT_CLASS);\n                this.parent.sanitize(args.eventSubject, subjectText);\n            }\n            append([].slice.call(templateWrapper.childNodes), headerTemplate);\n        }\n        return headerTemplate;\n    };\n    QuickPopups.prototype.getPopupContent = function (type, args, data) {\n        var contentTemplate = createElement('div', { className: cls.POPUP_CONTENT_CLASS });\n        if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {\n            var contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, 'content', templateId + '_contentTemplate', false));\n            append([].slice.call(contentTemp), contentTemplate);\n        }\n        else {\n            var content = void 0;\n            var cellDetails = void 0;\n            var argsData = void 0;\n            var resourceText = this.getResourceText(args, type.toLowerCase());\n            switch (type) {\n                case 'Cell':\n                    cellDetails = this.getFormattedString(data);\n                    content = \"<table class=\\\"\" + cls.POPUP_TABLE_CLASS + \"\\\"><tbody><tr><td><form class=\\\"\" + cls.FORM_CLASS + \"\\\" onsubmit=\" +\n                        (\"\\\"return false;\\\"><input class=\\\"\" + cls.SUBJECT_CLASS + \" \" + EVENT_FIELD + \"\\\" type=\\\"text\\\" name=\") +\n                        (\"\\\"\" + this.parent.eventFields.subject + \"\\\" /></form></td></tr><tr><td><div class=\\\"\" + cls.DATE_TIME_CLASS + \"\\\">\") +\n                        (\"<div class=\\\"\" + cls.DATE_TIME_ICON_CLASS + \" \" + cls.ICON + \"\\\"></div><div class=\\\"\" + cls.DATE_TIME_DETAILS_CLASS + \" \") +\n                        (cls.TEXT_ELLIPSIS + \"\\\">\" + cellDetails.details + \"</div></div>\") +\n                        ((this.parent.activeViewOptions.group.resources.length > 0 ? \"<div class=\\\"\" + cls.RESOURCE_CLASS + \"\\\">\" +\n                            (\"<div class=\\\"\" + cls.RESOURCE_ICON_CLASS + \" \" + cls.ICON + \" \\\"></div><div class=\\\"\" + cls.RESOURCE_DETAILS_CLASS + \" \") +\n                            (cls.TEXT_ELLIPSIS + \"\\\"></div></div>\") : '') + \"</td></tr></tbody></table>\");\n                    break;\n                case 'Event':\n                    argsData = this.getFormattedString(data);\n                    content = '<div class=\"' + cls.DATE_TIME_CLASS + '\"><div class=\"' + cls.DATE_TIME_ICON_CLASS + ' ' + cls.ICON +\n                        '\"></div><div class=\"' + cls.DATE_TIME_WRAPPER_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"><div class=\"' +\n                        cls.DATE_TIME_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' + argsData.details + '</div>';\n                    if (data[this.parent.eventFields.recurrenceRule]) {\n                        content += '<div class=\"' + cls.RECURRENCE_SUMMARY_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getRecurrenceSummary(data) + '</div>';\n                    }\n                    content += '</div></div>';\n                    if (data[this.parent.eventFields.location]) {\n                        content += '<div class=\"' + cls.LOCATION_CLASS + '\"><div class=\"' + cls.LOCATION_ICON_CLASS + ' ' +\n                            cls.ICON + '\"></div><div class=\"' + cls.LOCATION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {\n                        content += '<div class=\"' + cls.TIME_ZONE_CLASS + '\"><div class=\"' + cls.TIME_ZONE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.TIME_ZONE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\">' +\n                            this.getTimezone(data) + '</div></div>';\n                    }\n                    if (data[this.parent.eventFields.description]) {\n                        content += '<div class=\"' + cls.DESCRIPTION_CLASS + '\"><div class=\"' + cls.DESCRIPTION_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.DESCRIPTION_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    if (this.parent.resourceCollection.length > 0) {\n                        content += '<div class=\"' + cls.RESOURCE_CLASS + '\"><div class=\"' + cls.RESOURCE_ICON_CLASS + ' ' + cls.ICON +\n                            '\"></div><div class=\"' + cls.RESOURCE_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS + '\"></div></div>';\n                    }\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: content });\n            if (data[this.parent.eventFields.location]) {\n                var locationDetails = templateWrapper.querySelector('.' + cls.LOCATION_DETAILS_CLASS);\n                if (!isNullOrUndefined(locationDetails)) {\n                    this.parent.sanitize(data[this.parent.eventFields.location], locationDetails);\n                }\n            }\n            if (data[this.parent.eventFields.description]) {\n                var descriptionDetails = templateWrapper.querySelector('.' + cls.DESCRIPTION_DETAILS_CLASS);\n                if (!isNullOrUndefined(descriptionDetails)) {\n                    this.parent.sanitize(data[this.parent.eventFields.description], descriptionDetails);\n                }\n            }\n            if (resourceText) {\n                var resourceDetails = templateWrapper.querySelector('.' + cls.RESOURCE_DETAILS_CLASS);\n                if (!isNullOrUndefined(resourceDetails)) {\n                    this.parent.sanitize(resourceText, resourceDetails);\n                }\n            }\n            append([].slice.call(templateWrapper.childNodes), contentTemplate);\n        }\n        return contentTemplate;\n    };\n    QuickPopups.prototype.getPopupFooter = function (footerType, footerData) {\n        var footerTemplate = createElement('div', { className: cls.POPUP_FOOTER_CLASS });\n        if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {\n            var footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);\n            var templateId = this.parent.element.id;\n            var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, 'footer', templateId + '_footerTemplate', false));\n            append([].slice.call(footerTemp), footerTemplate);\n        }\n        else {\n            var footer = void 0;\n            switch (footerType) {\n                case 'Cell':\n                    footer = \"<button class=\\\"\" + (cls.QUICK_POPUP_EVENT_DETAILS_CLASS + ' ' + cls.TEXT_ELLIPSIS) + \"\\\" title=\" +\n                        (\"\\\"\" + this.l10n.getConstant('moreDetails') + \"\\\">\" + this.l10n.getConstant('moreDetails') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.EVENT_CREATE_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('save') + \"\\\">\") +\n                        (this.l10n.getConstant('save') + \"</button>\");\n                    break;\n                case 'Event':\n                    footer = \"\" + (this.parent.isAdaptive ? '' : \"<button class=\\\"\" + cls.EDIT_EVENT_CLASS + \" \" +\n                        (cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('edit') + \"\\\">\" + this.l10n.getConstant('edit') + \"</button>\") +\n                        (\"<button class=\\\"\" + cls.DELETE_EVENT_CLASS + \" \" + cls.TEXT_ELLIPSIS + \"\\\" title=\\\"\" + this.l10n.getConstant('delete') + \"\\\">\") +\n                        (this.l10n.getConstant('delete') + \"</button>\"));\n                    break;\n            }\n            var templateWrapper = createElement('div', { innerHTML: footer });\n            append([].slice.call(templateWrapper.childNodes), footerTemplate);\n        }\n        return footerTemplate;\n    };\n    QuickPopups.prototype.getResourceText = function (args, type) {\n        if (this.parent.resourceCollection.length === 0) {\n            return null;\n        }\n        var resourceValue = '';\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            var resourceData = resourceCollection_1.dataSource;\n            if (type === 'event') {\n                var eventData = args.event;\n                var _loop_2 = function (data) {\n                    var resourceId = eventData[resourceCollection_1.field];\n                    if (resourceId instanceof Array) {\n                        if (resourceId.indexOf(data[resourceCollection_1.idField]) > -1) {\n                            var id_1 = resourceId[resourceId.indexOf(data[resourceCollection_1.idField])];\n                            var resource = resourceData.filter(function (e) {\n                                return e[resourceCollection_1.idField] === id_1;\n                            })[0];\n                            resourceValue += (resourceValue === '') ? resource[resourceCollection_1.textField] :\n                                ', ' + resource[resourceCollection_1.textField];\n                        }\n                    }\n                    else if (data[resourceCollection_1.idField] === resourceId) {\n                        resourceValue = data[resourceCollection_1.textField].toString();\n                    }\n                };\n                for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {\n                    var data = resourceData_1[_i];\n                    _loop_2(data);\n                }\n            }\n            else {\n                resourceValue = resourceData[0][resourceCollection_1.textField].toString();\n            }\n        }\n        else {\n            if (type === 'event') {\n                var eventData = args.event;\n                var resourceData = void 0;\n                var lastResource_1;\n                for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {\n                    resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];\n                    if (!isNullOrUndefined(resourceData)) {\n                        lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];\n                        break;\n                    }\n                }\n                if (!Array.isArray(resourceData)) {\n                    resourceData = [resourceData];\n                }\n                var resNames_1 = [];\n                var lastResourceData_1 = lastResource_1.dataSource;\n                resourceData.forEach(function (value) {\n                    var text;\n                    var i = util.findIndexInData(lastResourceData_1, lastResource_1.idField, value);\n                    if (i > -1) {\n                        text = lastResourceData_1[parseInt(i.toString(), 10)][lastResource_1.textField];\n                    }\n                    if (text) {\n                        resNames_1.push(text);\n                    }\n                });\n                resourceValue = resNames_1.join(', ');\n            }\n            else {\n                var argsData = args;\n                var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;\n                var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];\n                resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];\n            }\n        }\n        return resourceValue;\n    };\n    QuickPopups.prototype.getFormattedString = function (eventData) {\n        var fields = this.parent.eventFields;\n        var eventSubject = (eventData[fields.subject] || this.l10n.getConstant('noTitle'));\n        var startDate = eventData[fields.startTime];\n        var endDate = eventData[fields.endTime];\n        var startDateDetails = this.getDateFormat(startDate, 'long');\n        var endDateDetails = (eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0) ?\n            this.getDateFormat(util.addDays(new Date(endDate.getTime()), -1), 'long') :\n            this.getDateFormat(endDate, 'long');\n        var startTimeDetail = this.parent.getTimeString(startDate);\n        var endTimeDetail = this.parent.getTimeString(endDate);\n        var details = '';\n        var spanLength = endDate.getDate() !== startDate.getDate() &&\n            (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1000) < 24 ? 1 : 0;\n        if (eventData[fields.isAllDay]) {\n            details = startDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            if (((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY) > 1) {\n                details += '&nbsp;-&nbsp;' + endDateDetails + ' (' + this.l10n.getConstant('allDay') + ')';\n            }\n        }\n        else if ((((util.getUniversalTime(endDate) - util.getUniversalTime(startDate)) / util.MS_PER_DAY) >= 1) || spanLength > 0) {\n            details = startDateDetails + ' (' + startTimeDetail + ')' + '&nbsp;-&nbsp;' + endDateDetails + ' (' + endTimeDetail + ')';\n        }\n        else {\n            details = startDateDetails + ' (' + (startTimeDetail + '&nbsp;-&nbsp;' + endTimeDetail) + ')';\n        }\n        return { eventSubject: eventSubject, details: details };\n    };\n    QuickPopups.prototype.moreEventClick = function (data, endDate, groupIndex) {\n        var _this = this;\n        this.quickPopupHide(true);\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var selectedDate = ((data.date).getTime()).toString();\n        var target = closest(data.element, '.' + cls.MORE_INDICATOR_CLASS + ',.' + cls.WORK_CELLS_CLASS);\n        var day = this.parent.globalize.formatDate(data.date, { format: 'E', calendar: this.parent.getCalendarMode() });\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DAY_CLASS).innerHTML = util.capitalizeFirstWord(day, 'single');\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        dateElement.innerHTML = this.getDateFormat(data.date, 'd');\n        dateElement.setAttribute('data-date', selectedDate);\n        dateElement.setAttribute('data-end-date', endDate.getTime().toString());\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            dateElement.setAttribute('data-group-index', groupIndex);\n            groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;\n        }\n        var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);\n        removeClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        if (util.resetTime(data.date).getTime() === util.resetTime(this.parent.getCurrentTime()).getTime()) {\n            addClass(this.morePopup.element.querySelector('.' + cls.MORE_EVENT_DATE_HEADER_CLASS).childNodes, cls.CURRENTDATE_CLASS);\n        }\n        if (!this.parent.isAdaptive) {\n            if (this.parent.currentView.indexOf('Timeline') !== -1) {\n                var gIndex = target.getAttribute('data-group-index');\n                var startDate = new Date(parseInt(target.getAttribute('data-start-date'), 10));\n                startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);\n                var tdDate = startDate.getTime().toString();\n                if (isNullOrUndefined(gIndex)) {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-date=\"' + tdDate + '\"]');\n                }\n                else {\n                    this.morePopup.relateTo = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS +\n                        ' tbody tr td[data-group-index=\"' + gIndex + '\"][data-date=\"' + tdDate + '\"]');\n                    if (isNullOrUndefined(this.morePopup.relateTo)) {\n                        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS +\n                            ' tbody tr td[data-group-index=\"' + gIndex + '\"]'));\n                        for (var i = 0; i < workCells.length; i++) {\n                            var date = workCells[parseInt(i.toString(), 10)].getAttribute('data-date');\n                            if (date < tdDate) {\n                                this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                this.morePopup.relateTo = closest(target, '.' + cls.WORK_CELLS_CLASS);\n            }\n        }\n        this.parent.renderTemplates(function () {\n            var eventProp = {\n                type: 'EventContainer', cancel: false,\n                element: _this.morePopup.element, data: data\n            };\n            _this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n                if (!popupArgs.cancel) {\n                    _this.morePopup.show();\n                }\n            });\n        });\n    };\n    QuickPopups.prototype.saveClick = function (event) {\n        this.applyFormValidation();\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.quickPopupHide();\n    };\n    QuickPopups.prototype.detailsClick = function (event) {\n        var subjectEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n        if (subjectEle && subjectEle.value !== '') {\n            extend(this.parent.activeCellsData, { subject: subjectEle.value });\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.fieldValidator.destroyToolTip();\n        this.quickPopupHide();\n        this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n    };\n    QuickPopups.prototype.editClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        var data = this.parent.activeEventData.event;\n        this.parent.currentAction = 'EditSeries';\n        if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {\n            this.parent.currentAction = 'EditOccurrence';\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.parent.eventWindow.openEditor(data, this.parent.currentAction);\n        }\n    };\n    QuickPopups.prototype.deleteClick = function (event) {\n        this.dialogEvent = event;\n        this.quickPopupHide(true);\n        this.parent.currentAction = 'Delete';\n        if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {\n            this.openRecurrenceAlert();\n        }\n        else {\n            this.openDeleteAlert();\n        }\n    };\n    QuickPopups.prototype.updateMoreEventContent = function () {\n        if (this.morePopup.element.classList.contains('e-popup-close')) {\n            return;\n        }\n        var moreEventContentEle = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_CONTENT_CLASS);\n        if (moreEventContentEle) {\n            remove(moreEventContentEle);\n        }\n        var dateElement = this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS);\n        var startDate = new Date(parseInt(dateElement.getAttribute('data-date'), 10));\n        var endDate = new Date(parseInt(dateElement.getAttribute('data-end-date'), 10));\n        var groupIndex = dateElement.getAttribute('data-group-index');\n        var data;\n        var groupOrder;\n        if (!isNullOrUndefined(groupIndex)) {\n            data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];\n            groupOrder = data.groupOrder;\n        }\n        var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);\n        var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_POPUP_CLASS).appendChild(moreElement);\n    };\n    QuickPopups.prototype.closeClick = function (event) {\n        this.dialogEvent = event;\n        if (this.parent.currentView === 'Year' && this.parent.activeCellsData && this.parent.activeCellsData.element) {\n            this.parent.selectCell(this.parent.activeCellsData.element);\n        }\n        this.quickPopupHide();\n        this.morePopup.hide();\n    };\n    QuickPopups.prototype.dialogButtonClick = function (event) {\n        this.dialogEvent = event;\n        this.quickDialog.hide();\n        var target = event.target;\n        var cancelBtn = this.quickDialog.element.querySelector('.' + cls.QUICK_DIALOG_ALERT_CANCEL);\n        var eventData = this.parent.activeEventData.event;\n        if (target.classList.contains(cls.QUICK_DIALOG_OCCURRENCE_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteOccurrence' : 'EditOccurrence';\n            switch (this.parent.currentAction) {\n                case 'EditOccurrence':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteOccurrence':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteFollowingEvents' : 'EditFollowingEvents';\n            switch (this.parent.currentAction) {\n                case 'EditFollowingEvents':\n                    this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);\n                    break;\n                case 'DeleteFollowingEvents':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_SERIES_CLASS)) {\n            this.parent.currentAction = (this.parent.currentAction === 'Delete') ? 'DeleteSeries' : 'EditSeries';\n            switch (this.parent.currentAction) {\n                case 'EditSeries':\n                    this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);\n                    break;\n                case 'DeleteSeries':\n                    this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n                    break;\n            }\n        }\n        else if (target.classList.contains(cls.QUICK_DIALOG_DELETE_CLASS)) {\n            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);\n        }\n        else if (!cancelBtn.classList.contains(cls.DISABLE_CLASS) && (target.classList.contains(cls.QUICK_DIALOG_ALERT_OK) ||\n            (target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(cls.QUICK_DIALOG_CANCEL_CLASS)))) {\n            this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(cls.QUICK_DIALOG_ALERT_CANCEL);\n            this.parent.eventWindow.eventSave(event, this.l10n.getConstant('ok'));\n        }\n    };\n    QuickPopups.prototype.updateTapHoldEventPopup = function (target) {\n        var selectedElements = this.parent.eventBase.getSelectedEventElements(target);\n        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();\n        if (selectedElements.length > 0) {\n            var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute('data-guid'));\n            var titleContent = (selectedElements.length === 1) ?\n                (eventObj[this.parent.eventFields.subject] || this.l10n.getConstant('noTitle')) :\n                '(' + selectedElements.length + ')' + '&nbsp;' + this.l10n.getConstant('selectedItems');\n            this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS).innerHTML = titleContent;\n            if (selectedElements.length > 1) {\n                addClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n            else {\n                removeClass([this.quickPopup.element.querySelector('.' + cls.EDIT_ICON_CLASS)], cls.HIDDEN_CLASS);\n            }\n        }\n        else {\n            this.parent.selectedElements = [];\n            this.quickPopupHide();\n        }\n    };\n    QuickPopups.prototype.getTimezone = function (event) {\n        var zoneDetails = '';\n        zoneDetails += event[this.parent.eventFields.startTimezone] || '';\n        zoneDetails += zoneDetails === '' ? '' : ' - ';\n        zoneDetails += event[this.parent.eventFields.endTimezone] || '';\n        return zoneDetails;\n    };\n    QuickPopups.prototype.getRecurrenceSummary = function (event) {\n        var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();\n        if (recurrenceEditor) {\n            var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);\n            return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);\n        }\n        return '';\n    };\n    QuickPopups.prototype.getDateFormat = function (date, skeletonString) {\n        return util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    QuickPopups.prototype.getDataFromTarget = function (target) {\n        if (target.classList.contains(cls.APPOINTMENT_CLASS)) {\n            return this.parent.activeEventData.event;\n        }\n        // Deprecated cells data in quick popups\n        var eventObj = {\n            startTime: this.parent.activeCellsData.startTime,\n            endTime: this.parent.activeCellsData.endTime,\n            isAllDay: this.parent.activeCellsData.isAllDay,\n            groupIndex: this.parent.activeCellsData.groupIndex\n        };\n        var cellsData = this.parent.activeCellsData;\n        this.parent.eventWindow.convertToEventData(cellsData, eventObj);\n        return eventObj;\n    };\n    QuickPopups.prototype.beforeQuickDialogClose = function (e) {\n        var _this = this;\n        var args = {\n            event: e.event || this.dialogEvent,\n            type: (isNullOrUndefined(this.parent.activeEventData.event)) ? 'ValidationAlert' :\n                !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])\n                    ? 'RecurrenceAlert' : 'DeleteAlert', cancel: false, data: this.parent.activeEventData.event,\n            element: this.quickDialog.element\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                _this.parent.eventBase.focusElement(true);\n            }\n        });\n    };\n    QuickPopups.prototype.beforeQuickPopupOpen = function (target, originalEvent) {\n        var _this = this;\n        this.parent.renderTemplates(function () {\n            var isEventPopup = _this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n            var popupType = _this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo';\n            var eventProp = {\n                type: popupType, cancel: false, data: extend({}, _this.getDataFromTarget(target), null, true),\n                target: target, element: _this.quickPopup.element\n            };\n            _this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n                if (popupArgs.cancel) {\n                    _this.quickPopupHide();\n                    _this.destroyPopupButtons('quickPopup');\n                    if (popupArgs.element.classList.contains(cls.POPUP_OPEN)) {\n                        _this.quickPopupClose();\n                    }\n                    util.removeChildren(_this.quickPopup.element);\n                    _this.isMultipleEventSelect = false;\n                }\n                else {\n                    var display = _this.quickPopup.element.style.display;\n                    _this.quickPopup.element.style.display = 'block';\n                    if (_this.parent.isAdaptive) {\n                        _this.quickPopup.element.removeAttribute('style');\n                        _this.quickPopup.element.style.display = 'block';\n                        _this.quickPopup.element.style.height = formatUnit((popupType === 'EditEventInfo') ? 65 : window.innerHeight);\n                    }\n                    else {\n                        var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll\n                            && !isNullOrUndefined(closest(target, '.' + cls.CONTENT_TABLE_CLASS));\n                        var conTable = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n                        _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? (util.getTranslateX(conTable) + 10) : 10;\n                        _this.quickPopup.offsetY = _this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll ?\n                            _this.quickPopup.offsetY : 0;\n                        _this.quickPopup.collision = { X: _this.parent.enableRtl ? 'flip' : 'none', Y: 'fit' };\n                        _this.quickPopup.position = { X: _this.parent.enableRtl ? 'left' : 'right', Y: _this.parent.enableRtl ? 'bottom' : 'top' };\n                        _this.quickPopup.dataBind();\n                        _this.quickPopup.refreshPosition(null, true);\n                        var collide = isCollide(_this.quickPopup.element, _this.parent.element);\n                        if (collide.indexOf(_this.parent.enableRtl ? 'left' : 'right') > -1) {\n                            _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;\n                            if (isVirtualScroll && !_this.parent.enableRtl) {\n                                _this.quickPopup.offsetX = util.getTranslateX(conTable) + _this.quickPopup.offsetX;\n                            }\n                            _this.quickPopup.dataBind();\n                            _this.quickPopup.refreshPosition(null, true);\n                            var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);\n                            if (leftCollide.indexOf('left') > -1) {\n                                _this.quickPopup.position = { X: 'center', Y: 'center' };\n                                _this.quickPopup.collision = { X: 'fit', Y: 'fit' };\n                                _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);\n                                _this.quickPopup.dataBind();\n                            }\n                        }\n                        if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf('top') > -1 || collide.indexOf('bottom') > -1)) {\n                            var translateY = util.getTranslateY(conTable);\n                            _this.quickPopup.offsetY = translateY;\n                            _this.quickPopup.dataBind();\n                            _this.quickPopup.refreshPosition(null, true);\n                        }\n                        if (_this.quickPopup.position.X === 'center' && _this.quickPopup.position.Y === 'center' && !isNullOrUndefined(originalEvent) &&\n                            originalEvent.clientX && originalEvent.clientY) {\n                            var clientX = originalEvent.clientX;\n                            var clientY = originalEvent.clientY;\n                            var targetRect = target.getBoundingClientRect();\n                            var offsetY = originalEvent.offsetY || Math.ceil(clientY - targetRect.y);\n                            var previousOffset = _this.quickPopup.offsetY;\n                            var collision = isCollide(_this.quickPopup.element, target);\n                            var popupRect = _this.quickPopup.element.getBoundingClientRect();\n                            var targetEle = document.elementFromPoint(clientX, clientY);\n                            if (collision.indexOf('top') > -1 || collision.indexOf('bottom') > -1 || closest(targetEle, '.' + cls.POPUP_WRAPPER_CLASS)) {\n                                if (popupRect.top <= clientY &&\n                                    clientY <= popupRect.top + popupRect.height) {\n                                    _this.quickPopup.offsetY = previousOffset - popupRect.height - 10;\n                                    _this.quickPopup.dataBind();\n                                    collision = isCollide(_this.quickPopup.element, _this.parent.element);\n                                    if (collision.indexOf('top') > -1) {\n                                        _this.quickPopup.offsetY = previousOffset + offsetY + 10;\n                                        _this.quickPopup.dataBind();\n                                    }\n                                }\n                                else if (isCollide(_this.quickPopup.element, _this.parent.element).indexOf('bottom') > -1) {\n                                    _this.quickPopup.offsetY =\n                                        previousOffset - offsetY - Math.ceil(popupRect.height) - 10;\n                                    _this.quickPopup.dataBind();\n                                }\n                            }\n                        }\n                    }\n                    if (isEventPopup) {\n                        _this.applyEventColor();\n                    }\n                    _this.quickPopup.element.style.display = display;\n                    _this.quickPopup.dataBind();\n                    _this.quickPopup.show();\n                }\n            });\n        });\n    };\n    QuickPopups.prototype.applyEventColor = function () {\n        var colorField = '';\n        if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'MonthAgenda') {\n            colorField = this.parent.enableRtl ? 'border-right-color' : 'border-left-color';\n        }\n        else {\n            colorField = 'background-color';\n        }\n        var color = this.parent.activeEventData.element.style[colorField];\n        if (color === '') {\n            return;\n        }\n        var colorEle = this.quickPopup.element.querySelector('.' + cls.POPUP_HEADER_CLASS);\n        var footerEle = this.quickPopup.element.querySelector('.' + cls.POPUP_FOOTER_CLASS);\n        if (footerEle && footerEle.offsetParent) {\n            colorEle = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (colorEle) {\n                colorEle.style.borderLeftColor = color;\n                color = \"rgba(\" + color.match(/\\d+/g).join() + \",0.3)\";\n            }\n        }\n        if (colorEle) {\n            colorEle.style.backgroundColor = color;\n        }\n    };\n    QuickPopups.prototype.quickPopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.quickPopup.element.style.top = '0px';\n            return;\n        }\n        if (this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS)) {\n            var subjectElement = this.quickPopup.element.querySelector('.' + cls.SUBJECT_CLASS);\n            if (subjectElement) {\n                subjectElement.focus();\n            }\n        }\n        else {\n            var editElement = this.quickPopup.element.querySelector('.' + cls.EDIT_EVENT_CLASS);\n            if (editElement) {\n                editElement.focus();\n            }\n            var editIcon = this.quickPopup.element.querySelector('.' + cls.EDIT_CLASS);\n            if (editIcon) {\n                editIcon.focus();\n            }\n        }\n    };\n    QuickPopups.prototype.quickPopupClose = function () {\n        this.parent.eventBase.focusElement();\n        this.quickPopup.relateTo = '.' + cls.WORK_CELLS_CLASS;\n        this.fieldValidator.destroyToolTip();\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.destroyPopupButtons('quickPopup');\n        util.removeChildren(this.quickPopup.element);\n    };\n    QuickPopups.prototype.morePopupOpen = function () {\n        if (this.parent.isAdaptive) {\n            this.morePopup.element.style.top = '0px';\n            this.morePopup.element.style.left = '0px';\n            this.morePopup.element.style.height = formatUnit(window.innerHeight);\n            return;\n        }\n        this.morePopup.element.querySelector('.' + cls.MORE_EVENT_HEADER_DATE_CLASS).focus();\n        this.morePopup.refreshPosition();\n    };\n    QuickPopups.prototype.morePopupClose = function () {\n        var moreWrapper = this.parent.element.querySelector('.' + cls.MORE_EVENT_WRAPPER_CLASS);\n        if (moreWrapper) {\n            remove(moreWrapper);\n        }\n    };\n    QuickPopups.prototype.popupClose = function (event) {\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.quickPopupHide(true);\n    };\n    QuickPopups.prototype.quickPopupHide = function (hideAnimation) {\n        var _this = this;\n        if (!this.quickPopup.element.classList.contains(cls.POPUP_OPEN)) {\n            return;\n        }\n        var isCellPopup = this.quickPopup.element.querySelector('.' + cls.CELL_POPUP_CLASS);\n        var popupData;\n        if (isCellPopup) {\n            var formvalidator = this.quickPopup.element.querySelector('.e-formvalidator');\n            if (this.isCrudAction && formvalidator &&\n                !formvalidator.ej2_instances[0].validate()) {\n                return;\n            }\n            var fields = this.parent.eventFields;\n            var saveObj = this.parent.eventWindow.getObjectFromFormData(cls.POPUP_WRAPPER_CLASS);\n            this.parent.eventWindow.setDefaultValueToObject(saveObj);\n            saveObj[fields.id] = this.parent.eventBase.getEventMaxID();\n            saveObj[fields.startTime] = this.parent.activeCellsData.startTime;\n            saveObj[fields.endTime] = this.parent.activeCellsData.endTime;\n            saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.setResourceValues(saveObj);\n            }\n            popupData = saveObj;\n        }\n        else {\n            popupData = this.parent.activeEventData.event;\n        }\n        var isEventPopup = this.quickPopup.element.querySelector('.' + cls.EVENT_POPUP_CLASS);\n        var args = {\n            event: this.dialogEvent,\n            type: this.parent.isAdaptive ? isEventPopup ? 'ViewEventInfo' : 'EditEventInfo' : 'QuickInfo',\n            cancel: false, data: popupData, element: this.quickPopup.element,\n            target: (isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        this.parent.trigger(event.popupClose, args, function (popupCloseArgs) {\n            if (!popupCloseArgs.cancel) {\n                if (_this.quickPopup.element.classList.contains('e-popup-open')) {\n                    if (isCellPopup && _this.isCrudAction) {\n                        _this.parent.currentAction = 'Add';\n                        _this.parent.crudModule.addEvent(popupCloseArgs.data);\n                    }\n                    if (hideAnimation) {\n                        var animation = _this.quickPopup.hideAnimation;\n                        _this.quickPopup.hideAnimation = null;\n                        _this.quickPopup.hide();\n                        _this.quickPopup.hideAnimation = animation;\n                    }\n                    else {\n                        _this.quickPopup.hide();\n                    }\n                    _this.isMultipleEventSelect = false;\n                    _this.isCrudAction = false;\n                }\n            }\n        });\n    };\n    QuickPopups.prototype.navigationClick = function (e) {\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        if (!isNullOrUndefined(navigateEle)) {\n            var date = this.parent.getDateFromElement(e.currentTarget);\n            if (!isNullOrUndefined(date)) {\n                this.closeClick(e);\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    QuickPopups.prototype.documentClick = function (e) {\n        var target = e.event.target;\n        var classNames = '.' + cls.POPUP_WRAPPER_CLASS + ',.' + cls.HEADER_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS +\n            ',.' + cls.WORK_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.e-popup';\n        var popupWrap = this.parent.element.querySelector('.' + cls.POPUP_WRAPPER_CLASS);\n        if ((popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames)) || !closest(target, classNames)) {\n            this.quickPopupHide();\n            this.parent.removeNewEventElement();\n        }\n        var tar = this.parent.element.querySelector('.' + cls.INLINE_SUBJECT_CLASS);\n        if (tar && tar !== target && this.parent.allowInline) {\n            this.parent.inlineModule.documentClick();\n        }\n        if (closest(target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.HEADER_CELLS_CLASS)) {\n            this.parent.removeNewEventElement();\n        }\n        if (!closest(target, '.' + cls.MORE_POPUP_WRAPPER_CLASS) && (target.classList &&\n            !target.classList.contains(cls.MORE_INDICATOR_CLASS))\n            && (!closest(target, '.' + cls.POPUP_OPEN)) && !closest(target, '.' + cls.WORK_CELLS_CLASS)) {\n            this.morePopup.hide();\n        }\n    };\n    QuickPopups.prototype.onClosePopup = function (event) {\n        if (!isNullOrUndefined(event)) {\n            this.dialogEvent = event;\n        }\n        this.quickPopupHide();\n        if (isNullOrUndefined(event) || (!isNullOrUndefined(event) && event.action !== 'escape') ||\n            (this.parent.inlineModule && this.parent.element.querySelector('.' + cls.INLINE_APPOINTMENT_CLASS))) {\n            this.parent.eventBase.focusElement();\n        }\n    };\n    QuickPopups.prototype.addEventListener = function () {\n        this.parent.on(event.cellClick, this.cellClick, this);\n        this.parent.on(event.eventClick, this.eventClick, this);\n        this.parent.on(event.documentClick, this.documentClick, this);\n        this.parent.on(event.dataReady, this.updateMoreEventContent, this);\n    };\n    QuickPopups.prototype.removeEventListener = function () {\n        this.parent.off(event.cellClick, this.cellClick);\n        this.parent.off(event.eventClick, this.eventClick);\n        this.parent.off(event.documentClick, this.documentClick);\n        this.parent.off(event.dataReady, this.updateMoreEventContent);\n    };\n    QuickPopups.prototype.destroyPopupButtons = function (popupName) {\n        var popup = popupName === 'quickPopup' ? this.quickPopup : this.morePopup;\n        var buttonCollections = [].slice.call(popup.element.querySelectorAll('.e-control.e-btn'));\n        for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {\n            var button = buttonCollections_1[_i];\n            var instance = button.ej2_instances[0];\n            if (instance) {\n                instance.destroy();\n            }\n        }\n        if (popupName === 'quickPopup') {\n            var input = popup.element.querySelector('input.' + cls.SUBJECT_CLASS);\n            if (input) {\n                input.remove();\n            }\n            var form = this.quickPopup.element.querySelector('form.' + cls.FORM_CLASS);\n            if (form) {\n                util.removeChildren(form);\n                form.remove();\n            }\n            this.parent.resetTemplates(['content', 'header', 'footer']);\n        }\n    };\n    QuickPopups.prototype.refreshQuickDialog = function () {\n        this.destroyQuickDialog();\n        this.renderQuickDialog();\n    };\n    QuickPopups.prototype.refreshQuickPopup = function () {\n        this.destroyQuickPopup();\n        this.renderQuickPopup();\n    };\n    QuickPopups.prototype.refreshMorePopup = function () {\n        this.destroyMorePopup();\n        this.renderMorePopup();\n    };\n    QuickPopups.prototype.destroyQuickDialog = function () {\n        if (this.quickDialog.element) {\n            this.quickDialog.destroy();\n            remove(this.quickDialog.element);\n            this.quickDialog = null;\n        }\n    };\n    QuickPopups.prototype.destroyQuickPopup = function () {\n        if (this.quickPopup.element) {\n            this.destroyPopupButtons('quickPopup');\n            this.quickPopup.destroy();\n            remove(this.quickPopup.element);\n            this.quickPopup = null;\n        }\n    };\n    QuickPopups.prototype.destroyMorePopup = function () {\n        if (this.morePopup.element) {\n            this.destroyPopupButtons('morePopup');\n            this.morePopup.destroy();\n            remove(this.morePopup.element);\n            this.morePopup = null;\n        }\n    };\n    QuickPopups.prototype.destroy = function () {\n        if (this.quickPopup.element.querySelectorAll('.e-formvalidator').length) {\n            this.fieldValidator.destroy();\n        }\n        this.removeEventListener();\n        this.destroyQuickPopup();\n        this.destroyMorePopup();\n        this.destroyQuickDialog();\n        this.dialogEvent = null;\n        this.parent = null;\n        this.l10n = null;\n        this.isCrudAction = null;\n        this.fieldValidator = null;\n        this.isMultipleEventSelect = null;\n    };\n    return QuickPopups;\n}());\nexport { QuickPopups };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, append, createElement, addClass, initializeCSPTemplate, removeClass } from '@syncfusion/ej2-base';\nimport { Tooltip } from '@syncfusion/ej2-popups';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Tooltip for Schedule\n */\nvar EventTooltip = /** @class */ (function () {\n    function EventTooltip(parent) {\n        this.parent = parent;\n        this.tooltipObj = new Tooltip({\n            animation: { close: { effect: 'FadeOut' } },\n            content: 'No title',\n            position: 'BottomRight',\n            offsetY: 10,\n            mouseTrail: this.parent.isAdaptive ? false : true,\n            showTipPointer: false,\n            cssClass: this.parent.cssClass + ' ' + cls.EVENT_TOOLTIP_ROOT_CLASS,\n            target: this.getTargets(),\n            beforeRender: this.onBeforeRender.bind(this),\n            beforeClose: this.onTooltipClose.bind(this),\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer\n        });\n        this.tooltipObj.appendTo(this.parent.element);\n    }\n    EventTooltip.prototype.getTargets = function () {\n        var targets = [];\n        if (this.parent.activeViewOptions.group.headerTooltipTemplate) {\n            targets.push('.' + cls.RESOURCE_CELLS_CLASS);\n        }\n        if (this.parent.eventSettings.enableTooltip) {\n            targets.push('.' + cls.APPOINTMENT_CLASS);\n        }\n        return targets.join(',');\n    };\n    EventTooltip.prototype.onBeforeRender = function (args) {\n        if (this.parent.uiStateValues.isSwipeScroll) {\n            args.cancel = true;\n            return;\n        }\n        if (!isNullOrUndefined(args.target.getAttribute('data-tooltip-id'))) {\n            return;\n        }\n        if (args.target.classList.contains(cls.RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {\n            var resCollection = void 0;\n            if (this.parent.activeView.isTimelineView()) {\n                var index = parseInt(args.target.getAttribute('data-group-index'), 10);\n                resCollection = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n            }\n            else {\n                var rowIndex = args.target.parentNode.sectionRowIndex;\n                var cellIndex = args.target.cellIndex;\n                resCollection =\n                    this.parent.activeView.getColumnLevels()[parseInt(rowIndex.toString(), 10)][parseInt(cellIndex.toString(), 10)];\n            }\n            var data = {\n                resource: resCollection.resource,\n                resourceData: resCollection.resourceData\n            };\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_headerTooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, 'headerTooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n            this.parent.renderTemplates();\n            return;\n        }\n        var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute('data-guid'));\n        if (isNullOrUndefined(record)) {\n            return;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {\n            var contentContainer = createElement('div');\n            var templateId = this.parent.element.id + '_tooltipTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, 'tooltipTemplate', templateId, false));\n            append(tooltipTemplate, contentContainer);\n            this.setContent(contentContainer);\n        }\n        else {\n            var globalize = this.parent.globalize;\n            var fields = this.parent.eventFields;\n            var eventStart = new Date('' + record[fields.startTime]);\n            var eventEnd = new Date('' + record[fields.endTime]);\n            eventEnd = ((eventEnd.getTime() - eventStart.getTime() !== 0) && eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0) ?\n                new Date(eventEnd.setMilliseconds(-1000)) : eventEnd;\n            var startDate = util.resetTime(new Date('' + eventStart));\n            var endDate = util.resetTime(new Date('' + eventEnd));\n            var tooltipSubject = (record[fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.parent.localeObj.getConstant('addTitle'));\n            var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : '';\n            var startMonthDate = '';\n            var startMonthYearDate = '';\n            var endMonthYearDate = '';\n            startMonthDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'MMMd', calendar: this.parent.getCalendarMode()\n            });\n            startMonthYearDate = globalize.formatDate(eventStart, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            endMonthYearDate = globalize.formatDate(eventEnd, {\n                type: 'date', skeleton: 'medium', calendar: this.parent.getCalendarMode()\n            });\n            startMonthDate = util.capitalizeFirstWord(startMonthDate, 'single');\n            startMonthYearDate = util.capitalizeFirstWord(startMonthYearDate, 'single');\n            endMonthYearDate = util.capitalizeFirstWord(endMonthYearDate, 'single');\n            var startTime = this.parent.getTimeString(eventStart);\n            var endTime = this.parent.getTimeString(eventEnd);\n            var tooltipDetails = void 0;\n            if (startDate.getTime() === endDate.getTime()) {\n                tooltipDetails =\n                    globalize.formatDate(eventStart, {\n                        type: 'date', skeleton: 'long', calendar: this.parent.getCalendarMode()\n                    });\n                tooltipDetails = util.capitalizeFirstWord(tooltipDetails, 'single');\n            }\n            else {\n                tooltipDetails = (startDate.getFullYear() === endDate.getFullYear()) ? (startMonthDate + ' - ' + endMonthYearDate) :\n                    (startMonthYearDate + ' - ' + endMonthYearDate);\n            }\n            var tooltipTime = (record[fields.isAllDay]) ? this.parent.localeObj.getConstant('allDay') :\n                (startTime + ' - ' + endTime);\n            var content_1 = '<div><div class=\"e-subject\">' + tooltipSubject + '</div>' +\n                '<div class=\"e-location\">' + tooltipLocation + '</div>' +\n                '<div class=\"e-details\">' + tooltipDetails + '</div>' +\n                '<div class=\"e-all-day\">' + tooltipTime + '</div></div>';\n            var contentTemp = function () {\n                return content_1;\n            };\n            this.setContent(initializeCSPTemplate(contentTemp));\n        }\n        this.parent.renderTemplates();\n    };\n    EventTooltip.prototype.onTooltipClose = function (args) {\n        if (args.element) {\n            removeClass([args.element], cls.POPUP_OPEN);\n            addClass([args.element], cls.POPUP_CLOSE);\n        }\n        if (!(this.parent.isReact && this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible)) {\n            this.parent.resetTemplates(['tooltipTemplate', 'headerTooltipTemplate']);\n        }\n    };\n    EventTooltip.prototype.setContent = function (content) {\n        this.tooltipObj.setProperties({ content: content, windowCollision: true }, true);\n    };\n    EventTooltip.prototype.close = function () {\n        this.tooltipObj.close();\n    };\n    EventTooltip.prototype.destroy = function () {\n        this.tooltipObj.destroy();\n        addClass([this.parent.element], 'e-control');\n        this.tooltipObj = null;\n        this.parent = null;\n    };\n    return EventTooltip;\n}());\nexport { EventTooltip };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, NotifyPropertyChanges, Event, Browser, detach } from '@syncfusion/ej2-base';\nimport { getDefaultDateObject, getValue, cldrData, L10n, isNullOrUndefined, removeClass, addClass } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { Button, RadioButton } from '@syncfusion/ej2-buttons';\nimport { EventHandler, classList } from '@syncfusion/ej2-base';\nimport { extractObjectFromRule, generate, generateSummary, getRecurrenceStringFromDate, getCalendarUtil } from './date-generator';\nimport { capitalizeFirstWord } from '../schedule/base/util';\nvar HEADER = 'e-editor';\nvar INPUTWARAPPER = 'e-input-wrapper';\nvar INPUTWARAPPERSIDE = 'e-input-wrapper-side';\nvar REPEATELEMENT = 'e-repeat-element';\nvar REPEATINTERVAL = 'e-repeat-interval';\nvar INTERVALCLASS = 'e-interval';\nvar DAYWRAPPER = 'e-days';\nvar WEEKWRAPPER = 'e-non-week';\nvar WEEKPOSITION = 'e-week-position';\nvar DAYPOSITION = 'e-day-position';\nvar YEAREXPANDERWRAPPER = 'e-year-expander';\nvar YEAREXPANDERELEMENT = 'e-year-expander-element';\nvar MONETHEXPANDERWRAPPER = 'e-month-expander';\nvar MONETHEXPANDWRAPPER = 'e-month-expand-wrapper';\nvar MONTHEXPANDERELEMENT = 'e-month-expander-element';\nvar MONTHEXPANDERCHECKBOXWRAPPER = 'e-month-expander-checkbox-wrapper';\nvar FORMLEFT = 'e-form-left';\nvar FORMRIGHT = 'e-form-right';\nvar MONTHDAYWRAPPER = 'e-month-day';\nvar MONTHEXPANNDERELEM = 'e-month-expander-wrapper';\nvar MONTHPOS = 'e-month-pos';\nvar MONTHWEEK = 'e-month-week';\nvar ENDON = 'e-end-on';\nvar MONTHEXPANDERLABEL = 'e-month-expander-label';\nvar WEEKEXPANDERLABEL = 'e-week-expander-label';\nvar ENDONLEFT = 'e-end-on-left';\nvar MONTHDAYELEMENT = 'e-monthday-element';\nvar ENDONELEMENT = 'e-end-on-element';\nvar ENDONDATE = 'e-end-on-date';\nvar UNTILDATE = 'e-until-date';\nvar ENDONCOUNTWRAPPER = 'e-end-on-count';\nvar ENDONCOUNT = 'e-recurrence-count';\nvar HIDEWRAPPER = 'e-hide-recurrence-element';\nvar RTLCLASS = 'e-rtl';\nvar PRIMARY = 'e-primary';\nvar ACTIVE = 'e-active';\nvar RECURRENCETABLE = 'e-recurrence-table';\nvar REPEATCONTENT = 'e-repeat-content';\nvar REPEATCONTENTWRAPPER = 'e-repeat-content-wrapper';\nvar NONE = 'none';\nvar DAILY = 'daily';\nvar WEEKLY = 'weekly';\nvar MONTHLY = 'monthly';\nvar YEARLY = 'yearly';\nvar NEVER = 'never';\nvar UNTIL = 'until';\nvar COUNT = 'count';\nvar TEXTFIELD = 'text';\nvar VALUEFIELD = 'value';\nvar LAST = 'last';\nvar REPEAT = 'repeat';\nvar REPEATEVERY = 'repeatEvery';\nvar ON = 'on';\nvar END = 'end';\nvar RADIOLABEL = 'onDay';\nvar RULEUNTIL = 'UNTIL';\nvar RULEBYDAY = 'BYDAY';\nvar RULEBYMONTHDAY = 'BYMONTHDAY';\nvar RULEBYMONTH = 'BYMONTH';\nvar RULEINTERVAL = 'INTERVAL';\nvar RULECOUNT = 'COUNT';\nvar RULESETPOS = 'BYSETPOS';\nvar RULEFREQ = 'FREQ';\nvar RULEDAILY = 'DAILY';\nvar RULEWEEKLY = 'WEEKLY';\nvar RULEMONTHLY = 'MONTHLY';\nvar RULEYEARLY = 'YEARLY';\nvar RULESUNDAY = 'SU';\nvar RULEMONDAY = 'MO';\nvar RULETUESDAY = 'TU';\nvar RULEWEDNESDAY = 'WE';\nvar RULETHURSDAY = 'TH';\nvar RULEFRIDAY = 'FR';\nvar RULESATURDAY = 'SA';\nvar KEYSUNDAY = 'sun';\nvar KEYMONDAY = 'mon';\nvar KEYTUESDAY = 'tue';\nvar KEYWEDNESDAY = 'wed';\nvar KEYTHURSDAY = 'thu';\nvar KEYFRIDAY = 'fri';\nvar KEYSATURDAY = 'sat';\nvar EQUAL = '=';\nvar SEMICOLON = ';';\nvar COMMA = ',';\nvar FIRST = 'first';\nvar SECOND = 'second';\nvar THIRD = 'third';\nvar FOURTH = 'fourth';\nvar contentType = {\n    none: '',\n    daily: 'days',\n    weekly: 'weeks',\n    monthly: 'months',\n    yearly: 'years'\n};\nvar valueData = {\n    'sun': RULESUNDAY,\n    'mon': RULEMONDAY,\n    'tue': RULETUESDAY,\n    'wed': RULEWEDNESDAY,\n    'thu': RULETHURSDAY,\n    'fri': RULEFRIDAY,\n    'sat': RULESATURDAY\n};\nvar neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar weekClassList = [WEEKWRAPPER];\nvar monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];\nvar yearClassList = [DAYWRAPPER];\nvar dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];\nvar noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];\nvar endOnCountClassList = [ENDONDATE];\nvar endOnDateClassList = [ENDONCOUNTWRAPPER];\n/**\n * Represents the RecurrenceEditor component.\n * ```html\n * <div id=\"recurrence\"></div>\n * ```\n * ```typescript\n * <script>\n *   var recObj = new RecurrenceEditor();\n *   recObj.appendTo(\"#recurrence\");\n * </script>\n * ```\n */\nvar RecurrenceEditor = /** @class */ (function (_super) {\n    __extends(RecurrenceEditor, _super);\n    /**\n     * Constructor for creating the widget\n     *\n     * @param {RecurrenceEditorModel} options Accepts the recurrence editor model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    function RecurrenceEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        _this.defaultLocale = {\n            none: 'None',\n            daily: 'Daily',\n            weekly: 'Weekly',\n            monthly: 'Monthly',\n            month: 'Month',\n            yearly: 'Yearly',\n            never: 'Never',\n            until: 'Until',\n            count: 'Count',\n            first: 'First',\n            second: 'Second',\n            third: 'Third',\n            fourth: 'Fourth',\n            last: 'Last',\n            repeat: 'Repeat',\n            repeatEvery: 'Repeat every',\n            on: 'Repeat On',\n            end: 'End',\n            onDay: 'Day',\n            days: 'Day(s)',\n            weeks: 'Week(s)',\n            months: 'Month(s)',\n            years: 'Year(s)',\n            every: 'every',\n            summaryTimes: 'time(s)',\n            summaryOn: 'on',\n            summaryUntil: 'until',\n            summaryRepeat: 'Repeats',\n            summaryDay: 'day(s)',\n            summaryWeek: 'week(s)',\n            summaryMonth: 'month(s)',\n            summaryYear: 'year(s)',\n            monthWeek: 'Month Week',\n            monthPosition: 'Month Position',\n            monthExpander: 'Month Expander',\n            yearExpander: 'Year Expander',\n            repeatInterval: 'Repeat Interval'\n        };\n        _this.renderStatus = false;\n        _this.dayButtons = [];\n        _this.monthButtons = [];\n        return _this;\n    }\n    RecurrenceEditor.prototype.startState = function (freq, endOn, startDate) {\n        this.showFormElement();\n        this.updateForm(freq);\n        this.freshOnEndForm();\n        this.updateEndOnForm(endOn);\n        this.selectMonthDay(startDate);\n        this.updateUntilDate(startDate);\n        this.onMonthDay.setProperties({ checked: true });\n    };\n    RecurrenceEditor.prototype.preRender = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.calendarUtil = getCalendarUtil(this.calendarMode);\n    };\n    RecurrenceEditor.prototype.applyCustomClass = function (cssClass) {\n        if (cssClass) {\n            addClass([this.element], cssClass.split(' '));\n        }\n    };\n    RecurrenceEditor.prototype.initialize = function () {\n        addClass([this.element], 'e-' + this.getModuleName());\n        this.renderComponent();\n        if (!isNullOrUndefined(this.value) && this.value !== '') {\n            this.setRecurrenceRule(this.value);\n        }\n        else {\n            if (!isNullOrUndefined(this.repeatType.value)) {\n                this.startState(this.repeatType.value.toString().toUpperCase(), this.endTypes[0], this.startDate);\n                this.updateForm(this.repeatType.value.toString());\n            }\n            if (this.selectedType > 0) {\n                this.setProperties({ value: this.getRecurrenceRule() }, false);\n            }\n        }\n        this.applyCustomClass(this.cssClass);\n    };\n    RecurrenceEditor.prototype.triggerChangeEvent = function () {\n        var _this = this;\n        if (this.renderStatus) {\n            var value = this.getRecurrenceRule();\n            this.trigger('change', { value: value }, function (args) { return _this.setProperties({ value: args.value }, false); });\n        }\n    };\n    RecurrenceEditor.prototype.resetDayButton = function () {\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        elements.forEach(function (element) { return removeClass([element], [ACTIVE, PRIMARY]); });\n    };\n    RecurrenceEditor.prototype.daySelection = function (dayIndex) {\n        this.resetDayButton();\n        var days = [0, 1, 2, 3, 4, 5, 6];\n        this.rotateArray(days, this.firstDayOfWeek);\n        var element = this.element.querySelector('.' + DAYWRAPPER + ' button[data-index=\"' + days.indexOf(dayIndex) + '\"]');\n        if (element) {\n            addClass([element], [ACTIVE, PRIMARY]);\n        }\n    };\n    RecurrenceEditor.prototype.rtlClass = function (status) {\n        if (status) {\n            addClass([this.element], RTLCLASS);\n        }\n        else {\n            removeClass([this.element], RTLCLASS);\n        }\n    };\n    RecurrenceEditor.prototype.updateUntilDate = function (date) {\n        var tempDate = new Date(date.getTime());\n        tempDate.setDate(tempDate.getDate() + 60);\n        this.untilDateObj.setProperties({ value: tempDate });\n    };\n    RecurrenceEditor.prototype.selectMonthDay = function (date) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });\n        this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });\n        this.monthValue.setProperties({ value: '' + this.calendarUtil.getMonth(date) });\n        this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });\n        this.daySelection(date.getDay());\n    };\n    RecurrenceEditor.prototype.updateForm = function (state) {\n        var _this = this;\n        this.repeatType.setProperties({ value: state });\n        var end = this.element.querySelector('.' + ENDON);\n        if (state === DAILY) {\n            classList(end, [FORMLEFT], [FORMRIGHT]);\n        }\n        else {\n            classList(end, [FORMRIGHT], [FORMLEFT]);\n        }\n        switch (state) {\n            case NONE:\n                neverClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case WEEKLY:\n                weekClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case MONTHLY:\n                monthClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case YEARLY:\n                yearClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case DAILY:\n                dailyClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.updateEndOnForm = function (state) {\n        var _this = this;\n        this.endType.setProperties({ value: state });\n        switch (state) {\n            case NEVER:\n                noEndClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case UNTIL:\n                endOnDateClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n            case COUNT:\n                endOnCountClassList.forEach(function (className) { return addClass([_this.element.querySelector('.' + className)], HIDEWRAPPER); });\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.freshOnEndForm = function () {\n        var _this = this;\n        noEndClassList.forEach(function (className) {\n            var element = _this.element.querySelector('.' + className);\n            if (element) {\n                removeClass([element], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.showFormElement = function () {\n        var _this = this;\n        neverClassList.forEach(function (className) {\n            var hideElement = _this.element.querySelector('.' + className);\n            if (hideElement) {\n                removeClass([hideElement], HIDEWRAPPER);\n            }\n        });\n    };\n    RecurrenceEditor.prototype.renderDropdowns = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.repeatType = new DropDownList({\n            //set the data to dataSource property\n            dataSource: this.getRepeatData(),\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            index: this.selectedType,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            placeholder: this.localeObj.getConstant(REPEAT),\n            htmlAttributes: { 'title': this.localeObj.getConstant(REPEAT) },\n            change: function (args) {\n                self.setProperties({ selectedType: _this.frequencies.indexOf(args.value) }, false);\n                self.element.querySelector('.' + REPEATCONTENT).innerHTML =\n                    self.localeObj.getConstant(contentType[args.value]);\n                self.showFormElement();\n                self.updateForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        // set placeholder to DropDownList input element\n        this.repeatType.appendTo(this.element.querySelector('.' + REPEATELEMENT));\n        this.endType = new DropDownList({\n            dataSource: this.getEndData(),\n            popupWidth: this.getPopupWidth(),\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(END),\n            enableRtl: this.enableRtl,\n            index: 1,\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            change: function (args) {\n                self.freshOnEndForm();\n                self.updateEndOnForm(args.value);\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.endType.appendTo(this.element.querySelector('.' + ENDONELEMENT));\n        var renderDropDownList = function (dropDownData) {\n            return new DropDownList({\n                dataSource: dropDownData,\n                popupWidth: _this.getPopupWidth(),\n                enableRtl: _this.enableRtl,\n                fields: {\n                    text: TEXTFIELD,\n                    value: VALUEFIELD\n                },\n                index: 1,\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                change: function (args) {\n                    self.onWeekDay.setProperties({ checked: true });\n                    self.resetFormValues();\n                    self.triggerChangeEvent();\n                }\n            });\n        };\n        this.monthWeekPos = renderDropDownList(this.getMonthPosData());\n        this.monthWeekPos.appendTo(this.element.querySelector('.' + MONTHPOS));\n        this.monthWeekDays = renderDropDownList(this.getDayData('wide'));\n        this.monthWeekDays.appendTo(this.element.querySelector('.' + MONTHWEEK));\n        this.monthValue = new DropDownList({\n            dataSource: this.getMonthData(),\n            fields: {\n                text: TEXTFIELD,\n                value: VALUEFIELD\n            },\n            enableRtl: this.enableRtl,\n            index: 7,\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            change: function (args) {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthValue.appendTo(this.element.querySelector('.' + YEAREXPANDERELEMENT));\n    };\n    RecurrenceEditor.prototype.setDefaultValue = function () {\n        var formelement = [].slice.call(this.element.querySelectorAll('.e-control .e-numerictextbox'));\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n            var element = formelement_1[_i];\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(REPEATINTERVAL)) {\n                instance.value = 1;\n                instance.dataBind();\n            }\n            else if (instance.element.classList.contains(ENDONCOUNT)) {\n                instance.value = 10;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.resetFormValues = function () {\n        var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type=\"text\"]'));\n        for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {\n            var element = recurreneElement_1[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances[0];\n                if (instance.value) {\n                    // eslint-disable-next-line no-self-assign\n                    instance.value = instance.value;\n                    instance.dataBind();\n                }\n                else {\n                    this.updateUntilDate(this.startDate);\n                }\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances[0];\n                instance.index = instance.index || 0;\n                instance.dataBind();\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances[0];\n                var value = void 0;\n                if (instance.element.classList.contains(REPEATINTERVAL)) {\n                    value = 1;\n                }\n                else if (instance.element.classList.contains(ENDONCOUNT)) {\n                    value = 10;\n                }\n                else {\n                    value = this.startDate.getDate();\n                }\n                instance.value = instance.value || value;\n                instance.dataBind();\n            }\n        }\n    };\n    RecurrenceEditor.prototype.getPopupWidth = function () {\n        return Browser.isDevice ? '100%' : 'auto';\n    };\n    RecurrenceEditor.prototype.renderDatePickers = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.untilDateObj = new DatePicker({\n            firstDayOfWeek: this.firstDayOfWeek,\n            enableRtl: this.enableRtl,\n            locale: this.locale,\n            min: this.minDate,\n            max: this.maxDate,\n            format: (isNullOrUndefined(this.dateFormat) ? this.getFormat('dateFormats') : this.dateFormat),\n            change: function (args) {\n                if (args.value) {\n                    self.triggerChangeEvent();\n                }\n            }\n        });\n        this.untilDateObj.appendTo(this.element.querySelector('.' + UNTILDATE));\n    };\n    RecurrenceEditor.prototype.getFormat = function (formatType) {\n        var format;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.getCalendarMode()));\n        }\n        else {\n            format = getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.' + formatType + '.short', cldrData);\n        }\n        return format;\n    };\n    RecurrenceEditor.prototype.dayButtonRender = function () {\n        var _this = this;\n        var btns = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button'));\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {\n            var btn = btns_1[_i];\n            var button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);\n            this.dayButtons.push(button);\n            EventHandler.add(btn, 'click', function (args) {\n                var btns = [].slice.call(_this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n                var element = args.target;\n                if (!element.classList.contains(PRIMARY)) {\n                    addClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n                else if (btns.length > 1) {\n                    removeClass([element], PRIMARY);\n                    self.triggerChangeEvent();\n                }\n            });\n        }\n    };\n    RecurrenceEditor.prototype.radioButtonRender = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.onMonthDay = new RadioButton({\n            label: this.localeObj.getConstant(RADIOLABEL),\n            enableRtl: this.enableRtl,\n            name: 'monthType',\n            value: 'day',\n            change: function () {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onMonthDay.appendTo(this.element.querySelector('.' + MONTHEXPANDERELEMENT));\n        this.monthButtons.push(this.onMonthDay);\n        this.onWeekDay = new RadioButton({\n            label: this.localeObj.getConstant('monthExpander'),\n            cssClass: 'e-month-type',\n            name: 'monthType',\n            enableRtl: this.enableRtl,\n            value: 'daypos',\n            change: function () {\n                self.resetFormValues();\n                self.triggerChangeEvent();\n            }\n        });\n        this.onWeekDay.appendTo(this.element.querySelector('.' + MONTHEXPANNDERELEM));\n        this.monthButtons.push(this.onWeekDay);\n    };\n    RecurrenceEditor.prototype.numericTextboxRender = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.recurrenceCount = new NumericTextBox({\n            value: 10,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 999,\n            change: function () {\n                self.triggerChangeEvent();\n            }\n        });\n        this.recurrenceCount.appendTo(this.element.querySelector('.' + ENDONCOUNT));\n        this.monthDate = new NumericTextBox({\n            value: 1,\n            format: '#',\n            enableRtl: this.enableRtl,\n            min: 1,\n            max: 31,\n            change: function () {\n                self.onMonthDay.setProperties({ checked: true });\n                self.triggerChangeEvent();\n            }\n        });\n        this.monthDate.appendTo(this.element.querySelector('.' + MONTHDAYWRAPPER));\n        this.repeatInterval = new NumericTextBox({\n            value: 1,\n            format: '#',\n            min: 1,\n            max: 999,\n            enableRtl: this.enableRtl,\n            floatLabelType: 'Always',\n            placeholder: this.localeObj.getConstant(REPEATEVERY),\n            change: function () {\n                self.triggerChangeEvent();\n            }\n        });\n        this.repeatInterval.appendTo(this.element.querySelector('.' + REPEATINTERVAL));\n    };\n    RecurrenceEditor.prototype.renderComponent = function () {\n        this.setTemplate();\n        this.renderDropdowns();\n        this.renderDatePickers();\n        this.dayButtonRender();\n        this.radioButtonRender();\n        this.numericTextboxRender();\n    };\n    RecurrenceEditor.prototype.rotateArray = function (data, count) {\n        var temp;\n        for (var index = 0; index < count; index++) {\n            temp = data.shift();\n            data.push(temp);\n        }\n    };\n    RecurrenceEditor.prototype.getEndData = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var dataSource = [];\n        this.endTypes.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: data });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayPosition = function (date) {\n        var temp = new Date(date.getTime());\n        var endDate = new Date(date.getTime());\n        var day = date.getDay();\n        var positionCollection = [];\n        temp = this.calendarUtil.getMonthStartDate(temp);\n        endDate = this.calendarUtil.getMonthEndDate(endDate);\n        while (temp < endDate) {\n            if (temp.getDay() === day) {\n                positionCollection.push(temp.getTime());\n            }\n            temp.setDate(temp.getDate() + 1);\n        }\n        if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {\n            return -1;\n        }\n        return (positionCollection.indexOf(date.getTime()) + 1);\n    };\n    RecurrenceEditor.prototype.getRepeatData = function () {\n        var data = [];\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        this.frequencies.forEach(function (element) {\n            var textValue = (element === NONE) ? NEVER : element;\n            data.push({ text: self.localeObj.getConstant(textValue), value: element });\n        });\n        return data;\n    };\n    RecurrenceEditor.prototype.getMonthPosData = function () {\n        var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];\n        var monthposValue = {\n            first: 1,\n            second: 2,\n            third: 3,\n            fourth: 4,\n            last: -1\n        };\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var self = this;\n        var dataSource = [];\n        monthpos.forEach(function (data) {\n            dataSource.push({ text: self.localeObj.getConstant(data), value: monthposValue[\"\" + data] });\n        });\n        return dataSource;\n    };\n    RecurrenceEditor.prototype.getDayData = function (format) {\n        var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];\n        var dayData = [];\n        var cldrObj;\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.stand-alone.' + format;\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {\n            var obj = weekday_1[_i];\n            var day = getValue(obj, cldrObj);\n            dayData.push({ text: format === 'narrow' ? day : capitalizeFirstWord(day, 'single'), value: valueData[\"\" + obj] });\n        }\n        return dayData;\n    };\n    RecurrenceEditor.prototype.getMonthData = function () {\n        var monthData = [];\n        var cldrObj;\n        if (this.locale === 'en' || this.locale === 'en-US') {\n            var nameSpaceString = 'months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            var nameSpaceString = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.months.stand-alone.wide';\n            cldrObj = (getValue(nameSpaceString, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            monthData.push({\n                text: capitalizeFirstWord(getValue(obj, cldrObj), 'single'),\n                value: obj\n            });\n        }\n        return monthData;\n    };\n    RecurrenceEditor.prototype.setTemplate = function () {\n        var dayData = this.getDayData('narrow');\n        var fullDay = this.getDayData('wide');\n        this.element.innerHTML = '<div class=\"' + HEADER + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + FORMLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + REPEATELEMENT +\n            '\"label=\"' + REPEATELEMENT.substr(2) + '\" />' +\n            '</div><div class=\"' + INPUTWARAPPER + ' ' +\n            INTERVALCLASS + ' ' + FORMRIGHT + '\"><table  class=\"' + RECURRENCETABLE + ' ' + REPEATCONTENTWRAPPER + '\"  role=\"none\"><tr>' +\n            '<td><input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + REPEATINTERVAL + '\" class=\"' + REPEATINTERVAL +\n            '\"title=\"' + this.localeObj.getConstant('repeatEvery') + '\" /></td>' +\n            '<td><span class=\"' + REPEATCONTENT + '\"></span></td>' +\n            '</tr></table></div><div class=\"' + INPUTWARAPPERSIDE + ' ' + DAYWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + WEEKEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"0\" title=\"' + fullDay[0].text + '\">' + dayData[0].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"1\" title=\"' + fullDay[1].text + '\">' + dayData[1].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"2\" title=\"' + fullDay[2].text + '\">' + dayData[2].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"3\" title=\"' + fullDay[3].text + '\">' + dayData[3].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"4\" title=\"' + fullDay[4].text + '\">' + dayData[4].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"5\" title=\"' + fullDay[5].text + '\">' + dayData[5].text + '</button>' +\n            '<button type=\"button\" class=\"e-round\" data-index=\"6\" title=\"' + fullDay[6].text + '\">' + dayData[6].text + '</button></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + WEEKWRAPPER + ' ' + FORMLEFT + '\">' +\n            '<div class=' + MONTHEXPANDERLABEL + '>' + this.localeObj.getConstant(ON) + '</div>' +\n            '<div class=\"' + YEAREXPANDERWRAPPER + '\">' +\n            '<input class=\"' + YEAREXPANDERELEMENT + '\" type=\"text\" tabindex=\"0\" title=\"' +\n            this.localeObj.getConstant('yearExpander') + '\"/>' +\n            '</div>' +\n            '<div class=\"' + MONETHEXPANDERWRAPPER + '\">' +\n            '<table class=\"' + RECURRENCETABLE + ' ' + MONETHEXPANDWRAPPER + '\" role=\"none\"><tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\">' +\n            '<input class=\"' + MONTHEXPANDERELEMENT + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td colspan=\"2\"><div class=\"' + INPUTWARAPPER + ' ' + MONTHDAYELEMENT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + MONTHDAYWRAPPER + '\" class=\"' + MONTHDAYWRAPPER + '\"title=\"' +\n            this.localeObj.getConstant('on') + '\" />' +\n            '</div></td></tr>' +\n            '<tr><td>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + MONTHEXPANDERCHECKBOXWRAPPER + '\" style=\"min-width: 30px;margin-bottom:18px;\">' +\n            '<input class=\"' + MONTHEXPANNDERELEM + '\"title=\"' + this.localeObj.getConstant('monthExpander') + '\" type=\"radio\">' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + WEEKPOSITION + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHPOS + '\"title=\"' + this.localeObj.getConstant('monthPosition') + '\" />' +\n            '</div></td>' +\n            '<td><div class=\"' + INPUTWARAPPER + ' ' + DAYPOSITION + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + MONTHWEEK + '\"title=\"' + this.localeObj.getConstant('monthWeek') + '\" />' +\n            '</div></td></tr></table>' +\n            '</div></div>' +\n            '<div class=\"' + INPUTWARAPPERSIDE + ' ' + ENDON + ' ' + FORMRIGHT + '\">' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONLEFT + '\">' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + ENDONELEMENT + '\"title=\"' + this.localeObj.getConstant(END) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONDATE + '\" >' +\n            '<input type=\"text\" tabindex=\"0\" class=\"' + UNTILDATE + '\"title=\"' + this.localeObj.getConstant(UNTIL) + '\" />' +\n            '</div>' +\n            '<div class=\"' + INPUTWARAPPER + ' ' + ENDONCOUNTWRAPPER + '\">' +\n            '<input type=\"text\" tabindex=\"0\" id=\"' + this.element.id + '_' + ENDONCOUNT + '\" class=\"' + ENDONCOUNT + '\"title=\"' + this.localeObj.getConstant(COUNT) + '\" />' +\n            '</div></div>' +\n            '</div></div>';\n    };\n    RecurrenceEditor.prototype.getSelectedDaysData = function () {\n        var ruleData = RULEBYDAY + EQUAL;\n        var elements = [].slice.call(this.element.querySelectorAll('.' + DAYWRAPPER + ' button.' + PRIMARY));\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var index = 0; index < elements.length; index++) {\n            ruleData += weekday[parseInt(elements[parseInt(index.toString(), 10)].getAttribute('data-index'), 10)] + (index === (elements.length - 1) ? '' : COMMA);\n        }\n        return ruleData + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getSelectedMonthData = function () {\n        var ruleData;\n        if (this.onWeekDay.checked) {\n            ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON\n                + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;\n        }\n        else {\n            ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.getIntervalData = function () {\n        return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getEndOnCount = function () {\n        return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.getYearMonthRuleData = function () {\n        return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.updateWeekButton = function (keys) {\n        var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];\n        this.rotateArray(weekday, this.firstDayOfWeek);\n        for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {\n            var obj = _a[_i];\n            var index = parseInt(obj.element.getAttribute('data-index'), 10);\n            if (keys.indexOf(weekday[parseInt(index.toString(), 10)]) !== -1) {\n                obj.setProperties({ isPrimary: true });\n            }\n            else {\n                obj.setProperties({ isPrimary: false });\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateMonthUI = function () {\n        if (this.ruleObject.monthDay.length) {\n            this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });\n            this.onMonthDay.setProperties({ checked: true });\n        }\n        else {\n            this.onWeekDay.setProperties({ checked: true });\n            this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });\n            for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (valueData[\"\" + key] === this.ruleObject.day[0]) {\n                    this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });\n                    break;\n                }\n            }\n        }\n    };\n    RecurrenceEditor.prototype.updateUI = function (repeat, state) {\n        this.repeatInterval.setProperties({ value: this.ruleObject.interval });\n        switch (state) {\n            case UNTIL:\n                this.untilDateObj.setProperties({ value: this.ruleObject.until });\n                break;\n            case COUNT:\n                this.recurrenceCount.setProperties({ value: this.ruleObject.count });\n                break;\n        }\n        switch (repeat) {\n            case WEEKLY:\n                this.updateWeekButton(this.ruleObject.day);\n                break;\n            case YEARLY:\n                this.monthValue.setProperties({ index: (this.ruleObject.month[0] - 1) });\n                this.updateMonthUI();\n                break;\n            case MONTHLY:\n                this.updateMonthUI();\n                break;\n        }\n    };\n    RecurrenceEditor.prototype.getUntilData = function () {\n        if (!this.untilDateObj.value) {\n            return '';\n        }\n        var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);\n        return RULEUNTIL + EQUAL + tempStr + SEMICOLON;\n    };\n    RecurrenceEditor.prototype.destroyComponents = function () {\n        if (!this.recurrenceCount.isDestroyed) {\n            this.recurrenceCount.destroy();\n            this.recurrenceCount = null;\n        }\n        if (!this.monthDate.isDestroyed) {\n            this.monthDate.destroy();\n            this.monthDate = null;\n        }\n        if (!this.repeatInterval.isDestroyed) {\n            this.repeatInterval.destroy();\n            this.repeatInterval = null;\n        }\n        if (!this.untilDateObj.isDestroyed) {\n            this.untilDateObj.destroy();\n            this.untilDateObj = null;\n        }\n        if (!this.repeatType.isDestroyed) {\n            this.repeatType.destroy();\n            this.repeatType = null;\n        }\n        if (!this.endType.isDestroyed) {\n            this.endType.destroy();\n            this.endType = null;\n        }\n        if (!this.monthWeekPos.isDestroyed) {\n            this.monthWeekPos.destroy();\n            this.monthWeekPos = null;\n        }\n        if (!this.monthWeekDays.isDestroyed) {\n            this.monthWeekDays.destroy();\n            this.monthWeekDays = null;\n        }\n        if (!this.monthValue.isDestroyed) {\n            this.monthValue.destroy();\n            this.monthValue = null;\n        }\n        if (!this.onMonthDay.isDestroyed) {\n            this.onMonthDay.destroy();\n            this.onMonthDay = null;\n        }\n        if (!this.onWeekDay.isDestroyed) {\n            this.onWeekDay.destroy();\n            this.onWeekDay = null;\n        }\n        this.dayButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.dayButtons = [];\n        this.monthButtons.forEach(function (element) {\n            if (!element.isDestroyed) {\n                element.destroy();\n            }\n        });\n        this.monthButtons = [];\n    };\n    RecurrenceEditor.prototype.resetFields = function () {\n        this.startState(NONE, this.endTypes[0], this.startDate);\n        this.setDefaultValue();\n    };\n    RecurrenceEditor.prototype.updateRuleUntilDate = function (startDate) {\n        if (this.untilDateObj.value && startDate) {\n            var untilDate = this.untilDateObj.value;\n            var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());\n            this.untilDateObj.setProperties({ value: newUntilDate });\n        }\n    };\n    RecurrenceEditor.prototype.getCalendarMode = function () {\n        return !isNullOrUndefined(this.calendarMode) ? this.calendarMode.toLowerCase() : 'gregorian';\n    };\n    RecurrenceEditor.prototype.getRuleSummary = function (rule) {\n        if (rule === void 0) { rule = this.getRecurrenceRule(); }\n        return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceDates = function (startDate, rule, excludeDate, maximumCount, viewDate) {\n        viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;\n        return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);\n    };\n    RecurrenceEditor.prototype.getRecurrenceRule = function () {\n        var ruleData = RULEFREQ + EQUAL;\n        switch (this.repeatType.value) {\n            case DAILY:\n                ruleData += RULEDAILY + SEMICOLON;\n                break;\n            case WEEKLY:\n                ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();\n                break;\n            case MONTHLY:\n                ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();\n                break;\n            case YEARLY:\n                ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();\n                break;\n            case NONE:\n                return '';\n        }\n        ruleData += this.getIntervalData();\n        switch (this.endType.value) {\n            case UNTIL:\n                ruleData += this.getUntilData();\n                break;\n            case COUNT:\n                ruleData += this.getEndOnCount();\n                break;\n        }\n        return ruleData;\n    };\n    RecurrenceEditor.prototype.setRecurrenceRule = function (rule, startDate) {\n        if (startDate === void 0) { startDate = this.startDate; }\n        if (!rule) {\n            this.repeatType.setProperties({ value: NONE });\n            return;\n        }\n        this.renderStatus = false;\n        this.ruleObject = extractObjectFromRule(rule);\n        var endon = this.ruleObject.count ? COUNT : (this.ruleObject.until ? UNTIL : NEVER);\n        switch (this.ruleObject.freq) {\n            case RULEDAILY:\n                this.startState(DAILY, endon, startDate);\n                this.updateUI(DAILY, endon);\n                break;\n            case RULEWEEKLY:\n                this.startState(WEEKLY, endon, startDate);\n                this.updateUI(WEEKLY, endon);\n                break;\n            case RULEMONTHLY:\n                this.startState(MONTHLY, endon, startDate);\n                this.updateUI(MONTHLY, endon);\n                break;\n            case RULEYEARLY:\n                this.startState(YEARLY, endon, startDate);\n                this.updateUI(YEARLY, endon);\n                break;\n        }\n        this.renderStatus = true;\n        this.triggerChangeEvent();\n    };\n    RecurrenceEditor.prototype.detachInputs = function () {\n        var inputElements = [].slice.call(this.element.querySelectorAll('input'));\n        for (var _i = 0, inputElements_1 = inputElements; _i < inputElements_1.length; _i++) {\n            var element = inputElements_1[_i];\n            detach(element);\n        }\n    };\n    /**\n     * Destroys the widget.\n     *\n     * @returns {void}\n     */\n    RecurrenceEditor.prototype.destroy = function () {\n        if (!this.isDestroyed) {\n            this.destroyComponents();\n            _super.prototype.destroy.call(this);\n            var removeClasses = ['e-' + this.getModuleName()];\n            if (this.cssClass) {\n                removeClasses = removeClasses.concat(this.cssClass.split(' '));\n            }\n            removeClass([this.element], removeClasses);\n            this.detachInputs();\n            while (this.element.firstElementChild) {\n                this.element.removeChild(this.element.firstElementChild);\n            }\n        }\n    };\n    /**\n     * Get component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    RecurrenceEditor.prototype.getModuleName = function () {\n        return 'recurrenceeditor';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted state\n     */\n    RecurrenceEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Initialize the control rendering\n     *\n     * @returns {void}\n     * @private\n     */\n    RecurrenceEditor.prototype.render = function () {\n        this.initialize();\n        this.rtlClass(this.enableRtl);\n        this.renderStatus = true;\n        this.renderComplete();\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @param {RecurrenceEditorModel} newProp Accepts the changed properties new values\n     * @param {RecurrenceEditorModel} oldProp Accepts the changed properties old values\n     * @returns {void}\n     * @private\n     */\n    RecurrenceEditor.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'startDate':\n                    this.selectMonthDay(newProp.startDate);\n                    this.updateUntilDate(newProp.startDate);\n                    this.endType.setProperties({ index: 0 });\n                    break;\n                case 'enableRtl':\n                    this.rtlClass(newProp.enableRtl);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'selectedType':\n                    this.repeatType.setProperties({ index: this.selectedType });\n                    break;\n                case 'minDate':\n                    this.untilDateObj.setProperties({ minDate: this.minDate });\n                    break;\n                case 'maxDate':\n                    this.untilDateObj.setProperties({ maxDate: this.maxDate });\n                    break;\n                case 'value':\n                    if (this.getRecurrenceRule() !== this.value) {\n                        this.setRecurrenceRule(this.value);\n                    }\n                    break;\n                case 'calendarMode':\n                    this.calendarMode = newProp.calendarMode;\n                    this.calendarUtil = getCalendarUtil(newProp.calendarMode);\n                    break;\n                case 'locale':\n                case 'frequencies':\n                case 'firstDayOfWeek':\n                case 'endTypes':\n                    this.refresh();\n                    break;\n                case 'dateFormat':\n                    this.untilDateObj.setProperties({ format: newProp.dateFormat });\n                    break;\n            }\n        }\n    };\n    __decorate([\n        Property(['none', 'daily', 'weekly', 'monthly', 'yearly'])\n    ], RecurrenceEditor.prototype, \"frequencies\", void 0);\n    __decorate([\n        Property(['never', 'until', 'count'])\n    ], RecurrenceEditor.prototype, \"endTypes\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property(new Date())\n    ], RecurrenceEditor.prototype, \"startDate\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], RecurrenceEditor.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property()\n    ], RecurrenceEditor.prototype, \"value\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], RecurrenceEditor.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], RecurrenceEditor.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property(0)\n    ], RecurrenceEditor.prototype, \"selectedType\", void 0);\n    __decorate([\n        Event()\n    ], RecurrenceEditor.prototype, \"change\", void 0);\n    RecurrenceEditor = __decorate([\n        NotifyPropertyChanges\n    ], RecurrenceEditor);\n    return RecurrenceEditor;\n}(Component));\nexport { RecurrenceEditor };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append, detach } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, SanitizeHtmlHelper, initializeCSPTemplate } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\n * Event editor window\n */\nvar EventWindow = /** @class */ (function () {\n    function EventWindow(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.fields = this.parent.eventFields;\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\n        this.renderEventWindow();\n    }\n    EventWindow.prototype.renderEventWindow = function () {\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\n        this.parent.element.appendChild(this.element);\n        var dialogModel = {\n            animationSettings: { effect: 'Zoom' },\n            content: this.getEventWindowContent(),\n            cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            height: this.parent.isAdaptive ? '100%' : 'auto',\n            minHeight: '300px',\n            isModal: true,\n            showCloseIcon: this.parent.isAdaptive ? false : true,\n            target: document.body,\n            visible: false,\n            width: '500px',\n            beforeOpen: this.onBeforeOpen.bind(this),\n            beforeClose: this.onBeforeClose.bind(this)\n        };\n        if (this.parent.isAdaptive) {\n            dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n            if (!this.parent.editorHeaderTemplate) {\n                dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                    this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n            }\n        }\n        else {\n            if (!this.parent.editorFooterTemplate) {\n                this.renderDialogButtons(dialogModel);\n            }\n            if (!this.parent.editorHeaderTemplate) {\n                dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n            }\n        }\n        this.dialogObject = new Dialog(dialogModel, this.element);\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n        }\n        this.addEventHandlers();\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n        EventHandler.add(this.dialogObject.element, 'keydown', this.preventEventSave, this);\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.renderDialogButtons = function (dialogButton) {\n        dialogButton.buttons = [{\n                buttonModel: {\n                    content: this.l10n.getConstant('deleteButton'), cssClass: cls.DELETE_EVENT_CLASS,\n                    disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n                },\n                click: this.eventDelete.bind(this)\n            }, {\n                buttonModel: {\n                    content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n                    isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n                },\n                click: this.eventSave.bind(this)\n            }, {\n                buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\n                click: this.dialogClose.bind(this)\n            }];\n    };\n    EventWindow.prototype.addEventHandlers = function () {\n        var backIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS);\n        var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n        if (this.parent.isAdaptive && !isNullOrUndefined(backIcon) && !isNullOrUndefined(saveIcon)) {\n            EventHandler.add(backIcon, 'click', this.dialogClose, this);\n            EventHandler.add(saveIcon, 'click', this.eventSave, this);\n        }\n    };\n    EventWindow.prototype.refresh = function () {\n        this.destroy(true);\n        this.renderEventWindow();\n    };\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\n        if (this.recurrenceEditor) {\n            var recurrenceEditor = this.recurrenceEditor.element;\n            this.recurrenceEditor.destroy();\n            this.createRecurrenceEditor(recurrenceEditor);\n        }\n    };\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        if (this.parent.editorTemplate) {\n            this.recurrenceEditor = recurrenceEditor;\n        }\n    };\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n        this.parent.currentAction = type;\n        this.parent.removeNewEventElement();\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        this.parent.inlineModule.removeInlineAppointmentElement();\n        if (type === 'Add') {\n            var eventObj = {};\n            this.cellClickAction = !isEventData;\n            this.parent.activeCellsData = data;\n            var event_1 = data;\n            if (this.cellClickAction) {\n                this.convertToEventData(event_1, eventObj);\n            }\n            else {\n                this.parent.activeCellsData = {\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\n                    element: event_1.element,\n                    groupIndex: event_1.groupIndex\n                };\n                eventObj = event_1;\n            }\n            data = eventObj;\n        }\n        if (!isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.parent.resetTemplates(['editorHeaderTemplate']);\n            if (this.parent.isAdaptive && !this.parent.editorFooterTemplate) {\n                this.dialogObject.header = this.createAdaptiveHeaderElement(data);\n            }\n            else {\n                this.dialogObject.header = this.getDialogHeader(data);\n            }\n        }\n        if (!isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.parent.resetTemplates(['editorFooterTemplate']);\n            this.dialogObject.footerTemplate = this.getDialogFooter(data);\n        }\n        if (!isNullOrUndefined(this.parent.editorHeaderTemplate) || !isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.dialogObject.dataBind();\n            this.addEventHandlers();\n        }\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data, type, repeatType);\n        }\n        else {\n            this.setEditorContent(data, type, repeatType);\n        }\n    };\n    EventWindow.prototype.setEditorContent = function (data, type, repeatType) {\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n        }\n        switch (type) {\n            case 'Add':\n                this.onCellDetailsUpdate(data, repeatType);\n                break;\n            case 'Save':\n            case 'EditOccurrence':\n            case 'EditSeries':\n            case 'EditFollowingEvents':\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n                }\n                this.cellClickAction = false;\n                this.onEventDetailsUpdate(data);\n                break;\n        }\n    };\n    EventWindow.prototype.setDialogContent = function () {\n        this.dialogObject.content = this.getEventWindowContent();\n        this.dialogObject.dataBind();\n        this.applyFormValidation();\n    };\n    EventWindow.prototype.setDialogHeader = function () {\n        if (!isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.parent.resetTemplates(['editorHeaderTemplate']);\n            if (this.parent.isAdaptive && !this.parent.editorFooterTemplate) {\n                this.dialogObject.header = this.createAdaptiveHeaderElement();\n            }\n            else {\n                this.dialogObject.header = this.getDialogHeader();\n            }\n        }\n        else if (this.parent.isAdaptive) {\n            this.dialogObject.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n        }\n        else {\n            this.dialogObject.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n        }\n        this.dialogObject.dataBind();\n        this.addEventHandlers();\n    };\n    EventWindow.prototype.setDialogFooter = function () {\n        if (!isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.parent.resetTemplates(['editorFooterTemplate']);\n            this.dialogObject.footerTemplate = this.getDialogFooter();\n        }\n        else if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.renderDialogButtons(this.dialogObject);\n        }\n        else if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            this.dialogObject.footerTemplate = null;\n        }\n        this.dialogObject.dataBind();\n    };\n    EventWindow.prototype.createAdaptiveHeaderElement = function (data) {\n        var header = createElement('div', { className: 'e-title-header' });\n        var headerBackIcon = createElement('div', { className: 'e-back-icon e-icons' });\n        header.appendChild(headerBackIcon);\n        var headerTemplate = this.getDialogHeader(data);\n        header.appendChild(headerTemplate);\n        var headerSaveIcon = createElement('div', { className: 'e-save-icon e-icons' });\n        header.appendChild(headerSaveIcon);\n        return header;\n    };\n    EventWindow.prototype.getDialogHeader = function (args) {\n        var headerTemplate = [];\n        var headerTemplateId = this.parent.element.id + '_editorHeaderTemplate';\n        var temHeaderDiv = document.createElement('div');\n        headerTemplate = [].slice.call(this.parent.getEditorHeaderTemplate()(args || {}, this.parent, 'editorHeaderTemplate', headerTemplateId, false));\n        append(headerTemplate, temHeaderDiv);\n        return temHeaderDiv;\n    };\n    EventWindow.prototype.getDialogFooter = function (args) {\n        var footerTemplate = [];\n        var footerTemplateId = this.parent.element.id + '_editorFooterTemplate';\n        var temFooterDiv = document.createElement('div');\n        footerTemplate = [].slice.call(this.parent.getEditorFooterTemplate()(args || {}, this.parent, 'editorFooterTemplate', footerTemplateId, false));\n        append(footerTemplate, temFooterDiv);\n        return temFooterDiv;\n    };\n    EventWindow.prototype.preventEventSave = function (e) {\n        if (this.parent && !this.parent.allowKeyboardInteraction && e.code === 'Enter') {\n            this.isEnterKey = true;\n        }\n    };\n    EventWindow.prototype.onBeforeOpen = function (args) {\n        var _this = this;\n        var endTime = this.eventData[this.fields.endTime].getTime();\n        var eventProp = {\n            type: 'Editor',\n            data: this.eventData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        if (this.cellClickAction) {\n            eventProp.duration = this.getSlotDuration();\n        }\n        var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n        if (saveObj) {\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n            saveObj.dataBind();\n        }\n        var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n        if (deleteObj) {\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n            deleteObj.dataBind();\n        }\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n            if (_this.eventData[_this.fields.endTime].getTime() === endTime && !_this.cellClickAction &&\n                _this.eventData[_this.fields.endTime].getHours() === 0 &&\n                _this.eventData[_this.fields.endTime].getMinutes() === 0) {\n                _this.eventData = extend({}, _this.eventData, null, true);\n                _this.trimAllDay(_this.eventData);\n            }\n            _this.refreshDateTimePicker(_this.duration);\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n                var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n                var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n                endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * popupArgs.duration));\n                endObj.dataBind();\n            }\n            if (_this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.onBeforeClose = function (args) {\n        var _this = this;\n        if (args.isInteracted) {\n            this.isCrudAction = false;\n        }\n        var eventProp = {\n            type: 'Editor',\n            event: args.event || this.dialogEvent,\n            data: this.eventCrudData,\n            cancel: false,\n            element: this.element,\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\n        };\n        var callBackPromise = new Deferred();\n        this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n            args.cancel = popupArgs.cancel;\n            if (!popupArgs.cancel) {\n                if (_this.isCrudAction) {\n                    args.cancel = _this.processCrudActions(popupArgs.data);\n                    _this.isCrudAction = args.cancel;\n                }\n                if (!_this.isCrudAction) {\n                    _this.resetForm();\n                    _this.parent.eventBase.focusElement(true);\n                    _this.eventCrudData = null;\n                }\n            }\n            callBackPromise.resolve(args);\n        });\n        return callBackPromise;\n    };\n    EventWindow.prototype.getEventWindowContent = function () {\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\n        var form = createElement('form', {\n            id: this.parent.element.id + 'EditForm',\n            className: cls.FORM_CLASS,\n            attrs: { onsubmit: 'return false;' }\n        });\n        this.renderFormElements(form);\n        container.appendChild(form);\n        return container;\n    };\n    EventWindow.prototype.renderFormElements = function (form, args, type, repeatType) {\n        var _this = this;\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\n            if (args) {\n                if (this.fieldValidator) {\n                    this.fieldValidator.destroy();\n                    this.fieldValidator = null;\n                }\n                if (this.recurrenceEditor) {\n                    this.recurrenceEditor.destroy();\n                    this.recurrenceEditor = null;\n                }\n                this.destroyComponents();\n                this.parent.resetTemplates(['editorTemplate']);\n                EventHandler.clearEvents(form);\n                if (!this.parent.isReact) {\n                    var formElements = [].slice.call(form.children);\n                    for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n                        var element = formElements_1[_i];\n                        remove(element);\n                    }\n                }\n            }\n            var templateId = this.parent.element.id + '_editorTemplate';\n            var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n            append(tempEle, form);\n            this.parent.renderTemplates(function () {\n                if (_this.element) {\n                    _this.applyFormValidation();\n                    if (args) {\n                        _this.setEditorContent(args, type, repeatType);\n                    }\n                }\n            });\n        }\n        else {\n            form.appendChild(this.getDefaultEventWindowContent());\n            if (args) {\n                this.setEditorContent(args, type, repeatType);\n            }\n        }\n    };\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n        parentDiv.appendChild(titleLocationDiv);\n        titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n        titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n        parentDiv.appendChild(startEndDateTimeDiv);\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n        parentDiv.appendChild(allDayTimezoneDiv);\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        parentDiv.appendChild(timezoneParentDiv);\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n        parentDiv.appendChild(repeatParentDiv);\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n        var repeatEditContainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\n        var button = createElement('button', {\n            className: REPEAT_BUTTON_CLASS,\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\n        });\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\n        repeatEditContainer.appendChild(button);\n        this.buttonObj.appendTo(button);\n        repeatDiv.appendChild(repeatEditContainer);\n        repeatParentDiv.appendChild(repeatDiv);\n        if (this.parent.isAdaptive) {\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n        }\n        else {\n            this.createRecurrenceEditor(parentDiv);\n        }\n        if (this.parent.resourceCollection.length > 0) {\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n            }\n            parentDiv.appendChild(resourceParentDiv);\n        }\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n        description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n        parentDiv.appendChild(description);\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\n        parentDiv.appendChild(submit);\n        return parentDiv;\n    };\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n        var recurrenceEditor = createElement('div', { id: this.parent.element.id + '_recurrence_editor' });\n        parentDiv.appendChild(recurrenceEditor);\n        this.recurrenceEditor = this.renderRecurrenceEditor();\n        this.recurrenceEditor.appendTo(recurrenceEditor);\n        this.updateMinMaxDateToEditor();\n    };\n    EventWindow.prototype.createDivElement = function (className) {\n        return createElement('div', { className: className });\n    };\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n        return createElement(type || 'input', {\n            className: className, attrs: {\n                type: 'text', name: fieldName, value: '', id: fieldName\n            }\n        });\n    };\n    EventWindow.prototype.getSlotDuration = function () {\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    };\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n        var dateTimeDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        dateTimeDiv.appendChild(dateTimeInput);\n        var dateTimePicker = new DateTimePicker({\n            change: changeEvent,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            calendarMode: this.parent.calendarMode,\n            min: this.parent.minDate,\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            floatLabelType: 'Always',\n            strictMode: true,\n            timeFormat: this.parent.activeViewOptions.timeFormat,\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.parent.activeViewOptions.timeFormat,\n            placeholder: this.getFieldLabel(value),\n            step: this.getSlotDuration(),\n            width: '100%'\n        });\n        dateTimePicker.appendTo(dateTimeInput);\n        return dateTimeDiv;\n    };\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\n        var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n            var element = startEndElement_1[_i];\n            var instance = element.ej2_instances[0];\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n            instance.timeFormat = this.parent.activeViewOptions.timeFormat;\n            instance.step = duration || this.getSlotDuration();\n            instance.dataBind();\n        }\n    };\n    EventWindow.prototype.onTimeChange = function () {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n            var duration = 0;\n            if (this.cellClickAction) {\n                duration = util.MS_PER_MINUTE * this.duration;\n                this.eventWindowTime.startTime = startObj.value;\n            }\n            else {\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n            }\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\n            if (this.cellClickAction) {\n                this.eventWindowTime.endTime = endDate;\n            }\n            endObj.value = endDate;\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n        }\n    };\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\n        var fieldName = resourceData.field;\n        var value = 'e-' + fieldName;\n        var labelValue = resourceData.title;\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        resourceDiv.appendChild(resourceInput);\n        var resourceTemplate = function (data) {\n            return SanitizeHtmlHelper.sanitize(\"<div class=\\\"e-resource-template\\\"><div class=\\\"e-resource-color\\\" style=\\\"background-color:\" + data[resourceData.colorField] + \"\\\"></div><div class=\\\"e-resource-text\\\">\" + data[resourceData.textField] + \"</div></div>\");\n        };\n        initializeCSPTemplate(resourceTemplate, resourceData);\n        if (resourceData.allowMultiple) {\n            var listObj = new MultiSelect({\n                enableRtl: this.parent.enableRtl,\n                enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n                cssClass: this.parent.cssClass || '',\n                dataSource: resourceData.dataSource,\n                change: this.onMultiselectResourceChange.bind(this),\n                itemTemplate: resourceTemplate,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                mode: 'Box'\n            });\n            listObj.appendTo(resourceInput);\n        }\n        else {\n            var dropDownList = new DropDownList({\n                cssClass: this.parent.cssClass || '',\n                change: this.onDropdownResourceChange.bind(this),\n                dataSource: resourceData.dataSource,\n                enableRtl: this.parent.enableRtl,\n                fields: {\n                    text: resourceData.textField,\n                    value: resourceData.idField\n                },\n                htmlAttributes: { 'name': fieldName },\n                floatLabelType: 'Always',\n                placeholder: labelValue,\n                popupHeight: '230px',\n                popupWidth: '447px',\n                itemTemplate: resourceTemplate\n            });\n            dropDownList.appendTo(resourceInput);\n        }\n        return resourceDiv;\n    };\n    EventWindow.prototype.renderDropDown = function (value) {\n        var _this = this;\n        var fieldName = this.getFieldName(value);\n        var timezoneDiv = this.createDivElement(value + '-container');\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        timezoneDiv.appendChild(timezoneInput);\n        var dropDownList = new DropDownList({\n            allowFiltering: true,\n            change: this.onTimezoneChange.bind(this),\n            cssClass: this.parent.cssClass || '',\n            dataSource: this.parent.timezoneDataSource,\n            enableRtl: this.parent.enableRtl,\n            fields: { text: 'Text', value: 'Value' },\n            filterBarPlaceholder: this.parent.localeObj.getConstant('searchTimezone'),\n            noRecordsTemplate: this.parent.localeObj.getConstant('noRecords'),\n            filtering: function (e) {\n                var query = new Query();\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\n                e.updateData(_this.parent.timezoneDataSource, query);\n            },\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\n            floatLabelType: 'Always',\n            placeholder: this.getFieldLabel(value),\n            popupHeight: '230px'\n        });\n        dropDownList.appendTo(timezoneInput);\n        return timezoneDiv;\n    };\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n            return;\n        }\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if (resourceCollection[parseInt(i.toString(), 10)].field === fieldName && i < resourceCollection.length - 1) {\n                var resObject = this.createInstance(i);\n                var datasource = [];\n                var _loop_1 = function (j) {\n                    var resourceModel = resourceCollection[i + 1];\n                    // eslint-disable-next-line max-len\n                    var filter = resourceModel.dataSource.filter(function (data) {\n                        return data[resourceModel.groupIDField] === args.value[parseInt(j.toString(), 10)];\n                    })[0];\n                    var groupId = (!isNullOrUndefined(filter)) ?\n                        filter[resourceCollection[i + 1].groupIDField] : null;\n                    var filterRes = this_1.filterDatasource(i, groupId);\n                    datasource = datasource.concat(filterRes);\n                };\n                var this_1 = this;\n                for (var j = 0; j < args.value.length; j++) {\n                    _loop_1(j);\n                }\n                resObject.dataSource = datasource;\n                resObject.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.createInstance = function (index) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\n            ej2_instances[0];\n        resObject.clear();\n        return resObject;\n    };\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n            return;\n        }\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\n        for (var i = 0; i < resourceCollection.length; i++) {\n            if ((i < resourceCollection.length - 1) && resourceCollection[parseInt(i.toString(), 10)].field === fieldName) {\n                var resObj = this.createInstance(i);\n                var groupId = args.itemData[resourceCollection[parseInt(i.toString(), 10)].idField];\n                resObj.dataSource = this.filterDatasource(i, groupId);\n                resObj.dataBind();\n                var resValue = (resObj.dataSource.length > 0) ?\n                    resObj.dataSource[0][resourceCollection[i + 1].idField] : null;\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\n                resObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n        return resourceData.dataSource.filter(function (data) {\n            return data[resourceData.groupIDField] === groupId;\n        });\n    };\n    EventWindow.prototype.onTimezoneChange = function (args) {\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n        if (fieldName === this.parent.eventFields.startTimezone) {\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            endTimezoneObj.value = startTimezoneObj.value;\n            endTimezoneObj.dataBind();\n        }\n    };\n    EventWindow.prototype.renderCheckBox = function (value) {\n        var checkBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n        checkBoxDiv.appendChild(checkBoxInput);\n        var checkBox = new CheckBox({\n            change: this.onChange.bind(this),\n            cssClass: value + ' ' + this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            label: this.getFieldLabel(value)\n        });\n        checkBox.appendTo(checkBoxInput);\n        checkBoxInput.setAttribute('name', fieldName);\n        if (fieldName === 'Repeat') {\n            this.repeatStatus = checkBox;\n        }\n        return checkBoxDiv;\n    };\n    EventWindow.prototype.renderTextBox = function (value) {\n        var textBoxDiv = this.createDivElement(value + '-container');\n        var fieldName = this.getFieldName(value);\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n        textBoxDiv.appendChild(textBoxInput);\n        Input.createInput({\n            element: textBoxInput,\n            floatLabelType: 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl,\n                placeholder: this.getFieldLabel(value)\n            }\n        });\n        return textBoxDiv;\n    };\n    EventWindow.prototype.getFieldName = function (name) {\n        var fieldName = '';\n        switch (name) {\n            case cls.SUBJECT_CLASS:\n                fieldName = this.fields.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                fieldName = this.fields.location;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                fieldName = this.fields.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                fieldName = this.fields.endTime;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                fieldName = this.fields.description;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                fieldName = this.fields.isAllDay;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                fieldName = this.fields.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                fieldName = this.fields.endTimezone;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                fieldName = 'Timezone';\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                fieldName = 'Repeat';\n                break;\n        }\n        return fieldName;\n    };\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\n        var labelText = '';\n        switch (fieldName) {\n            case cls.SUBJECT_CLASS:\n                labelText = this.parent.editorTitles.subject;\n                break;\n            case cls.LOCATION_CLASS:\n                labelText = this.parent.editorTitles.location;\n                break;\n            case cls.DESCRIPTION_CLASS:\n                labelText = this.parent.editorTitles.description;\n                break;\n            case cls.EVENT_WINDOW_START_CLASS:\n                labelText = this.parent.editorTitles.startTime;\n                break;\n            case cls.EVENT_WINDOW_END_CLASS:\n                labelText = this.parent.editorTitles.endTime;\n                break;\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\n                labelText = this.parent.editorTitles.startTimezone;\n                break;\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\n                labelText = this.parent.editorTitles.endTimezone;\n                break;\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\n                labelText = this.parent.editorTitles.recurrenceRule;\n                break;\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n                labelText = this.parent.editorTitles.isAllDay;\n                break;\n            case cls.TIME_ZONE_CLASS:\n                labelText = this.l10n.getConstant('timezone');\n                break;\n        }\n        return labelText;\n    };\n    EventWindow.prototype.onChange = function (args) {\n        if (args.event && args.event.target) {\n            var targetSelector = \".\" + cls.EVENT_WINDOW_ALL_DAY_CLASS + \",.\" + cls.TIME_ZONE_CLASS + \",.\" + cls.EVENT_WINDOW_REPEAT_CLASS;\n            var target = closest(args.event.target, targetSelector);\n            if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n                this.onAllDayChange(args.checked);\n            }\n            else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n                this.timezoneChangeStyle(args.checked);\n            }\n            else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n                this.onRepeatChange(args.checked);\n            }\n        }\n    };\n    EventWindow.prototype.renderRepeatDialog = function () {\n        var element = createElement('div');\n        this.repeatDialogObject = new Dialog({\n            header: this.l10n.getConstant('recurrence'),\n            visible: false,\n            content: '<div class=\"e-rec-editor\"></div>',\n            closeOnEscape: true,\n            width: '90%',\n            buttons: [{\n                    click: this.repeatSaveDialog.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\n                },\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\n            target: this.element,\n            animationSettings: { effect: 'Zoom' },\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            isModal: true,\n            cssClass: REPEAT_DIALOG_CLASS,\n            open: this.repeatOpenDialog.bind(this)\n        });\n        this.element.appendChild(element);\n        this.repeatDialogObject.appendTo(element);\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n    };\n    EventWindow.prototype.loadRecurrenceEditor = function () {\n        this.repeatDialogObject.show();\n        if (this.recurrenceEditor && this.repeatRule) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        }\n    };\n    EventWindow.prototype.onRepeatChange = function (state) {\n        if (state) {\n            if (!this.repeatDialogObject) {\n                this.renderRepeatDialog();\n            }\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\n            this.loadRecurrenceEditor();\n        }\n        else {\n            if (this.repeatDialogObject) {\n                this.repeatDialogObject.hide();\n            }\n            this.repeatRule = '';\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n                this.updateRepeatLabel(this.repeatRule);\n            }\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            addClass([element], HIDE_STYLE_CLASS);\n        }\n    };\n    EventWindow.prototype.repeatSaveDialog = function () {\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n        if (this.recurrenceEditor.getRecurrenceRule()) {\n            removeClass([element], HIDE_STYLE_CLASS);\n        }\n        else {\n            addClass([element], HIDE_STYLE_CLASS);\n            this.repeatStatus.setProperties({ checked: false });\n        }\n        this.updateRepeatLabel(this.repeatRule);\n        this.closeRepeatDialog();\n    };\n    EventWindow.prototype.closeRepeatDialog = function () {\n        this.repeatDialogObject.hide();\n    };\n    EventWindow.prototype.repeatCancelDialog = function () {\n        this.closeRepeatDialog();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n        }\n        if (!this.repeatTempRule) {\n            this.repeatStatus.setProperties({ checked: false });\n        }\n    };\n    EventWindow.prototype.repeatOpenDialog = function () {\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n    };\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n        if (!this.parent.eventSettings.allowAdding) {\n            return;\n        }\n        if (this.parent.isAdaptive && repeatType && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n        if (isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n        }\n        eventObj.Timezone = false;\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n        if (deleteButton) {\n            addClass([deleteButton], cls.DISABLE_CLASS);\n        }\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({\n                startDate: eventObj[this.fields.startTime],\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\n                    this.recurrenceEditor.selectedType : 0\n            });\n            this.repeatRule = this.recurrenceEditor.value;\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule] || repeatType) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        else {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            this.disableButton(saveButton, false);\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n        if (cellsData.subject) {\n            eventObj[this.fields.subject] = cellsData.subject;\n        }\n        eventObj[this.fields.startTime] = cellsData.startTime;\n        eventObj[this.fields.endTime] = cellsData.endTime;\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n        if (cellsData.RecurrenceRule) {\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n        }\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.setResourceValues(eventObj);\n        }\n    };\n    EventWindow.prototype.applyFormValidation = function () {\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (!form) {\n            return;\n        }\n        var getValidationRule = function (rules) {\n            return (rules && Object.keys(rules).length > 0) ? rules : undefined;\n        };\n        var rules = {};\n        var subjectRule = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n        if (!isNullOrUndefined(subjectRule)) {\n            rules[this.parent.eventSettings.fields.subject.name] = subjectRule;\n        }\n        var locationRule = getValidationRule(this.parent.eventSettings.fields.location.validation);\n        if (!isNullOrUndefined(locationRule)) {\n            rules[this.parent.eventSettings.fields.location.name] = locationRule;\n        }\n        var startTimeRule = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n        if (!isNullOrUndefined(startTimeRule)) {\n            rules[this.parent.eventSettings.fields.startTime.name] = startTimeRule;\n        }\n        var endTimeRule = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n        if (!isNullOrUndefined(endTimeRule)) {\n            rules[this.parent.eventSettings.fields.endTime.name] = endTimeRule;\n        }\n        var descriptionRule = getValidationRule(this.parent.eventSettings.fields.description.validation);\n        if (!isNullOrUndefined(descriptionRule)) {\n            rules[this.parent.eventSettings.fields.description.name] = descriptionRule;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        this.fieldValidator = new FieldValidator();\n        this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);\n    };\n    EventWindow.prototype.showDetails = function (eventData) {\n        this.eventData = eventData;\n        var eventObj = extend({}, eventData, null, true);\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        if ((!this.cellClickAction || this.cellClickAction && !isNullOrUndefined(this.parent.editorTemplate)) &&\n            eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n            this.trimAllDay(eventObj);\n        }\n        var keyNames = Object.keys(eventObj);\n        for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {\n            var curElement = formElements_2[_i];\n            var columnName = curElement.name || this.getColumnName(curElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                if (keyNames.indexOf(columnName) !== -1) {\n                    this.setValueToElement(curElement, eventObj[\"\" + columnName]);\n                }\n                else {\n                    this.setDefaultValueToElement(curElement);\n                }\n            }\n        }\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n                timezoneObj.checked = true;\n                timezoneObj.dataBind();\n            }\n            this.timezoneChangeStyle(timezoneObj.checked);\n            delete eventObj.Timezone;\n        }\n    };\n    EventWindow.prototype.getColumnName = function (element) {\n        var attrName = element.getAttribute('data-name') || '';\n        if (attrName === '') {\n            var isDropDowns = false;\n            var fieldSelector = '';\n            if (element.classList.contains('e-dropdownlist')) {\n                fieldSelector = 'e-ddl';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                fieldSelector = 'e-multiselect';\n                isDropDowns = true;\n            }\n            else if (element.classList.contains('e-datetimepicker')) {\n                fieldSelector = 'e-datetimepicker';\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                fieldSelector = 'e-datepicker';\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                fieldSelector = 'e-checkbox';\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                fieldSelector = 'e-numerictextbox';\n            }\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n            if (control) {\n                var attrEle = control.querySelector('[name]');\n                if (attrEle) {\n                    attrName = attrEle.name;\n                }\n            }\n        }\n        return attrName;\n    };\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n        var format;\n        if (allDayStatus) {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        else {\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' +\n                this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + ' ' + this.parent.activeViewOptions.timeFormat;\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n            }\n            startObj.format = endObj.format = format;\n        }\n        if (this.cellClickAction) {\n            this.updateDateTime(allDayStatus, startObj, endObj);\n        }\n        startObj.dataBind();\n        endObj.dataBind();\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n        }\n    };\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n        var startDate;\n        var endDate;\n        if (allDayStatus) {\n            startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n            if (this.parent.activeCellsData.isAllDay) {\n                var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\n            }\n            else {\n                endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n            }\n        }\n        else {\n            var start = this.parent.activeCellsData.startTime;\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n            if (this.parent.activeCellsData.isAllDay) {\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n            }\n            else {\n                endDate = new Date(startDate.getTime());\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n            }\n        }\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\n        startObj.value = startDate;\n        endObj.value = endDate;\n        startObj.dataBind();\n        endObj.dataBind();\n    };\n    EventWindow.prototype.getFormat = function (formatType) {\n        var format;\n        if (isNullOrUndefined(this.parent.locale) || this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n        }\n        else {\n            format = getValue(\"main.\" + this.parent.locale + \".dates.calendars.\" + this.parent.getCalendarMode() + \".\" + formatType + \".short\", cldrData);\n        }\n        return format;\n    };\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n        if (!this.parent.eventSettings.allowEditing) {\n            return;\n        }\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorFooterTemplate)) {\n            removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n        }\n        if (isNullOrUndefined(this.parent.editorHeaderTemplate)) {\n            this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n        }\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            eventObj = extend({}, eventObj, null, true);\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n            var timezoneValue = void 0;\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n                timezoneValue = true;\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            else {\n                timezoneValue = false;\n            }\n            eventObj.Timezone = timezoneValue;\n            timezoneObj.checked = timezoneValue;\n            timezoneObj.dataBind();\n        }\n        this.showDetails(eventObj);\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n        }\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\n            this.recurrenceEditor.setRecurrenceRule('');\n        }\n        this.repeatStartDate = eventObj[this.fields.startTime];\n        this.repeatRule = '';\n        if (eventObj[this.fields.recurrenceRule]) {\n            if (this.recurrenceEditor) {\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n            }\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\n        }\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n            if (eventObj[this.fields.recurrenceRule]) {\n                removeClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: true });\n            }\n            else {\n                addClass([element], HIDE_STYLE_CLASS);\n                this.repeatStatus.setProperties({ checked: false });\n            }\n            this.updateRepeatLabel(this.repeatRule);\n        }\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\n        if (!this.parent.isAdaptive) {\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n            var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n            this.disableButton(saveButton, isDisable);\n            this.disableButton(deleteButton, isDisable);\n        }\n        else {\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n            if (saveIcon) {\n                if (isDisable) {\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n                else {\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n                }\n            }\n        }\n        this.dialogObject.show();\n    };\n    EventWindow.prototype.disableButton = function (element, value) {\n        if (element) {\n            element.ej2_instances[0].disabled = value;\n        }\n    };\n    EventWindow.prototype.renderRecurrenceEditor = function () {\n        return new RecurrenceEditor({\n            calendarMode: this.parent.calendarMode,\n            cssClass: this.parent.cssClass,\n            dateFormat: this.parent.dateFormat,\n            enableRtl: this.parent.enableRtl,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            locale: this.parent.locale\n        });\n    };\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\n        var startDate = this.element.querySelector('.e-start');\n        var endDate = this.element.querySelector('.e-end');\n        if (startDate && endDate) {\n            var startObj = startDate.ej2_instances[0];\n            var endObj = endDate.ej2_instances[0];\n            startObj.min = this.parent.minDate;\n            startObj.max = this.parent.maxDate;\n            endObj.min = this.parent.minDate;\n            endObj.max = this.parent.maxDate;\n            startObj.dataBind();\n            endObj.dataBind();\n        }\n        if (this.recurrenceEditor) {\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n            if (untilDate) {\n                var untilObj = untilDate.ej2_instances[0];\n                untilObj.min = this.parent.minDate;\n                untilObj.max = this.parent.maxDate;\n                untilObj.dataBind();\n            }\n        }\n    };\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        var data = repeatRule ?\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\n        this.repeatStatus.setProperties({ label: data });\n    };\n    EventWindow.prototype.dialogClose = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.parent.activeEventData = { event: undefined, element: undefined };\n        this.parent.currentAction = null;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.resetForm = function () {\n        this.fieldValidator.destroyToolTip();\n        this.resetFormFields();\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n            this.recurrenceEditor.resetFields();\n        }\n    };\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n        if (value) {\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n            var timezone = startTimezoneObj.dataSource;\n            if (!startTimezoneObj.value || !this.parent.timezone) {\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\n                if (!found) {\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\n                    startTimezoneObj.dataSource = timezone;\n                    endTimezoneObj.dataSource = timezone;\n                    startTimezoneObj.dataBind();\n                    endTimezoneObj.dataBind();\n                }\n            }\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n            startTimezoneObj.dataBind();\n            endTimezoneObj.dataBind();\n        }\n        else {\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\n        }\n    };\n    EventWindow.prototype.resetFormFields = function () {\n        var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n            var currentElement = formElement_1[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                this.setDefaultValueToElement(currentElement);\n            }\n        }\n    };\n    EventWindow.prototype.eventSave = function (event, alert) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\n            !formElement.ej2_instances[0].validate()) {\n            return;\n        }\n        var dataCollection = this.getEventDataFromEditor();\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\n            return;\n        }\n        this.eventCrudData = dataCollection.eventData;\n        this.dialogEvent = event;\n        this.isCrudAction = true;\n        this.dialogObject.hide();\n    };\n    EventWindow.prototype.getEventDataFromEditor = function () {\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n        if (!eventObj.Timezone) {\n            eventObj[this.fields.startTimezone] = null;\n            eventObj[this.fields.endTimezone] = null;\n        }\n        delete eventObj.Timezone;\n        delete eventObj.Repeat;\n        this.setDefaultValueToObject(eventObj);\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n        var tempObj = extend({}, eventObj, null, true);\n        if (eventObj[this.fields.isAllDay]) {\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\n                : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\n                : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n        }\n        return { eventData: eventObj, tempData: tempObj };\n    };\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n        var alertType;\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('invalidDateError');\n                return true;\n            }\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n                this.parent.quickPopup.openValidationError('startEndError');\n                return true;\n            }\n        }\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n            if (this.parent.currentAction !== 'EditOccurrence') {\n                alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n            }\n            var isShowAlert = true;\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n                isShowAlert = false;\n            }\n            if (!isNullOrUndefined(alertType) && isShowAlert\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.processCrudActions = function (eventObj) {\n        var _this = this;\n        this.parent.uiStateValues.isBlock = false;\n        var resourceData = this.getResourceData(eventObj);\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\n            && !isNullOrUndefined(resourceData);\n        var eventId = this.getEventIdFromForm();\n        if (!isNullOrUndefined(eventId)) {\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n            var editedData = this.parent.eventsData.filter(function (data) {\n                return data[_this.fields.id] === eveId_1;\n            })[0];\n            if (isNullOrUndefined(editedData)) {\n                editedData = this.parent.blockData.filter(function (data) {\n                    return data[_this.fields.id] === eveId_1;\n                })[0];\n            }\n            eventObj = extend({}, editedData, eventObj);\n            if (eventObj[this.fields.isReadonly]) {\n                return false;\n            }\n            var currentAction = void 0;\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n                currentAction = this.parent.currentAction;\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\n                if (this.parent.currentAction === 'EditOccurrence') {\n                    if (!eventObj[this.fields.recurrenceID]) {\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\n                    }\n                    else {\n                        eveId_1 = eventObj[this.fields.recurrenceID];\n                        currentAction = null;\n                    }\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n                        return true;\n                    }\n                }\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n                }\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\n                }\n            }\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\n            }\n            else {\n                this.parent.saveEvent(eventObj, currentAction);\n            }\n        }\n        else {\n            this.parent.currentAction = 'Add';\n            if (isResourceEventExpand) {\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\n            }\n            else {\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n                this.parent.addEvent(eventObj);\n            }\n        }\n        return this.parent.uiStateValues.isBlock;\n    };\n    EventWindow.prototype.getResourceData = function (eventObj) {\n        var resourceData = null;\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\n            && this.parent.resourceBase.resourceCollection.length > 0) {\n            var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n            resourceData = eventObj[lastResourceData.field];\n        }\n        return resourceData;\n    };\n    EventWindow.prototype.getObjectFromFormData = function (className) {\n        var formElement = this.getFormElements(className);\n        var eventObj = {};\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n            var currentElement = formElement_2[_i];\n            var columnName = currentElement.name || this.getColumnName(currentElement);\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\n                eventObj[\"\" + columnName] = this.getValueFromElement(currentElement);\n            }\n        }\n        return eventObj;\n    };\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n                || this.l10n.getConstant('addTitle');\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n        }\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n        }\n    };\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n        var alertMessage;\n        var recEditor = this.recurrenceEditor;\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n        if (alert !== this.l10n.getConstant('ok')) {\n            var activeEvent = this.parent.activeEventData.event;\n            var excludedEvents = [];\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\n                && !isNullOrUndefined(activeEvent)) {\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n                if (seriesEvents.length > 0) {\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n                }\n                else {\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n                }\n                if (this.parent.currentAction === 'EditSeries'\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n                    excludedEvents.push(this.eventData);\n                }\n            }\n            if (excludedEvents.length > 0) {\n                alertMessage = 'seriesChangeAlert';\n            }\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n                alertMessage = 'wrongPattern';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\n                var temp = [];\n                var tempDiff = [];\n                var tempValue = void 0;\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\n                    case 'DAILY':\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) > (interval * 24))) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'WEEKLY':\n                        types = recEditor.value.split(';')[1].split('=')[1].split(',');\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\n                            temp[parseInt(index.toString(), 10)] =\n                                (types.length > index) ? obj[types[parseInt(index.toString(), 10)]] :\n                                    temp[index - types.length] + (7 * interval);\n                        }\n                        tempValue = temp.sort(function (a, b) { return a - b; });\n                        for (var index = 1; index < tempValue.length; index++) {\n                            tempDiff.push(tempValue[parseInt(index.toString(), 10)] - tempValue[index - 1]);\n                        }\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\n                            || isNullOrUndefined(interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'MONTHLY':\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                    case 'YEARLY':\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n                            alertMessage = 'createError';\n                        }\n                        break;\n                }\n            }\n        }\n        else {\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n                alertMessage = 'createError';\n            }\n            if (isNullOrUndefined(alertMessage)) {\n                this.parent.quickPopup.quickDialog.hide();\n            }\n        }\n        if (isNullOrUndefined(interval)) {\n            alertMessage = 'createError';\n        }\n        return alertMessage;\n    };\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n        var recIndex;\n        for (var index = 0; index < recColl.length; index++) {\n            if (event[this.fields.startTime].valueOf() === recColl[parseInt(index.toString(), 10)][this.fields.startTime].valueOf()) {\n                recIndex = index;\n                break;\n            }\n        }\n        return recIndex;\n    };\n    EventWindow.prototype.trimAllDay = function (data) {\n        if (data[this.fields.isAllDay]) {\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\n        }\n    };\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n        var _this = this;\n        if (editData === void 0) {\n            editData = this.eventData;\n        }\n        var recurColl = this.parent.getOccurrencesByID(eventId);\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\n            return data[_this.fields.recurrenceID] === eventId;\n        });\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\n        currentData = extend({}, currentData);\n        this.trimAllDay(currentData);\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n            var data = recurColl_1[_i];\n            this.trimAllDay(data);\n        }\n        this.parent.eventBase.sortByTime(recurColl);\n        var index = this.getRecurrenceIndex(recurColl, editData);\n        if (isNullOrUndefined(index)) {\n            return false;\n        }\n        var currentStartTime = new Date(+currentData[this.fields.startTime]);\n        var currentEndTime = new Date(+currentData[this.fields.endTime]);\n        var nextStartTime;\n        var nextEndTime;\n        if (index !== recurColl.length - 1) {\n            nextStartTime = new Date(+recurColl[index + 1][this.fields.startTime]);\n            nextEndTime = new Date(+recurColl[index + 1][this.fields.endTime]);\n        }\n        var lastEndTime = new Date(+recurColl[recurColl.length - 1][this.fields.endTime]);\n        if (index === 0) {\n            if (!isNullOrUndefined(recurColl[index + 1])) {\n                if (!(nextStartTime.getTime() >= currentEndTime.getTime()) &&\n                    (util.resetTime(lastEndTime).getTime() >=\n                        util.resetTime(currentStartTime).getTime()) ||\n                    util.resetTime(lastEndTime).getTime() < util.resetTime(currentStartTime).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n                else if (!(util.resetTime(currentStartTime).getTime() <\n                    util.resetTime(nextStartTime).getTime())) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            var previousStartTime = new Date(+recurColl[index - 1][this.fields.startTime]);\n            var previousEndTime = new Date(+recurColl[index - 1][this.fields.endTime]);\n            if (index === recurColl.length - 1) {\n                if (util.resetTime(new Date(+recurColl[(recurColl.length - 1) - index][this.fields.startTime])).getTime() >\n                    util.resetTime(currentStartTime).getTime()) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                    return true;\n                }\n                else if (!((previousEndTime.getTime() <= currentStartTime.getTime()) &&\n                    (util.resetTime(currentStartTime).getTime() > util.resetTime(previousStartTime).getTime()))) {\n                    this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                    return true;\n                }\n            }\n            else if (!(((util.resetTime(previousStartTime).getTime() < util.resetTime(currentStartTime).getTime()) ||\n                util.resetTime(new Date(+recurColl[0][this.fields.startTime])).getTime() >\n                    util.resetTime(currentStartTime).getTime()) &&\n                ((util.resetTime(nextStartTime).getTime() > util.resetTime(currentStartTime).getTime()) ||\n                    (lastEndTime.getTime() < currentStartTime.getTime())))) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return true;\n            }\n            else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && nextStartTime.getTime() >=\n                currentEndTime.getTime()) || (util.resetTime(nextEndTime).getTime() <\n                util.resetTime(currentStartTime).getTime()) ||\n                (util.resetTime(previousStartTime).getTime() > util.resetTime(currentEndTime).getTime()) ||\n                !(util.resetTime(currentStartTime).getTime() < util.resetTime(nextStartTime).getTime())) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('occurrenceAlert');\n                return true;\n            }\n        }\n        return false;\n    };\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n        var _this = this;\n        var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n        var resourceData = eventObj[lastResourceData.field];\n        resourceData = (resourceData instanceof Array) ? resourceData.reverse() : [resourceData].reverse();\n        var lastLevel = this.parent.resourceBase.lastResourceLevel;\n        var eventList = [];\n        var _loop_2 = function (i) {\n            var events = extend({}, eventObj, null, true);\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n            var temp = [];\n            var addValues = function () {\n                if (action === 'Save' && i === resourceData.length - 1) {\n                    if (temp.length > 0) {\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\n                        for (var k = 1; k < temp.length; k++) {\n                            temp[parseInt(k.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                            eventList.push(temp[parseInt(k.toString(), 10)]);\n                            _this.parent.saveEvent(temp[0], currentAction);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = eventObj[_this.fields.id];\n                        _this.parent.saveEvent(events, currentAction);\n                    }\n                }\n                else {\n                    if (temp.length > 0) {\n                        for (var j = 0; j < temp.length; j++) {\n                            temp[parseInt(j.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n                            eventList.push(temp[parseInt(j.toString(), 10)]);\n                        }\n                    }\n                    else {\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n                        eventList.push(events);\n                    }\n                }\n            };\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastLevel))) {\n                var lastResource = lastResourceData.dataSource;\n                var resCol = this_2.parent.resourceCollection;\n                var index = void 0;\n                if (resCol.length > 1) {\n                    index =\n                        util.findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)], events, resCol);\n                }\n                else {\n                    index =\n                        util.findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i.toString(), 10)]);\n                }\n                if (index < 0) {\n                    return { value: void 0 };\n                }\n                var groupId_1 = lastResource[parseInt(index.toString(), 10)][lastResourceData.groupIDField];\n                var filter = lastLevel.filter(function (obj) { return obj.resourceData[lastResourceData.idField] ===\n                    resourceData[parseInt(i.toString(), 10)]; }).\n                    filter(function (obj) { return obj.resourceData[lastResourceData.groupIDField] === groupId_1; })[0];\n                var groupOrder = filter.groupOrder;\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[parseInt(index_1.toString(), 10)].field;\n                    events[\"\" + field] = (groupOrder[parseInt(index_1.toString(), 10)] instanceof Array) ? groupOrder[parseInt(index_1.toString(), 10)][0] :\n                        groupOrder[parseInt(index_1.toString(), 10)];\n                }\n                addValues();\n            }\n            else {\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n                    var field = this_2.parent.resourceBase.resourceCollection[parseInt(index.toString(), 10)].field;\n                    if (events[\"\" + field] instanceof Array && events[\"\" + field].length > 1) {\n                        for (var k = 0; k < events[\"\" + field].length; k++) {\n                            var event_3 = extend({}, events, null, true);\n                            event_3[\"\" + field] = eventObj[\"\" + field][parseInt(k.toString(), 10)];\n                            event_3[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                            temp.push(event_3);\n                        }\n                    }\n                    else {\n                        if (temp.length === 0) {\n                            events[\"\" + field] = (eventObj[\"\" + field] instanceof Array) ?\n                                eventObj[\"\" + field][0] : eventObj[\"\" + field];\n                            events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                        }\n                        else {\n                            for (var l = 0; l < temp.length; l++) {\n                                temp[parseInt(l.toString(), 10)][\"\" + field] = (eventObj[\"\" + field] instanceof Array) ?\n                                    eventObj[\"\" + field][0] : eventObj[\"\" + field];\n                            }\n                        }\n                    }\n                }\n                events[lastResourceData.field] = resourceData[parseInt(i.toString(), 10)];\n                addValues();\n            }\n        };\n        var this_2 = this;\n        for (var i = 0; i < resourceData.length; i++) {\n            var state_1 = _loop_2(i);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        if (eventList.length > 0) {\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n                var event_4 = eventList_1[_i];\n                event_4[this.fields.recurrenceException] = null;\n                event_4[this.fields.recurrenceID] = null;\n            }\n            this.parent.addEvent(eventList);\n        }\n    };\n    EventWindow.prototype.getEventIdFromForm = function () {\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n    };\n    EventWindow.prototype.getFormElements = function (className) {\n        var elements = [];\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n        }\n        else {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n        }\n        return elements;\n    };\n    EventWindow.prototype.getValueFromElement = function (element) {\n        var value;\n        if (element.classList.contains('e-datepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            value = element.ej2_instances[0].value;\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            value = element.ej2_instances[0].checked;\n        }\n        else if (element.classList.contains('e-numerictextbox')) {\n            value = element.ej2_instances[0].value;\n        }\n        else {\n            if (element.type === 'checkbox') {\n                value = element.checked;\n            }\n            else {\n                value = this.parent.enableHtmlSanitizer ?\n                    SanitizeHtmlHelper.sanitize(element.value) : element.value;\n            }\n        }\n        return value;\n    };\n    EventWindow.prototype.setValueToElement = function (element, value) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n                this.eventWindowTime.startTime = new Date('' + value);\n            }\n            else {\n                this.eventWindowTime.endTime = new Date('' + value);\n            }\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.value = ((value instanceof Array) ? value : [value]);\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = value;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-numerictextbox')) {\n            var instance = element.ej2_instances[0];\n            instance.value = value;\n            instance.dataBind();\n        }\n        else {\n            if (element.type !== 'checkbox') {\n                element.value = value || '';\n            }\n            else {\n                element.checked = value;\n            }\n        }\n    };\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\n        if (element.classList.contains('e-datepicker')) {\n            var instance = element.ej2_instances[0];\n            instance.value = this.parent.getCurrentTime();\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-datetimepicker')) {\n            var instance = element.ej2_instances[0];\n            var dateValue = this.parent.getCurrentTime();\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\n            instance.value = dateValue;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-dropdownlist')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-multiselect')) {\n            var instance = element.ej2_instances[0];\n            instance.value = [];\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-checkbox')) {\n            var instance = element.ej2_instances[0];\n            instance.checked = false;\n            instance.dataBind();\n        }\n        else if (element.classList.contains('e-numerictextbox')) {\n            var instance = element.ej2_instances[0];\n            instance.value = null;\n            instance.dataBind();\n        }\n        else {\n            if (element.type === 'checkbox') {\n                element.checked = false;\n            }\n            else {\n                element.value = '';\n            }\n        }\n    };\n    EventWindow.prototype.getInstance = function (className) {\n        var element = this.element.querySelector('.' + className);\n        return element ? element.ej2_instances[0] : null;\n    };\n    EventWindow.prototype.eventDelete = function (event) {\n        if (this.isEnterKey) {\n            this.isEnterKey = false;\n            return;\n        }\n        switch (this.parent.currentAction) {\n            case 'EditOccurrence':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteOccurrence';\n                }\n                else {\n                    this.parent.currentAction = 'Delete';\n                }\n                break;\n            case 'EditSeries':\n                this.parent.currentAction = 'DeleteSeries';\n                break;\n            case 'Save':\n                this.parent.currentAction = 'Delete';\n                break;\n            case 'EditFollowingEvents':\n                if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {\n                    this.parent.currentAction = 'DeleteFollowingEvents';\n                }\n                break;\n        }\n        this.dialogEvent = event;\n        this.isCrudAction = false;\n        this.dialogObject.hide();\n        this.parent.quickPopup.openDeleteAlert();\n    };\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\n            this.renderRepeatDialog();\n        }\n        return this.recurrenceEditor;\n    };\n    EventWindow.prototype.destroyComponents = function () {\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {\n            var element = formElements_3[_i];\n            var instance = void 0;\n            if (element.classList.contains('e-datetimepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-datepicker')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-checkbox')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-dropdownlist')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-multiselect')) {\n                instance = element.ej2_instances;\n            }\n            else if (element.classList.contains('e-numerictextbox')) {\n                instance = element.ej2_instances;\n            }\n            if (instance && instance[0]) {\n                instance[0].destroy();\n            }\n        }\n        if (this.buttonObj) {\n            this.buttonObj.destroy();\n        }\n    };\n    EventWindow.prototype.detachComponents = function () {\n        var formElements = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n        for (var _i = 0, formElements_4 = formElements; _i < formElements_4.length; _i++) {\n            var element = formElements_4[_i];\n            detach(element);\n        }\n    };\n    EventWindow.prototype.destroy = function (isIgnore) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.resetTemplates(['editorTemplate', 'editorHeaderTemplate', 'editorFooterTemplate']);\n        }\n        this.destroyComponents();\n        if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            detach(this.recurrenceEditor.element);\n            this.recurrenceEditor = null;\n        }\n        if (this.fieldValidator) {\n            this.fieldValidator.destroy();\n            this.fieldValidator = null;\n        }\n        if (this.repeatDialogObject) {\n            this.repeatDialogObject.destroy();\n            this.repeatDialogObject = null;\n        }\n        this.detachComponents();\n        if (this.dialogObject) {\n            if (this.dialogObject.element) {\n                var form = this.dialogObject.element.querySelector('form');\n                util.removeChildren(form);\n                detach(form);\n                EventHandler.remove(this.dialogObject.element, 'keydown', this.preventEventSave);\n            }\n            this.dialogObject.destroy();\n            this.dialogObject = null;\n        }\n        if (this.element) {\n            remove(this.element);\n            this.element = null;\n        }\n        if (!isIgnore) {\n            this.l10n = null;\n            this.parent = null;\n            this.fields = null;\n            this.buttonObj = null;\n            this.repeatStatus = null;\n            this.eventWindowTime = null;\n            this.dialogEvent = null;\n        }\n    };\n    return EventWindow;\n}());\nexport { EventWindow };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement, prepend, removeClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.existingDataCollection = [];\n        this.enableTransition = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;\n        this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;\n        return this.renderedLength;\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        if (this.isHorizontalScroll) {\n            var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;\n            wrap.style.width = (colCount * this.itemSize) + 'px';\n        }\n        else {\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        }\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if ((conWrap.scrollHeight - conWrap.scrollTop) < conWrap.offsetHeight * this.bufferCount) {\n                virtual.style.height = parseInt(virtual.style.height, 10) + (conWrap.offsetHeight * this.bufferCount) + 'px';\n            }\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResCount = (renderedResCount > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResCount;\n            wrap.style.height = (renderedResCount * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        if (this.isHorizontalScroll) {\n            this.itemSize = util.getElementWidthFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS, this.parent.uiStateValues.isTransformed) || this.itemSize;\n        }\n        else {\n            this.itemSize = this.parent.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n        }\n    };\n    VirtualScroll.prototype.refreshLayout = function () {\n        var initialHeight = this.parent.uiStateValues.scheduleHeight;\n        this.parent.uiStateValues.scheduleHeight = this.parent.element.offsetHeight;\n        var preRenderedLength = this.renderedLength;\n        if (this.parent.uiStateValues.scheduleHeight !== initialHeight) {\n            if (preRenderedLength < this.getRenderedCount()) {\n                this.isRemoteRefresh = true;\n            }\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            if (!this.parent.rowAutoHeight) {\n                this.enableTransition = false;\n                removeClass([conWrap, resWrap], 'e-transition');\n            }\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var endIndex = (firstTDIndex + this.renderedLength);\n            firstTDIndex = (endIndex > this.parent.resourceBase.expandedResources.length) ?\n                (this.parent.resourceBase.expandedResources.length - this.renderedLength) : firstTDIndex;\n            firstTDIndex = firstTDIndex < 0 ? 0 : firstTDIndex;\n            this.existingDataCollection = this.parent.resourceBase.renderedResources;\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.slice(firstTDIndex, endIndex);\n            if (this.parent.resourceBase.renderedResources.length > 0) {\n                this.updateContent(resWrap, conWrap, eventWrap, this.parent.resourceBase.renderedResources);\n            }\n        }\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.setTabIndex();\n        var dynamicData = this.triggerScrollEvent(events.virtualScrollStop);\n        if (this.parent.activeViewOptions && this.parent.activeViewOptions.enableLazyLoading && this.parent.crudModule) {\n            if (dynamicData.length > 0) {\n                this.parent.crudModule.refreshProcessedData(true, dynamicData);\n                this.parent.hideSpinner();\n                return;\n            }\n            this.parent.crudModule.refreshDataManager();\n            return;\n        }\n        if (this.parent.crudModule) {\n            this.parent.crudModule.refreshProcessedData(true);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.parent.notify(events.contentReady, {});\n        }\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.isHorizontalScroll) {\n            this.horizontalScrolling(conWrap);\n        }\n        else {\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            if (!this.parent.rowAutoHeight) {\n                addClass([conWrap, resWrap], 'e-transition');\n            }\n            this.renderedLength = resWrap.querySelector('tbody').children.length;\n            var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n            var scrollHeight = this.parent.rowAutoHeight ?\n                (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n            var resCollection = [];\n            this.existingDataCollection = this.parent.resourceBase.renderedResources;\n            if ((conWrap.scrollTop) - this.translateY < 0) {\n                resCollection = this.upScroll(conWrap, firstTDIndex);\n            }\n            else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n                resCollection = this.downScroll(conWrap, firstTDIndex);\n            }\n            if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n                this.triggerScrollEvent(events.virtualScrollStart);\n                var selectedEle = this.parent.getSelectedCells();\n                this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n                this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n                this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n                window.clearTimeout(this.timeValue);\n                this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n            }\n        }\n    };\n    VirtualScroll.prototype.horizontalScrolling = function (conWrap) {\n        var _this = this;\n        var resCollection = [];\n        var scrollWidth = this.bufferCount * this.itemSize;\n        if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {\n            resCollection = this.leftScroll(conWrap);\n        }\n        else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {\n            resCollection = this.rightScroll(conWrap);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            if (this.parent.resourceBase.expandedResources.length !== resCollection.length ||\n                this.parent.resourceBase.expandedResources[0] !== resCollection[0] ||\n                this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !==\n                    resCollection[resCollection.length - 1]) {\n                this.triggerScrollEvent(events.virtualScrollStart);\n                var colLevels = this.parent.activeView.colLevels.slice(0);\n                this.updateHorizontalContent(conWrap, resCollection);\n                setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateX(\" + this.translateY + \"px)\" });\n                this.parent.activeView.colLevels = colLevels;\n                if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                    this.parent.dragAndDropModule.navigationWrapper();\n                }\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.triggerScrollEvent = function (action) {\n        var _this = this;\n        var dynamicData = [];\n        if (!this.parent.activeView) {\n            return dynamicData;\n        }\n        var eventArgs = {\n            startDate: this.parent.activeView.startDate(),\n            endDate: this.parent.activeView.endDate(),\n            startIndex: this.parent.resourceBase.renderedResources[0].groupIndex,\n            endIndex: this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex,\n            resourceData: this.parent.resourceBase.renderedResources.map(function (x) { return x.resourceData; }),\n            name: action\n        };\n        this.parent.trigger(action, eventArgs, function (args) {\n            if (action === events.virtualScrollStart) {\n                _this.parent.showSpinner();\n            }\n            else if (action === events.virtualScrollStop && !isNullOrUndefined(args.eventData) && args.eventData.length > 0) {\n                dynamicData = args.eventData;\n            }\n        });\n        return dynamicData;\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            height = (height > 0) ? height : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.leftScroll = function (conWrap) {\n        var index = 0;\n        index = (~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize)) - this.renderedLength;\n        index = (index > 0) ? index : 0;\n        return this.getCollection(index, index + this.renderedLength);\n    };\n    VirtualScroll.prototype.rightScroll = function (conWrap) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var nextSetIndex = 0;\n        nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);\n        var lastIndex = nextSetIndex + this.renderedLength;\n        lastIndex = (lastIndex > lastLevel.length - 1) ? lastLevel.length - 1 : lastIndex;\n        return this.getCollection(lastIndex - this.renderedLength, lastIndex);\n    };\n    VirtualScroll.prototype.getCollection = function (startIndex, endIndex) {\n        this.translateY = startIndex * this.itemSize;\n        var lastLevel = this.getResCollection(startIndex, endIndex);\n        if (this.parent.enableRtl) {\n            this.translateY = -this.translateY;\n        }\n        return lastLevel;\n    };\n    VirtualScroll.prototype.getResCollection = function (startIndex, endIndex) {\n        var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];\n        var resCollection = [];\n        var index = { startIndex: 0, endIndex: 0 };\n        if (this.parent.activeViewOptions.group.byDate) {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() ===\n                this.parent.resourceBase.expandedResources[0].date.getTime() &&\n                lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n            this.setRenderedDates(resCollection);\n        }\n        else {\n            if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex &&\n                lastLevel[parseInt(endIndex.toString(), 10)].groupIndex ===\n                    this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {\n                return this.parent.resourceBase.expandedResources;\n            }\n            resCollection =\n                this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.startIndex = index.startIndex;\n            resCollection = lastLevel.slice(index.startIndex, index.endIndex);\n        }\n        this.translateY = index.startIndex * this.itemSize;\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByDateCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.activeView.colLevels[0].filter(function (data) {\n            return firstItem.date.getTime() <= data.date.getTime() &&\n                data.date.getTime() <= lastItem.date.getTime();\n        });\n        this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.getByIdCollection = function (firstItem, lastItem, index) {\n        var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function (data) {\n            return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;\n        });\n        this.parent.resourceBase.renderedResources = resCollection;\n        this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);\n        return resCollection;\n    };\n    VirtualScroll.prototype.setStartEndIndex = function (data, firstItem, lastItem, colIndex) {\n        var index = 0;\n        data.filter(function (data) {\n            if (firstItem === data) {\n                colIndex.startIndex = index;\n            }\n            else if (lastItem === data) {\n                colIndex.endIndex = index + data.colSpan;\n            }\n            index += data.colSpan;\n        });\n        if (firstItem === lastItem) {\n            colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;\n        }\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLength = resWrap.querySelector('tbody').children.length;\n        if (document.activeElement && document.activeElement.classList.contains(cls.RESOURCE_CELLS_CLASS)) {\n            this.isResourceCell = true;\n            this.parent.element.focus();\n        }\n        for (var i = 0; i < renderedLength; i++) {\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var currentGroupIndices = this.parent.activeView.getGroupIndices(resCollection);\n        var previousGroupIndices = this.parent.activeView.getGroupIndices(this.existingDataCollection);\n        var newGroupIndices = currentGroupIndices.filter(function (index) { return previousGroupIndices.indexOf(index) < 0; });\n        var resWrapRows = Array.from(resWrap.querySelectorAll('tbody tr'));\n        var conWrapRows = Array.from(conWrap.querySelectorAll('tbody tr'));\n        var resWrapBody = resWrap.querySelector('tbody');\n        var conWrapBody = conWrap.querySelector('tbody');\n        this.removeObsoleteRows(resWrapRows, currentGroupIndices);\n        this.removeObsoleteRows(conWrapRows, currentGroupIndices);\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        for (var i = 0; i < newGroupIndices.length; i++) {\n            var index = currentGroupIndices.indexOf(newGroupIndices[parseInt(i.toString(), 10)]);\n            if (index === 0) {\n                prepend([resourceRows[parseInt(i.toString(), 10)]], resWrapBody);\n                prepend([contentRows[parseInt(i.toString(), 10)]], conWrapBody);\n            }\n            else if (resWrapBody && conWrapBody && resWrapBody.children[parseInt(index.toString(), 10)] &&\n                conWrapBody.children[parseInt(index.toString(), 10)]) {\n                resWrapBody.insertBefore(resourceRows[parseInt(i.toString(), 10)], resWrapBody.children[parseInt(index.toString(), 10)]);\n                conWrapBody.insertBefore(contentRows[parseInt(i.toString(), 10)], conWrapBody.children[parseInt(index.toString(), 10)]);\n            }\n            else {\n                append([resourceRows[parseInt(i.toString(), 10)]], resWrapBody);\n                append([contentRows[parseInt(i.toString(), 10)]], conWrapBody);\n            }\n        }\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.removeObsoleteRows = function (elements, currentGroupIndices) {\n        elements.forEach(function (element) {\n            var groupIndex = parseInt(element.firstElementChild.getAttribute('data-group-index'), 10);\n            if (currentGroupIndices.indexOf(groupIndex) < 0) {\n                remove(element);\n            }\n        });\n    };\n    VirtualScroll.prototype.updateHorizontalContent = function (conWrap, resCollection) {\n        this.existingDataCollection = this.parent.resourceBase.expandedResources;\n        this.parent.resourceBase.expandedResources = resCollection;\n        var selectedEle = this.parent.getSelectedCells();\n        this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n        var tbody = conWrap.querySelector('tbody');\n        var renderedRows = Array.from(tbody.querySelectorAll('tr'));\n        if (this.parent.currentView === 'Month') {\n            this.updateMonthViewContent(conWrap, resCollection);\n        }\n        else {\n            this.updateOtherViewContent(conWrap, resCollection, renderedRows);\n        }\n    };\n    VirtualScroll.prototype.updateMonthViewContent = function (conWrap, resCollection) {\n        var renderedLength = conWrap.querySelectorAll(' tr').length;\n        for (var i = 0; i < renderedLength; i++) {\n            remove(conWrap.querySelector('tbody tr'));\n        }\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.parent.activeView.colLevels[0] = resCollection;\n        }\n        else {\n            this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;\n        }\n        var contentRows = this.parent.activeView.getContentRows();\n        append(contentRows, conWrap.querySelector('tbody'));\n    };\n    VirtualScroll.prototype.updateOtherViewContent = function (conWrap, resCollection, renderedRows) {\n        var tbody = conWrap.querySelector('tbody');\n        var colGroup = conWrap.querySelector('colgroup');\n        var thead = conWrap.querySelector('thead');\n        var table = conWrap.querySelector('table');\n        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;\n        var newGroupIndices = new Set(resCollection.map(function (data) { return data.groupIndex; }));\n        renderedRows.forEach(function (row) {\n            var tdElements = row.querySelectorAll('td');\n            tdElements.forEach(function (td) {\n                var groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                if (!newGroupIndices.has(groupIndex)) {\n                    td.remove();\n                }\n            });\n        });\n        var col = [].slice.call(conWrap.querySelector('colgroup').children);\n        for (var i = 0; i < col.length; i++) {\n            remove(col[parseInt(i.toString(), 10)]);\n        }\n        resCollection.forEach(function () { return colGroup.appendChild(createElement('col')); });\n        var tHead = [].slice.call(conWrap.querySelector('thead').children);\n        for (var i = 0; i < tHead.length; i++) {\n            remove(tHead[parseInt(i.toString(), 10)]);\n        }\n        thead.appendChild(this.parent.eventBase.createEventWrapper('', this.startIndex > 0 ? this.startIndex : 0));\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n        var contentRows = this.parent.activeView.getContentRows();\n        this.mergeNewTdData(tbody, contentRows);\n    };\n    VirtualScroll.prototype.mergeNewTdData = function (tbody, contentRows) {\n        var existingRows = Array.from(tbody.querySelectorAll('tr'));\n        existingRows.forEach(function (existingRow, rowIndex) {\n            if (rowIndex < contentRows.length) {\n                var newRow = contentRows[parseInt(rowIndex.toString(), 10)];\n                var existingTds_1 = Array.from(existingRow.querySelectorAll('td'));\n                var newTds = Array.from(newRow.querySelectorAll('td'));\n                newTds.forEach(function (newTd) {\n                    var newGroupIndex = parseInt(newTd.getAttribute('data-group-index').toString(), 10);\n                    var inserted = false;\n                    for (var _i = 0, existingTds_2 = existingTds_1; _i < existingTds_2.length; _i++) {\n                        var existingTd = existingTds_2[_i];\n                        var existingGroupIndex = parseInt(existingTd.getAttribute('data-group-index').toString(), 10);\n                        if (newGroupIndex < existingGroupIndex) {\n                            existingRow.insertBefore(newTd, existingTd);\n                            inserted = true;\n                            break;\n                        }\n                    }\n                    if (!inserted) {\n                        existingRow.appendChild(newTd);\n                    }\n                });\n            }\n        });\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.setRenderedDates = function (resCollection) {\n        if (this.parent.currentView !== 'Month') {\n            var dateCol_1 = resCollection.map(function (x) { return x.date; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = dateCol_1; });\n        }\n        else {\n            var dateCol_2 = resCollection.map(function (x) { return x.date.getDay(); });\n            var renderDates_1 = this.parent.activeView.renderDates.filter(function (x) { return dateCol_2.indexOf(x.getDay()) >= 0; });\n            this.parent.resourceBase.renderedResources.forEach(function (x) { return x.renderDates = renderDates_1; });\n        }\n    };\n    VirtualScroll.prototype.setTabIndex = function () {\n        var resColWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var resCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        if (resCells && resColWrap) {\n            resCells.forEach(function (element) {\n                if (element.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {\n                    element.setAttribute('tabindex', '0');\n                }\n            });\n        }\n        var focusResCell = this.parent.element.querySelector(\".\" + cls.RESOURCE_CELLS_CLASS + \"[tabindex=\\\"\" + 0 + \"\\\"]\");\n        if (this.isResourceCell && focusResCell) {\n            focusResCell.focus();\n            this.isResourceCell = false;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n        this.focusedEle = null;\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { VirtualScroll } from '../actions/virtual-scroll';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule DOM rendering\n */\nvar Render = /** @class */ (function () {\n    function Render(parent) {\n        this.parent = parent;\n    }\n    Render.prototype.render = function (viewName, isDataRefresh) {\n        if (isDataRefresh === void 0) { isDataRefresh = true; }\n        this.initializeLayout(viewName);\n        if (this.parent.activeView && isDataRefresh) {\n            this.parent.crudModule.refreshDataManager();\n        }\n    };\n    Render.prototype.initializeLayout = function (viewName) {\n        if (this.parent.activeView) {\n            var templates = [\n                'cellTemplate', 'tooltipTemplate', 'majorSlotTemplate', 'minorSlotTemplate',\n                'headerTooltipTemplate', 'dateHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate',\n                'headerIndentTemplate', 'resourceHeaderTemplate', 'cellHeaderTemplate', 'dateRangeTemplate'\n            ];\n            if (this.parent.activeEventTemplates.length > 0) {\n                templates = templates.concat(this.parent.activeEventTemplates);\n                this.parent.activeEventTemplates = [];\n            }\n            else {\n                templates.push('eventTemplate');\n            }\n            this.parent.resetTemplates(templates);\n            this.parent.activeView.removeEventListener();\n            this.parent.activeView.destroy();\n        }\n        switch (viewName) {\n            case 'Day':\n                this.parent.activeView = this.parent.dayModule;\n                break;\n            case 'Week':\n                this.parent.activeView = this.parent.weekModule;\n                break;\n            case 'WorkWeek':\n                this.parent.activeView = this.parent.workWeekModule;\n                break;\n            case 'Month':\n                this.parent.activeView = this.parent.monthModule;\n                break;\n            case 'Year':\n                this.parent.activeView = this.parent.yearModule;\n                break;\n            case 'Agenda':\n                this.parent.activeView = this.parent.agendaModule;\n                break;\n            case 'MonthAgenda':\n                this.parent.activeView = this.parent.monthAgendaModule;\n                break;\n            case 'TimelineDay':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                if (!isNullOrUndefined(this.parent.activeView)) {\n                    this.parent.activeView.viewClass = 'e-timeline-day-view';\n                }\n                break;\n            case 'TimelineWorkWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                if (!isNullOrUndefined(this.parent.activeView)) {\n                    this.parent.activeView.viewClass = 'e-timeline-work-week-view';\n                }\n                break;\n            case 'TimelineWeek':\n                this.parent.activeView = this.parent.timelineViewsModule;\n                if (!isNullOrUndefined(this.parent.activeView)) {\n                    this.parent.activeView.viewClass = 'e-timeline-week-view';\n                }\n                break;\n            case 'TimelineMonth':\n                this.parent.activeView = this.parent.timelineMonthModule;\n                break;\n            case 'TimelineYear':\n                this.parent.activeView = this.parent.timelineYearModule;\n                break;\n        }\n        if (isNullOrUndefined(this.parent.activeView)) {\n            var firstView = this.parent.viewCollections[0].option;\n            if (firstView) {\n                this.parent.setProperties({ currentView: firstView }, true);\n                if (this.parent.headerModule) {\n                    this.parent.headerModule.updateActiveView();\n                    this.parent.headerModule.setCalendarView();\n                }\n                console.warn('[WARNING] :: Module \"' + viewName + '\" is not available in Schedule component!' +\n                    ' You either misspelled the module name or forgot to load it.');\n                return this.initializeLayout(firstView);\n            }\n            throw Error('Inject required modules');\n        }\n        this.parent.uiStateValues.scheduleHeight = this.parent.element.offsetHeight;\n        this.parent.activeView.viewIndex = this.parent.viewIndex;\n        this.updateLabelText(viewName);\n        this.parent.activeView.addEventListener();\n        this.parent.activeView.getRenderDates();\n        this.parent.uiStateValues.isGroupAdaptive = this.parent.activeViewOptions.group.resources.length > 0 &&\n            (this.parent.enableAdaptiveUI && !this.parent.isAdaptive ||\n                this.parent.isAdaptive && this.parent.activeViewOptions.group.enableCompactView);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.destroy();\n            this.parent.virtualScrollModule = null;\n        }\n        if ((['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(this.parent.currentView) === -1 ||\n            (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.orientation === 'Vertical'))\n            && this.parent.activeViewOptions.allowVirtualScrolling\n            && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.virtualScrollModule = new VirtualScroll(this.parent);\n            if (this.parent.activeView.isTimelineView()) {\n                this.parent.uiStateValues.top = 0;\n            }\n            else {\n                this.parent.virtualScrollModule.isHorizontalScroll = true;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n        this.updateHeader();\n        this.parent.currentTimezoneDate = this.parent.getCurrentTime();\n        this.parent.activeView.renderLayout(cls.CURRENT_PANEL_CLASS);\n        this.parent.renderTemplates();\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.destroy();\n            this.parent.eventTooltip = null;\n        }\n        if (this.parent.eventSettings.enableTooltip || (this.parent.activeViewOptions.group.resources.length > 0\n            && this.parent.activeViewOptions.group.headerTooltipTemplate)) {\n            this.parent.eventTooltip = new EventTooltip(this.parent);\n        }\n    };\n    Render.prototype.updateHeader = function () {\n        if (this.parent.headerModule) {\n            this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);\n            if (this.parent.activeViewOptions.readonly) {\n                addClass([this.parent.element], cls.READ_ONLY);\n            }\n            else if (this.parent.element.classList.contains(cls.READ_ONLY)) {\n                removeClass([this.parent.element], cls.READ_ONLY);\n            }\n            this.parent.headerModule.updateDateRange();\n            this.parent.headerModule.updateHeaderItems('remove');\n        }\n    };\n    Render.prototype.updateLabelText = function (view) {\n        this.parent.element.setAttribute('role', 'application');\n        this.parent.element.removeAttribute('aria-labelledby');\n        this.parent.element.removeAttribute('aria-label');\n        if (view === 'Year') {\n            this.parent.element.setAttribute('aria-label', this.parent.activeView.getLabelText(view));\n        }\n        else {\n            this.parent.element.setAttribute('aria-labelledby', this.parent.element.id + '_table');\n        }\n    };\n    return Render;\n}());\nexport { Render };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of working hours related options of scheduler.\n */\nvar WorkHours = /** @class */ (function (_super) {\n    __extends(WorkHours, _super);\n    function WorkHours() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], WorkHours.prototype, \"highlight\", void 0);\n    __decorate([\n        Property('09:00')\n    ], WorkHours.prototype, \"start\", void 0);\n    __decorate([\n        Property('18:00')\n    ], WorkHours.prototype, \"end\", void 0);\n    return WorkHours;\n}(ChildProperty));\nexport { WorkHours };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the configuration of options related to timescale on scheduler.\n */\nvar TimeScale = /** @class */ (function (_super) {\n    __extends(TimeScale, _super);\n    function TimeScale() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], TimeScale.prototype, \"enable\", void 0);\n    __decorate([\n        Property(60)\n    ], TimeScale.prototype, \"interval\", void 0);\n    __decorate([\n        Property(2)\n    ], TimeScale.prototype, \"slotCount\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"minorSlotTemplate\", void 0);\n    __decorate([\n        Property()\n    ], TimeScale.prototype, \"majorSlotTemplate\", void 0);\n    return TimeScale;\n}(ChildProperty));\nexport { TimeScale };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that defines the template options available to customize the quick popup of scheduler.\n */\nvar QuickInfoTemplates = /** @class */ (function (_super) {\n    __extends(QuickInfoTemplates, _super);\n    function QuickInfoTemplates() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], QuickInfoTemplates.prototype, \"templateType\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"header\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"content\", void 0);\n    __decorate([\n        Property()\n    ], QuickInfoTemplates.prototype, \"footer\", void 0);\n    return QuickInfoTemplates;\n}(ChildProperty));\nexport { QuickInfoTemplates };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the header rows related configurations on timeline views.\n */\nvar HeaderRows = /** @class */ (function (_super) {\n    __extends(HeaderRows, _super);\n    function HeaderRows() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"option\", void 0);\n    __decorate([\n        Property()\n    ], HeaderRows.prototype, \"template\", void 0);\n    return HeaderRows;\n}(ChildProperty));\nexport { HeaderRows };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { isNullOrUndefined, extend, removeClass } from '@syncfusion/ej2-base';\nimport { getRecurrenceStringFromDate, generate } from '../../recurrence-editor/date-generator';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\n/**\n * Schedule CRUD operations\n */\nvar Crud = /** @class */ (function () {\n    function Crud(parent) {\n        this.parent = parent;\n        this.crudObj = { sourceEvent: null, targetEvent: null, isCrudAction: false };\n    }\n    Crud.prototype.getQuery = function () {\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        return this.parent.dataModule.generateQuery(start, end);\n    };\n    Crud.prototype.getTable = function () {\n        if (this.parent.eventSettings.query) {\n            var query = this.parent.eventSettings.query.clone();\n            return query.fromTable;\n        }\n        return null;\n    };\n    Crud.prototype.refreshDataManager = function () {\n        var _this = this;\n        if (!this.parent.activeView) {\n            return;\n        }\n        if (this.parent.uiStateValues && this.parent.uiStateValues.isPreventEventRefresh) {\n            this.parent.uiStateValues.isPreventEventRefresh = false;\n            this.parent.refreshEvents(false);\n            this.parent.hideSpinner();\n            return;\n        }\n        var start = this.parent.activeView.startDate();\n        var end = this.parent.activeView.endDate();\n        var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e); }).catch(function (e) { return _this.dataManagerFailure(e); });\n    };\n    Crud.prototype.dataManagerSuccess = function (e) {\n        var _this = this;\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.dataBinding, e, function (args) {\n            if (args.cancel) {\n                return;\n            }\n            var resultData = extend([], args.result, null, true);\n            _this.parent.eventsData = resultData.filter(function (data) { return !data[_this.parent.eventFields.isBlock]; });\n            _this.parent.blockData = resultData.filter(function (data) { return data[_this.parent.eventFields.isBlock]; });\n            _this.refreshProcessedData();\n            if (_this.parent.dragAndDropModule && _this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                _this.parent.dragAndDropModule.navigationWrapper();\n            }\n            _this.parent.trigger(events.dataBound, null, function () {\n                _this.parent.hideSpinner();\n                if (_this.parent.isPrinting) {\n                    setTimeout(function () {\n                        _this.parent.notify(events.print, {});\n                    }, 100);\n                }\n            });\n        });\n    };\n    Crud.prototype.dataManagerFailure = function (e) {\n        var _this = this;\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.trigger(events.actionFailure, { error: e }, function () { return _this.parent.hideSpinner(); });\n    };\n    Crud.prototype.refreshProcessedData = function (isVirtualScrollAction, dynamicEvents) {\n        if (isVirtualScrollAction === void 0) { isVirtualScrollAction = false; }\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.actionObj.action = '';\n            removeClass([this.parent.element], 'e-event-action');\n        }\n        if (this.parent.activeViewOptions && this.parent.activeViewOptions.eventTemplate) {\n            var templateNames = ['eventTemplate'];\n            if (this.crudObj.isCrudAction &&\n                ['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(this.parent.currentView) === -1) {\n                templateNames = [];\n                for (var i = 0, len = this.crudObj.sourceEvent.length; i < len; i++) {\n                    templateNames.push('eventTemplate_' + this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex);\n                    if (this.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !==\n                        this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {\n                        templateNames.push('eventTemplate_' + this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex);\n                    }\n                }\n            }\n            if (templateNames.length > 0) {\n                this.parent.resetTemplates(templateNames);\n            }\n        }\n        if (isVirtualScrollAction) {\n            this.parent.notify(events.dataReady, { processedData: dynamicEvents ? this.parent.eventBase.processData(dynamicEvents) : this.parent.eventsProcessed });\n            return;\n        }\n        var eventsData = this.parent.eventsData || [];\n        var blockData = this.parent.blockData || [];\n        var data = eventsData.concat(blockData);\n        this.parent.notify(events.dataReady, { processedData: this.parent.eventBase ? this.parent.eventBase.processData(data) : [] });\n    };\n    Crud.prototype.refreshData = function (args) {\n        var _this = this;\n        var actionArgs = {\n            requestType: args.requestType, cancel: false, data: args.data,\n            addedRecords: args.editParams.addedRecords, changedRecords: args.editParams.changedRecords,\n            deletedRecords: args.editParams.deletedRecords\n        };\n        if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element && this.parent.dragAndDropModule.actionObj.action) {\n            this.parent.dragAndDropModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element && this.parent.resizeModule.actionObj.action) {\n            this.parent.resizeModule.actionObj.element.style.display = 'none';\n        }\n        if (this.parent.isSpecificResourceEvents()) {\n            if (args.requestType === 'eventCreated' || args.requestType === 'eventRemoved') {\n                this.crudObj.isCrudAction = true;\n                this.crudObj.sourceEvent = [];\n                var crudData = args.data instanceof Array ? (args.data.length === 0 &&\n                    args.requestType === 'eventRemoved' ? args.editParams.deletedRecords : args.data) :\n                    ((typeof args.data === 'string' || typeof args.data === 'number') && args.requestType === 'eventRemoved') ?\n                        args.editParams.deletedRecords : [args.data];\n                var _loop_1 = function (data) {\n                    this_1.crudObj.isCrudAction = !(args.requestType === 'eventRemoved' && !isNullOrUndefined(data.parent));\n                    var groupIndex = this_1.parent.eventBase.getGroupIndexFromEvent(data);\n                    if (groupIndex > -1 && this_1.parent.crudModule.crudObj.sourceEvent.filter(function (tdData) { return tdData.groupIndex === groupIndex; }).length === 0\n                        && this_1.crudObj.isCrudAction) {\n                        this_1.crudObj.sourceEvent.push(this_1.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)]);\n                    }\n                };\n                var this_1 = this;\n                for (var _i = 0, crudData_1 = crudData; _i < crudData_1.length; _i++) {\n                    var data = crudData_1[_i];\n                    _loop_1(data);\n                }\n                this.crudObj.targetEvent = this.crudObj.sourceEvent;\n            }\n        }\n        if (this.parent.dataModule.dataManager.dataSource.offline) {\n            this.parent.trigger(events.actionComplete, actionArgs, function (offlineArgs) {\n                if (!offlineArgs.cancel) {\n                    _this.refreshDataManager();\n                }\n            });\n        }\n        else {\n            args.promise.then(function () {\n                if (!_this.parent || _this.parent && _this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionComplete, actionArgs, function (onlineArgs) {\n                    if (!onlineArgs.cancel) {\n                        _this.refreshDataManager();\n                    }\n                });\n            }).catch(function (e) {\n                if (!_this.parent || _this.parent && _this.parent.isDestroyed) {\n                    return;\n                }\n                _this.parent.trigger(events.actionFailure, { error: e });\n            });\n        }\n    };\n    Crud.prototype.addEvent = function (eventData) {\n        var _this = this;\n        if (this.parent.eventSettings.allowAdding && !this.parent.activeViewOptions.readonly) {\n            if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                return;\n            }\n            var addEvents = (eventData instanceof Array) ? eventData : [eventData];\n            if (addEvents.length === 0) {\n                return;\n            }\n            var args = {\n                requestType: 'eventCreate', cancel: false, data: addEvents,\n                addedRecords: addEvents, changedRecords: [], deletedRecords: []\n            };\n            this.parent.trigger(events.actionBegin, args, function (addArgs) {\n                if (!addArgs.cancel) {\n                    var fields = _this.parent.eventFields;\n                    var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                    var promise = void 0;\n                    if (addArgs.addedRecords instanceof Array) {\n                        for (var _i = 0, _a = addArgs.addedRecords; _i < _a.length; _i++) {\n                            var event_1 = _a[_i];\n                            event_1 = _this.parent.eventBase.updateEventDateTime(event_1);\n                            var eventData_1 = extend({}, _this.parent.eventBase.processTimezone(event_1, true), null, true);\n                            editParams.addedRecords.push(eventData_1);\n                        }\n                        promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                    }\n                    else {\n                        var event_2 = _this.parent.eventBase.processTimezone(addArgs.addedRecords, true);\n                        editParams.addedRecords.push(event_2);\n                        promise = _this.parent.dataModule.dataManager.insert(event_2, _this.getTable(), _this.getQuery());\n                    }\n                    var crudArgs = {\n                        requestType: 'eventCreated', cancel: false, data: addArgs.addedRecords, promise: promise, editParams: editParams\n                    };\n                    _this.refreshData(crudArgs);\n                }\n            });\n        }\n    };\n    Crud.prototype.saveEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowEditing && !this.parent.activeViewOptions.readonly) {\n            if (this.parent.currentAction !== 'EditFollowingEvents' && !this.isBlockEvent(eventData)\n                && this.parent.eventBase.isBlockRange(eventData)) {\n                this.parent.quickPopup.openValidationError('blockAlert', eventData);\n                this.parent.crudModule.crudObj.isCrudAction = false;\n                return;\n            }\n            var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n            if (updateEvents.length === 0) {\n                return;\n            }\n            this.parent.currentAction = action;\n            if (action) {\n                switch (action) {\n                    case 'Save':\n                        this.processSave(eventData);\n                        break;\n                    case 'EditOccurrence':\n                        this.processOccurrences(eventData, action);\n                        break;\n                    case 'EditFollowingEvents':\n                        this.processFollowSeries(eventData, action);\n                        break;\n                    case 'EditSeries':\n                        this.processEntireSeries(eventData, action);\n                        break;\n                }\n            }\n            else {\n                var args = {\n                    requestType: 'eventChange', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n                };\n                this.parent.trigger(events.actionBegin, args, function (saveArgs) {\n                    if (!saveArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (saveArgs.changedRecords instanceof Array) {\n                            for (var _i = 0, _a = saveArgs.changedRecords; _i < _a.length; _i++) {\n                                var event_3 = _a[_i];\n                                event_3 = _this.parent.eventBase.updateEventDateTime(event_3);\n                                var eventData_2 = extend({}, _this.parent.eventBase.processTimezone(event_3, true), null, true);\n                                editParams.changedRecords.push(eventData_2);\n                            }\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            var event_4 = _this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);\n                            editParams.changedRecords.push(event_4);\n                            promise = _this.parent.dataModule.dataManager.update(fields.id, event_4, _this.getTable(), _this.getQuery());\n                        }\n                        var cloneEvent = extend({}, saveArgs.changedRecords[saveArgs.changedRecords.length - 1], null, true);\n                        _this.parent.eventBase.selectWorkCellByTime([_this.parent.eventBase.processTimezone(cloneEvent)]);\n                        var crudArgs = {\n                            requestType: 'eventChanged', cancel: false,\n                            data: saveArgs.changedRecords, promise: promise, editParams: editParams\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.deleteEvent = function (eventData, action) {\n        var _this = this;\n        if (this.parent.eventSettings.allowDeleting && !this.parent.activeViewOptions.readonly) {\n            this.parent.currentAction = action;\n            var deleteEvents = [];\n            if (typeof eventData === 'string' || typeof eventData === 'number') {\n                deleteEvents = this.parent.eventsData.filter(function (eventObj) {\n                    return eventObj[_this.parent.eventFields.id] === eventData;\n                });\n            }\n            else {\n                deleteEvents = (eventData instanceof Array ? eventData : [eventData]);\n            }\n            if (deleteEvents.length === 0) {\n                return;\n            }\n            if (action) {\n                switch (action) {\n                    case 'Delete':\n                        this.processDelete(deleteEvents);\n                        break;\n                    case 'DeleteOccurrence':\n                        this.processOccurrences(deleteEvents, action);\n                        break;\n                    case 'DeleteFollowingEvents':\n                        this.processFollowSeries(deleteEvents, action);\n                        break;\n                    case 'DeleteSeries':\n                        this.processEntireSeries(deleteEvents, action);\n                        break;\n                }\n            }\n            else {\n                var args = {\n                    requestType: 'eventRemove', cancel: false, data: eventData,\n                    addedRecords: [], changedRecords: [], deletedRecords: deleteEvents\n                };\n                this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n                    if (!deleteArgs.cancel) {\n                        var promise = void 0;\n                        var fields = _this.parent.eventFields;\n                        var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                        if (deleteArgs.deletedRecords.length > 1) {\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);\n                            promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                        }\n                        else {\n                            editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);\n                            promise = _this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this.getTable(), _this.getQuery());\n                        }\n                        _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n                        var crudArgs = {\n                            requestType: 'eventRemoved', cancel: false,\n                            data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                        };\n                        _this.refreshData(crudArgs);\n                    }\n                });\n            }\n        }\n    };\n    Crud.prototype.processOccurrences = function (eventData, action) {\n        var _this = this;\n        var occurrenceData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_3 = eventData; _i < eventData_3.length; _i++) {\n                var event_5 = eventData_3[_i];\n                occurrenceData.push({ occurrence: event_5, parent: this.getParentEvent(event_5) });\n            }\n        }\n        else {\n            occurrenceData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditOccurrence' ? 'eventChange' : 'eventRemove',\n            cancel: false,\n            addedRecords: [], changedRecords: updateEvents, deletedRecords: []\n        };\n        args.data = occurrenceData;\n        this.parent.trigger(events.actionBegin, args, function (occurrenceArgs) {\n            if (!occurrenceArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var occurrenceEvents = (occurrenceData instanceof Array ? occurrenceData : [occurrenceData]);\n                var _loop_2 = function (a, count) {\n                    var childEvent = occurrenceArgs.changedRecords[parseInt(a.toString(), 10)];\n                    var parentEvent = occurrenceEvents[parseInt(a.toString(), 10)].parent;\n                    var parentException = parentEvent[fields.recurrenceException];\n                    var editedData = void 0;\n                    var exceptionDate = void 0;\n                    switch (action) {\n                        case 'EditOccurrence':\n                            editedData = _this.parent.eventsProcessed.filter(function (event) { return event.Guid === childEvent.Guid; })[0];\n                            exceptionDate = _this.excludeDateCheck(editedData[fields.startTime], parentException);\n                            if (exceptionDate !== parentEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] = exceptionDate;\n                                childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);\n                                childEvent[fields.recurrenceID] = parentEvent[fields.id];\n                                childEvent[fields.followingID] = null;\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                                editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            else {\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            }\n                            break;\n                        case 'DeleteOccurrence':\n                            if (!childEvent[fields.recurrenceException]) {\n                                parentEvent[fields.recurrenceException] =\n                                    _this.excludeDateCheck(childEvent[fields.startTime], parentException);\n                                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            }\n                            if (childEvent[fields.id] !== parentEvent[fields.id]) {\n                                editParams.deletedRecords.push(childEvent);\n                                isDeletedRecords = true;\n                            }\n                            break;\n                    }\n                };\n                for (var a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {\n                    _loop_2(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                var cloneEvent = extend({}, occurrenceArgs.changedRecords[occurrenceArgs.changedRecords.length - 1], null, true);\n                _this.parent.eventBase.selectWorkCellByTime(action === 'EditOccurrence' ? [_this.parent.eventBase.processTimezone(cloneEvent)] : [cloneEvent]);\n                var crudArgs = {\n                    requestType: action === 'EditOccurrence' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processFollowSeries = function (eventData, action) {\n        var _this = this;\n        var followData = [];\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_4 = eventData; _i < eventData_4.length; _i++) {\n                var event_6 = eventData_4[_i];\n                followData.push({ occurrence: event_6, parent: this.getParentEvent(event_6) });\n            }\n        }\n        else {\n            followData = { occurrence: eventData, parent: this.getParentEvent(eventData) };\n        }\n        var updateFollowEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditFollowingEvents' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: updateFollowEvents, deletedRecords: []\n        };\n        args.data = followData;\n        this.parent.trigger(events.actionBegin, args, function (followArgs) {\n            if (!followArgs.cancel) {\n                var fields_1 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var followEvents = followData instanceof Array ? followData : [followData];\n                var _loop_3 = function (a, count) {\n                    var childEvent = followArgs.changedRecords[parseInt(a.toString(), 10)];\n                    var parentEvent = followEvents[parseInt(a.toString(), 10)].parent;\n                    var followData_1 = _this.parent.eventBase.getEventCollections(parentEvent, childEvent);\n                    var isSpanned = void 0;\n                    switch (action) {\n                        case 'EditFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent);\n                            isSpanned = !_this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);\n                            childEvent[fields_1.followingID] = isSpanned ? null : parentEvent[fields_1.id];\n                            childEvent[fields_1.recurrenceID] = null;\n                            editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            if (!_this.parent.uiStateValues.isIgnoreOccurrence) {\n                                childEvent[fields_1.recurrenceException] = null;\n                                if (followData_1.occurrence.length > 0) {\n                                    var rule = followData_1.occurrence.slice(-1)[0][fields_1.recurrenceRule];\n                                    if (rule.indexOf('COUNT') === -1) {\n                                        childEvent[fields_1.recurrenceRule] = rule;\n                                    }\n                                }\n                                if (followData_1.follow.length > 0) {\n                                    childEvent[fields_1.recurrenceRule] = followData_1.follow.slice(-1)[0][fields_1.recurrenceRule];\n                                    editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.follow);\n                                }\n                                if (isSpanned) {\n                                    followData_1.occurrence = followData_1.occurrence.filter(function (eventObj) {\n                                        return eventObj[fields_1.recurrenceID] === parentEvent[fields_1.id];\n                                    });\n                                }\n                                editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence);\n                            }\n                            break;\n                        case 'DeleteFollowingEvents':\n                            _this.processRecurrenceRule(parentEvent, childEvent[fields_1.startTime]);\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));\n                            editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence).concat(followData_1.follow);\n                            break;\n                    }\n                };\n                for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {\n                    _loop_3(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_1.id, _this.getTable(), _this.getQuery());\n                var cloneEvent = extend({}, followArgs.changedRecords[followArgs.changedRecords.length - 1], null, true);\n                _this.parent.eventBase.selectWorkCellByTime(action === 'EditFollowingEvents' ? [_this.parent.eventBase.processTimezone(cloneEvent)] : [cloneEvent]);\n                var crudArgs = {\n                    requestType: action === 'EditFollowingEvents' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: followArgs.changedRecords, promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processEntireSeries = function (eventData, action) {\n        var _this = this;\n        var seriesData = [];\n        var isDeletedRecords = false;\n        if (eventData instanceof Array) {\n            for (var _i = 0, eventData_5 = eventData; _i < eventData_5.length; _i++) {\n                var event_7 = eventData_5[_i];\n                seriesData.push(this.getParentEvent(event_7, true));\n            }\n        }\n        else {\n            seriesData = this.getParentEvent(eventData, true);\n        }\n        var updateSeriesEvents = (eventData instanceof Array) ? eventData : [eventData];\n        var args = {\n            requestType: action === 'EditSeries' ? 'eventChange' : 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: [], deletedRecords: []\n        };\n        args.data = seriesData;\n        if (action === 'EditSeries') {\n            args.changedRecords = updateSeriesEvents;\n        }\n        else {\n            args.deletedRecords = updateSeriesEvents;\n        }\n        if (action === 'EditSeries' && !this.parent.uiStateValues.isIgnoreOccurrence) {\n            var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n            for (var a = 0, count = args.changedRecords.length; a < count; a++) {\n                var parentEvent = seriesEvents[parseInt(a.toString(), 10)];\n                var eventCollections = this.parent.eventBase.getEventCollections(parentEvent);\n                var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n                args.deletedRecords = args.deletedRecords.concat(deletedEvents);\n            }\n        }\n        this.parent.trigger(events.actionBegin, args, function (seriesArgs) {\n            if (!seriesArgs.cancel) {\n                var fields_2 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];\n                var records = action === 'EditSeries' ? seriesArgs.changedRecords : seriesArgs.deletedRecords;\n                var _loop_4 = function (a, count) {\n                    var childEvent = records[parseInt(a.toString(), 10)];\n                    var parentEvent = seriesEvents[parseInt(a.toString(), 10)];\n                    var eventCollections = _this.parent.eventBase.getEventCollections(parentEvent);\n                    var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);\n                    switch (action) {\n                        case 'EditSeries':\n                            childEvent[fields_2.id] = parentEvent[fields_2.id];\n                            childEvent[fields_2.recurrenceID] = null;\n                            childEvent[fields_2.followingID] = null;\n                            if (_this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields_2.recurrenceException]) {\n                                var originalParent = _this.parent.eventsData.filter(function (eventObj) {\n                                    return eventObj[fields_2.id] === childEvent[fields_2.id];\n                                });\n                                if (originalParent.length > 0) {\n                                    childEvent[fields_2.recurrenceRule] = originalParent[0][fields_2.recurrenceRule];\n                                }\n                            }\n                            else {\n                                childEvent[fields_2.recurrenceException] = null;\n                                editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);\n                            }\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));\n                            _this.parent.uiStateValues.isIgnoreOccurrence = false;\n                            break;\n                        case 'DeleteSeries':\n                            editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));\n                            isDeletedRecords = true;\n                            break;\n                    }\n                };\n                for (var a = 0, count = records.length; a < count; a++) {\n                    _loop_4(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_2.id, _this.getTable(), _this.getQuery());\n                var cloneEvent = extend({}, records[records.length - 1], null, true);\n                _this.parent.eventBase.selectWorkCellByTime(action === 'EditSeries' ? [_this.parent.eventBase.processTimezone(cloneEvent)] : [cloneEvent]);\n                var crudArgs = {\n                    requestType: action === 'EditSeries' ? 'eventChanged' : 'eventRemoved',\n                    cancel: false, data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,\n                    promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processDelete = function (eventData) {\n        var _this = this;\n        var deleteData = [];\n        for (var _i = 0, eventData_6 = eventData; _i < eventData_6.length; _i++) {\n            var eventObj = eventData_6[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                deleteData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                deleteData.push(eventObj);\n            }\n        }\n        var args = {\n            requestType: 'eventRemove', cancel: false,\n            addedRecords: [], changedRecords: [], deletedRecords: eventData\n        };\n        args.data = deleteData;\n        this.parent.trigger(events.actionBegin, args, function (deleteArgs) {\n            if (!deleteArgs.cancel) {\n                var fields_3 = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                var _loop_5 = function (a, count) {\n                    var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[parseInt(a.toString(), 10)][_this.parent.eventFields.recurrenceRule]);\n                    if (!isDelete) {\n                        var parentEvent_1 = deleteData[parseInt(a.toString(), 10)].parent;\n                        var isEdited = editParams.changedRecords.filter(function (obj) {\n                            return obj[fields_3.id] === parentEvent_1[fields_3.id];\n                        });\n                        var editedDate = deleteArgs.deletedRecords[parseInt(a.toString(), 10)][fields_3.startTime];\n                        if (isEdited.length > 0) {\n                            var editedData = isEdited[0];\n                            editedData[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, editedData[fields_3.recurrenceException]);\n                        }\n                        else {\n                            parentEvent_1[fields_3.recurrenceException] =\n                                _this.excludeDateCheck(editedDate, parentEvent_1[fields_3.recurrenceException]);\n                        }\n                        if (isEdited.length === 0) {\n                            editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent_1, true));\n                        }\n                        isDelete = deleteArgs.deletedRecords[parseInt(a.toString(), 10)][fields_3.id] !== parentEvent_1[fields_3.id];\n                    }\n                    if (isDelete) {\n                        editParams.deletedRecords.push(deleteArgs.deletedRecords[parseInt(a.toString(), 10)]);\n                    }\n                };\n                for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {\n                    _loop_5(a, count);\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_3.id, _this.getTable(), _this.getQuery());\n                _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);\n                var crudArgs = {\n                    requestType: 'eventRemoved', cancel: false, data: deleteArgs.deletedRecords, promise: promise, editParams: editParams\n                };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.processSave = function (data) {\n        var _this = this;\n        var eventData = (data instanceof Array) ? data : [data];\n        var editData = [];\n        for (var _i = 0, eventData_7 = eventData; _i < eventData_7.length; _i++) {\n            var eventObj = eventData_7[_i];\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                editData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });\n            }\n            else {\n                editData.push(eventObj);\n            }\n        }\n        var args = { requestType: 'eventChange', cancel: false, addedRecords: [], changedRecords: eventData, deletedRecords: [] };\n        args.data = editData;\n        this.parent.trigger(events.actionBegin, args, function (editArgs) {\n            if (!editArgs.cancel) {\n                var fields = _this.parent.eventFields;\n                var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };\n                for (var _i = 0, _a = editArgs.changedRecords; _i < _a.length; _i++) {\n                    var record = _a[_i];\n                    if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {\n                        var exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);\n                        var parentEle = _this.getParentEvent(record);\n                        parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ?\n                            exceptionString : parentEle[fields.recurrenceException].concat(',' + exceptionString);\n                        record[fields.id] = _this.parent.getEventMaxID();\n                        record[fields.recurrenceException] = exceptionString;\n                        editParams.addedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n                        editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEle, true));\n                    }\n                    else {\n                        editParams.changedRecords.push(_this.parent.eventBase.processTimezone(record, true));\n                    }\n                }\n                var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());\n                var cloneEvent = extend({}, editArgs.changedRecords[editArgs.changedRecords.length - 1], null, true);\n                _this.parent.eventBase.selectWorkCellByTime([_this.parent.eventBase.processTimezone(cloneEvent)]);\n                var crudArgs = { requestType: 'eventChanged', cancel: false, data: editArgs.changedRecords, promise: promise, editParams: editParams };\n                _this.refreshData(crudArgs);\n            }\n        });\n    };\n    Crud.prototype.getParentEvent = function (event, isParent) {\n        if (isParent === void 0) { isParent = false; }\n        var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;\n        if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(parentEvent);\n        }\n        return parentEvent;\n    };\n    Crud.prototype.excludeDateCheck = function (eventStartTime, exceptionDateList) {\n        var timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        if (timezone) {\n            eventStartTime = this.parent.tzModule.remove(new Date(+eventStartTime.getTime()), timezone);\n        }\n        var exDate = getRecurrenceStringFromDate(eventStartTime);\n        if (!isNullOrUndefined(exceptionDateList)) {\n            if (exceptionDateList.indexOf(exDate) === -1) {\n                exceptionDateList = !(isNullOrUndefined(exceptionDateList)) ? exceptionDateList + ',' + exDate : exDate;\n            }\n        }\n        else {\n            exceptionDateList = exDate;\n        }\n        return exceptionDateList;\n    };\n    Crud.prototype.processRecurrenceRule = function (parentEvent, followEvent) {\n        var fields = this.parent.eventFields;\n        var recurrenceRule = parentEvent[fields.recurrenceRule];\n        var endDate;\n        if (followEvent instanceof Date) {\n            endDate = new Date(+followEvent);\n        }\n        else {\n            endDate = new Date(+followEvent[fields.startTime]);\n            var newRecurrenceRule = followEvent[fields.recurrenceRule];\n            if (newRecurrenceRule) {\n                var startDate = parentEvent[fields.startTime];\n                var ruleException = (this.parent.currentAction === 'DeleteFollowingEvents') ? followEvent[fields.recurrenceException] : null;\n                var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);\n                var untilDate = new Date(dateCollection.slice(-1)[0]);\n                untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());\n                endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());\n                followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, new Date(+untilDate), false);\n            }\n        }\n        parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, util.addDays(new Date(endDate.getTime()), -1), true);\n    };\n    Crud.prototype.getUpdatedRecurrenceRule = function (recurrenceRule, untilDate, isParent) {\n        var splitRule = recurrenceRule.split(';');\n        var updatedRule = '';\n        for (var _i = 0, splitRule_1 = splitRule; _i < splitRule_1.length; _i++) {\n            var rule = splitRule_1[_i];\n            if (rule !== '') {\n                var ruleKey = rule.split('=')[0];\n                var ruleValue = rule.split('=')[1];\n                if (ruleKey === 'COUNT' || ruleKey === 'UNTIL') {\n                    ruleValue = getRecurrenceStringFromDate(untilDate);\n                    rule = rule.replace(rule, 'UNTIL=' + ruleValue);\n                }\n                updatedRule += rule + ';';\n            }\n        }\n        if (isParent && updatedRule.indexOf('UNTIL') === -1) {\n            updatedRule += 'UNTIL=' + getRecurrenceStringFromDate(untilDate);\n        }\n        return updatedRule;\n    };\n    Crud.prototype.isBlockEvent = function (eventData) {\n        var eventCollection = (eventData instanceof Array) ? eventData : [eventData];\n        var value = false;\n        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {\n            var event_8 = eventCollection_1[_i];\n            value = event_8[this.parent.eventFields.isBlock] || false;\n        }\n        return value;\n    };\n    /**\n     * To destroy the crud module.\n     *\n     * @returns {void}\n     * @private\n     */\n    Crud.prototype.destroy = function () {\n        this.crudObj = null;\n        this.parent = null;\n    };\n    return Crud;\n}());\nexport { Crud };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend, closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Work cell interactions\n */\nvar WorkCellInteraction = /** @class */ (function () {\n    function WorkCellInteraction(parent) {\n        this.parent = parent;\n        EventHandler.add(this.parent.element, 'mouseover', this.onHover, this);\n    }\n    WorkCellInteraction.prototype.cellMouseDown = function (e) {\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        this.parent.notify(event.cellMouseDown, { event: e });\n    };\n    WorkCellInteraction.prototype.cellClick = function (e) {\n        var _this = this;\n        if (this.isPreventAction(e)) {\n            return;\n        }\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (isNullOrUndefined(target)) {\n            return;\n        }\n        if (!isNullOrUndefined(closest(e.target, '.' + cls.NEW_EVENT_CLASS))) {\n            this.parent.eventWindow.openEditor(this.parent.activeCellsData, 'Add');\n            return;\n        }\n        var isWorkCell = target.classList.contains(cls.WORK_CELLS_CLASS) ||\n            target.classList.contains(cls.ALLDAY_CELLS_CLASS);\n        if (this.parent.uiStateValues.isTapHold && !this.parent.uiStateValues.action && isWorkCell) {\n            this.parent.uiStateValues.isTapHold = false;\n            this.parent.eventBase.removeSelectedAppointmentClass();\n            this.parent.selectedElements = [];\n        }\n        var navigateEle = closest(e.target, '.' + cls.NAVIGATE_CLASS);\n        var navigateView = this.parent.getNavigateView();\n        var sameView = this.parent.currentView === navigateView;\n        if (isNullOrUndefined(navigateEle) || sameView ||\n            isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {\n            if (this.parent.activeViewOptions.readonly && this.parent.currentView !== 'MonthAgenda') {\n                if (this.parent.quickPopup) {\n                    this.parent.quickPopup.quickPopupHide();\n                }\n                return;\n            }\n            if (this.parent.isAdaptive && (e.target.classList.contains(cls.MORE_INDICATOR_CLASS) ||\n                closest(e.target, '.' + cls.MORE_INDICATOR_CLASS))) {\n                return;\n            }\n            if (isWorkCell && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {\n                this.parent.keyboardInteractionModule.onMouseSelection(e);\n                return;\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(event.cellClick, args, function (clickArgs) {\n                if (!clickArgs.cancel) {\n                    if (isWorkCell) {\n                        _this.parent.selectCell(target);\n                    }\n                    if (_this.parent.allowInline) {\n                        var inlineArgs = {\n                            element: clickArgs.element,\n                            groupIndex: clickArgs.groupIndex, type: 'Cell'\n                        };\n                        _this.parent.notify(event.inlineClick, inlineArgs);\n                    }\n                    else {\n                        _this.parent.notify(event.cellClick, clickArgs);\n                    }\n                }\n                else {\n                    if (_this.parent.quickPopup) {\n                        _this.parent.quickPopup.quickPopupHide();\n                    }\n                }\n            });\n        }\n        else {\n            var date = this.parent.getDateFromElement(target);\n            if (!isNullOrUndefined(date) && this.parent.isMinMaxDate(date)) {\n                this.parent.setProperties({ selectedDate: date }, true);\n                this.parent.changeView(this.parent.getNavigateView(), e);\n            }\n        }\n    };\n    WorkCellInteraction.prototype.cellDblClick = function (e) {\n        var _this = this;\n        var queryStr = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' + cls.HEADER_CELLS_CLASS;\n        var target = closest(e.target, queryStr);\n        if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {\n            return;\n        }\n        var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellDoubleClick' });\n        this.parent.trigger(event.cellDoubleClick, args, function (clickArgs) {\n            var date = new Date(clickArgs.startTime.getTime());\n            if (!_this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {\n                return;\n            }\n            if (!clickArgs.cancel) {\n                _this.parent.eventWindow.openEditor(_this.parent.activeCellsData, 'Add');\n            }\n        });\n    };\n    WorkCellInteraction.prototype.onHover = function (e) {\n        var targetSelector = '.' + cls.WORK_CELLS_CLASS + ',.' + cls.TIME_SLOT_CLASS + ',.' + cls.ALLDAY_CELLS_CLASS + ',.' +\n            cls.HEADER_CELLS_CLASS + ',.' + cls.RESOURCE_CELLS_CLASS + ',.' + cls.APPOINTMENT_CLASS + ',.' + cls.WEEK_NUMBER_CLASS +\n            ',.' + cls.MONTH_HEADER_CLASS;\n        var hoverTarget = closest(e.target, targetSelector);\n        if (hoverTarget) {\n            var hoverArgs = { element: hoverTarget, event: e };\n            this.parent.trigger(event.hover, hoverArgs);\n        }\n    };\n    WorkCellInteraction.prototype.isPreventAction = function (e) {\n        if (closest(e.target, '.' + cls.NAVIGATE_CLASS)) {\n            return false;\n        }\n        if (closest(e.target, '.' + cls.APPOINTMENT_WRAPPER_CLASS) &&\n            !closest(e.target, '.' + cls.MORE_INDICATOR_CLASS)) {\n            return true;\n        }\n        var target = closest(e.target, '.' + cls.APPOINTMENT_CLASS + ',.' + cls.RESOURCE_GROUP_CELLS_CLASS);\n        if (!isNullOrUndefined(target)) {\n            return true;\n        }\n        target = closest(e.target, '.' + cls.HEADER_CELLS_CLASS);\n        if (this.parent.activeView && this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {\n            return true;\n        }\n        return false;\n    };\n    WorkCellInteraction.prototype.destroy = function () {\n        EventHandler.remove(this.parent.element, 'mouseover', this.onHover);\n    };\n    return WorkCellInteraction;\n}());\nexport { WorkCellInteraction };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configuration that applies on each appointment field options of scheduler.\n */\nvar FieldOptions = /** @class */ (function (_super) {\n    __extends(FieldOptions, _super);\n    function FieldOptions() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"name\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"default\", void 0);\n    __decorate([\n        Property()\n    ], FieldOptions.prototype, \"title\", void 0);\n    __decorate([\n        Property({})\n    ], FieldOptions.prototype, \"validation\", void 0);\n    return FieldOptions;\n}(ChildProperty));\nexport { FieldOptions };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { FieldOptions } from './field-options';\n/**\n * A class that holds the collection of event fields that requires to be mapped with the dataSource\n * fields along with its available configuration settings. Each field in it accepts both string and object\n *  data type. When each of the field is assigned with simple `string` value, it is assumed that the dataSource field\n *  name is mapped with it. If the `object` type is defined on each fields, then the validation related settings and mapping of\n *  those fields with dataSource can be given altogether within it.\n */\nvar Field = /** @class */ (function (_super) {\n    __extends(Field, _super);\n    function Field() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Id')\n    ], Field.prototype, \"id\", void 0);\n    __decorate([\n        Property('IsBlock')\n    ], Field.prototype, \"isBlock\", void 0);\n    __decorate([\n        Complex({ name: 'Subject' }, FieldOptions)\n    ], Field.prototype, \"subject\", void 0);\n    __decorate([\n        Complex({ name: 'StartTime' }, FieldOptions)\n    ], Field.prototype, \"startTime\", void 0);\n    __decorate([\n        Complex({ name: 'EndTime' }, FieldOptions)\n    ], Field.prototype, \"endTime\", void 0);\n    __decorate([\n        Complex({ name: 'StartTimezone' }, FieldOptions)\n    ], Field.prototype, \"startTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'EndTimezone' }, FieldOptions)\n    ], Field.prototype, \"endTimezone\", void 0);\n    __decorate([\n        Complex({ name: 'Location' }, FieldOptions)\n    ], Field.prototype, \"location\", void 0);\n    __decorate([\n        Complex({ name: 'Description' }, FieldOptions)\n    ], Field.prototype, \"description\", void 0);\n    __decorate([\n        Complex({ name: 'IsAllDay' }, FieldOptions)\n    ], Field.prototype, \"isAllDay\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceID' }, FieldOptions)\n    ], Field.prototype, \"recurrenceID\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceRule' }, FieldOptions)\n    ], Field.prototype, \"recurrenceRule\", void 0);\n    __decorate([\n        Complex({ name: 'RecurrenceException' }, FieldOptions)\n    ], Field.prototype, \"recurrenceException\", void 0);\n    __decorate([\n        Property('IsReadonly')\n    ], Field.prototype, \"isReadonly\", void 0);\n    __decorate([\n        Property('FollowingID')\n    ], Field.prototype, \"followingID\", void 0);\n    return Field;\n}(ChildProperty));\nexport { Field };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Property, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { Field } from './fields';\n/**\n * Holds the configuration of event related options and dataSource binding to Schedule.\n */\nvar EventSettings = /** @class */ (function (_super) {\n    __extends(EventSettings, _super);\n    function EventSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"template\", void 0);\n    __decorate([\n        Property([])\n    ], EventSettings.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"query\", void 0);\n    __decorate([\n        Complex({}, Field)\n    ], EventSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableTooltip\", void 0);\n    __decorate([\n        Property('AllDayRow')\n    ], EventSettings.prototype, \"spannedEventPlacement\", void 0);\n    __decorate([\n        Property(1)\n    ], EventSettings.prototype, \"minimumEventDuration\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"tooltipTemplate\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"resourceColorField\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"editFollowingEvents\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(true)\n    ], EventSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableMaxHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"enableIndicator\", void 0);\n    __decorate([\n        Property(false)\n    ], EventSettings.prototype, \"ignoreWhitespace\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"sortComparer\", void 0);\n    __decorate([\n        Property()\n    ], EventSettings.prototype, \"includeFiltersInQuery\", void 0);\n    return EventSettings;\n}(ChildProperty));\nexport { EventSettings };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that holds the resource grouping related configurations on Schedule.\n */\nvar Group = /** @class */ (function (_super) {\n    __extends(Group, _super);\n    function Group() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"byDate\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"byGroupID\", void 0);\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"allowGroupEdit\", void 0);\n    __decorate([\n        Property([])\n    ], Group.prototype, \"resources\", void 0);\n    __decorate([\n        Property(true)\n    ], Group.prototype, \"enableCompactView\", void 0);\n    __decorate([\n        Property()\n    ], Group.prototype, \"headerTooltipTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], Group.prototype, \"hideNonWorkingDays\", void 0);\n    return Group;\n}(ChildProperty));\nexport { Group };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * A class that represents the resource related configurations and its data binding options.\n */\nvar Resources = /** @class */ (function (_super) {\n    __extends(Resources, _super);\n    function Resources() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Resources.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"title\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"name\", void 0);\n    __decorate([\n        Property(false)\n    ], Resources.prototype, \"allowMultiple\", void 0);\n    __decorate([\n        Property([])\n    ], Resources.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property()\n    ], Resources.prototype, \"query\", void 0);\n    __decorate([\n        Property('Id')\n    ], Resources.prototype, \"idField\", void 0);\n    __decorate([\n        Property('Text')\n    ], Resources.prototype, \"textField\", void 0);\n    __decorate([\n        Property('Expanded')\n    ], Resources.prototype, \"expandedField\", void 0);\n    __decorate([\n        Property('GroupID')\n    ], Resources.prototype, \"groupIDField\", void 0);\n    __decorate([\n        Property('Color')\n    ], Resources.prototype, \"colorField\", void 0);\n    __decorate([\n        Property('StartHour')\n    ], Resources.prototype, \"startHourField\", void 0);\n    __decorate([\n        Property('EndHour')\n    ], Resources.prototype, \"endHourField\", void 0);\n    __decorate([\n        Property('WorkDays')\n    ], Resources.prototype, \"workDaysField\", void 0);\n    __decorate([\n        Property('CssClass')\n    ], Resources.prototype, \"cssClassField\", void 0);\n    return Resources;\n}(ChildProperty));\nexport { Resources };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable max-len */\nimport { extend, isNullOrUndefined, createElement, EventHandler, addClass, append, removeClass, remove, closest, classList } from '@syncfusion/ej2-base';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { Data } from '../actions/data';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar ResourceBase = /** @class */ (function () {\n    function ResourceBase(parent) {\n        this.resourceCollection = [];\n        this.leftPixel = 25;\n        this.resourceDateTree = [];\n        this.parent = parent;\n    }\n    ResourceBase.prototype.renderResourceHeaderIndent = function (tr) {\n        var resColTd = createElement('td', { className: cls.RESOURCE_LEFT_TD_CLASS });\n        var resColDiv = createElement('div', { className: cls.RESOURCE_TEXT_CLASS });\n        if (this.parent.activeViewOptions.headerIndentTemplate) {\n            var data = { className: [resColTd.className], type: 'emptyCells' };\n            this.parent.renderHeaderIndentTemplate(data, resColTd);\n        }\n        else {\n            resColTd.appendChild(resColDiv);\n        }\n        var args = { elementType: 'emptyCells', element: resColTd };\n        this.parent.trigger(events.renderCell, args);\n        tr.appendChild(resColTd);\n    };\n    ResourceBase.prototype.hideResourceRows = function (tBody) {\n        if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {\n            return;\n        }\n        var trCount = this.lastResourceLevel.length;\n        for (var i = 0; i < trCount; i++) {\n            var resData = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n            var res = this.lastResourceLevel[parseInt(i.toString(), 10)].resource;\n            if (resData.ClassName === cls.RESOURCE_PARENT_CLASS && !resData[res.expandedField] &&\n                !isNullOrUndefined(resData[res.expandedField])) {\n                var trCollection = [].slice.call(tBody.children);\n                var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));\n                addClass(slicedCollection, cls.HIDDEN_CLASS);\n            }\n        }\n    };\n    ResourceBase.prototype.createResourceColumn = function () {\n        var resColl = this.resourceCollection;\n        var resDiv = createElement('div', { className: cls.RESOURCE_COLUMN_WRAP_CLASS });\n        var tbl = this.parent.activeView.createTableLayout(cls.RESOURCE_COLUMN_TABLE_CLASS);\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([tbl], cls.AUTO_HEIGHT);\n        }\n        var tBody = tbl.querySelector('tbody');\n        var resData = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n        if (this.parent.virtualScrollModule) {\n            var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n            this.setExpandedResources();\n            resData = this.expandedResources.slice(0, resourceCount);\n            this.renderedResources = resData;\n        }\n        append(this.getContentRows(resData), tBody);\n        this.hideResourceRows(tBody);\n        tbl.appendChild(tBody);\n        resDiv.appendChild(tbl);\n        return resDiv;\n    };\n    ResourceBase.prototype.setRenderedResources = function () {\n        var resColl = this.resourceCollection;\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var temp = this.generateTreeData(true);\n        this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));\n        this.renderedResources = this.lastResourceLevel;\n    };\n    ResourceBase.prototype.setExpandedResources = function () {\n        var resources = [];\n        for (var i = 0; i < this.lastResourceLevel.length; i++) {\n            var resource = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;\n            var count = resource.Count;\n            resources.push(this.lastResourceLevel[parseInt(i.toString(), 10)]);\n            var isExpanded = resource[this.lastResourceLevel[parseInt(i.toString(), 10)].resource.expandedField];\n            if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {\n                i = i + count;\n            }\n        }\n        this.expandedResources = resources;\n    };\n    ResourceBase.prototype.getContentRows = function (resData, isVirtualScroll) {\n        var resRows = [];\n        var left;\n        var rIndex;\n        var resColl = this.resourceCollection;\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { tabindex: isVirtualScroll ? '-1' : '0' } });\n        var existingGroupIndices = this.parent.activeView.getGroupIndices();\n        for (var i = 0; i < resData.length; i++) {\n            if (existingGroupIndices.length > 0 && existingGroupIndices.indexOf(resData[parseInt(i.toString(), 10)].groupIndex) > -1) {\n                continue;\n            }\n            var ntd = td.cloneNode();\n            rIndex = util.findIndexInData(resColl, 'name', resData[parseInt(i.toString(), 10)].resource.name);\n            if (rIndex === resColl.length - 1) {\n                extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: cls.RESOURCE_CHILD_CLASS });\n                this.renderedResources[parseInt(i.toString(), 10)].className = [cls.RESOURCE_CHILD_CLASS];\n            }\n            else {\n                extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: cls.RESOURCE_PARENT_CLASS });\n                this.renderedResources[parseInt(i.toString(), 10)].className = [cls.RESOURCE_PARENT_CLASS];\n            }\n            left = (rIndex * this.leftPixel) + 'px';\n            if (resData[parseInt(i.toString(), 10)].resourceData.ClassName === cls.RESOURCE_PARENT_CLASS\n                && !isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData.Count) && (resData[parseInt(i.toString(), 10)].resourceData.Count > 0)) {\n                var iconClass = void 0;\n                if (resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField] ||\n                    isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField])) {\n                    iconClass = cls.RESOURCE_COLLAPSE_CLASS;\n                }\n                else {\n                    iconClass = cls.RESOURCE_EXPAND_CLASS;\n                }\n                var iconDiv = createElement('div');\n                addClass([iconDiv], [cls.RESOURCE_TREE_ICON_CLASS, iconClass]);\n                this.setMargin(iconDiv, left);\n                ntd.appendChild(iconDiv);\n                if (this.resourceCollection.length > 1) {\n                    EventHandler.add(iconDiv, 'click', this.onTreeIconClick, this);\n                }\n            }\n            this.parent.activeView.setResourceHeaderContent(ntd, resData[parseInt(i.toString(), 10)], cls.RESOURCE_TEXT_CLASS);\n            ntd.setAttribute('data-group-index', resData[parseInt(i.toString(), 10)].groupIndex.toString());\n            ntd.setAttribute('aria-label', resData[parseInt(i.toString(), 10)].resourceData[resData[parseInt(i.toString(), 10)].resource.textField] + ' resource');\n            if (!this.parent.activeViewOptions.resourceHeaderTemplate) {\n                this.setMargin(ntd.querySelector('.' + cls.RESOURCE_TEXT_CLASS), left);\n            }\n            var classCollection = [cls.RESOURCE_CELLS_CLASS, resData[parseInt(i.toString(), 10)].resourceData.ClassName];\n            addClass([ntd], classCollection);\n            var args = { elementType: 'resourceHeader', element: ntd, groupIndex: resData[parseInt(i.toString(), 10)].groupIndex };\n            this.parent.trigger(events.renderCell, args);\n            var ntr = tr.cloneNode();\n            ntr.appendChild(ntd);\n            resRows.push(ntr);\n        }\n        return resRows;\n    };\n    ResourceBase.prototype.setMargin = function (element, value) {\n        if (!this.parent.enableRtl) {\n            element.style.marginLeft = value;\n        }\n        else {\n            element.style.marginRight = value;\n        }\n    };\n    ResourceBase.prototype.countCalculation = function (parentCollection, wholeCollection) {\n        var collection;\n        for (var y = 0; y < parentCollection.length; y++) {\n            var data = parentCollection[parentCollection.length - (y + 1)].dataSource;\n            for (var x = 0; x < data.length; x++) {\n                var totalCount = 0;\n                if (this.parent.activeViewOptions.group.byGroupID) {\n                    var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, 'equal', data[parseInt(x.toString(), 10)][parentCollection[parentCollection.length - (y + 1)].idField]);\n                    collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);\n                }\n                else {\n                    collection = wholeCollection[wholeCollection.length - 1].dataSource;\n                }\n                for (var z = 0; z < collection.length; z++) {\n                    totalCount = totalCount + parseInt(collection[parseInt(z.toString(), 10)].Count, 10);\n                }\n                totalCount = totalCount + parseInt(data[parseInt(x.toString(), 10)].Count, 10);\n                extend(data[parseInt(x.toString(), 10)], { Count: totalCount });\n            }\n            wholeCollection = wholeCollection.slice(0, -1);\n        }\n    };\n    ResourceBase.prototype.onTreeIconClick = function (e) {\n        var _this = this;\n        if (this.parent.eventTooltip) {\n            this.parent.eventTooltip.close();\n        }\n        var target = e.target;\n        var hide;\n        var trElement = closest(target, '.' + cls.RESOURCE_PARENT_CLASS)\n            .parentElement;\n        var index = parseInt(trElement.children[0].getAttribute('data-group-index'), 10);\n        var args = {\n            cancel: false, event: e, groupIndex: index,\n            requestType: !target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpand' : 'resourceCollapse'\n        };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n                    classList(target, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    hide = true;\n                }\n                else {\n                    classList(target, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                    hide = false;\n                }\n                var eventElements = [].slice.call(_this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS + ',.' + cls.MORE_INDICATOR_CLASS));\n                for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {\n                    var element = eventElements_1[_i];\n                    remove(element);\n                }\n                if (_this.parent.virtualScrollModule) {\n                    _this.updateVirtualContent(index, hide, e, target);\n                }\n                else {\n                    _this.updateContent(index, hide);\n                }\n                var data = { cssProperties: _this.parent.getCssProperties(), module: 'scroll' };\n                _this.parent.notify(events.scrollUiUpdate, data);\n                args = {\n                    cancel: false, event: e, groupIndex: index,\n                    requestType: target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) ? 'resourceExpanded' : 'resourceCollapsed'\n                };\n                _this.parent.refreshEvents(false);\n                _this.parent.trigger(events.actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.updateContent = function (index, hide) {\n        var rowCollection = [];\n        var workCellCollection = [];\n        var headerRowCollection = [];\n        var pNode;\n        var clickedRes = this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData;\n        var resRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'tr'));\n        var contentRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'tbody tr'));\n        var eventRows = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' .' + cls.APPOINTMENT_CONTAINER_CLASS));\n        for (var j = 0; j < clickedRes.Count; j++) {\n            rowCollection.push(resRows[index + j + 1]);\n            workCellCollection.push(contentRows[index + j + 1]);\n            headerRowCollection.push(eventRows[index + j + 1]);\n        }\n        var clonedCollection = this.lastResourceLevel;\n        for (var i = 0; i < rowCollection.length; i++) {\n            var expanded = true;\n            pNode = rowCollection[parseInt(i.toString(), 10)].children[0].classList.contains(cls.RESOURCE_PARENT_CLASS);\n            clonedCollection[parseInt(index.toString(), 10)].resourceData[clonedCollection[parseInt(index.toString(), 10)].resource.expandedField] = !hide;\n            if (hide) {\n                if (pNode) {\n                    var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                    if (trElem) {\n                        classList(trElem, [cls.RESOURCE_EXPAND_CLASS], [cls.RESOURCE_COLLAPSE_CLASS]);\n                    }\n                }\n                if (!rowCollection[parseInt(i.toString(), 10)].classList.contains(cls.HIDDEN_CLASS)) {\n                    addClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], cls.HIDDEN_CLASS);\n                }\n            }\n            else {\n                if (pNode) {\n                    var rowIndex = rowCollection[parseInt(i.toString(), 10)].rowIndex;\n                    if (!clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField]\n                        && !isNullOrUndefined(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField])) {\n                        rowCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        workCellCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        headerRowCollection.splice(i + 1, (parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10)));\n                        expanded = false;\n                    }\n                    if (expanded) {\n                        var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector('.' + cls.RESOURCE_TREE_ICON_CLASS);\n                        if (trElem) {\n                            classList(trElem, [cls.RESOURCE_COLLAPSE_CLASS], [cls.RESOURCE_EXPAND_CLASS]);\n                        }\n                    }\n                }\n                if (rowCollection[parseInt(i.toString(), 10)].classList.contains(cls.HIDDEN_CLASS)) {\n                    removeClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], cls.HIDDEN_CLASS);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.updateVirtualContent = function (index, expand, e, target) {\n        this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData[this.lastResourceLevel[parseInt(index.toString(), 10)].resource.expandedField] = !expand;\n        this.setExpandedResources();\n        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();\n        var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);\n        this.parent.virtualScrollModule.existingDataCollection = this.renderedResources;\n        this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);\n        if (this.renderedResources.length < resourceCount) {\n            var sIndex = this.expandedResources.length - resourceCount;\n            sIndex = (sIndex > 0) ? sIndex : 0;\n            this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);\n        }\n        var virtualTrack = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);\n        var resTable = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + 'table');\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' ' + 'table');\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        if (!isNullOrUndefined(timeIndicator)) {\n            timeIndicator.style.height =\n                this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight + 'px';\n        }\n    };\n    ResourceBase.prototype.renderResourceHeader = function () {\n        var resourceWrapper = createElement('div', { className: cls.RESOURCE_TOOLBAR_CONTAINER });\n        resourceWrapper.innerHTML = '<div class=\"' + cls.RESOURCE_HEADER_TOOLBAR + '\"><div class=\"' + cls.RESOURCE_MENU + '\">' +\n            '<div class=\"e-icons ' + cls.RESOURCE_MENU_ICON + '\"></div></div><div class=\"' + cls.RESOURCE_LEVEL_TITLE + '\"></div></div>';\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            target.insertBefore(resourceWrapper, target.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        this.renderResourceHeaderText();\n        EventHandler.add(resourceWrapper.querySelector('.' + cls.RESOURCE_MENU_ICON), 'click', this.menuClick, this);\n    };\n    ResourceBase.prototype.renderResourceTree = function () {\n        this.popupOverlay = createElement('div', { className: cls.RESOURCE_TREE_POPUP_OVERLAY });\n        var treeWrapper = createElement('div', { className: cls.RESOURCE_TREE_POPUP + ' e-popup-close' });\n        if (this.parent.currentView === 'MonthAgenda') {\n            var target = this.parent.activeView.getPanel().querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n            target.insertBefore(treeWrapper, target.children[0]);\n            target.appendChild(this.popupOverlay);\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(treeWrapper);\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);\n        }\n        var resourceTree = createElement('div', { className: cls.RESOURCE_TREE });\n        treeWrapper.appendChild(resourceTree);\n        this.treeViewObj = new TreeView({\n            cssClass: this.parent.cssClass,\n            enableRtl: this.parent.enableRtl,\n            enableHtmlSanitizer: this.parent.enableHtmlSanitizer,\n            fields: {\n                dataSource: [].slice.call(this.generateTreeData()),\n                id: 'resourceId',\n                text: 'resourceName',\n                child: 'resourceChild'\n            },\n            nodeTemplate: this.parent.resourceHeaderTemplate,\n            nodeClicked: this.resourceClick.bind(this),\n            created: this.resourceTreeCreated.bind(this)\n        });\n        this.treeViewObj.root = this.parent.root ? this.parent.root : this.parent;\n        this.treeViewObj.appendTo(resourceTree);\n        this.treeViewObj.expandAll();\n        this.treePopup = new Popup(treeWrapper, {\n            targetType: 'relative',\n            actionOnScroll: 'none',\n            content: this.treeViewObj.element,\n            relateTo: this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS),\n            enableRtl: this.parent.enableRtl,\n            hideAnimation: { name: 'SlideLeftOut', duration: 500 },\n            showAnimation: { name: 'SlideLeftIn', duration: 500 },\n            viewPortElement: this.parent.element.querySelector('.' + (this.parent.currentView === 'MonthAgenda' ?\n                cls.WRAPPER_CONTAINER_CLASS : cls.TABLE_CONTAINER_CLASS))\n        });\n        this.parent.on(events.documentClick, this.documentClick, this);\n    };\n    ResourceBase.prototype.resourceTreeCreated = function () {\n        if (this.parent.activeViewOptions.resourceHeaderTemplate && this.parent.portals && this.treeViewObj.portals) {\n            this.parent.portals = this.parent.portals.concat(this.treeViewObj.portals);\n            this.parent.renderTemplates();\n        }\n    };\n    ResourceBase.prototype.generateTreeData = function (isTimeLine) {\n        var _this = this;\n        var treeCollection = [];\n        var resTreeColl = [];\n        var groupIndex = 0;\n        var _loop_1 = function (i, len) {\n            var treeHandler = function (treeLevel, index, levelId) {\n                var resource = _this.resourceCollection[parseInt(index.toString(), 10)];\n                var treeArgs;\n                var resObj;\n                if (!isTimeLine) {\n                    treeArgs = {\n                        resourceId: levelId,\n                        resourceName: treeLevel.resourceData[resource.textField],\n                        resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData\n                    };\n                }\n                else {\n                    resObj = {\n                        type: 'resourceHeader', resource: treeLevel.resource,\n                        resourceData: treeLevel.resourceData, groupIndex: groupIndex,\n                        groupOrder: treeLevel.groupOrder\n                    };\n                    resTreeColl.push(resObj);\n                    groupIndex++;\n                }\n                if (treeLevel.child.length > 0 && !isTimeLine) {\n                    treeArgs.resourceChild = [];\n                }\n                var count = 1;\n                for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {\n                    var tree = _a[_i];\n                    if (!isTimeLine) {\n                        treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + '-' + count));\n                    }\n                    else {\n                        treeHandler(tree, index + 1, levelId + '-' + count);\n                    }\n                    count += 1;\n                }\n                if (isTimeLine) {\n                    extend(resObj.resourceData, { Count: count - 1 });\n                }\n                return treeArgs;\n            };\n            if (!isTimeLine) {\n                treeCollection.push(treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString()));\n            }\n            else {\n                treeHandler(this_1.resourceTreeLevel[parseInt(i.toString(), 10)], 0, (i + 1).toString());\n            }\n        };\n        var this_1 = this;\n        for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {\n            _loop_1(i, len);\n        }\n        if (isTimeLine) {\n            this.lastResourceLevel = resTreeColl;\n            return resTreeColl;\n        }\n        else {\n            return treeCollection;\n        }\n    };\n    ResourceBase.prototype.renderResourceHeaderText = function () {\n        var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var headerCollection = [];\n        var _loop_2 = function (i, len) {\n            var resourceLevel = this_2.resourceCollection[parseInt(i.toString(), 10)];\n            var resourceText = resourceLevel.dataSource.filter(function (resData) {\n                return resData[resourceLevel.idField] === resource.groupOrder[parseInt(i.toString(), 10)];\n            });\n            var resourceName = createElement('div', { className: cls.RESOURCE_NAME });\n            this_2.parent.sanitize(resourceText[0][resourceLevel.textField], resourceName);\n            headerCollection.push(resourceName);\n            var levelIcon = createElement('div', { className: 'e-icons e-icon-next' });\n            headerCollection.push(levelIcon);\n        };\n        var this_2 = this;\n        for (var i = 0, len = resource.groupOrder.length; i < len; i++) {\n            _loop_2(i, len);\n        }\n        headerCollection.pop();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        var headerWrapper = target.querySelector('.' + cls.RESOURCE_LEVEL_TITLE);\n        util.removeChildren(headerWrapper);\n        for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {\n            var header = headerCollection_1[_i];\n            headerWrapper.appendChild(header);\n        }\n        if (this.lastResourceLevel.length === 1) {\n            addClass([this.parent.element.querySelector('.' + cls.RESOURCE_MENU)], cls.DISABLE_CLASS);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ResourceBase.prototype.menuClick = function (event) {\n        if (this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP).classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n        else {\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            removeClass(treeNodes, 'e-active');\n            addClass([treeNodes[this.parent.uiStateValues.groupIndex]], 'e-active');\n            this.treePopup.show();\n            addClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.selectResourceByIndex = function (groupIndex) {\n        if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {\n            this.triggerEvents(groupIndex);\n        }\n    };\n    ResourceBase.prototype.resourceClick = function (event) {\n        if (!event.node.classList.contains('e-has-child')) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n            var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll('.e-list-item:not(.e-has-child)'));\n            var groupIndex = treeNodes.indexOf(event.node);\n            this.triggerEvents(groupIndex, event);\n            event.event.preventDefault();\n        }\n    };\n    ResourceBase.prototype.triggerEvents = function (groupIndex, event) {\n        var _this = this;\n        var args = { cancel: false, event: (event) ? event.event : null, groupIndex: groupIndex, requestType: 'resourceChange' };\n        this.parent.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;\n                _this.parent.renderModule.render(_this.parent.currentView);\n                args = {\n                    cancel: false, event: (event) ? event.event : null, groupIndex: _this.parent.uiStateValues.groupIndex, requestType: 'resourceChanged'\n                };\n                _this.parent.adaptiveGroupIndex = _this.parent.uiStateValues.groupIndex;\n                _this.parent.trigger(events.actionComplete, args);\n            }\n        });\n    };\n    ResourceBase.prototype.documentClick = function (args) {\n        if (closest(args.event.target, '.' + cls.RESOURCE_TREE_POPUP)) {\n            return;\n        }\n        var treeWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP);\n        if (treeWrapper && treeWrapper.classList.contains(cls.POPUP_OPEN)) {\n            this.treePopup.hide();\n            removeClass([this.popupOverlay], cls.ENABLE_CLASS);\n        }\n    };\n    ResourceBase.prototype.bindResourcesData = function (isSetModel) {\n        var _this = this;\n        this.parent.showSpinner();\n        var promises = [];\n        for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var dataModule = new Data(this.parent, resource.dataSource, resource.query);\n            promises.push(dataModule.getData(dataModule.generateQuery()));\n        }\n        Promise.all(promises).then(function (e) { return _this.dataManagerSuccess(e, isSetModel); })\n            .catch(function (e) { return _this.parent.crudModule.dataManagerFailure(e); });\n    };\n    ResourceBase.prototype.dataManagerSuccess = function (e, isSetModel) {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.resourceCollection = [];\n        for (var i = 0, length_1 = e.length; i < length_1; i++) {\n            var resource = this.parent.resources[parseInt(i.toString(), 10)];\n            var resourceObj = this.getResourceModel(resource, e[parseInt(i.toString(), 10)].result);\n            this.parent.resourceCollection.push(resourceObj);\n        }\n        this.refreshLayout(isSetModel);\n    };\n    ResourceBase.prototype.getResourceModel = function (resource, resourceData) {\n        var resourceObj = {\n            field: resource.field,\n            title: resource.title,\n            name: resource.name,\n            allowMultiple: resource.allowMultiple,\n            dataSource: resourceData || resource.dataSource,\n            idField: resource.idField,\n            textField: resource.textField,\n            groupIDField: resource.groupIDField,\n            colorField: resource.colorField,\n            startHourField: resource.startHourField,\n            endHourField: resource.endHourField,\n            workDaysField: resource.workDaysField,\n            expandedField: resource.expandedField,\n            cssClassField: resource.cssClassField\n        };\n        return resourceObj;\n    };\n    ResourceBase.prototype.refreshLayout = function (isSetModel) {\n        if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !(this.parent.enablePersistence)) {\n            this.parent.uiStateValues.groupIndex = 0;\n        }\n        this.parent.renderElements(isSetModel);\n    };\n    ResourceBase.prototype.setResourceCollection = function () {\n        var requiredResources = [];\n        this.resourceCollection = [];\n        this.colorIndex = null;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index_1 = util.findIndexInData(this.parent.resourceCollection, 'name', resource);\n                if (index_1 >= 0) {\n                    requiredResources.push(this.parent.resourceCollection[parseInt(index_1.toString(), 10)]);\n                }\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            requiredResources = this.parent.resourceCollection;\n        }\n        var index = 0;\n        for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {\n            var resource = requiredResources_1[_b];\n            var resources = this.getResourceModel(resource);\n            if (resource.name === this.parent.eventSettings.resourceColorField) {\n                this.colorIndex = index;\n            }\n            index++;\n            this.resourceCollection.push(resources);\n        }\n        if (isNullOrUndefined(this.colorIndex)) {\n            this.colorIndex = this.resourceCollection.length - 1;\n        }\n    };\n    ResourceBase.prototype.generateResourceLevels = function (innerDates, isTimeLine) {\n        var _this = this;\n        var resources = this.resourceCollection;\n        var resTreeGroup = [];\n        var lastColumnDates = [];\n        var group = function (resources, index, prevResource, prevResourceData, prevOrder) {\n            var resTree = [];\n            var resource = resources[0];\n            if (resource) {\n                var data = void 0;\n                if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {\n                    var id_1 = prevResourceData[prevResource.idField];\n                    data = resource.dataSource.filter(function (e) {\n                        return e[resource.groupIDField] === id_1;\n                    });\n                }\n                else {\n                    data = resource.dataSource;\n                }\n                for (var i = 0; i < data.length; i++) {\n                    var groupOrder = [];\n                    if (prevOrder && prevOrder.length > 0) {\n                        groupOrder = groupOrder.concat(prevOrder);\n                    }\n                    groupOrder.push(data[parseInt(i.toString(), 10)][resource.idField]);\n                    var items = group(resources.slice(1), index + 1, resource, data[parseInt(i.toString(), 10)], groupOrder);\n                    // Here validate child item empty top level resource only\n                    if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {\n                        continue;\n                    }\n                    var dateCol = [];\n                    var renderDates = _this.parent.activeView.renderDates;\n                    var resWorkDays = void 0;\n                    if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {\n                        var workDays = data[parseInt(i.toString(), 10)][resource.workDaysField];\n                        var resStartHour = data[parseInt(i.toString(), 10)][resource.startHourField];\n                        var resEndHour = data[parseInt(i.toString(), 10)][resource.endHourField];\n                        if (workDays && workDays.length > 0) {\n                            renderDates = _this.parent.activeView.getRenderDates(workDays);\n                            resWorkDays = workDays;\n                            dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);\n                        }\n                        else {\n                            resWorkDays = _this.parent.activeViewOptions.workDays;\n                            dateCol = innerDates;\n                        }\n                        var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);\n                        lastColumnDates = lastColumnDates.concat(dateSlots);\n                    }\n                    var resCssClass = data[parseInt(i.toString(), 10)][resource.cssClassField];\n                    var slotData = {\n                        type: 'resourceHeader', className: ['e-resource-cells'],\n                        resourceLevelIndex: index, groupOrder: groupOrder,\n                        resource: resource, resourceData: data[parseInt(i.toString(), 10)],\n                        colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,\n                        renderDates: renderDates, workDays: resWorkDays, cssClass: resCssClass,\n                        child: items\n                    };\n                    resTree.push(slotData);\n                }\n                if (!resTreeGroup[parseInt(index.toString(), 10)]) {\n                    resTreeGroup[parseInt(index.toString(), 10)] = [];\n                }\n                if (resTree.length > 0) {\n                    resTreeGroup[parseInt(index.toString(), 10)].push(resTree);\n                }\n                return resTree;\n            }\n            return [];\n        };\n        this.resourceTreeLevel = group(resources, 0);\n        return (isTimeLine) ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);\n    };\n    ResourceBase.prototype.generateCustomHours = function (renderDates, startHour, endHour, groupOrder) {\n        var dateSlots = extend([], renderDates, null, true);\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var dateSlot = dateSlots_1[_i];\n            if (startHour) {\n                dateSlot.startHour = this.parent.getStartEndTime(startHour);\n            }\n            if (endHour) {\n                dateSlot.endHour = this.parent.getStartEndTime(endHour);\n            }\n            if (groupOrder) {\n                dateSlot.groupOrder = groupOrder;\n            }\n        }\n        return dateSlots;\n    };\n    ResourceBase.prototype.generateHeaderLevels = function (resTreeGroup, lastColumnDates, headerDates) {\n        var headerLevels = [];\n        for (var i = resTreeGroup.length - 1; i >= 0; i--) {\n            var temp = 0;\n            for (var _i = 0, _a = resTreeGroup[parseInt(i.toString(), 10)]; _i < _a.length; _i++) {\n                var currentLevelChilds = _a[_i];\n                for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {\n                    var currentLevelChild = currentLevelChilds_1[_b];\n                    if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {\n                        var nextLevelChilds = resTreeGroup[parseInt((i + 1).toString(), 10)][parseInt(temp.toString(), 10)];\n                        if (!nextLevelChilds) {\n                            continue;\n                        }\n                        var colSpan = 0;\n                        for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {\n                            var nextLevelChild = nextLevelChilds_1[_c];\n                            if (!this.parent.activeViewOptions.group.byGroupID || (this.parent.activeViewOptions.group.byGroupID &&\n                                nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] ===\n                                    currentLevelChild.resourceData[currentLevelChild.resource.idField])) {\n                                colSpan += nextLevelChild.colSpan;\n                            }\n                        }\n                        currentLevelChild.colSpan = colSpan;\n                    }\n                    currentLevelChild.groupIndex = temp;\n                    temp++;\n                    headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];\n                    headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);\n                }\n            }\n        }\n        this.lastResourceLevel = headerLevels.slice(-1)[0] || [];\n        if (!this.parent.activeViewOptions.group.byDate) {\n            var index = 0;\n            for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {\n                var lastLevelResource = _e[_d];\n                for (var i = 0; i < lastLevelResource.colSpan; i++) {\n                    lastColumnDates[parseInt(index.toString(), 10)].groupIndex = lastLevelResource.groupIndex;\n                    index++;\n                }\n            }\n            headerLevels.push(lastColumnDates);\n            return headerLevels;\n        }\n        var dateHeaderLevels = [];\n        var levels = extend([], headerLevels, null, true);\n        var datesColumn = [];\n        if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n            var renderDates_1 = [];\n            var dateIndex = 0;\n            var _loop_3 = function (headerDate) {\n                this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)] = [];\n                var currentDateLevels = [];\n                var _loop_4 = function (j) {\n                    var workDays = this_3.lastResourceLevel[parseInt(j.toString(), 10)].resourceData[this_3.lastResourceLevel[parseInt(j.toString(), 10)].resource.workDaysField];\n                    if (!workDays) {\n                        workDays = this_3.parent.activeViewOptions.workDays;\n                    }\n                    if (workDays.indexOf(headerDate.date.getDay()) !== -1) {\n                        var resTd_1 = extend({}, this_3.lastResourceLevel[parseInt(j.toString(), 10)], null, true);\n                        resTd_1.date = headerDate.date;\n                        this_3.lastResourceLevel[parseInt(j.toString(), 10)].workDays = workDays;\n                        resTd_1.startHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd_1.endHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.endHourField]) ||\n                            headerDate.endHour;\n                        this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)].push(resTd_1);\n                        var _loop_5 = function (k) {\n                            if (!currentDateLevels[parseInt(k.toString(), 10)]) {\n                                currentDateLevels[parseInt(k.toString(), 10)] = [];\n                            }\n                            if (k === resTd_1.groupOrder.length - 1) {\n                                if (!renderDates_1[parseInt(j.toString(), 10)]) {\n                                    renderDates_1[parseInt(j.toString(), 10)] = [];\n                                }\n                                var filterDates = resTd_1.renderDates.filter(function (x) { return x.getDay() === headerDate.date.getDay(); });\n                                renderDates_1[parseInt(j.toString(), 10)] = renderDates_1[parseInt(j.toString(), 10)].concat(filterDates);\n                                currentDateLevels[parseInt(k.toString(), 10)].push(resTd_1);\n                                return \"continue\";\n                            }\n                            var currentLevel = levels[parseInt(k.toString(), 10)];\n                            var filteredResource = currentLevel.filter(function (data) {\n                                return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                            });\n                            if (filteredResource && filteredResource.length > 0) {\n                                var existedResource = currentDateLevels[parseInt(k.toString(), 10)].filter(function (data) {\n                                    return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k.toString(), 10)];\n                                });\n                                if (existedResource && existedResource.length > 0) {\n                                    existedResource[0].colSpan += 1;\n                                }\n                                else {\n                                    var filteredTd = extend({}, filteredResource[0], null, true);\n                                    filteredTd.colSpan = 1;\n                                    currentDateLevels[parseInt(k.toString(), 10)].push(filteredTd);\n                                }\n                            }\n                        };\n                        for (var k = 0; k < resTd_1.groupOrder.length; k++) {\n                            _loop_5(k);\n                        }\n                    }\n                };\n                for (var j = 0; j < this_3.lastResourceLevel.length; j++) {\n                    _loop_4(j);\n                }\n                if (currentDateLevels.length > 0) {\n                    for (var l = 0; l < levels.length; l++) {\n                        if (!dateHeaderLevels[parseInt(l.toString(), 10)]) {\n                            dateHeaderLevels[parseInt(l.toString(), 10)] = [];\n                        }\n                        dateHeaderLevels[parseInt(l.toString(), 10)] = dateHeaderLevels[parseInt(l.toString(), 10)].concat(currentDateLevels[parseInt(l.toString(), 10)]);\n                    }\n                    headerDate.colSpan = currentDateLevels[currentDateLevels.length - 1].length;\n                    datesColumn.push(headerDate);\n                }\n                dateIndex++;\n            };\n            var this_3 = this;\n            for (var _f = 0, headerDates_1 = headerDates; _f < headerDates_1.length; _f++) {\n                var headerDate = headerDates_1[_f];\n                _loop_3(headerDate);\n            }\n            this.resourceDateTree = this.resourceDateTree.filter(function (data) { return data.length > 0; });\n            this.lastResourceLevel.forEach(function (x, index) {\n                if (renderDates_1[parseInt(index.toString(), 10)]) {\n                    x.renderDates = renderDates_1[parseInt(index.toString(), 10)].sort(function (a, b) { return a.getTime() - b.getTime(); });\n                }\n            });\n            dateHeaderLevels.unshift(datesColumn);\n            return dateHeaderLevels;\n        }\n        var dateColSpan = 0;\n        for (var _g = 0, _h = levels[0]; _g < _h.length; _g++) {\n            var firstRowTd = _h[_g];\n            dateColSpan += firstRowTd.colSpan;\n        }\n        for (var _j = 0, headerDates_2 = headerDates; _j < headerDates_2.length; _j++) {\n            var headerDate = headerDates_2[_j];\n            headerDate.colSpan = dateColSpan;\n            datesColumn.push(headerDate);\n            var resGroup = extend([], levels, null, true);\n            for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {\n                if (k === resGroup.length - 1) {\n                    for (var _k = 0, _l = resGroup[parseInt(k.toString(), 10)]; _k < _l.length; _k++) {\n                        var resTd = _l[_k];\n                        resTd.date = headerDate.date;\n                        resTd.workDays = headerDate.workDays;\n                        resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) ||\n                            headerDate.startHour;\n                        resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) ||\n                            headerDate.endHour;\n                    }\n                }\n                if (!dateHeaderLevels[parseInt(k.toString(), 10)]) {\n                    dateHeaderLevels[parseInt(k.toString(), 10)] = [];\n                }\n                dateHeaderLevels[parseInt(k.toString(), 10)] = dateHeaderLevels[parseInt(k.toString(), 10)].concat(resGroup[parseInt(k.toString(), 10)]);\n            }\n        }\n        dateHeaderLevels.unshift(datesColumn);\n        return dateHeaderLevels;\n    };\n    ResourceBase.prototype.setResourceValues = function (eventObj, groupIndex) {\n        var _this = this;\n        var setValues = function (index, field, value) {\n            if (_this.resourceCollection[parseInt(index.toString(), 10)].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {\n                eventObj[\"\" + field] = [value];\n            }\n            else {\n                eventObj[\"\" + field] = value;\n            }\n        };\n        if (groupIndex === void 0) {\n            groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                this.parent.activeCellsData.groupIndex;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {\n            var groupOrder = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, groupOrder[parseInt(index.toString(), 10)]);\n            }\n        }\n        else if (this.parent.resourceCollection.length > 0) {\n            for (var index = 0; index < this.resourceCollection.length; index++) {\n                var data = this.resourceCollection[parseInt(index.toString(), 10)].dataSource[0];\n                if (data) {\n                    setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, data[this.resourceCollection[parseInt(index.toString(), 10)].idField]);\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.getResourceColor = function (eventObj, groupOrder) {\n        var colorFieldIndex = (!isNullOrUndefined(groupOrder) &&\n            this.colorIndex > groupOrder.length - 1) ? groupOrder.length - 1 : this.colorIndex;\n        var resource = this.resourceCollection[parseInt(colorFieldIndex.toString(), 10)];\n        if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[parseInt(colorFieldIndex.toString(), 10)];\n        var data = this.filterData(resource.dataSource, resource.idField, id);\n        if (data.length > 0) {\n            return data[0][resource.colorField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getCssClass = function (eventObj) {\n        var resource = this.resourceCollection.slice(-1)[0];\n        if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {\n            return undefined;\n        }\n        var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);\n        if (data.length > 0) {\n            return data[0][resource.cssClassField];\n        }\n        return undefined;\n    };\n    ResourceBase.prototype.getResourceRenderDates = function () {\n        // eslint-disable-next-line prefer-spread\n        var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function (e) { return e.renderDates; }));\n        var time = resourceDates.map(function (dateObj) { return dateObj.getTime(); });\n        var removeDuplicateDates = function (dateColl) { return dateColl.filter(function (date, index) {\n            return time.indexOf(date.getTime()) === index;\n        }); };\n        var renderDates = removeDuplicateDates(resourceDates);\n        renderDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        return renderDates;\n    };\n    ResourceBase.prototype.filterData = function (dataSource, field, value) {\n        return dataSource.filter(function (data) { return data[\"\" + field] === value; });\n    };\n    ResourceBase.prototype.getResourceData = function (eventObj, index, groupEditIndex) {\n        if (this.parent.activeViewOptions.group.allowGroupEdit) {\n            var resourceObj = {};\n            for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {\n                var groupIndex = groupEditIndex_1[_i];\n                var resourceLevel = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;\n                for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {\n                    var fieldName = this.resourceCollection[parseInt(level.toString(), 10)].field;\n                    if (isNullOrUndefined(resourceObj[\"\" + fieldName])) {\n                        resourceObj[\"\" + fieldName] = [];\n                    }\n                    resourceObj[\"\" + fieldName].push(resourceLevel[parseInt(level.toString(), 10)]);\n                }\n            }\n            eventObj = extend(eventObj, resourceObj);\n        }\n        else {\n            for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {\n                if (this.lastResourceLevel[parseInt(index.toString(), 10)]) {\n                    eventObj[this.resourceCollection[parseInt(level.toString(), 10)].field] = this.lastResourceLevel[parseInt(index.toString(), 10)].groupOrder[parseInt(level.toString(), 10)];\n                }\n            }\n        }\n    };\n    ResourceBase.prototype.addResource = function (resources, name, index) {\n        var resourceCollection = (resources instanceof Array) ? resources : [resources];\n        var _loop_6 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (addObj, i) {\n                    return new DataManager({ json: resource.dataSource }).insert(addObj, null, null, index + i);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_1 = _loop_6(resource);\n            if (state_1 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.removeResource = function (resourceId, name) {\n        var resourceCollection = (resourceId instanceof Array) ? resourceId : [resourceId];\n        var _loop_7 = function (resource) {\n            if (resource.name === name) {\n                resourceCollection.forEach(function (removeObj) {\n                    return new DataManager({ json: resource.dataSource }).remove(resource.idField, removeObj);\n                });\n                return \"break\";\n            }\n        };\n        for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {\n            var resource = _a[_i];\n            var state_2 = _loop_7(resource);\n            if (state_2 === \"break\")\n                break;\n        }\n        this.refreshLayout(true);\n    };\n    ResourceBase.prototype.getIndexFromResourceId = function (id, name, resourceData, event, parentField) {\n        name = name || this.parent.resourceCollection.slice(-1)[0].name;\n        if (isNullOrUndefined(resourceData)) {\n            resourceData = this.resourceCollection.filter(function (e) { return e.name === name; })[0];\n            if (isNullOrUndefined(resourceData)) {\n                return null;\n            }\n        }\n        var resource = resourceData.dataSource.filter(function (e) {\n            if (event && e[resourceData.idField] === id) {\n                if (e[resourceData.groupIDField] === event[\"\" + parentField]) {\n                    return e[resourceData.idField] === id;\n                }\n                return null;\n            }\n            else {\n                return e[resourceData.idField] === id;\n            }\n        })[0];\n        return (this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resource));\n    };\n    ResourceBase.prototype.resourceExpand = function (id, name, hide) {\n        var resource = this.parent.resourceCollection.filter(function (e) {\n            if (e.name === name) {\n                return e;\n            }\n            return null;\n        })[0];\n        var index = 0;\n        var resourceData = resource.dataSource.filter(function (e) { return e[resource.idField] === id; })[0];\n        if (!this.parent.activeViewOptions.group.byGroupID) {\n            index = this.getIndexFromResourceId(id, name, resource);\n        }\n        else {\n            index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n        }\n        var target = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS + ' ' + (\"[data-group-index=\\\"\" + index + \"\\\"]\") +\n            ' ' + '.' + cls.RESOURCE_TREE_ICON_CLASS);\n        if (target) {\n            if (target.classList.contains(cls.RESOURCE_EXPAND_CLASS) && !hide) {\n                target.click();\n            }\n            else if (target.classList.contains(cls.RESOURCE_COLLAPSE_CLASS) && hide) {\n                target.click();\n            }\n        }\n    };\n    ResourceBase.prototype.resourceScroll = function (id, name) {\n        if (this.parent.isAdaptive || ['Agenda', 'MonthAgenda'].indexOf(this.parent.currentView) > -1) {\n            return;\n        }\n        var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;\n        var levelIndex = this.parent.resourceCollection.length - 1;\n        var resource = this.parent.resourceCollection.filter(function (e, index) {\n            if (e.name === levelName) {\n                levelIndex = index;\n                return e;\n            }\n            return null;\n        })[0];\n        var scrollElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var index = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                var resourceData = resource.dataSource.filter(function (e) {\n                    return e[resource.idField] === id;\n                })[0];\n                index = this.lastResourceLevel.map(function (e) { return e.resourceData; }).indexOf(resourceData);\n            }\n            if (this.parent.virtualScrollModule) {\n                var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n                var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);\n                if (this.parent.rowAutoHeight) {\n                    scrollElement.scrollTop = 0;\n                    this.parent.virtualScrollModule.virtualScrolling();\n                }\n                scrollElement.scrollTop = (index * averageRowHeight) - (((this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight));\n                this.parent.virtualScrollModule.virtualScrolling();\n                if (this.parent.rowAutoHeight) {\n                    var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                    if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                        scrollElement.scrollTop =\n                            (scrollElement.scrollTop < td.offsetTop) ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;\n                    }\n                }\n                else {\n                    scrollElement.scrollTop = (index * averageRowHeight);\n                }\n            }\n            else {\n                var td = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + index + \"\\\"]\");\n                if (td && !td.parentElement.classList.contains(cls.HIDDEN_CLASS)) {\n                    scrollElement.scrollTop = td.offsetTop;\n                }\n            }\n        }\n        else {\n            if (!this.parent.activeViewOptions.group.byGroupID) {\n                index = this.getIndexFromResourceId(id, levelName, resource);\n            }\n            else {\n                if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {\n                    index = this.lastResourceLevel.map(function (e) { return e.resourceData[resource.idField]; }).indexOf(id);\n                }\n                else {\n                    index = resource.dataSource.map(function (e) { return e[resource.idField]; }).indexOf(id);\n                }\n            }\n            var offsetTarget = this.parent.currentView === 'Month' ? this.parent.element.querySelector(\".\" + cls.DATE_HEADER_WRAP_CLASS + \" tbody tr:nth-child(\" + (levelIndex + 1) + \")\")\n                : this.parent.element.querySelector(\".\" + cls.HEADER_ROW_CLASS + \":nth-child(\" + (levelIndex + 1) + \")\");\n            var offset = [].slice.call(offsetTarget.children).map(function (node) { return node.offsetLeft; });\n            scrollElement.scrollLeft = offset[parseInt(index.toString(), 10)];\n        }\n    };\n    ResourceBase.prototype.destroy = function () {\n        this.parent.off(events.documentClick, this.documentClick);\n        if (this.treeViewObj) {\n            if (this.treeViewObj.portals && this.treeViewObj.portals.length > 0) {\n                var treeViewTemplates = this.treeViewObj.portals.map(function (x) { return x.propName; });\n                if (treeViewTemplates.length > 0) {\n                    this.parent.resetTemplates(treeViewTemplates);\n                }\n            }\n            this.treeViewObj.destroy();\n            this.treeViewObj = null;\n        }\n        if (this.treePopup) {\n            this.treePopup.destroy();\n            this.treePopup = null;\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP));\n            remove(this.parent.element.querySelector('.' + cls.RESOURCE_TREE_POPUP_OVERLAY));\n        }\n        var resToolBarEle = this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER);\n        if (resToolBarEle) {\n            remove(resToolBarEle);\n        }\n    };\n    return ResourceBase;\n}());\nexport { ResourceBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty, Event } from '@syncfusion/ej2-base';\nvar ToolbarItem = /** @class */ (function (_super) {\n    __extends(ToolbarItem, _super);\n    function ToolbarItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"text\", void 0);\n    __decorate([\n        Property('auto')\n    ], ToolbarItem.prototype, \"width\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ToolbarItem.prototype, \"showAlwaysInPopup\", void 0);\n    __decorate([\n        Property(false)\n    ], ToolbarItem.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"prefixIcon\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"suffixIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], ToolbarItem.prototype, \"visible\", void 0);\n    __decorate([\n        Property('None')\n    ], ToolbarItem.prototype, \"overflow\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"template\", void 0);\n    __decorate([\n        Property('Button')\n    ], ToolbarItem.prototype, \"type\", void 0);\n    __decorate([\n        Property('Both')\n    ], ToolbarItem.prototype, \"showTextOn\", void 0);\n    __decorate([\n        Property(null)\n    ], ToolbarItem.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('')\n    ], ToolbarItem.prototype, \"tooltipText\", void 0);\n    __decorate([\n        Property('Left')\n    ], ToolbarItem.prototype, \"align\", void 0);\n    __decorate([\n        Property(-1)\n    ], ToolbarItem.prototype, \"tabIndex\", void 0);\n    __decorate([\n        Property('Custom')\n    ], ToolbarItem.prototype, \"name\", void 0);\n    __decorate([\n        Event()\n    ], ToolbarItem.prototype, \"click\", void 0);\n    return ToolbarItem;\n}(ChildProperty));\nexport { ToolbarItem };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Component, Property, Event, Animation, Collection, append } from '@syncfusion/ej2-base';\nimport { EventHandler, Browser, Internationalization, getDefaultDateObject, cldrData, L10n } from '@syncfusion/ej2-base';\nimport { getValue, compile, extend, isNullOrUndefined, NotifyPropertyChanges, Complex } from '@syncfusion/ej2-base';\nimport { getElement, removeClass, addClass, classList, remove, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { HeaderRenderer } from '../renderer/header-renderer';\nimport { Scroll } from '../actions/scroll';\nimport { ScheduleTouch } from '../actions/touch';\nimport { KeyboardInteraction } from '../actions/keyboard';\nimport { Data } from '../actions/data';\nimport { EventBase } from '../event-renderer/event-base';\nimport { InlineEdit } from '../event-renderer/inline-edit';\nimport { QuickPopups } from '../popups/quick-popups';\nimport { EventTooltip } from '../popups/event-tooltip';\nimport { EventWindow } from '../popups/event-window';\nimport { Render } from '../renderer/renderer';\nimport { WorkHours } from '../models/work-hours';\nimport { TimeScale } from '../models/time-scale';\nimport { QuickInfoTemplates } from '../models/quick-info-templates';\nimport { HeaderRows } from '../models/header-rows';\nimport { Crud } from '../actions/crud';\nimport { WorkCellInteraction } from '../actions/work-cells';\nimport { EventSettings } from '../models/event-settings';\nimport { Group } from '../models/group';\nimport { Resources } from '../models/resources';\nimport { Gregorian, Islamic } from '../../common/calendar-util';\nimport { ResourceBase } from '../base/resource';\nimport { Timezone, timezoneData } from '../timezone/timezone';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\nimport { ToolbarItem } from '../models/toolbar';\n/**\n * Represents the Schedule component that displays a list of events scheduled against specific date and timings,\n * thus helping us to plan and manage it properly.\n * ```html\n * <div id=\"schedule\"></div>\n * ```\n * ```typescript\n * <script>\n *   var scheduleObj = new Schedule();\n *   scheduleObj.appendTo(\"#schedule\");\n * </script>\n * ```\n */\nvar Schedule = /** @class */ (function (_super) {\n    __extends(Schedule, _super);\n    /**\n     * Constructor for creating the Schedule widget\n     *\n     * @param {ScheduleModel} options Accepts the schedule model properties to initiate the rendering\n     * @param {string | HTMLElement} element Accepts the DOM element reference\n     */\n    function Schedule(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.adaptiveGroupIndex = 0;\n        return _this;\n    }\n    /**\n     * Core method that initializes the control rendering.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.render = function () {\n        var addClasses = [];\n        var removeClasses = [];\n        addClasses.push(cls.ROOT);\n        if (this.enableRtl) {\n            addClasses.push(cls.RTL);\n        }\n        else {\n            removeClasses.push(cls.RTL);\n        }\n        if (this.isAdaptive) {\n            addClasses.push(cls.DEVICE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.DEVICE_CLASS);\n        }\n        if (this.enableAdaptiveUI) {\n            addClasses.push(cls.ADAPTIVE_CLASS);\n        }\n        else {\n            removeClasses.push(cls.ADAPTIVE_CLASS);\n        }\n        if (this.allowMultiDrag) {\n            addClasses.push(cls.MULTI_DRAG);\n        }\n        else {\n            removeClasses.push(cls.MULTI_DRAG);\n        }\n        if (this.cssClass) {\n            var cssClass = this.cssClass.split(' ');\n            for (var _i = 0, cssClass_1 = cssClass; _i < cssClass_1.length; _i++) {\n                var cls_1 = cssClass_1[_i];\n                addClasses.push(cls_1);\n            }\n        }\n        classList(this.element, addClasses, removeClasses);\n        this.validateDate();\n        createSpinner({ target: this.element });\n        this.scrollModule = new Scroll(this);\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        this.renderModule = new Render(this);\n        this.eventBase = new EventBase(this);\n        this.workCellAction = new WorkCellInteraction(this);\n        if (this.allowKeyboardInteraction) {\n            this.keyboardInteractionModule = new KeyboardInteraction(this);\n        }\n        this.inlineModule = new InlineEdit(this);\n        this.initializeDataModule();\n        this.renderTableContainer();\n        this.activeViewOptions = this.getActiveViewOptions();\n        this.initializeResources();\n        this.wireEvents();\n    };\n    Schedule.prototype.renderTableContainer = function () {\n        if (!this.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS)) {\n            this.element.appendChild(this.createElement('div', { className: cls.TABLE_CONTAINER_CLASS }));\n        }\n    };\n    Schedule.prototype.getEventTemplateName = function (resIndex) {\n        var templateName = 'eventTemplate_' + resIndex;\n        if (this.activeEventTemplates.indexOf(templateName) < 0) {\n            this.activeEventTemplates.push(templateName);\n        }\n        return templateName;\n    };\n    /**\n     * Method to get element width\n     *\n     * @param {HTMLElement} element Accepts the DOM element\n     * @returns {number} Returns the width of the given element\n     * @private\n     */\n    Schedule.prototype.getElementWidth = function (element) {\n        return util.getElementWidth(element, this.uiStateValues.isTransformed);\n    };\n    /**\n     * Method to get element height\n     *\n     * @param {HTMLElement} element Accepts the DOM element\n     * @returns {number} Returns the Height of the given element\n     * @private\n     */\n    Schedule.prototype.getElementHeight = function (element) {\n        return util.getElementHeight(element, this.uiStateValues.isTransformed);\n    };\n    /**\n     * Method to get height from element\n     *\n     * @param {Element} element Accepts the DOM element\n     * @param {string} elementClass Accepts the element class\n     * @returns {number} Returns the height of the element\n     * @private\n     */\n    Schedule.prototype.getElementHeightFromClass = function (element, elementClass) {\n        return util.getElementHeightFromClass(element, elementClass, this.uiStateValues.isTransformed);\n    };\n    /**\n     * Method to render react templates\n     *\n     * @param {Function} callback - Specifies the callBack method\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderTemplates = function (callback) {\n        if (this.isReact) {\n            this.renderReactTemplates(callback);\n        }\n        else if (callback) {\n            callback();\n        }\n    };\n    /**\n     * Method to reset react templates\n     *\n     * @param {string[]} templates Accepts the template ID\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.resetTemplates = function (templates) {\n        if (this.isAngular || this.isReact) {\n            this.clearTemplate(templates);\n        }\n    };\n    /**\n     * This method renders untrusted strings and scripts securely by sanitizing them first.\n     *\n     * @param {string} value - A string value representing the HTML string value to be sanitized.\n     * @param {HTMLElement} element - An HTML element to which the sanitized or unsanitized HTML string will be assigned.\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.sanitize = function (value, element) {\n        if (this.enableHtmlSanitizer) {\n            element.innerText = SanitizeHtmlHelper.sanitize(value);\n        }\n        else {\n            element.innerHTML = value;\n        }\n    };\n    Schedule.prototype.initializeResources = function (isSetModel) {\n        if (isSetModel === void 0) { isSetModel = false; }\n        if (this.resources.length > 0) {\n            this.resourceBase = new ResourceBase(this);\n            this.resourceBase.bindResourcesData(isSetModel);\n        }\n        else {\n            this.resourceBase = null;\n            this.resourceCollection = [];\n            this.renderElements(isSetModel);\n        }\n    };\n    Schedule.prototype.destroyEditorWindow = function () {\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n        this.eventWindow = new EventWindow(this);\n    };\n    /**\n     * Method to render the layout elements\n     *\n     * @param {boolean} isLayoutOnly Accepts the boolean value to render layout or not\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderElements = function (isLayoutOnly) {\n        if (isLayoutOnly) {\n            this.initializeView(this.currentView);\n            this.eventWindow.refresh();\n            return;\n        }\n        this.destroyHeaderModule();\n        if (this.showHeaderBar) {\n            this.headerModule = new HeaderRenderer(this);\n        }\n        this.renderTableContainer();\n        this.uiStateValues.isTransformed = Math.round(this.element.getBoundingClientRect().width) !== this.element.offsetWidth;\n        if (Browser.isDevice || Browser.isTouch) {\n            this.scheduleTouchModule = new ScheduleTouch(this);\n        }\n        this.initializeView(this.currentView);\n        this.destroyPopups();\n        if (!this.isPrinting) {\n            this.initializePopups();\n        }\n    };\n    Schedule.prototype.validateDate = function (selectedDate) {\n        if (selectedDate === void 0) { selectedDate = this.selectedDate; }\n        // persist the selected date value\n        var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);\n        var minDate = isNullOrUndefined(this.minDate) ? new Date(1900, 0, 1) :\n            this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);\n        var maxDate = isNullOrUndefined(this.maxDate) ? new Date(2099, 11, 31) :\n            this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);\n        if (minDate <= maxDate) {\n            if (date < minDate) {\n                date = minDate;\n            }\n            if (date > maxDate) {\n                date = maxDate;\n            }\n            this.setProperties({ selectedDate: new Date('' + date), minDate: new Date('' + minDate), maxDate: new Date('' + maxDate) }, true);\n            if (this.eventWindow) {\n                this.eventWindow.updateMinMaxDateToEditor();\n            }\n        }\n        else {\n            throw Error('minDate should be equal or less than maxDate');\n        }\n    };\n    Schedule.prototype.getViewIndex = function (viewName) {\n        for (var item = 0; item < this.viewCollections.length; item++) {\n            var checkIndex = this.viewCollections[parseInt(item.toString(), 10)].option;\n            if (checkIndex === viewName) {\n                return item;\n            }\n        }\n        return -1;\n    };\n    Schedule.prototype.setViewOptions = function (isModuleLoad) {\n        if (isModuleLoad === void 0) { isModuleLoad = false; }\n        if (isNullOrUndefined(this.views) || this.views.length === 0) {\n            return;\n        }\n        this.viewOptions = {};\n        this.viewCollections = [];\n        var viewName;\n        var selectedView;\n        var prevIndex = this.viewIndex;\n        var count = 0;\n        this.viewIndex = -1;\n        for (var _i = 0, _a = this.views; _i < _a.length; _i++) {\n            var view = _a[_i];\n            var isOptions = (typeof view === 'string') ? false : true;\n            if (typeof view === 'string') {\n                viewName = view;\n                if (this.currentView === viewName) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            else {\n                viewName = view.option;\n                if (view.isSelected) {\n                    selectedView = viewName;\n                    this.viewIndex = count;\n                }\n            }\n            var obj = extend({ option: viewName }, isOptions ? view : {});\n            var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n            obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : '';\n            obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : '';\n            obj.dateRangeTemplateName = obj.dateRangeTemplate ? obj.option : '';\n            obj.cellTemplateName = obj.cellTemplate ? obj.option : '';\n            obj.dayHeaderTemplateName = obj.dayHeaderTemplate ? obj.option : '';\n            obj.monthHeaderTemplateName = obj.monthHeaderTemplate ? obj.option : '';\n            obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : '';\n            obj.headerIndentTemplateName = obj.headerIndentTemplate ? obj.option : '';\n            obj.eventTemplateName = obj.eventTemplate ? obj.option : '';\n            if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {\n                delete obj.firstDayOfWeek;\n            }\n            if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {\n                delete obj.interval;\n            }\n            this.viewCollections.push(obj);\n            if (isNullOrUndefined(this.viewOptions[\"\" + fieldViewName])) {\n                this.viewOptions[\"\" + fieldViewName] = [obj];\n            }\n            else {\n                this.viewOptions[\"\" + fieldViewName].push(obj);\n            }\n            count++;\n        }\n        if (!isModuleLoad && selectedView) {\n            this.setProperties({ currentView: selectedView }, true);\n        }\n        if (this.viewIndex === -1) {\n            var currentIndex = this.getViewIndex(this.currentView);\n            this.viewIndex = ((typeof this.views[0] !== 'string') && (!isNullOrUndefined(prevIndex) && prevIndex !== -1)) ? prevIndex :\n                (currentIndex === -1) ? 0 : currentIndex;\n        }\n    };\n    Schedule.prototype.getActiveViewOptions = function () {\n        var timeScale = {\n            enable: this.timeScale.enable,\n            interval: this.timeScale.interval,\n            slotCount: this.timeScale.slotCount,\n            majorSlotTemplate: this.timeScale.majorSlotTemplate,\n            minorSlotTemplate: this.timeScale.minorSlotTemplate\n        };\n        var isYearView = this.viewCollections[this.viewIndex].option.indexOf('Year') > -1;\n        var group = {\n            byDate: isYearView ? false : this.group.byDate,\n            byGroupID: this.group.byGroupID,\n            allowGroupEdit: this.group.allowGroupEdit,\n            resources: isNullOrUndefined(this.group.resources) ? [] : this.group.resources,\n            headerTooltipTemplate: this.group.headerTooltipTemplate,\n            enableCompactView: this.group.enableCompactView,\n            hideNonWorkingDays: ['Day', 'Week', 'WorkWeek', 'Month'].indexOf(this.currentView) > -1 ? this.group.hideNonWorkingDays : false\n        };\n        var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;\n        var scheduleOptions = {\n            dateFormat: this.dateFormat,\n            endHour: this.endHour,\n            isSelected: false,\n            option: null,\n            readonly: this.readonly,\n            startHour: this.startHour,\n            allowVirtualScrolling: false,\n            cellHeaderTemplate: this.cellHeaderTemplate,\n            dayHeaderTemplate: this.dayHeaderTemplate,\n            monthHeaderTemplate: this.monthHeaderTemplate,\n            cellTemplate: this.cellTemplate,\n            eventTemplate: this.eventSettings.template,\n            dateHeaderTemplate: this.dateHeaderTemplate,\n            dateRangeTemplate: this.dateRangeTemplate,\n            resourceHeaderTemplate: this.resourceHeaderTemplate,\n            headerIndentTemplate: this.headerIndentTemplate,\n            firstMonthOfYear: this.firstMonthOfYear,\n            firstDayOfWeek: this.firstDayOfWeek,\n            workDays: workDays,\n            monthsCount: this.monthsCount,\n            showWeekend: this.showWeekend,\n            showWeekNumber: this.showWeekNumber,\n            displayName: null,\n            interval: 1,\n            timeScale: timeScale,\n            timeFormat: this.internalTimeFormat,\n            group: group,\n            headerRows: this.headerRows,\n            orientation: 'Horizontal',\n            numberOfWeeks: 0,\n            displayDate: null,\n            enableLazyLoading: false\n        };\n        var viewOptions = this.viewCollections[this.viewIndex];\n        var viewsData = extend(scheduleOptions, viewOptions, undefined, true);\n        if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {\n            viewsData.firstDayOfWeek = this.firstDayOfWeek;\n        }\n        if (viewsData.displayDate) {\n            viewsData.displayDate = viewsData.displayDate instanceof Date ? new Date(viewsData.displayDate.getTime()) :\n                new Date(viewsData.displayDate);\n        }\n        if (viewsData.enableLazyLoading && !isNullOrUndefined(viewsData.group.resources) && viewsData.group.resources.length > 0 &&\n            (['Agenda', 'MonthAgenda', 'Year', 'TimelineYear'].indexOf(viewsData.option) === -1 ||\n                (viewsData.option === 'TimelineYear' && viewsData.orientation === 'Vertical'))) {\n            viewsData.allowVirtualScrolling = true;\n        }\n        return viewsData;\n    };\n    Schedule.prototype.initializeDataModule = function () {\n        this.eventFields = {\n            id: this.eventSettings.fields.id,\n            isBlock: this.eventSettings.fields.isBlock,\n            subject: this.eventSettings.fields.subject.name,\n            startTime: this.eventSettings.fields.startTime.name,\n            endTime: this.eventSettings.fields.endTime.name,\n            startTimezone: this.eventSettings.fields.startTimezone.name,\n            endTimezone: this.eventSettings.fields.endTimezone.name,\n            location: this.eventSettings.fields.location.name,\n            description: this.eventSettings.fields.description.name,\n            isAllDay: this.eventSettings.fields.isAllDay.name,\n            recurrenceID: this.eventSettings.fields.recurrenceID.name,\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.name,\n            recurrenceException: this.eventSettings.fields.recurrenceException.name,\n            isReadonly: this.eventSettings.fields.isReadonly,\n            followingID: this.eventSettings.fields.followingID\n        };\n        this.setEditorTitles();\n        this.dataModule = new Data(this, this.eventSettings.dataSource, this.eventSettings.query);\n        this.crudModule = new Crud(this);\n    };\n    Schedule.prototype.setEditorTitles = function () {\n        this.editorTitles = {\n            subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant('title'),\n            startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant('start'),\n            endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant('end'),\n            isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant('allDay'),\n            startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant('startTimezone'),\n            endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant('endTimezone'),\n            location: this.eventSettings.fields.location.title || this.localeObj.getConstant('location'),\n            description: this.eventSettings.fields.description.title || this.localeObj.getConstant('description'),\n            recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant('repeat')\n        };\n    };\n    Schedule.prototype.initializeView = function (viewName) {\n        this.showSpinner();\n        this.activeViewOptions = this.getActiveViewOptions();\n        if (this.resourceBase) {\n            this.resourceBase.setResourceCollection();\n        }\n        this.initializeTemplates();\n        this.renderModule.render(viewName);\n    };\n    Schedule.prototype.initializeTemplates = function () {\n        this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n        this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n        this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n        this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n        this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n        this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n        this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);\n        this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);\n        this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n        this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n        this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n        this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n        this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n        this.editorTemplateFn = this.templateParser(this.editorTemplate);\n        this.editorHeaderTemplateFn = this.templateParser(this.editorHeaderTemplate);\n        this.editorFooterTemplateFn = this.templateParser(this.editorFooterTemplate);\n        this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n        this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n        this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n    };\n    Schedule.prototype.initializePopups = function () {\n        this.eventWindow = new EventWindow(this);\n        this.quickPopup = new QuickPopups(this);\n    };\n    /**\n     * Method to get day names\n     *\n     * @param {string} type Accepts the day name\n     * @returns {string[]} Returns the collection of day names\n     * @private\n     */\n    Schedule.prototype.getDayNames = function (type) {\n        var culShortNames = [];\n        var cldrObj;\n        var nameSpace = '';\n        if (isNullOrUndefined(this.locale) || this.locale === 'en' || this.locale === 'en-US') {\n            nameSpace = 'days.stand-alone.';\n            cldrObj = (getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            nameSpace = 'main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.days.format.' + type;\n            cldrObj = (getValue(nameSpace, cldrData));\n        }\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n            var obj = _a[_i];\n            culShortNames.push(getValue(obj, cldrObj));\n        }\n        return culShortNames;\n    };\n    Schedule.prototype.setCldrTimeFormat = function () {\n        if (!isNullOrUndefined(this.timeFormat)) {\n            this.internalTimeFormat = this.timeFormat;\n            return;\n        }\n        if (isNullOrUndefined(this.locale) || this.locale === 'en' || this.locale === 'en-US') {\n            this.internalTimeFormat = (getValue('timeFormats.short', getDefaultDateObject(this.getCalendarMode())));\n        }\n        else {\n            this.internalTimeFormat = (getValue('main.' + '' + this.locale + '.dates.calendars.' + this.getCalendarMode() + '.timeFormats.short', cldrData));\n        }\n    };\n    /**\n     * Method to get calendar mode\n     *\n     * @returns {string} Returns the calendar mode\n     * @private\n     */\n    Schedule.prototype.getCalendarMode = function () {\n        return !isNullOrUndefined(this.calendarMode) ? this.calendarMode.toLowerCase() : 'gregorian';\n    };\n    /**\n     * Method to get time in string\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {string} Returns the time in string\n     * @private\n     */\n    Schedule.prototype.getTimeString = function (date) {\n        var time = this.globalize.formatDate(date, {\n            format: this.activeViewOptions.timeFormat,\n            type: 'time', calendar: this.getCalendarMode()\n        });\n        return time.toLocaleUpperCase();\n    };\n    /**\n     * Method to get  date object\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getDateTime = function (date) {\n        return date instanceof Date ? new Date(date.getTime()) : new Date(date);\n    };\n    Schedule.prototype.setCalendarMode = function () {\n        if (this.calendarMode === 'Islamic') {\n            this.calendarUtil = new Islamic();\n        }\n        else {\n            this.calendarUtil = new Gregorian();\n        }\n    };\n    /**\n     * Method to change the current view\n     *\n     * @param {View} view Accepts the view name\n     * @param {Event} event Accepts the event object\n     * @param {boolean} muteOnChange Accepts the value to enable or disable mute on change\n     * @param {number} index Accepts the index value\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.changeView = function (view, event, muteOnChange, index) {\n        var _this = this;\n        if (isNullOrUndefined(index)) {\n            index = this.getViewIndex(view);\n        }\n        if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {\n            return;\n        }\n        var previousView = this.activeViewOptions ? this.activeViewOptions.option : this.currentView;\n        var args = { requestType: 'viewNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'view', cancel: false, currentDate: _this.selectedDate, previousView: previousView, currentView: view, viewIndex: index\n                };\n                _this.trigger(events.navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        var isVertical = ['Day', 'Week', 'WorkWeek'].indexOf(view) > -1 && ['Day', 'Week', 'WorkWeek'].indexOf(previousView) < 0;\n                        _this.uiStateValues.isInitial = isVertical || view.indexOf('Timeline') > -1 || view.indexOf('Year') > -1;\n                        _this.uiStateValues.top = view.indexOf('Timeline') > -1 && previousView.indexOf('Timeline') < 0 ? 0 : _this.uiStateValues.top;\n                        _this.viewIndex = navigationArgs.viewIndex;\n                        _this.setProperties({ currentView: view }, true);\n                        if (_this.headerModule) {\n                            _this.headerModule.updateActiveView();\n                            _this.headerModule.setCalendarDate(_this.selectedDate);\n                            _this.headerModule.setCalendarView();\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'viewNavigate', cancel: false, event: event };\n                        _this.trigger(events.actionComplete, args);\n                    }\n                    else {\n                        _this.currentView = previousView;\n                    }\n                });\n            }\n            else {\n                _this.currentView = previousView;\n            }\n        });\n    };\n    /**\n     * Method to change the view date\n     *\n     * @param {Date} selectedDate Accepts the selected date\n     * @param {Event} event Accepts the event object\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.changeDate = function (selectedDate, event) {\n        var _this = this;\n        var args = { requestType: 'dateNavigate', cancel: false, event: event };\n        this.trigger(events.actionBegin, args, function (actionArgs) {\n            if (!actionArgs.cancel) {\n                var navArgs = {\n                    action: 'date', cancel: false, previousDate: _this.selectedDate, currentDate: selectedDate\n                };\n                _this.trigger(events.navigating, navArgs, function (navigationArgs) {\n                    if (!navigationArgs.cancel) {\n                        _this.uiStateValues.isInitial = _this.activeView.isTimelineView() && _this.currentView !== 'TimelineYear';\n                        _this.validateDate(navigationArgs.currentDate);\n                        if (_this.headerModule) {\n                            _this.headerModule.setCalendarDate(navigationArgs.currentDate);\n                        }\n                        if (_this.currentView === 'MonthAgenda' && _this.monthAgendaModule) {\n                            _this.monthAgendaModule.monthAgendaDate = new Date('' + _this.selectedDate);\n                        }\n                        _this.initializeView(_this.currentView);\n                        _this.animateLayout();\n                        args = { requestType: 'dateNavigate', cancel: false, event: event };\n                        _this.trigger(events.actionComplete, args);\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Method to validate min and max date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean result to validate the min and max date\n     * @private\n     */\n    Schedule.prototype.isMinMaxDate = function (date) {\n        if (date === void 0) { date = this.selectedDate; }\n        var maxDate = isNullOrUndefined(this.maxDate) ? new Date(2099, 11, 31) : this.maxDate;\n        var minDate = isNullOrUndefined(this.minDate) ? new Date(1900, 0, 1) : this.minDate;\n        return ((date.getTime() >= minDate.getTime()) && (date.getTime() <= maxDate.getTime()));\n    };\n    /**\n     * Method to validate the selected date\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {boolean} Returns the boolean value for given date is selected date or not\n     * @private\n     */\n    Schedule.prototype.isSelectedDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date('' + this.selectedDate).setHours(0, 0, 0, 0);\n    };\n    /**\n     * Method to get the current time\n     *\n     * @param {Date} date Accepts the date object\n     * @returns {Date} Returns the date object after performing the timezone conversion\n     * @private\n     */\n    Schedule.prototype.getCurrentTime = function (date) {\n        if (date === void 0) { date = new Date(); }\n        if (this.timezone) {\n            return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);\n        }\n        return date;\n    };\n    /** Method to get navigate view\n     *\n     * @returns {View} Return the navigate view name\n     * @private\n     */\n    Schedule.prototype.getNavigateView = function () {\n        if (this.activeView.isTimelineView()) {\n            return this.currentView === 'TimelineMonth' || this.currentView === 'TimelineYear' ? 'TimelineDay' : 'Agenda';\n        }\n        return 'Day';\n    };\n    Schedule.prototype.animateLayout = function () {\n        if (!this.activeView.element) {\n            return;\n        }\n        new Animation({ duration: 600, name: 'FadeIn', timingFunction: 'easeIn' }).animate(this.activeView.element);\n    };\n    /**\n     * To provide the array of modules needed for control rendering\n     *\n     * @returns {ModuleDeclaration[]} Returns the declared modules\n     * @private\n     */\n    Schedule.prototype.requiredModules = function () {\n        var modules = [];\n        this.setViewOptions(true);\n        for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {\n            var view = _a[_i];\n            view = (view === 'timelineDay' || view === 'timelineWeek' || view === 'timelineWorkWeek') ? 'timelineViews' : view;\n            modules.push({ member: view, args: [this] });\n        }\n        if (this.allowDragAndDrop) {\n            modules.push({ member: 'dragAndDrop', args: [this] });\n        }\n        if (this.allowResizing) {\n            modules.push({ member: 'resize', args: [this] });\n        }\n        modules.push({ member: 'excelExport', args: [this] });\n        modules.push({ member: 'iCalendarExport', args: [this] });\n        modules.push({ member: 'iCalendarImport', args: [this] });\n        modules.push({ member: 'print', args: [this] });\n        return modules;\n    };\n    /**\n     * Initializes the values of private members.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.preRender = function () {\n        this.isAdaptive = Browser.isDevice || util.isIPadDevice();\n        this.globalize = new Internationalization(this.locale);\n        this.tzModule = new Timezone();\n        if (this && isNullOrUndefined(this.uiStateValues) || !(this.enablePersistence)) {\n            this.uiStateValues = {\n                expand: false, isInitial: true, left: 0, top: 0, isGroupAdaptive: false,\n                isIgnoreOccurrence: false, groupIndex: this.adaptiveGroupIndex, action: false,\n                isBlock: false, isCustomMonth: true, isPreventTimezone: false, isTransformed: false\n            };\n        }\n        this.currentTimezoneDate = this.getCurrentTime();\n        this.activeCellsData = {\n            startTime: new Date(this.currentTimezoneDate),\n            endTime: new Date(this.currentTimezoneDate),\n            isAllDay: false\n        };\n        this.activeEventData = { event: undefined, element: undefined };\n        this.getDefaultLocale();\n        this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n        this.setCldrTimeFormat();\n        this.setCalendarMode();\n        this.eventsData = [];\n        this.eventsProcessed = [];\n        this.blockData = [];\n        this.blockProcessed = [];\n        this.resourceCollection = [];\n        this.currentAction = null;\n        this.selectedElements = [];\n        this.activeEventTemplates = [];\n        this.setViewOptions();\n    };\n    Schedule.prototype.getDefaultLocale = function () {\n        this.defaultLocale = {\n            day: 'Day',\n            week: 'Week',\n            workWeek: 'Work Week',\n            month: 'Month',\n            year: 'Year',\n            agenda: 'Agenda',\n            weekAgenda: 'Week Agenda',\n            workWeekAgenda: 'Work Week Agenda',\n            monthAgenda: 'Month Agenda',\n            today: 'Today',\n            noEvents: 'No events',\n            emptyContainer: 'There are no events scheduled on this day.',\n            allDay: 'All day',\n            start: 'Start',\n            end: 'End',\n            more: 'more',\n            close: 'Close',\n            cancel: 'Cancel',\n            noTitle: '(No Title)',\n            delete: 'Delete',\n            deleteEvent: 'Delete Event',\n            deleteMultipleEvent: 'Delete Multiple Events',\n            selectedItems: 'Items selected',\n            deleteSeries: 'Entire Series',\n            edit: 'Edit',\n            editSeries: 'Entire Series',\n            editEvent: 'Edit Event',\n            createEvent: 'Create',\n            subject: 'Subject',\n            addTitle: 'Add title',\n            moreDetails: 'More Details',\n            moreEvents: 'More Events',\n            save: 'Save',\n            editContent: 'How would you like to change the appointment in the series?',\n            deleteContent: 'Are you sure you want to delete this event?',\n            deleteMultipleContent: 'Are you sure you want to delete the selected events?',\n            newEvent: 'New Event',\n            title: 'Title',\n            location: 'Location',\n            description: 'Description',\n            timezone: 'Timezone',\n            startTimezone: 'Start Timezone',\n            endTimezone: 'End Timezone',\n            repeat: 'Repeat',\n            saveButton: 'Save',\n            cancelButton: 'Cancel',\n            deleteButton: 'Delete',\n            recurrence: 'Recurrence',\n            wrongPattern: 'The recurrence pattern is not valid.',\n            seriesChangeAlert: 'Do you want to cancel the changes made to specific ' +\n                'instances of this series and match it to the whole series again?',\n            createError: 'The duration of the event must be shorter than how frequently it occurs. ' +\n                'Shorten the duration, or change the recurrence pattern in the recurrence event editor.',\n            sameDayAlert: 'Two occurrences of the same event cannot occur on the same day.',\n            occurenceAlert: 'Cannot reschedule an occurrence of the recurring appointment if it skips over ' +\n                'a later occurrence of the same appointment.',\n            editRecurrence: 'Edit Recurrence',\n            recurringEvent: 'Recurring Event',\n            repeats: 'Repeats',\n            alert: 'Alert',\n            startEndError: 'The selected end date occurs before the start date.',\n            invalidDateError: 'The entered date value is invalid.',\n            blockAlert: 'Events cannot be scheduled within the blocked time range.',\n            ok: 'Ok',\n            yes: 'Yes',\n            no: 'No',\n            of: 'of',\n            occurrence: 'Occurrence',\n            series: 'Series',\n            previous: 'Previous',\n            next: 'Next',\n            timelineDay: 'Timeline Day',\n            timelineWeek: 'Timeline Week',\n            timelineWorkWeek: 'Timeline Work Week',\n            timelineMonth: 'Timeline Month',\n            timelineYear: 'Timeline Year',\n            editFollowingEvent: 'Following Events',\n            deleteTitle: 'Delete Event',\n            editTitle: 'Edit Event',\n            beginFrom: 'Begin From',\n            endAt: 'Ends At',\n            expandAllDaySection: 'Expand-all-day-section',\n            collapseAllDaySection: 'Collapse-all-day-section',\n            searchTimezone: 'Search Timezone',\n            noRecords: 'No records found'\n        };\n    };\n    Schedule.prototype.wireEvents = function () {\n        EventHandler.add(window, 'resize', this.onScheduleResize, this);\n        EventHandler.add(window, 'orientationchange', this.onScheduleResize, this);\n        EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);\n        if (this.allowClipboard) {\n            EventHandler.add(document, 'paste', this.onDocumentPaste, this);\n        }\n    };\n    /**\n     * Method to remove selected class\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.removeSelectedClass = function () {\n        var selectedCells = this.getSelectedCells();\n        for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {\n            var cell = selectedCells_1[_i];\n            if (this.currentView !== 'Year') {\n                cell.setAttribute('aria-selected', 'false');\n            }\n            cell.removeAttribute('tabindex');\n        }\n        removeClass(selectedCells, cls.SELECTED_CELL_CLASS);\n        if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {\n            this.keyboardInteractionModule.selectedCells = [];\n        }\n    };\n    /**\n     * Method to add selected class\n     *\n     * @param {HTMLTableCellElement[]} cells Accepts the collection of elements\n     * @param {HTMLTableCellElement} focusCell Accepts the focus element\n     * @param {boolean} isPreventScroll Accepts the boolean value to prevent scroll\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.addSelectedClass = function (cells, focusCell, isPreventScroll) {\n        if (this.currentView !== 'Year') {\n            for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n                var cell = cells_1[_i];\n                cell.setAttribute('aria-selected', 'true');\n            }\n        }\n        addClass(cells, cls.SELECTED_CELL_CLASS);\n        if (focusCell) {\n            focusCell.setAttribute('tabindex', '0');\n            focusCell.focus({ preventScroll: isPreventScroll || false });\n        }\n    };\n    /**\n     * Method to select cell\n     *\n     * @param {HTMLElement | HTMLTableCellElement} element Accepts the select element\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.selectCell = function (element) {\n        this.removeSelectedClass();\n        this.addSelectedClass([element], element);\n    };\n    /**\n     * Method to get all day row element\n     *\n     * @returns {Element} Returns the all day row element\n     * @private\n     */\n    Schedule.prototype.getAllDayRow = function () {\n        return this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n    };\n    /**\n     * Method to get content table element\n     *\n     * @returns {HTMLElement} Returns the content table element\n     * @private\n     */\n    Schedule.prototype.getContentTable = function () {\n        return this.activeView.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    };\n    /**\n     * Method to get all content table rows\n     *\n     * @returns {HTMLElement[]} Returns the content table rows\n     * @private\n     */\n    Schedule.prototype.getTableRows = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr:not(.' + cls.HIDDEN_CLASS + ')'));\n    };\n    /**\n     * Method to get work cell elements\n     *\n     * @returns {Element[]} Returns the all work cell elements\n     * @private\n     */\n    Schedule.prototype.getWorkCellElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    };\n    /**\n     * Method to get the index from date collection\n     *\n     * @param {Date[]} collection Accepts the collections of date\n     * @param {Date} date Accepts the date object\n     * @returns {number} Returns the index compared date with date collections\n     * @private\n     */\n    Schedule.prototype.getIndexOfDate = function (collection, date) {\n        return collection.map(Number).indexOf(+date);\n    };\n    /**\n     * Method to find all day cell\n     *\n     * @param {Element} td Accepts the DOM Element\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n    Schedule.prototype.isAllDayCell = function (td) {\n        if (['Month', 'TimelineMonth', 'TimelineYear', 'MonthAgenda'].indexOf(this.currentView) > -1 ||\n            td.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            td.classList.contains(cls.HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {\n            return true;\n        }\n        if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 &&\n            this.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Method to get date from element\n     *\n     * @param {Element} td Accepts the DOM element\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getDateFromElement = function (td) {\n        var dateString;\n        if (!isNullOrUndefined(td)) {\n            dateString = td.getAttribute('data-date');\n        }\n        if (!isNullOrUndefined(dateString)) {\n            var dateInMS = parseInt(dateString, 10);\n            var date = new Date(dateInMS);\n            return date;\n        }\n        return undefined;\n    };\n    /**\n     * Method to get target element from given selector\n     *\n     * @param {string} selector Accepts the element selector\n     * @param {number} left Accepts the pageX value\n     * @param {number} top Accepts the pageY value\n     * @returns {Element[]} Returns the collection of elements based on the given selector\n     * @private\n     */\n    Schedule.prototype.getTargetElement = function (selector, left, top) {\n        var element = document.elementFromPoint(left, top);\n        var targetElement;\n        if (element) {\n            targetElement = element.closest(selector);\n        }\n        return (targetElement) ? [targetElement] : null;\n    };\n    /**\n     * Method to process cell header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getCellHeaderTemplate = function () {\n        return this.cellHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDayHeaderTemplate = function () {\n        return this.dayHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell header template in year view.\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMonthHeaderTemplate = function () {\n        return this.monthHeaderTemplateFn;\n    };\n    /**\n     * Method to process cell template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getCellTemplate = function () {\n        return this.cellTemplateFn;\n    };\n    /**\n     * Method to process date header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDateHeaderTemplate = function () {\n        return this.dateHeaderTemplateFn;\n    };\n    /**\n     * Method to process date range template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getDateRangeTemplate = function () {\n        return this.dateRangeTemplateFn;\n    };\n    /**\n     * Method to process major slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMajorSlotTemplate = function () {\n        return this.majorSlotTemplateFn;\n    };\n    /**\n     * Method to process minor slot template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getMinorSlotTemplate = function () {\n        return this.minorSlotTemplateFn;\n    };\n    /**\n     * Method to process appointment template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getAppointmentTemplate = function () {\n        return this.appointmentTemplateFn;\n    };\n    /**\n     * Method to process appointment tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEventTooltipTemplate = function () {\n        return this.eventTooltipTemplateFn;\n    };\n    /**\n     * Method to process header tooltip template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getHeaderTooltipTemplate = function () {\n        return this.headerTooltipTemplateFn;\n    };\n    /**\n     * Method to process editor template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEditorTemplate = function () {\n        return this.editorTemplateFn;\n    };\n    /**\n     * Method to process editor header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEditorHeaderTemplate = function () {\n        return this.editorHeaderTemplateFn;\n    };\n    /**\n     * Method to process editor footer template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getEditorFooterTemplate = function () {\n        return this.editorFooterTemplateFn;\n    };\n    /**\n     * Method to process quick info header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesHeader = function () {\n        return this.quickInfoTemplatesHeaderFn;\n    };\n    /**\n     * Method to process quick info content template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesContent = function () {\n        return this.quickInfoTemplatesContentFn;\n    };\n    /**\n     * Method to process quick info footer template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getQuickInfoTemplatesFooter = function () {\n        return this.quickInfoTemplatesFooterFn;\n    };\n    /**\n     * Method to process resource header template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getResourceHeaderTemplate = function () {\n        return this.resourceHeaderTemplateFn;\n    };\n    /**\n     * Method to process indent template\n     *\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.getHeaderIndentTemplate = function () {\n        return this.headerIndentTemplateFn;\n    };\n    /**\n     * Method to get dynamic CSS properties\n     *\n     * @returns {ScrollCss} Returns the CSS properties dynamically\n     * @private\n     */\n    Schedule.prototype.getCssProperties = function () {\n        var cssProps = {\n            border: this.enableRtl ? 'borderLeftWidth' : 'borderRightWidth',\n            padding: this.enableRtl ? 'paddingLeft' : 'paddingRight',\n            rtlBorder: this.enableRtl ? 'borderRightWidth' : 'borderLeftWidth',\n            rtlPadding: this.enableRtl ? 'paddingRight' : 'paddingLeft'\n        };\n        return cssProps;\n    };\n    /**\n     * Method to remove new event element in adaptive mode\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.removeNewEventElement = function () {\n        var eventClone = this.element.querySelector('.' + cls.NEW_EVENT_CLASS);\n        if (!isNullOrUndefined(eventClone)) {\n            remove(eventClone);\n        }\n    };\n    /**\n     * Method to get start end time from string\n     *\n     * @param {string} startEndTime Accepts the start end time string value\n     * @returns {Date} Returns the date object\n     * @private\n     */\n    Schedule.prototype.getStartEndTime = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = util.resetTime(new Date(this.currentTimezoneDate) || this.getCurrentTime());\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return null;\n    };\n    Schedule.prototype.onDocumentClick = function (args) {\n        this.notify(events.documentClick, { event: args });\n    };\n    Schedule.prototype.onDocumentPaste = function (args) {\n        this.notify(events.documentPaste, { event: args });\n    };\n    Schedule.prototype.onScheduleResize = function () {\n        if (isNullOrUndefined(this.activeView) || ((this.isAdaptive || util.isMobile()) && document.activeElement\n            && (document.activeElement.classList.contains(cls.SUBJECT_CLASS) ||\n                document.activeElement.classList.contains(cls.INLINE_SUBJECT_CLASS))) || this.uiStateValues.isTapHold) {\n            return;\n        }\n        if (this.virtualScrollModule && this.activeView.isTimelineView()) {\n            this.virtualScrollModule.refreshLayout();\n        }\n        if (this.activeViewOptions.timeScale.enable && this.activeView) {\n            this.activeView.highlightCurrentTime();\n        }\n        if (this.quickPopup) {\n            this.quickPopup.onClosePopup();\n        }\n        util.resetScrollbarWidth();\n        if (this.currentView === 'Month' || ((this.currentView !== 'Agenda' && this.currentView !== 'MonthAgenda')\n            && !this.activeViewOptions.timeScale.enable) || this.activeView.isTimelineView()) {\n            this.activeView.resetColWidth();\n            this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties(), isPreventScrollUpdate: true });\n            var isRemoteRefresh = false;\n            if (this.activeViewOptions.enableLazyLoading && this.virtualScrollModule && this.virtualScrollModule.isRemoteRefresh) {\n                isRemoteRefresh = this.virtualScrollModule.isRemoteRefresh;\n                this.virtualScrollModule.isRemoteRefresh = false;\n            }\n            this.refreshEvents(isRemoteRefresh);\n            if (this.virtualScrollModule && !this.virtualScrollModule.enableTransition) {\n                var resWrap = this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                var conWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n                this.virtualScrollModule.enableTransition = true;\n                addClass([conWrap, resWrap], 'e-transition');\n            }\n        }\n        else {\n            this.notify(events.contentReady, {});\n        }\n    };\n    /**\n     * Method to process the templates\n     *\n     * @param {string | Function} template Accepts the template in string\n     * @returns {CallbackFunction} Returns the callback function\n     * @private\n     */\n    Schedule.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (typeof template === 'function') {\n                    return compile(template);\n                }\n                else {\n                    if (document.querySelectorAll(template).length) {\n                        return compile(document.querySelector(template).innerHTML.trim());\n                    }\n                    else {\n                        return compile(template);\n                    }\n                }\n            }\n            catch (error) {\n                return compile(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Retrieves the selected cells.\n     *\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     * @private\n     */\n    Schedule.prototype.getSelectedCells = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.SELECTED_CELL_CLASS));\n    };\n    /**\n     * Method to generate the announcement string\n     *\n     * @param {Object} event Accepts the event object\n     * @param {string} subject Accepts the subject text\n     * @returns {string} Returns the announcement string\n     * @private\n     */\n    Schedule.prototype.getAnnouncementString = function (event, subject) {\n        var resourceName;\n        if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {\n            var constantText = '\"s event - ';\n            resourceName = this.quickPopup.getResourceText({ event: event }, 'event') + constantText;\n        }\n        var recordSubject = (subject || (event[this.eventFields.subject] || this.eventSettings.fields.subject.default));\n        var recordLocation = (event[this.eventFields.location] || this.eventSettings.fields.location.default);\n        var skeleton = 'full';\n        var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {\n            type: 'dateTime', skeleton: skeleton, calendar: this.getCalendarMode()\n        });\n        var announcementString = recordSubject + ' ' + this.localeObj.getConstant('beginFrom') + ' '\n            + startDateText + ' ' + this.localeObj.getConstant('endAt') + ' ' + endDateText;\n        if (resourceName) {\n            announcementString = resourceName + ' ' + announcementString;\n        }\n        if (recordLocation && recordLocation !== '') {\n            announcementString = announcementString + ' ' + this.localeObj.getConstant('location') + ' ' + recordLocation;\n        }\n        if (event[this.eventFields.recurrenceRule] && event[this.eventFields.recurrenceRule] !== ''\n            && event[this.eventFields.id] === event[this.eventFields.recurrenceID]) {\n            announcementString = announcementString + ' ' + this.localeObj.getConstant('recurringEvent');\n        }\n        return announcementString;\n    };\n    /**\n     * Method to process the element boundary validation\n     *\n     * @param {number} pageY Accepts the pageY value\n     * @param {number} pageX Accepts the pageX value\n     * @returns {ResizeEdges} Returns the boundary validation object\n     * @private\n     */\n    Schedule.prototype.boundaryValidation = function (pageY, pageX) {\n        var autoScrollDistance = 30;\n        var scrollEdges = { left: false, right: false, top: false, bottom: false };\n        var viewBoundaries = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS).getBoundingClientRect();\n        if ((pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset) &&\n            (pageY > viewBoundaries.top + window.pageYOffset)) {\n            scrollEdges.top = true;\n        }\n        if ((pageY > (viewBoundaries.bottom - autoScrollDistance) + window.pageYOffset) &&\n            (pageY < viewBoundaries.bottom + window.pageYOffset)) {\n            scrollEdges.bottom = true;\n        }\n        if ((pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset) &&\n            (pageX > viewBoundaries.left + window.pageXOffset)) {\n            scrollEdges.left = true;\n        }\n        if ((pageX > (viewBoundaries.right - autoScrollDistance) + window.pageXOffset) &&\n            (pageX < viewBoundaries.right + window.pageXOffset)) {\n            scrollEdges.right = true;\n        }\n        return scrollEdges;\n    };\n    /**\n     * Method to get the week number.\n     *\n     * @param {Date[]} dates Accepts the date collections\n     * @returns {number} Returns the week number\n     * @private\n     */\n    Schedule.prototype.getWeekNumberContent = function (dates) {\n        var weekNumber;\n        if (this.weekRule === 'FirstDay') {\n            var weekNumberDate = util.getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = this.globalize.formatNumber(util.getWeekNumber(weekNumberDate));\n        }\n        else if (this.weekRule === 'FirstFourDayWeek') {\n            var weekFirstDate = util.getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            var weekLastDate = util.getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            var weekMidDate = util.getWeekMiddleDate(weekFirstDate, weekLastDate);\n            weekNumber = this.globalize.formatNumber(util.getWeekNumber(weekMidDate));\n        }\n        else if (this.weekRule === 'FirstFullWeek') {\n            var weekFirstDate = util.getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);\n            weekNumber = this.globalize.formatNumber(util.getWeekNumber(weekFirstDate));\n        }\n        return weekNumber;\n    };\n    /**\n     * Method to render the header indent template.\n     *\n     * @param {TdData} data Accepts the td data\n     * @param {Element} td Accepts the td element\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.renderHeaderIndentTemplate = function (data, td) {\n        if (this.activeViewOptions.headerIndentTemplate) {\n            var scheduleId = this.element.id + '_';\n            var viewName = this.activeViewOptions.headerIndentTemplateName;\n            var templateId = scheduleId + viewName + 'headerIndentTemplate';\n            var indentTemplate = [].slice.call(this.getHeaderIndentTemplate()(data, this, 'headerIndentTemplate', templateId, false, undefined, undefined, this.root));\n            append(indentTemplate, td);\n        }\n    };\n    /**\n     * Method to check for refreshing the targeted resource row events.\n     *\n     * @returns {boolean} Returns the boolean value\n     * @private\n     */\n    Schedule.prototype.isSpecificResourceEvents = function () {\n        return this.activeViewOptions.group.resources.length > 0 && !this.activeViewOptions.group.allowGroupEdit &&\n            !this.rowAutoHeight && !this.virtualScrollModule && this.activeViewOptions.group.byGroupID;\n    };\n    Schedule.prototype.unWireEvents = function () {\n        EventHandler.remove(window, 'resize', this.onScheduleResize);\n        EventHandler.remove(window, 'orientationchange', this.onScheduleResize);\n        EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);\n        EventHandler.remove(document, 'paste', this.onDocumentPaste);\n    };\n    /**\n     * Core method to return the component name.\n     *\n     * @returns {string} Returns the module name\n     * @private\n     */\n    Schedule.prototype.getModuleName = function () {\n        return 'schedule';\n    };\n    /**\n     * Returns the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persistance data\n     * @private\n     */\n    Schedule.prototype.getPersistData = function () {\n        return this.addOnPersist(['currentView', 'selectedDate', 'scrollTop', 'scrollLeft', 'adaptiveGroupIndex']);\n    };\n    /**\n     * Called internally, if any of the property value changed.\n     *\n     * @returns {void}\n     * @private\n     */\n    Schedule.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isReact && isNullOrUndefined(this.activeView)) {\n            return;\n        }\n        var state = {\n            isRefresh: false, isResource: false, isDate: false, isView: false, isLayout: false, isDataManager: false\n        };\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'views':\n                    this.setViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateItems();\n                    }\n                    state.isView = true;\n                    break;\n                case 'currentView':\n                    state.isView = true;\n                    break;\n                case 'minDate':\n                case 'maxDate':\n                case 'selectedDate':\n                    state.isDate = true;\n                    break;\n                case 'dateFormat':\n                    this.activeViewOptions = this.getActiveViewOptions();\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange();\n                    }\n                    break;\n                case 'showHeaderBar':\n                case 'toolbarItems':\n                    this.destroyHeaderModule();\n                    if (newProp.showHeaderBar) {\n                        this.headerModule = new HeaderRenderer(this);\n                        this.headerModule.updateDateRange();\n                    }\n                    this.notify(events.scrollUiUpdate, { cssProperties: this.getCssProperties() });\n                    if (this.activeView.isTimelineView()) {\n                        this.refreshEvents(false);\n                    }\n                    break;\n                case 'workDays':\n                    if (JSON.stringify(oldProp.workDays) !== JSON.stringify(newProp.workDays)) {\n                        state.isLayout = true;\n                    }\n                    break;\n                case 'showWeekend':\n                case 'startHour':\n                case 'endHour':\n                case 'workHours':\n                case 'readonly':\n                case 'headerRows':\n                case 'showWeekNumber':\n                case 'rowAutoHeight':\n                    state.isLayout = true;\n                    break;\n                case 'locale':\n                case 'calendarMode':\n                    this.globalize = new Internationalization(this.locale);\n                    this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);\n                    this.setCldrTimeFormat();\n                    this.setCalendarMode();\n                    state.isRefresh = true;\n                    break;\n                case 'firstDayOfWeek':\n                    this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;\n                    if (this.eventWindow) {\n                        this.eventWindow.refreshRecurrenceEditor();\n                    }\n                    state.isLayout = true;\n                    break;\n                case 'showTimeIndicator':\n                    if (this.activeViewOptions.timeScale.enable && this.activeView) {\n                        this.activeView.highlightCurrentTime();\n                    }\n                    break;\n                case 'cellHeaderTemplate':\n                    this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;\n                    this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'cellTemplate':\n                    this.activeViewOptions.cellTemplate = newProp.cellTemplate;\n                    this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateHeaderTemplate':\n                    this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;\n                    this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'dateRangeTemplate':\n                    this.activeViewOptions.dateRangeTemplate = newProp.dateRangeTemplate;\n                    this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n                    if (this.headerModule) {\n                        this.headerModule.updateDateRange();\n                    }\n                    break;\n                case 'dayHeaderTemplate':\n                    this.activeViewOptions.dayHeaderTemplate = newProp.dayHeaderTemplate;\n                    this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'monthHeaderTemplate':\n                    this.activeViewOptions.monthHeaderTemplate = newProp.monthHeaderTemplate;\n                    this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'resourceHeaderTemplate':\n                    this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;\n                    this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                    state.isLayout = true;\n                    break;\n                case 'timezone':\n                    this.eventBase.timezonePropertyChange(oldProp.timezone);\n                    if (this.headerModule) {\n                        this.headerModule.setCalendarTimezone();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.setRtlClass();\n                    state.isRefresh = true;\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp, oldProp, state);\n                    break;\n            }\n        }\n        this.propertyChangeAction(state);\n    };\n    Schedule.prototype.propertyChangeAction = function (state) {\n        if (state.isRefresh) {\n            this.refresh();\n        }\n        else if (state.isResource) {\n            this.initializeResources(true);\n        }\n        else if (state.isView) {\n            this.changeView(this.currentView, null, true);\n        }\n        else if (state.isDate) {\n            if (isNullOrUndefined(this.selectedDate)) {\n                this.setProperties({ selectedDate: this.getCurrentTime() }, true);\n            }\n            this.changeDate(this.selectedDate);\n        }\n        else if (state.isLayout) {\n            this.activeCellsData = null;\n            this.initializeView(this.currentView);\n        }\n        else if (state.isDataManager && this.crudModule) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], cls.EVENT_ACTION_CLASS);\n            }\n            this.crudModule.refreshDataManager();\n        }\n    };\n    Schedule.prototype.allDayRowScrollUpdate = function () {\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var allDayRow = this.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        if (this.height === 'auto' || !this.enableAllDayScroll) {\n            addClass([dateHeader], cls.ALLDAY_APPOINTMENT_AUTO);\n            if (dateHeader.classList.contains(cls.ALLDAY_APPOINTMENT_SCROLL)) {\n                removeClass([dateHeader], cls.ALLDAY_APPOINTMENT_SCROLL);\n            }\n            if (this.uiStateValues.expand) {\n                var allDayCells = [].slice.call(this.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS));\n                allDayCells[0].style.height = (allDayRow.style.height) ? allDayRow.style.height : allDayCells[1].style.height;\n            }\n        }\n        else {\n            if (dateHeader.classList.contains(cls.ALLDAY_APPOINTMENT_AUTO)) {\n                removeClass([dateHeader], cls.ALLDAY_APPOINTMENT_AUTO);\n            }\n            this.eventBase.allDayExpandScroll(dateHeader);\n        }\n        if (!this.uiStateValues.expand) {\n            allDayRow.style.height = '';\n        }\n    };\n    Schedule.prototype.extendedPropertyChange = function (prop, newProp, oldProp, state) {\n        switch (prop) {\n            case 'width':\n            case 'height':\n            case 'enableAllDayScroll':\n                if (['Day', 'Week', 'WorkWeek'].indexOf(this.currentView) > -1) {\n                    this.allDayRowScrollUpdate();\n                }\n                this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                break;\n            case 'cssClass':\n                if (oldProp.cssClass) {\n                    removeClass([this.element], oldProp.cssClass.split(' '));\n                }\n                if (newProp.cssClass) {\n                    addClass([this.element], newProp.cssClass.split(' '));\n                }\n                break;\n            case 'hideEmptyAgendaDays':\n            case 'agendaDaysCount':\n                this.activeViewOptions = this.getActiveViewOptions();\n                state.isView = true;\n                break;\n            case 'eventSettings':\n                this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);\n                break;\n            case 'allowKeyboardInteraction':\n            case 'allowClipboard':\n                if (this.keyboardInteractionModule) {\n                    this.keyboardInteractionModule.destroy();\n                    this.keyboardInteractionModule = null;\n                }\n                if (newProp.allowKeyboardInteraction || newProp.allowClipboard) {\n                    this.keyboardInteractionModule = new KeyboardInteraction(this);\n                }\n                break;\n            case 'timezoneDataSource':\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n                break;\n            case 'editorTemplate':\n                if (!isNullOrUndefined(this.editorTemplate)) {\n                    this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogContent();\n                }\n                break;\n            case 'editorHeaderTemplate':\n                if (!isNullOrUndefined(this.editorHeaderTemplate)) {\n                    this.editorHeaderTemplateFn = this.templateParser(this.editorHeaderTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogHeader();\n                }\n                break;\n            case 'editorFooterTemplate':\n                if (!isNullOrUndefined(this.editorFooterTemplate)) {\n                    this.editorFooterTemplateFn = this.templateParser(this.editorFooterTemplate);\n                }\n                if (this.eventWindow) {\n                    this.eventWindow.setDialogFooter();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickInfoTemplates.header) {\n                    this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                }\n                if (this.quickInfoTemplates.content) {\n                    this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                }\n                if (this.quickInfoTemplates.footer) {\n                    this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                }\n                break;\n            case 'group':\n                this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);\n                break;\n            case 'resources':\n                state.isResource = true;\n                break;\n            case 'timeScale':\n                this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;\n                this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'allowDragAndDrop':\n            case 'allowResizing':\n            case 'eventDragArea':\n                this.refreshEvents(false);\n                break;\n            case 'weekRule':\n                state.isLayout = true;\n                break;\n            case 'firstMonthOfYear':\n                this.activeViewOptions.firstMonthOfYear = newProp.firstMonthOfYear;\n                this.viewIndex = this.activeView.viewIndex;\n                state.isLayout = true;\n                break;\n            case 'monthsCount':\n                this.activeViewOptions.monthsCount = newProp.monthsCount;\n                this.viewIndex = this.activeView.viewIndex;\n                state.isLayout = true;\n                break;\n            case 'timeFormat':\n                this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;\n                if (this.eventWindow) {\n                    this.eventWindow.refreshDateTimePicker();\n                }\n                state.isLayout = true;\n                break;\n            case 'enableAdaptiveUI':\n                if (this.showHeaderBar && this.headerModule) {\n                    this.destroyHeaderModule();\n                    this.headerModule = new HeaderRenderer(this);\n                    this.headerModule.updateDateRange();\n                }\n                state.isLayout = true;\n                break;\n            case 'headerIndentTemplate':\n                this.activeViewOptions.headerIndentTemplate = newProp.headerIndentTemplate;\n                this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);\n                state.isLayout = true;\n                break;\n        }\n    };\n    Schedule.prototype.setRtlClass = function () {\n        if (this.enableRtl) {\n            addClass([this.element], 'e-rtl');\n        }\n        else {\n            removeClass([this.element], 'e-rtl');\n        }\n    };\n    Schedule.prototype.onGroupSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            if (prop === 'headerTooltipTemplate') {\n                this.headerTooltipTemplateFn = this.templateParser(newProp.headerTooltipTemplate);\n            }\n            else {\n                state.isLayout = true;\n                if (this.eventWindow) {\n                    this.eventWindow.refresh();\n                }\n            }\n        }\n    };\n    Schedule.prototype.onEventSettingsPropertyChanged = function (newProp, oldProp, state) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'dataSource':\n                case 'query':\n                case 'fields':\n                case 'includeFiltersInQuery':\n                    this.initializeDataModule();\n                    state.isDataManager = true;\n                    break;\n                case 'template':\n                    this.activeViewOptions.eventTemplate = newProp.template;\n                    this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                    state.isDataManager = true;\n                    break;\n                case 'enableTooltip':\n                    if (this.eventTooltip) {\n                        this.eventTooltip.destroy();\n                        this.eventTooltip = null;\n                    }\n                    if (newProp.enableTooltip) {\n                        this.eventTooltip = new EventTooltip(this);\n                    }\n                    break;\n                case 'tooltipTemplate':\n                    this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                    break;\n                case 'resourceColorField':\n                    if (this.resourceBase) {\n                        this.resourceBase.setResourceCollection();\n                    }\n                    state.isDataManager = true;\n                    break;\n                case 'editFollowingEvents':\n                    if (this.quickPopup) {\n                        this.quickPopup.refreshQuickDialog();\n                    }\n                    break;\n                case 'allowAdding':\n                case 'allowEditing':\n                case 'allowDeleting':\n                    if (this.showHeaderBar && this.headerModule) {\n                        this.headerModule.updateAddIcon();\n                    }\n                    if (this.eventWindow) {\n                        this.eventWindow.refresh();\n                    }\n                    break;\n                case 'spannedEventPlacement':\n                case 'minimumEventDuration':\n                case 'enableMaxHeight':\n                case 'enableIndicator':\n                    this.refreshEvents(false);\n                    break;\n                case 'ignoreWhitespace':\n                    state.isLayout = true;\n                    break;\n            }\n        }\n    };\n    Schedule.prototype.destroyHeaderModule = function () {\n        if (this.headerModule) {\n            this.headerModule.destroy();\n            this.headerModule = null;\n        }\n    };\n    Schedule.prototype.destroyPopups = function () {\n        if (this.quickPopup) {\n            this.quickPopup.destroy();\n            this.quickPopup = null;\n        }\n        if (this.eventWindow) {\n            this.eventWindow.destroy();\n            this.eventWindow = null;\n        }\n    };\n    /**\n     * Allows to show the spinner on schedule at the required scenarios.\n     *\n     * @function showSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * When the spinner is shown manually using `showSpinner` method, it can be hidden using this `hideSpinner` method.\n     *\n     * @function hideSpinner\n     * @returns {void}\n     */\n    Schedule.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    /**\n     * Sets different working hours on the required working days by accepting the required start and end time as well as the date collection\n     *  as its parameters.\n     *\n     * @function setWorkHours\n     * @param {Date} dates Collection of dates on which the given start and end hour range needs to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.setWorkHours = function (dates, start, end, groupIndex) {\n        var cells = [];\n        cells = this.getWorkHourCells(dates, start, end, groupIndex);\n        addClass(cells, cls.WORK_HOURS_CLASS);\n    };\n    /**\n     * Removes or resets different working hours on the required working days by accepting the required start and end time as well as the\n     * date collection as its parameters.\n     * if no parameters has been passed to this function, it will remove all the work hours.\n     *\n     * @param {Date} dates Collection of dates on which the given start and end hour range need to be applied.\n     * @param {string} start Defines the work start hour.\n     * @param {string} end Defines the work end hour.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {void}\n     */\n    Schedule.prototype.resetWorkHours = function (dates, start, end, groupIndex) {\n        if (dates === void 0) { dates = this.activeView.renderDates; }\n        if (dates && start && end) {\n            var cells = this.getWorkHourCells(dates, start, end, groupIndex);\n            removeClass(cells, cls.WORK_HOURS_CLASS);\n        }\n        else {\n            var workHourCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_HOURS_CLASS));\n            removeClass(workHourCells, cls.WORK_HOURS_CLASS);\n        }\n    };\n    Schedule.prototype.getWorkHourCells = function (dates, start, end, groupIndex) {\n        if (['Agenda', 'MonthAgenda', 'Month', 'TimelineMonth'].indexOf(this.currentView) > -1) {\n            return [];\n        }\n        var startHour = this.getStartEndTime(start);\n        var endHour = this.getStartEndTime(end);\n        var tableEle = this.getContentTable();\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {\n            return [];\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        var viewStartHour = this.activeView.getStartHour();\n        if (startHour < viewStartHour) {\n            startHour = viewStartHour;\n        }\n        var viewEndHour = this.activeView.getEndHour();\n        if (endHour > viewEndHour) {\n            endHour = viewEndHour;\n        }\n        var msMajorInterval = this.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;\n        var offsetDiff = ((viewStartHour.getTimezoneOffset() - startHour.getTimezoneOffset()) * util.MS_PER_MINUTE);\n        var endOffsetDiff = Math.abs((viewStartHour.getTimezoneOffset() - endHour.getTimezoneOffset()) * util.MS_PER_MINUTE);\n        var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime() + offsetDiff) / msInterval);\n        var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime() - endOffsetDiff) / msInterval);\n        var tempStartIndex = startIndex;\n        var tempEndIndex = endIndex;\n        var cells = [];\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var date = dates_1[_i];\n            date = this.getDateTime(date);\n            util.resetTime(date);\n            var renderDates = this.activeView.renderDates;\n            if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {\n                renderDates = this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)].renderDates;\n            }\n            var colIndex = this.getIndexOfDate(renderDates, date);\n            if (colIndex >= 0) {\n                if (this.activeView.isTimelineView()) {\n                    var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);\n                    startIndex = tempStartIndex + (colIndex * slotsPerDay);\n                    endIndex = tempEndIndex + (colIndex * slotsPerDay);\n                }\n                for (var i = startIndex; i < endIndex; i++) {\n                    if (this.activeView.isTimelineView()) {\n                        var rowIndex = (!isNullOrUndefined(groupIndex)) ? groupIndex : 0;\n                        cells.push(tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[parseInt(i.toString(), 10)]);\n                    }\n                    else {\n                        if (!isNullOrUndefined(groupIndex)) {\n                            var selector = '.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + groupIndex + '\"]';\n                            var tds = [].slice.call(tableEle.rows[parseInt(i.toString(), 10)].querySelectorAll(selector));\n                            cells.push(tds[parseInt(colIndex.toString(), 10)]);\n                        }\n                        else {\n                            cells.push(tableEle.rows[parseInt(i.toString(), 10)].cells[parseInt(colIndex.toString(), 10)]);\n                        }\n                    }\n                }\n            }\n        }\n        return cells;\n    };\n    /**\n     * Retrieves the start and end time information of the specific cell element.\n     *\n     * @function getCellDetails\n     * @param {Element | Element[]} tdCol Accepts the single or collection of elements.\n     * @returns {CellClickEventArgs} Object An object holding the startTime, endTime and all-day information along with the target HTML element will be returned.\n     */\n    Schedule.prototype.getCellDetails = function (tdCol) {\n        var td = (tdCol instanceof Array) ? tdCol : [tdCol];\n        var firstTd = getElement(td[0]);\n        var lastTd = getElement(td.slice(-1)[0]);\n        var startTime = this.getDateFromElement(firstTd);\n        var endTime = this.getDateFromElement(lastTd);\n        if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {\n            return undefined;\n        }\n        var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute('colSpan')) &&\n            this.headerRows.length > 0;\n        var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute('colSpan'), 10) : 1;\n        if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(cls.ALLDAY_CELLS_CLASS) ||\n            lastTd.classList.contains(cls.HEADER_CELLS_CLASS)) {\n            endTime = util.addDays(new Date(endTime.getTime()), duration);\n        }\n        else {\n            endTime = this.activeView.getEndDateFromStartDate(endTime);\n        }\n        var data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: this.isAllDayCell(firstTd),\n            element: tdCol\n        };\n        var groupIndex = firstTd.getAttribute('data-group-index');\n        if (!isNullOrUndefined(groupIndex)) {\n            data.groupIndex = parseInt(groupIndex, 10);\n        }\n        return data;\n    };\n    /**\n     * Retrieves the selected cell elements.\n     *\n     * @function getSelectedElements\n     * @returns {Element[]} The elements of currently selected cells will be returned.\n     */\n    Schedule.prototype.getSelectedElements = function () {\n        if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {\n            return this.keyboardInteractionModule.selectedCells;\n        }\n        return this.getSelectedCells();\n    };\n    /**\n     * To get the resource collection\n     *\n     * @function getResourceCollections\n     * @returns {ResourcesModel[]} Returns the resource collections\n     */\n    Schedule.prototype.getResourceCollections = function () {\n        return this.resourceCollection;\n    };\n    /**\n     * To set the resource collection\n     *\n     * @function setResourceCollections\n     * @param {ResourcesModel[]} resourceCol Accepts the resource collections in ResourcesModel type\n     * @param {boolean} isEventDataRefresh Accepts the boolean to refresh the appointment data source from remote or local\n     * @returns {void}\n     */\n    Schedule.prototype.setResourceCollections = function (resourceCol, isEventDataRefresh) {\n        if (isEventDataRefresh === void 0) { isEventDataRefresh = true; }\n        if (!isEventDataRefresh && this.uiStateValues) {\n            this.uiStateValues.isPreventEventRefresh = true;\n        }\n        this.setProperties({ resources: resourceCol }, false);\n    };\n    /**\n     * Current View could be change based on the provided parameters.\n     *\n     * @function changeCurrentView\n     * @param {View} viewName Accept the view in the viewCollections.\n     * @param {number} viewIndex Accept the viewIndex in the viewCollections.\n     * @returns {void}\n     */\n    Schedule.prototype.changeCurrentView = function (viewName, viewIndex) {\n        var index = this.getViewIndex(viewName);\n        var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);\n        var viewOptions = this.viewOptions[\"\" + view];\n        if (viewOptions) {\n            index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);\n        }\n        if (index === -1 || index === this.viewIndex) {\n            return;\n        }\n        this.changeView(viewName, null, null, index);\n    };\n    /**\n     * Return the current view Index.\n     *\n     * @function getCurrentViewIndex\n     * @returns {number} Returns the view index\n     */\n    Schedule.prototype.getCurrentViewIndex = function () {\n        return this.viewIndex;\n    };\n    /**\n     * Retrieves the resource details based on the provided resource index.\n     *\n     * @param {number} index index of the resources at the last level.\n     * @returns {ResourceDetails} Object An object holding the details of resource and resourceData.\n     */\n    Schedule.prototype.getResourcesByIndex = function (index) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {\n                return undefined;\n            }\n            var data = this.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];\n            var groupData = {};\n            this.resourceBase.setResourceValues(groupData, index);\n            return { resource: data.resource, resourceData: data.resourceData, groupData: groupData };\n        }\n        return undefined;\n    };\n    /**\n     * This method allows to expand the resource that available on the scheduler.\n     *\n     * @function expandResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.expandResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, false);\n        }\n    };\n    /**\n     * This method allows to collapse the resource that available on the scheduler.\n     *\n     * @function collapseResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} name Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.collapseResource = function (resourceId, name) {\n        if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {\n            this.resourceBase.resourceExpand(resourceId, name, true);\n        }\n    };\n    /**\n     * Scrolls the Schedule content area to the specified time.\n     *\n     * @function scrollTo\n     * @param {string} hour Accepts the time value in the skeleton format of 'Hm'.\n     * @param {Date} scrollDate Accepts the date object value.\n     * @returns {void}\n     */\n    Schedule.prototype.scrollTo = function (hour, scrollDate) {\n        if (this.currentView.indexOf('Agenda') < 0 && isNullOrUndefined(this.element.querySelector('.e-work-cells'))) {\n            return;\n        }\n        if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {\n            this.activeView.scrollToDate(scrollDate);\n        }\n        else if (this.activeView.scrollToHour) {\n            this.activeView.scrollToHour(hour, scrollDate);\n        }\n    };\n    /**\n     * This method allows scroll to the position of the any resources that available on the scheduler.\n     * This method is applicable for without Agenda and Month agenda views of the schedule.\n     *\n     * @function scrollToResource\n     * @param {string | number} resourceId Accepts the resource id in either string or number type\n     * @param {string} groupName Accepts the name of the resource collection\n     * @returns {void}\n     */\n    Schedule.prototype.scrollToResource = function (resourceId, groupName) {\n        if (this.resourceBase && this.resourceBase.lastResourceLevel) {\n            this.resourceBase.resourceScroll(resourceId, groupName);\n        }\n    };\n    /**\n     * Exports the Scheduler events to a calendar (.ics) file. By default, the calendar is exported with a file name `Calendar.ics`.\n     * To change this file name on export, pass the custom string value as `fileName` to get the file downloaded with this provided name.\n     *\n     * @function exportToICalendar\n     * @param {string} fileName Accepts the string value.\n     * @param {Object[]} customData Accepts the collection of objects.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToICalendar = function (fileName, customData) {\n        if (this.iCalendarExportModule) {\n            this.iCalendarExportModule.initializeCalendarExport(fileName, customData);\n        }\n        else {\n            console.warn('[WARNING] :: Module \"ICalendarExport\" is not available in Schedule component!' +\n                ' You either misspelled the module name or forgot to load it.');\n            throw Error('Inject ICalendarExport module');\n        }\n    };\n    /**\n     * Imports the events from an .ics file downloaded from any of the calendars like Google or Outlook into the Scheduler.\n     * This method accepts the blob object or string format of an .ics file to be imported as a mandatory argument.\n     *\n     * @function importICalendar\n     * @param {Blob | string} fileContent Accepts the file object or string format of an .ics file.\n     * @returns {void}\n     */\n    Schedule.prototype.importICalendar = function (fileContent) {\n        if (this.iCalendarImportModule) {\n            this.iCalendarImportModule.initializeCalendarImport(fileContent);\n        }\n        else {\n            console.warn('[WARNING] :: Module \"ICalendarImport\" is not available in Schedule component!' +\n                ' You either misspelled the module name or forgot to load it.');\n            throw Error('Inject ICalendarImport module');\n        }\n    };\n    /**\n     * Adds the newly created event into the Schedule dataSource.\n     *\n     * @function addEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be added into Schedule.\n     * @returns {void}\n     */\n    Schedule.prototype.addEvent = function (data) {\n        this.crudModule.addEvent(data);\n    };\n    /**\n     * Generates the occurrences of a single recurrence event based on the provided event.\n     *\n     * @function generateEventOccurrences\n     * @param {Object} event Accepts the parent recurrence event from which the occurrences are generated.\n     * @param {Date} startDate Accepts the start date for the event occurrences. If not provided, the event's start date will be used.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    Schedule.prototype.generateEventOccurrences = function (event, startDate) {\n        return (this.eventBase) ? this.eventBase.generateOccurrence(event, startDate) : [];\n    };\n    /**\n     * Allows the Scheduler events data to be exported as an Excel file either in .xlsx or .csv file formats.\n     * By default, the whole event collection bound to the Scheduler gets exported as an Excel file.\n     * To export only the specific events of Scheduler, you need to pass the custom data collection as\n     * a parameter to this `exportToExcel` method. This method accepts the export options as arguments such as fileName,\n     * exportType, fields, customData, and includeOccurrences. The `fileName` denotes the name to be given for the exported\n     * file and the `exportType` allows you to set the format of an Excel file to be exported either as .xlsx or .csv.\n     * The custom or specific field collection of event dataSource to be exported can be provided through `fields` option\n     * and the custom data collection can be exported by passing them through the `customData` option. There also exists\n     * option to export each individual instances of the recurring events to an Excel file, by setting true or false to the\n     * `includeOccurrences` option, denoting either to include or exclude the occurrences as separate instances on an exported Excel file.\n     *\n     * @function exportToExcel\n     * @param {ExportOptions} excelExportOptions The export options to be set before start with exporting the Scheduler events to an Excel file.\n     * @returns {void}\n     */\n    Schedule.prototype.exportToExcel = function (excelExportOptions) {\n        if (this.excelExportModule) {\n            this.excelExportModule.initializeExcelExport(excelExportOptions);\n        }\n        else {\n            console.warn('[WARNING] :: Module \"ExcelExport\" is not available in Schedule component!' +\n                ' You either misspelled the module name or forgot to load it.');\n            throw Error('Inject ExcelExport module');\n        }\n    };\n    /**\n     * Method allows to print the scheduler.\n     *\n     * @function print\n     * @param {ScheduleModel} printOptions The export options to be set before start with exporting\n     * the Scheduler events to the print window.\n     * @returns {void}\n     */\n    Schedule.prototype.print = function (printOptions) {\n        if (this.printModule) {\n            this.printModule.print(printOptions);\n        }\n        else {\n            console.warn('[WARNING] :: Module \"Print\" is not available in Schedule component!' +\n                ' You either misspelled the module name or forgot to load it.');\n            throw Error('Inject Print module');\n        }\n    };\n    /**\n     * Updates the changes made in the event object by passing it as an parameter into the dataSource.\n     *\n     * @function saveEvent\n     * @param {Object | Object[]} data Single or collection of event objects to be saved into Schedule.\n     * @param {CurrentAction} currentAction Denotes the action that takes place either for editing occurrence or series.\n     *  The valid current action names are `EditOccurrence` or `EditSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.saveEvent = function (data, currentAction) {\n        this.crudModule.saveEvent(data, currentAction);\n    };\n    /**\n     * Deletes the events based on the provided ID or event collection in the argument list.\n     *\n     * @function deleteEvent\n     * @param {string | number | Object | Object[]} id Accepts the ID as string or number type or single or collection of the event object which needs to be removed from the Schedule.\n     * @param {CurrentAction} currentAction Denotes the delete action that takes place either on occurrence or series events.\n     *  The valid current action names are `Delete`, `DeleteOccurrence` or `DeleteSeries`.\n     * @returns {void}\n     */\n    Schedule.prototype.deleteEvent = function (id, currentAction) {\n        this.crudModule.deleteEvent(id, currentAction);\n    };\n    /**\n     * Retrieves the entire collection of events bound to the Schedule.\n     *\n     * @function getEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of event objects from the Schedule.\n     */\n    Schedule.prototype.getEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents();\n        }\n        else {\n            eventCollections = this.eventsData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the entire collection of block events bound to the Schedule.\n     *\n     * @function getBlockEvents\n     * @param {Date} startDate Accepts the start date.\n     * @param {Date} endDate Accepts te end date.\n     * @param {boolean} includeOccurrences Accepts the boolean value to process the occurrence from recurrence series.\n     * @returns {Object[]} Returns the collection of block event objects from the Schedule.\n     */\n    Schedule.prototype.getBlockEvents = function (startDate, endDate, includeOccurrences) {\n        var eventCollections = [];\n        if (includeOccurrences) {\n            eventCollections = this.eventBase.getProcessedEvents(this.blockData);\n        }\n        else {\n            eventCollections = this.blockData;\n        }\n        if (startDate) {\n            startDate = this.getDateTime(startDate);\n        }\n        if (endDate) {\n            endDate = this.getDateTime(endDate);\n        }\n        eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);\n        return eventCollections;\n    };\n    /**\n     * Retrieves the occurrences of a single recurrence event based on the provided parent ID.\n     *\n     * @function getOccurrencesByID\n     * @param {number} eventID ID of the parent recurrence data from which the occurrences are fetched.\n     * @returns {Object[]} Returns the collection of occurrence event objects.\n     */\n    Schedule.prototype.getOccurrencesByID = function (eventID) {\n        return this.eventBase.getOccurrencesByID(eventID);\n    };\n    /**\n     * Retrieves all the occurrences that lies between the specific start and end time range.\n     *\n     * @function getOccurrencesByRange\n     * @param {Date} startTime Denotes the start time range.\n     * @param {Date} endTime Denotes the end time range.\n     * @returns {Object[]} Returns the collection of occurrence event objects that lies between the provided start and end time.\n     */\n    Schedule.prototype.getOccurrencesByRange = function (startTime, endTime) {\n        startTime = this.getDateTime(startTime);\n        endTime = this.getDateTime(endTime);\n        return this.eventBase.getOccurrencesByRange(startTime, endTime);\n    };\n    /**\n     * Retrieves the dates that lies on active view of Schedule.\n     *\n     * @function getCurrentViewDates\n     * @returns {Date[]} Returns the collection of dates.\n     */\n    Schedule.prototype.getCurrentViewDates = function () {\n        return this.activeView ? this.activeView.renderDates : [];\n    };\n    /**\n     * Set the recurrence editor instance from custom editor template.\n     *\n     * @function setRecurrenceEditor\n     * @param {RecurrenceEditor} recurrenceEditor instance has passed to fetch the instance in event window.\n     * @returns {void}\n     */\n    Schedule.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n        this.eventWindow.setRecurrenceEditor(recurrenceEditor);\n    };\n    /**\n     * Get the maximum id of an event.\n     *\n     * @function getEventMaxID\n     * @returns {number | string} Returns the maximum ID from scheduler data collections.\n     */\n    Schedule.prototype.getEventMaxID = function () {\n        return this.eventBase.getEventMaxID();\n    };\n    /**\n     * Get deleted occurrences from given recurrence series.\n     *\n     * @function getDeletedOccurrences\n     * @param {string | number | Object} recurrenceData Accepts the parent ID of the event object or parent event object\n     * @returns {Object[]} Returns the collection of deleted occurrence events.\n     */\n    Schedule.prototype.getDeletedOccurrences = function (recurrenceData) {\n        return this.eventBase.getDeletedOccurrences(recurrenceData);\n    };\n    /**\n     * Retrieves the events that lies on the current date range of the active view of Schedule.\n     *\n     * @function getCurrentViewEvents\n     * @returns {Object[]} Returns the collection of events.\n     */\n    Schedule.prototype.getCurrentViewEvents = function () {\n        return this.eventsProcessed;\n    };\n    /**\n     * Refreshes the event dataSource. This method may be useful when the events alone in the schedule needs to be re-rendered.\n     *\n     * @function refreshEvents\n     * @param {boolean} isRemoteRefresh Accepts the boolean to refresh data from remote or local\n     * @returns {void}\n     */\n    Schedule.prototype.refreshEvents = function (isRemoteRefresh) {\n        if (isRemoteRefresh === void 0) { isRemoteRefresh = true; }\n        if (isRemoteRefresh) {\n            if (this.dragAndDropModule) {\n                this.dragAndDropModule.actionObj.action = '';\n                removeClass([this.element], cls.EVENT_ACTION_CLASS);\n            }\n            this.crudModule.refreshDataManager();\n        }\n        else {\n            if (this.uiStateValues) {\n                this.uiStateValues.isPreventTimezone = true;\n            }\n            if (this.crudModule) {\n                this.crudModule.refreshProcessedData();\n            }\n            if (this.uiStateValues) {\n                this.uiStateValues.isPreventTimezone = false;\n            }\n        }\n    };\n    /**\n     * Method to refresh the given Schedule templates\n     *\n     * @param {string} templateName Accepts the template name\n     * @returns {void}\n     */\n    Schedule.prototype.refreshTemplates = function (templateName) {\n        if (templateName) {\n            this.resetTemplates([templateName]);\n        }\n        else {\n            this.resetTemplates();\n        }\n        switch (templateName) {\n            case 'eventTemplate':\n                this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);\n                this.refreshEvents(false);\n                break;\n            case 'dateHeaderTemplate':\n                this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);\n                this.activeView.refreshHeader();\n                break;\n            case 'dateRangeTemplate':\n                this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);\n                if (this.headerModule) {\n                    this.headerModule.refresh();\n                }\n                break;\n            case 'resourceHeaderTemplate':\n                this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);\n                if (this.activeView.isTimelineView()) {\n                    this.activeView.refreshResourceHeader();\n                }\n                else {\n                    this.activeView.refreshHeader();\n                }\n                break;\n            case 'quickInfoTemplates':\n                if (this.quickPopup) {\n                    this.quickPopup.destroy();\n                    this.quickPopup = null;\n                }\n                this.quickPopup = new QuickPopups(this);\n                this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);\n                this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);\n                this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);\n                break;\n            case 'editorTemplate':\n                this.destroyEditorWindow();\n                this.editorTemplateFn = this.templateParser(this.editorTemplate);\n                break;\n            case 'editorHeaderTemplate':\n                this.destroyEditorWindow();\n                this.editorHeaderTemplateFn = this.templateParser(this.editorHeaderTemplate);\n                break;\n            case 'editorFooterTemplate':\n                this.destroyEditorWindow();\n                this.editorFooterTemplateFn = this.templateParser(this.editorFooterTemplate);\n                break;\n            case 'tooltipTemplate':\n            case 'headerTooltipTemplate':\n                if (this.eventTooltip) {\n                    this.eventTooltip.destroy();\n                    this.eventTooltip = null;\n                }\n                this.eventTooltip = new EventTooltip(this);\n                this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);\n                this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);\n                break;\n            default:\n                this.initializeView(this.currentView);\n                break;\n        }\n    };\n    /**\n     * Refreshes the Schedule layout without re-render.\n     *\n     * @function refreshLayout\n     * @returns {void}\n     */\n    Schedule.prototype.refreshLayout = function () {\n        this.onScheduleResize();\n        if (this.headerModule) {\n            this.headerModule.refresh();\n        }\n        if (this.eventWindow) {\n            this.eventWindow.refresh();\n        }\n    };\n    /**\n     * To retrieve the appointment object from element.\n     *\n     * @function getEventDetails\n     * @param {Element} element Denotes the event UI element on the Schedule.\n     * @returns {Object} Returns the event details.\n     */\n    Schedule.prototype.getEventDetails = function (element) {\n        element = getElement(element);\n        var guid = element.getAttribute('data-guid');\n        if (guid) {\n            return this.eventBase.getEventByGuid(guid);\n        }\n        return {};\n    };\n    /**\n     * To check whether the given time range slots are available for event creation or already occupied by other events.\n     * This method currently focuses on validating appointments within the current view date range.\n     * However, it does not extend this availability check to recurrence occurrences outside of the current date range.\n     *\n     * @function isSlotAvailable\n     * @param {Date | Object} startTime Denotes the start time of the slot.\n     * @param {Date} endTime Denotes the end time of the slot.\n     * @param {number} groupIndex Defines the resource index from last level.\n     * @returns {boolean} Returns true, if the slot that lies in the provided time range does not contain any other events.\n     */\n    Schedule.prototype.isSlotAvailable = function (startTime, endTime, groupIndex) {\n        var _this = this;\n        var eventStart;\n        var eventEnd;\n        var eventObj = this.activeEventData.event;\n        if (startTime instanceof Date || typeof (startTime) === 'string') {\n            eventStart = startTime;\n            eventEnd = endTime;\n        }\n        else {\n            eventObj = startTime;\n            eventStart = startTime[this.eventFields.startTime];\n            eventEnd = startTime[this.eventFields.endTime];\n            if (this.resourceBase) {\n                groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);\n            }\n        }\n        if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {\n            return true;\n        }\n        eventStart = this.getDateTime(eventStart);\n        eventEnd = this.getDateTime(eventEnd);\n        var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);\n        if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {\n            eventCollection =\n                this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)], eventCollection);\n        }\n        if (eventObj) {\n            if (eventObj.Guid) {\n                eventCollection = eventCollection.filter(function (event) { return event.Guid !== eventObj.Guid; });\n            }\n            else {\n                eventCollection = eventCollection.filter(function (event) {\n                    return event[_this.eventFields.id] !== eventObj[_this.eventFields.id];\n                });\n            }\n        }\n        return (eventCollection.length > 0) ? false : true;\n    };\n    /**\n     * Method to copy events from an HTMLElement or an array of HTMLElements.\n     *\n     * @param { HTMLElement[] } elements Accepts an array of HTMLElement\n     * @returns {void} This method does not return a value.\n     */\n    Schedule.prototype.copy = function (elements) {\n        this.processCutCopyActions(elements, false);\n    };\n    /**\n     * Method to cut events from an HTMLElement or an array of HTMLElements.\n     *\n     * @param { HTMLElement[] } elements Accepts an array of HTMLElement\n     * @returns {void} This method does not return a value.\n     */\n    Schedule.prototype.cut = function (elements) {\n        this.processCutCopyActions(elements, true);\n    };\n    /**\n     * Method to create a paste event with clipboard data\n     *\n     * @param { HTMLElement } targetElement Accepts HTMLElement\n     * @returns {void}\n     */\n    Schedule.prototype.paste = function (targetElement) {\n        var _this = this;\n        if (!this.allowClipboard || !this.allowKeyboardInteraction) {\n            return;\n        }\n        if (!targetElement.classList.contains('e-work-cells') && !targetElement.classList.contains('e-all-day-cells')) {\n            return;\n        }\n        var clipboardData = new DataTransfer();\n        if (!isNullOrUndefined(navigator.clipboard)) {\n            navigator.clipboard.readText()\n                .then(function (text) {\n                clipboardData.setData('text/plain', text);\n                var pasteEvent = new ClipboardEvent('paste', {\n                    bubbles: true,\n                    cancelable: true\n                });\n                Object.defineProperty(pasteEvent, 'clipboardData', {\n                    value: clipboardData\n                });\n                _this.keyboardInteractionModule.pasteHandler(pasteEvent, targetElement);\n            })\n                .catch(function (err) {\n                throw err;\n            });\n        }\n    };\n    Schedule.prototype.processCutCopyActions = function (elements, isCut) {\n        var _this = this;\n        if (!elements || !this.allowClipboard || !this.allowKeyboardInteraction) {\n            return;\n        }\n        var elementArray = elements;\n        var eventDetailsArray = [];\n        elementArray.forEach(function (element) {\n            if (element.classList.contains(cls.APPOINTMENT_CLASS)) {\n                var eventDetail = _this.getEventDetails(element);\n                if (eventDetail) {\n                    eventDetailsArray.push(eventDetail);\n                }\n            }\n        });\n        if (eventDetailsArray.length > 0) {\n            this.keyboardInteractionModule.processClipboardAction(isCut, eventDetailsArray);\n        }\n    };\n    /**\n     * To manually open the event editor on specific time or on certain events.\n     *\n     * @function openEditor\n     * @param {Object} data It can be either cell data or event data.\n     * @param {CurrentAction} action Defines the action for which the editor needs to be opened such as either for new event creation or\n     *  for editing of existing events. The applicable action names that can be used here are `Add`, `Save`, `EditOccurrence`\n     *  and `EditSeries`.\n     * @param {boolean} isEventData It allows to decide whether the editor needs to be opened with the clicked cell details or with the\n     *  passed event details.\n     * @param {number} repeatType It opens the editor with the recurrence options based on the provided repeat type.\n     * @returns {void}\n     */\n    Schedule.prototype.openEditor = function (data, action, isEventData, repeatType) {\n        if (action === 'Add' && !isEventData) {\n            data.startTime = this.getDateTime(data.startTime);\n            data.endTime = this.getDateTime(data.endTime);\n            if (!isNullOrUndefined(data.element)) {\n                data.element = getElement(data.element);\n            }\n        }\n        else {\n            data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);\n            data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);\n        }\n        this.currentAction = action;\n        if (action !== 'Add') {\n            this.activeEventData.event = data;\n        }\n        this.eventWindow.openEditor(data, action, isEventData, repeatType);\n    };\n    /**\n     * To manually close the event editor window\n     *\n     * @function closeEditor\n     * @returns {void}\n     */\n    Schedule.prototype.closeEditor = function () {\n        if (this.eventWindow) {\n            this.eventWindow.dialogClose();\n        }\n    };\n    /**\n     * To manually open the quick info popup based on cell or event details.\n     *\n     * @param {object} data Defines the cell or event data. If the data contains valid ID, it will open event quick info popup,\n     * otherwise cell quick info popup displayed.\n     * @returns {void}\n     */\n    Schedule.prototype.openQuickInfoPopup = function (data) {\n        var _this = this;\n        if (this.currentView === 'Year' || isNullOrUndefined(data)) {\n            return;\n        }\n        if (isNullOrUndefined(data[this.eventFields.id])) {\n            if (this.currentView === 'Agenda' || this.currentView === 'MonthAgenda' || isNullOrUndefined(this.activeView)) {\n                return;\n            }\n            var cellData = {\n                startTime: this.activeCellsData.startTime = this.getDateTime(data[this.eventFields.startTime]),\n                endTime: this.activeCellsData.endTime = this.getDateTime(data[this.eventFields.endTime]),\n                isAllDay: this.activeCellsData.isAllDay =\n                    !isNullOrUndefined(data[this.eventFields.isAllDay]) ? data[this.eventFields.isAllDay] : false\n            };\n            var startTime = this.activeView.getAdjustedDate(new Date(cellData.startTime));\n            if (startTime) {\n                var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + startTime.getTime() + '\"]';\n                if (this.activeViewOptions.group.resources.length > 0 && !this.uiStateValues.isGroupAdaptive\n                    && this.resourceBase && this.eventBase) {\n                    cellData.groupIndex = this.eventBase.getGroupIndexFromEvent(data);\n                    query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + startTime.getTime() + '\"][data-group-index=\"' + cellData.groupIndex + '\"]';\n                }\n                var workCell = this.element.querySelector(query);\n                if (workCell) {\n                    workCell.focus();\n                    cellData.element = workCell;\n                    this.notify(events.cellClick, cellData);\n                }\n            }\n        }\n        else {\n            var app = this.getCurrentViewEvents().filter(function (item) {\n                return data[_this.eventFields.id] === item[_this.eventFields.id];\n            });\n            if (app.length <= 0) {\n                return;\n            }\n            var selectEvent = app[0];\n            if (data[this.eventFields.recurrenceRule]) {\n                var occurence = app.filter(function (x) {\n                    return x[_this.eventFields.startTime].getTime() === data[_this.eventFields.startTime].getTime();\n                });\n                if (occurence.length > 0) {\n                    selectEvent = occurence[0];\n                }\n            }\n            var element = this.element.querySelector('div[data-guid=\"' + selectEvent.Guid + '\"]');\n            if (element) {\n                this.eventBase.removeSelectedAppointmentClass();\n                this.eventBase.addSelectedAppointments([element], false);\n                this.activeEventData = { event: selectEvent, element: element };\n                if (this.currentView === 'Agenda' || this.currentView === 'MonthAgenda') {\n                    addClass([this.activeEventData.element], cls.AGENDA_SELECTED_CELL);\n                }\n                this.notify(events.eventClick, this.activeEventData);\n            }\n        }\n    };\n    /**\n     * To manually close the quick info popup\n     *\n     * @function closeQuickInfoPopup\n     * @returns {void}\n     */\n    Schedule.prototype.closeQuickInfoPopup = function () {\n        if (this.quickPopup) {\n            this.quickPopup.quickPopupHide(true);\n        }\n    };\n    /**\n     * Closes the tooltip.\n     * For example, when the context menu is opened for an event,\n     * the tooltip can be closed by calling this method.\n     *\n     * @function closeTooltip\n     * @returns {void}\n     */\n    Schedule.prototype.closeTooltip = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.close();\n        }\n    };\n    /**\n     * Retrieves a formatted string representing the date range of the given date collection.\n     *\n     * @param {Date[]} dates - An array of Date objects representing the date range.\n     * @returns {string} A formatted string describing the date range.\n     *   If the dates is empty, returns an empty string.\n     *   Otherwise, delegates to the active view to generate the appropriate date range text.\n     *\n     * @example\n     * // Assuming dates contains dates from May 1, 2023 to May 7, 2023\n     * const rangeText = schedule.getDateRangeText(schedule.getViewDates());\n     * // rangeText might be \"May 1 - 7, 2023\" (actual format depends on the active view)\n     *\n     * @remarks\n     * The actual format of the returned string depends on the implementation\n     * of the getDateRangeText method in the active view.\n     */\n    Schedule.prototype.getDateRangeText = function (dates) {\n        if ((isNullOrUndefined(dates) && dates.length === 0) || !this.activeView) {\n            return '';\n        }\n        return this.activeView.getDateRangeText(dates[0], dates);\n    };\n    /**\n     * Retrieves an array of dates based on the specified date collection direction.\n     *\n     * @param {NavigationDirection} type - The direction for date collection. Options are:\n     *   - 'Previous': Returns the previous date range collection from the current rendered date.\n     *   - 'Next': Returns the next date range collection from the current rendered date.\n     *   - 'Current': Returns the current rendered date collection.\n     *\n     * @returns {Date[]} An array of Date objects representing the view dates.\n     */\n    Schedule.prototype.getViewDates = function (type) {\n        if (type === void 0) { type = 'Current'; }\n        if (!this.activeView) {\n            return [];\n        }\n        switch (type) {\n            case 'Previous':\n            case 'Next':\n                return this.activeView.getRenderDates(undefined, this.activeView.getNextPreviousDate(type));\n            case 'Current':\n                return this.getCurrentViewDates();\n        }\n    };\n    /**\n     * Select the resource based on group index in mobile mode.\n     *\n     * @param {number} groupIndex Defines the resource index based on last level.\n     * @returns {void}\n     */\n    Schedule.prototype.selectResourceByIndex = function (groupIndex) {\n        if (this.resourceBase && this.uiStateValues.isGroupAdaptive) {\n            this.resourceBase.selectResourceByIndex(groupIndex);\n        }\n    };\n    /**\n     * Select the resources to the based on id.\n     *\n     * @param {string | number} id id of the resource defined in resources collection.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @returns {number} Returns the group index\n     */\n    Schedule.prototype.getIndexFromResourceId = function (id, name) {\n        if (this.resourceBase) {\n            return this.resourceBase.getIndexFromResourceId(id, name);\n        }\n        return null;\n    };\n    /**\n     * Adds the resources to the specified index.\n     *\n     * @param {Object | Object[]} resources Accepts the resource data in single or collection of data.\n     * @param {string} name Name of the resource defined in resources collection.\n     * @param {number} index Index or position where the resource should be added.\n     * @returns {void}\n     */\n    Schedule.prototype.addResource = function (resources, name, index) {\n        this.resourceBase.addResource(resources, name, index);\n    };\n    /**\n     * Removes the specified resource.\n     *\n     * @param {string | string[] | number | number[]} resourceId Specifies the resource id to be removed.\n     * @param {string} name Specifies the resource name from which the id should be referred.\n     * @returns {void}\n     */\n    Schedule.prototype.removeResource = function (resourceId, name) {\n        this.resourceBase.removeResource(resourceId, name);\n    };\n    /**\n     * Destroys the Schedule component.\n     *\n     * @function destroy\n     * @returns {void}\n     */\n    Schedule.prototype.destroy = function () {\n        if (this.eventTooltip) {\n            this.eventTooltip.destroy();\n            this.eventTooltip = null;\n        }\n        this.destroyPopups();\n        this.hideSpinner();\n        this.unWireEvents();\n        this.destroyHeaderModule();\n        if (this.eventBase) {\n            this.eventBase.destroy();\n            this.eventBase = null;\n        }\n        if (this.workCellAction) {\n            this.workCellAction.destroy();\n            this.workCellAction = null;\n        }\n        if (this.inlineModule) {\n            this.inlineModule.destroy();\n            this.inlineModule = null;\n        }\n        if (this.keyboardInteractionModule) {\n            this.keyboardInteractionModule.destroy();\n            this.keyboardInteractionModule = null;\n        }\n        if (this.scrollModule) {\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n        if (this.printModule) {\n            this.printModule.destroy();\n        }\n        if (this.activeView) {\n            this.resetTemplates();\n            this.activeView.removeEventListener();\n            this.activeView.destroy();\n            this.activeView = null;\n        }\n        if (this.scheduleTouchModule) {\n            this.scheduleTouchModule.destroy();\n            this.scheduleTouchModule = null;\n        }\n        if (this.crudModule) {\n            this.crudModule.destroy();\n            this.crudModule = null;\n        }\n        if (this.dataModule) {\n            this.dataModule.destroy();\n            this.dataModule = null;\n        }\n        _super.prototype.destroy.call(this);\n        var modules = [\n            'dayModule', 'weekModule', 'workWeekModule', 'monthModule', 'monthAgendaModule', 'yearModule', 'agendaModule',\n            'timelineViewsModule', 'timelineMonthModule', 'timelineYearModule', 'resizeModule', 'dragAndDropModule',\n            'excelExportModule', 'printModule', 'iCalendarExportModule', 'iCalendarImportModule', 'tzModule', 'eventsData',\n            'eventsProcessed', 'blockData', 'blockProcessed', 'uiStateValues', 'viewCollections', 'viewOptions', 'defaultLocale',\n            'localeObj', 'selectedElements', 'resourceCollection', 'editorTitles', 'eventFields', 'activeViewOptions',\n            'activeEventData', 'activeCellsData', 'renderModule'\n        ];\n        for (var _i = 0, modules_1 = modules; _i < modules_1.length; _i++) {\n            var module = modules_1[_i];\n            this[\"\" + module] = null;\n        }\n        util.removeChildren(this.element);\n        var removeClasses = [cls.ROOT, cls.RTL, cls.DEVICE_CLASS, cls.MULTI_DRAG];\n        if (this.cssClass) {\n            removeClasses = removeClasses.concat(this.cssClass.split(' '));\n        }\n        removeClass([this.element], removeClasses);\n    };\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Schedule.prototype, \"height\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showHeaderBar\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showTimeIndicator\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowSwiping\", void 0);\n    __decorate([\n        Collection([], ToolbarItem)\n    ], Schedule.prototype, \"toolbarItems\", void 0);\n    __decorate([\n        Property('Week')\n    ], Schedule.prototype, \"currentView\", void 0);\n    __decorate([\n        Property(['Day', 'Week', 'WorkWeek', 'Month', 'Agenda'])\n    ], Schedule.prototype, \"views\", void 0);\n    __decorate([\n        Property(new Date())\n    ], Schedule.prototype, \"selectedDate\", void 0);\n    __decorate([\n        Property(new Date(1900, 0, 1))\n    ], Schedule.prototype, \"minDate\", void 0);\n    __decorate([\n        Property(new Date(2099, 11, 31))\n    ], Schedule.prototype, \"maxDate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateFormat\", void 0);\n    __decorate([\n        Property('Gregorian')\n    ], Schedule.prototype, \"calendarMode\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showWeekend\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstDayOfWeek\", void 0);\n    __decorate([\n        Property('FirstDay')\n    ], Schedule.prototype, \"weekRule\", void 0);\n    __decorate([\n        Property([1, 2, 3, 4, 5])\n    ], Schedule.prototype, \"workDays\", void 0);\n    __decorate([\n        Property(12)\n    ], Schedule.prototype, \"monthsCount\", void 0);\n    __decorate([\n        Property('00:00')\n    ], Schedule.prototype, \"startHour\", void 0);\n    __decorate([\n        Property('24:00')\n    ], Schedule.prototype, \"endHour\", void 0);\n    __decorate([\n        Property(null)\n    ], Schedule.prototype, \"timeFormat\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"enableAllDayScroll\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"enableAdaptiveUI\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Complex({}, WorkHours)\n    ], Schedule.prototype, \"workHours\", void 0);\n    __decorate([\n        Complex({}, TimeScale)\n    ], Schedule.prototype, \"timeScale\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowKeyboardInteraction\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dateRangeTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"dayHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"monthHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cellTemplate\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"readonly\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"showQuickInfo\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowInline\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiCellSelection\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"allowMultiRowSelection\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"quickInfoOnSelectionEnd\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"showWeekNumber\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"rowAutoHeight\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowMultiDrag\", void 0);\n    __decorate([\n        Property(0)\n    ], Schedule.prototype, \"firstMonthOfYear\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"editorFooterTemplate\", void 0);\n    __decorate([\n        Complex({}, QuickInfoTemplates)\n    ], Schedule.prototype, \"quickInfoTemplates\", void 0);\n    __decorate([\n        Property(7)\n    ], Schedule.prototype, \"agendaDaysCount\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"hideEmptyAgendaDays\", void 0);\n    __decorate([\n        Property(true)\n    ], Schedule.prototype, \"enableRecurrenceValidation\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"timezone\", void 0);\n    __decorate([\n        Complex({}, EventSettings)\n    ], Schedule.prototype, \"eventSettings\", void 0);\n    __decorate([\n        Property(timezoneData)\n    ], Schedule.prototype, \"timezoneDataSource\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"resourceHeaderTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"headerIndentTemplate\", void 0);\n    __decorate([\n        Complex({}, Group)\n    ], Schedule.prototype, \"group\", void 0);\n    __decorate([\n        Collection([], Resources)\n    ], Schedule.prototype, \"resources\", void 0);\n    __decorate([\n        Collection([], HeaderRows)\n    ], Schedule.prototype, \"headerRows\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], Schedule.prototype, \"allowClipboard\", void 0);\n    __decorate([\n        Property()\n    ], Schedule.prototype, \"eventDragArea\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"cellDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"moreEventsClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"hover\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"navigating\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"renderCell\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"eventRendered\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBinding\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupOpen\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"popupClose\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"drag\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dragStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"virtualScrollStart\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"virtualScrollStop\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Schedule.prototype, \"beforePaste\", void 0);\n    Schedule = __decorate([\n        NotifyPropertyChanges\n    ], Schedule);\n    return Schedule;\n}(Component));\nexport { Schedule };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function (multiData) {\n        var _this = this;\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            if (originalElement) {\n                var indexCol_1 = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n                if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || (!isNullOrUndefined(multiData) && multiData.length > 0)) {\n                    var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                    indexCol_1 = indexCol_1.filter(function (index) { return index !== cloneIndex_1; });\n                    indexCol_1.push(this.actionObj.groupIndex);\n                    if (multiData && multiData.length > 0) {\n                        multiData.forEach(function (data) {\n                            _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);\n                        });\n                    }\n                    else {\n                        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);\n                    }\n                }\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs, isMultiSelect) {\n        if (isMultiSelect === void 0) { isMultiSelect = false; }\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        var currentAction;\n        var eventsCollection = [eventArgs.data];\n        if (isMultiSelect) {\n            eventsCollection = eventArgs.selectedData;\n        }\n        for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {\n            var eventObj = eventsCollection_1[_i];\n            var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n                parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n            if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n                +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n                this.parent.crudModule.crudObj.isCrudAction = false;\n                return;\n            }\n            if (eventObj[this.parent.eventFields.recurrenceRule]) {\n                var eveId = (eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id]);\n                if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                    eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                    currentAction = 'EditOccurrence';\n                }\n                if (this.parent.enableRecurrenceValidation\n                    && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                    return;\n                }\n            }\n            else {\n                currentAction = null;\n            }\n            if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n                this.parent.eventBase.timezoneConvert(eventObj);\n            }\n            this.parent.crudModule.saveEvent(eventObj, currentAction);\n        }\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var dateInMS = util.resetTime(date).getTime();\n        var intervalInMS = util.MS_PER_MINUTE * this.actionObj.interval;\n        dateInMS = dateInMS + Math.floor((date.getTime() - dateInMS) / intervalInMS) * intervalInMS;\n        return new Date(dateInMS);\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0,\n            leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,\n            rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date, multiData) {\n        var index = 0;\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                var startTime = this.actionObj.start;\n                var endTime = this.actionObj.end;\n                if (multiData && multiData.length > 0) {\n                    startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];\n                    endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];\n                }\n                timeElement.innerHTML = this.parent.getTimeString(startTime) + ' - ' +\n                    this.parent.getTimeString(endTime);\n            }\n            index++;\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView() || (this.actionObj.action !== 'resize' && this.parent.virtualScrollModule)) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            if (tr) {\n                originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n            }\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag' && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear' ||\n            this.parent.currentView === 'Day' || this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        removeClass(elements, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        var dynamicEle = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {\n            var cloneEle = dynamicEle_1[_i];\n            remove(cloneEle);\n        }\n        for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {\n            var cloneElement = _b[_a];\n            if (!isNullOrUndefined(cloneElement.parentNode)) {\n                remove(cloneElement);\n            }\n        }\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (this.actionObj.action === 'resize' && this.scrollEdges.right && (parent.scrollLeft + parent.offsetWidth) > parent.scrollWidth) {\n            var tdCollections = ([].slice.call(this.parent.getContentTable().querySelector('tr').children)).length - 1;\n            var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth)) /\n                this.actionObj.cellWidth);\n            xInBounds = cellIndex === tdCollections;\n        }\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function () {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        this.scrollEventArgs = e;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex < 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        addClass(elements, cls.EVENT_ACTION_CLASS);\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        removeClass(eventWrappers, cls.EVENT_ACTION_CLASS);\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicYearlyEventsRendering = function (event, isResize) {\n        if (isResize === void 0) { isResize = false; }\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var appWidth = this.actionObj.cellWidth - 7;\n        if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {\n            appWidth = this.actionObj.cellWidth * event.count;\n        }\n        if (!isResize && (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            if (eventObj[this.parent.eventFields.startTime].getTime() ===\n                eventObj[this.parent.eventFields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        if (!isResize && this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length !== 0) {\n            var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);\n            appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;\n        }\n        var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);\n        appointmentElement.setAttribute('drag', 'true');\n        addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n        setStyleAttribute(appointmentElement, {\n            'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none',\n            'position': 'absolute', 'overflow': 'hidden', 'padding': '3px'\n        });\n        if (this.actionObj.clone.style.backgroundColor !== '') {\n            setStyleAttribute(appointmentElement, { 'backgroundColor': this.actionObj.clone.style.backgroundColor });\n        }\n        var date = util.resetTime(event[this.parent.eventFields.startTime]).getTime();\n        var query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = '.' + cls.WORK_CELLS_CLASS + '[data-date=\"' + date + '\"][data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        var cellTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(cellTd)) {\n            return;\n        }\n        if (isResize) {\n            var dateHeader = cellTd.querySelector('.' + cls.DATE_HEADER_CLASS);\n            var appHeight = this.actionObj.cellHeight * event.count -\n                (dateHeader ? dateHeader.offsetHeight : 0) - 7;\n            if (this.resizeEdges.right || this.resizeEdges.left) {\n                appHeight = parseInt(this.actionObj.clone.style.height, 10);\n            }\n            setStyleAttribute(appointmentElement, { 'height': appHeight + 'px' });\n        }\n        this.renderDynamicElement(cellTd, appointmentElement, true);\n        this.actionObj.cloneElement.push(appointmentElement);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ActionBase.prototype.renderDynamicElement = function (cellTd, element, isAppointment) {\n        if (isAppointment === void 0) { isAppointment = false; }\n        if (cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS)) {\n            cellTd.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS).appendChild(element);\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(element);\n            cellTd.appendChild(wrapper);\n        }\n    };\n    ActionBase.prototype.createAppointmentElement = function (resIndex, innerText) {\n        var appointmentWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            innerHTML: innerText\n        });\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            appointmentWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        return appointmentWrapper;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ?\n                this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;\n            var resources = renderedResource.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-group-index=\\\"\" + this.actionObj.groupIndex + \"\\\"]\";\n            workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        if (this.resizeEdges.left || this.resizeEdges.right) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        var spannedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {\n            var event_1 = spannedEvents_1[_a];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], cls.CLONE_ELEMENT_CLASS);\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[parseInt(day.toString(), 10)];\n            if (cellTd) {\n                this.monthEvent.renderElement(cellTd, appointmentElement, true);\n                this.actionObj.cloneElement.push(appointmentElement);\n            }\n        }\n    };\n    ActionBase.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, Browser, EventHandler, remove, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @class */ (function (_super) {\n    __extends(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n        for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {\n            var element_1 = resizeElement_1[_i];\n            EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);\n        }\n    };\n    Resize.prototype.resizeHelper = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {\n                var cloneElement = this.createCloneElement(this.actionObj.originalElement[parseInt(i.toString(), 10)]);\n                this.actionObj.cloneElement[parseInt(i.toString(), 10)] = cloneElement;\n                if (this.actionObj.element === this.actionObj.originalElement[parseInt(i.toString(), 10)]) {\n                    this.actionObj.clone = cloneElement;\n                }\n            }\n        }\n        else {\n            if (this.actionObj.element) {\n                this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            }\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        if (e && e.type === 'touchstart' && (!this.parent.uiStateValues.isTapHold ||\n            !closest(e.target, '.' + cls.APPOINTMENT_BORDER))) {\n            return;\n        }\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.resizeEdges = {\n                left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n            };\n            _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n            var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            _this.actionObj.cellWidth = _this.parent.getElementWidth(workCell);\n            _this.actionObj.cellHeight = _this.parent.getElementHeight(workCell);\n            var hRows = _this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n            if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ['Date', 'Hour'].indexOf(hRows.slice(-1)[0]) < 0) {\n                var tr = _this.parent.getContentTable().querySelector('tr');\n                var noOfDays = 0;\n                var tdCollections = [].slice.call(tr.children);\n                for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {\n                    var td = tdCollections_1[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var trRect = tr.getBoundingClientRect();\n                _this.actionObj.cellWidth = trRect.width / noOfDays;\n                _this.actionObj.cellHeight = trRect.height;\n            }\n            var pages = _this.parent.eventBase.getPageCoordinates(e);\n            _this.actionObj.X = pages.pageX;\n            _this.actionObj.Y = pages.pageY;\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = resizeEventArgs.interval;\n            _this.actionObj.scroll = resizeEventArgs.scroll;\n            _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n            _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n            _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n            if (_this.parent.currentView === 'Month') {\n                _this.daysVariation = -1;\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            // 883565 - To fix the resizing not working issue at the last column of the timeline view\n            if (['Month', 'TimelineYear'].indexOf(_this.parent.currentView) < 0) {\n                var scrollWidth = Math.round(_this.scrollArgs.width / _this.actionObj.cellWidth) * _this.actionObj.cellWidth;\n                _this.scrollArgs.width = _this.scrollArgs.width < scrollWidth ? scrollWidth : _this.scrollArgs.width;\n            }\n            EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n            EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n        });\n    };\n    Resize.prototype.resizing = function (e) {\n        if (e && e.type === 'touchmove') {\n            e.preventDefault();\n        }\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            var doc = document.documentElement;\n            var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n            var top_1 = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            this.actionObj.pageX = pages.pageX - left;\n            this.actionObj.pageY = pages.pageY - top_1;\n        }\n        else {\n            this.actionObj.pageX = pages.pageX;\n            this.actionObj.pageY = pages.pageY;\n        }\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(event.resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n            this.monthResizing();\n            return;\n        }\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                if (parseInt(leftStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                if (parseInt(rightStyles.width, 10) < 1) {\n                    return;\n                }\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                if (parseInt(topStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                if (parseInt(bottomStyles.height, 10) < 1) {\n                    return;\n                }\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.monthResizing = function () {\n        this.removeCloneElement();\n        if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {\n            return;\n        }\n        var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        var resizeTime = this.parent.getDateFromElement(td);\n        var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)\n            || this.resizeEdges.top) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)\n            || this.resizeEdges.bottom) {\n            endTime = util.addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            if (this.parent.currentView === 'TimelineYear') {\n                this.yearEventsRendering(event_1);\n            }\n            else {\n                this.dynamicEventsRendering(event_1);\n            }\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    };\n    Resize.prototype.yearEventsRendering = function (event) {\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        var endDate = new Date(event[this.parent.eventFields.endTime]);\n        var monthDiff = 0;\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], util.addDays(endDate, -1));\n        }\n        for (var i = 0; i <= monthDiff; i++) {\n            var eventObj = void 0;\n            if (this.parent.activeViewOptions.group.resources.length === 0) {\n                eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);\n            }\n            else {\n                eventObj = extend({}, event, null, true);\n                endDate = this.resizeEdges.left || this.resizeEdges.right ? util.addDays(endDate, -1) : endDate;\n                eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;\n            }\n            this.dynamicYearlyEventsRendering(eventObj, true);\n        }\n    };\n    Resize.prototype.getMonthDiff = function (startDate, endDate) {\n        var months;\n        months = (endDate.getFullYear() - startDate.getFullYear()) * 12;\n        months -= startDate.getMonth();\n        months += endDate.getMonth();\n        return months <= 0 ? 0 : months;\n    };\n    Resize.prototype.getEventCount = function (eventObj, month) {\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.parent.eventFields.startTime];\n        var eventEnd = eventData[this.parent.eventFields.endTime];\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n        var count = 1;\n        if (eventStart.getTime() < monthStart.getTime()) {\n            eventData[this.parent.eventFields.startTime] = monthStart;\n        }\n        if (eventEnd.getTime() > monthEnd.getTime()) {\n            eventData[this.parent.eventFields.endTime] = monthEnd;\n        }\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\n            count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() -\n                eventData[this.parent.eventFields.startTime].getTime()) / util.MS_PER_DAY);\n        }\n        eventData.count = count;\n        return eventData;\n    };\n    Resize.prototype.resizeStop = function (e) {\n        var _this = this;\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionObj.action = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = this.parent.uiStateValues.isTapHold = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.isSpecificResourceEvents()) {\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute('data-group-index'), 10)]];\n                _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n            }\n            _this.saveChangedData(resizeEventArgs);\n        });\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        var headerName = this.parent.currentView;\n        var isTimelineMonth = this.parent.currentView === 'TimelineMonth';\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (isTimelineMonth && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            var tdCollections = [].slice.call(tr.children);\n            var isLastCell = false;\n            var pixelsPerMinute = this.actionObj.cellWidth / (this.parent.activeViewOptions.timeScale.interval /\n                this.parent.activeViewOptions.timeScale.slotCount);\n            var offset = parseFloat(this.parent.enableRtl ? this.actionObj.clone.style.right :\n                this.actionObj.clone.style.left);\n            offset = Math.round(offset / pixelsPerMinute) * pixelsPerMinute;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays = 0;\n                for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {\n                    var td = tdCollections_2[_i];\n                    noOfDays += parseInt(td.getAttribute('colspan'), 10);\n                }\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = Math.round(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n                if (!isLeft) {\n                    offsetValue += (this.parent.getElementWidth(this.actionObj.clone) - this.actionObj.cellWidth);\n                }\n                cellIndex = !isTimelineMonth ? Math.round(offsetValue / (this.parent.getElementWidth(tr) / noOfDays)) :\n                    Math.floor(offsetValue / Math.floor(this.parent.getElementWidth(tr) / noOfDays));\n                cellIndex = isLeft ? cellIndex : isTimelineMonth ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays) ? noOfDays - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.actionObj.cellWidth;\n                cellIndex = isLeft ? Math.floor(offset / this.actionObj.cellWidth) :\n                    Math.ceil((offset + (this.parent.getElementWidth(this.actionObj.clone) - cellWidth)) / this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        !isTimelineMonth)) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(offset / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.parent.getElementWidth(this.actionObj.clone) - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[parseInt(cellIndex.toString(), 10)].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[parseInt(cellIndex.toString(), 10)]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                if (!isLeft) {\n                    offset += this.parent.getElementWidth(this.actionObj.clone);\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offset - Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = (isLastCell || (!isLeft && spanMinutes === 0)) ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.parent.getElementWidth(this.actionObj.element) : 0) /\n                this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.parent.getElementWidth(this.actionObj.clone) - originalWidth) /\n                this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[parseInt(dayIndex.toString(), 10)]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        var isNotHourSlot = ['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n            !this.parent.activeViewOptions.timeScale.enable;\n        if (isLeft) {\n            if ((eventEnd.getTime() - resizeTime.getTime()) <= 0) {\n                resizeTime = isNotHourSlot ? util.resetTime(eventEnd) : eventStart;\n            }\n            this.actionObj.start = !isNotHourSlot ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var resizeEnd = (isNotHourSlot && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ?\n                util.addDays(resizeTime, 1) : resizeTime;\n            if (isNotHourSlot && (resizeEnd.getTime() - eventStart.getTime()) <= 0) {\n                resizeEnd = util.addDays(util.resetTime(eventStart), 1);\n            }\n            this.actionObj.end = !isNotHourSlot ? this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        if (!isTop && this.actionObj.clone.offsetTop + clnHeight >= this.parent.getContentTable().offsetHeight) {\n            clnHeight = this.parent.getContentTable().offsetHeight - this.actionObj.clone.offsetTop;\n        }\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.parent.getElementWidth(this.actionObj.element) / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.parent.getElementWidth(this.actionObj.element) :\n                Math.ceil(this.parent.getElementWidth(this.actionObj.element) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        var left = (this.parent.enableRtl) ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (Math.ceil(pageWidth / slotInterval) * slotInterval);\n            if (!isLeft) {\n                var roundedLeft = (+parseFloat(this.actionObj.element.style[this.parent.enableRtl ? 'right' : 'left'])).toFixed(1);\n                var roundedWidth = Math.round(targetWidth / slotInterval) * slotInterval;\n                if (roundedLeft !== left.toFixed(1) || roundedWidth !== targetWidth) {\n                    offsetWidth = (Math.round((left + offsetWidth) / slotInterval) * slotInterval) - left;\n                }\n            }\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        var width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.parent.getElementWidth(this.actionObj.clone) : (offsetWidth < this.actionObj.cellWidth) ? offsetWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = rightValue - (Math.ceil((this.actionObj.pageX - this.actionObj.X) / slotInterval) * slotInterval);\n                if (rightValue < 0) {\n                    rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                    width = parseInt(this.actionObj.clone.style.width, 10);\n                }\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.parent.getElementWidth(this.actionObj.clone) : width;\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.parent.getElementWidth(this.actionObj.clone))\n                        ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.parent.getElementWidth(this.actionObj.clone) &&\n                        this.parent.getElementWidth(this.actionObj.clone) === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? this.actionObj.element.offsetLeft -\n                (Math.ceil((this.actionObj.element.offsetLeft - offsetLeft) / slotInterval) * slotInterval) : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                if (isTimelineView && isLeft && (offsetLeft % slotInterval)) {\n                    offsetLeft = parseInt(this.actionObj.clone.style.left, 10);\n                    width = parseInt(this.actionObj.clone.style.width, 10);\n                }\n                else {\n                    offsetLeft = 0;\n                    width = this.parent.getElementWidth(this.actionObj.clone);\n                }\n            }\n            var cloneWidth = Math.ceil(this.parent.getElementWidth(this.actionObj.clone) / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.parent.eventBase.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;\n        var cellWidth = this.actionObj.cellWidth;\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX - cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {\n                cellWidth = 0;\n            }\n            resizeValidation = (pages.pageX + cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name\n     *\n     * @returns {string} Returns the module name..\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\nexport { Resize };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\n * Year view events render\n */\nvar YearEvent = /** @class */ (function (_super) {\n    __extends(YearEvent, _super);\n    function YearEvent(parent) {\n        var _this = _super.call(this, parent, 'day') || this;\n        _this.isResource = false;\n        return _this;\n    }\n    YearEvent.prototype.renderAppointments = function () {\n        if (this.parent.dragAndDropModule) {\n            this.parent.dragAndDropModule.setDragArea();\n        }\n        this.fields = this.parent.eventFields;\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n            var wrapper = eventWrappers_1[_i];\n            remove(wrapper);\n        }\n        this.renderedEvents = [];\n        if (this.parent.currentView === 'Year') {\n            this.yearViewEvents();\n        }\n        else {\n            this.removeCellHeight();\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                this.isResource = true;\n                this.timelineResourceEvents();\n            }\n            else {\n                this.timelineYearViewEvents();\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(events.contentReady, {});\n    };\n    YearEvent.prototype.yearViewEvents = function () {\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var queryString = \".e-month-calendar:nth-child(\" + (months.indexOf(month) + 1) + \") td.e-work-cells\";\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.activeViewOptions.firstDayOfWeek);\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.activeViewOptions.firstDayOfWeek), 1);\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n                var start = util.resetTime(new Date(startDate.getTime()));\n                var end = util.addDays(new Date(start.getTime()), 1);\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\n                if (!this.parent.isMinMaxDate(start)) {\n                    continue;\n                }\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\n                if (filterEvents.length > 0) {\n                    var workCell = workCells[parseInt(index.toString(), 10)];\n                    if (workCell) {\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\n                    }\n                }\n            }\n        }\n    };\n    YearEvent.prototype.timelineYearViewEvents = function () {\n        var _this = this;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')');\n        this.cellWidth = this.parent.getElementWidth(workCell);\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = this.parent.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var selector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.cellHeader, this.moreIndicatorHeight);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var months = this.getMonths();\n        var groupIndex = (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive) ?\n            this.parent.uiStateValues.groupIndex : undefined;\n        for (var row = 0; row < months.length; row++) {\n            var wrapper = wrapperCollection[parseInt(row.toString(), 10)];\n            var td = row + 1;\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            wrapper.appendChild(eventWrapper);\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n            var dayIndex = monthStart.getDay();\n            var isSpannedCollection = [];\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                this.renderedEvents = [];\n            }\n            while (monthStart.getTime() <= monthEnd.getTime()) {\n                var leftValue = void 0;\n                var rightValue = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    var wrapper_1 = wrapperCollection[parseInt(dayIndex.toString(), 10)];\n                    td = dayIndex + 1;\n                    eventWrapper = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                    if (!eventWrapper) {\n                        eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                        wrapper_1.appendChild(eventWrapper);\n                    }\n                    if (this.parent.enableRtl) {\n                        rightValue = row * this.cellWidth;\n                    }\n                    else {\n                        leftValue = row * this.cellWidth;\n                    }\n                }\n                else {\n                    if (this.parent.enableRtl) {\n                        rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                    else {\n                        leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth;\n                    }\n                }\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n                this.cellHeight = rowTd.offsetHeight;\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n                var resource = void 0;\n                if (this.parent.uiStateValues.isGroupAdaptive) {\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                }\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n                dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);\n                var _loop_1 = function (index, count) {\n                    var eventData = extend({}, dayEvents[parseInt(index.toString(), 10)], null, true);\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n                    var overlapIndex = this_1.getIndex(dayStart);\n                    eventData.Index = overlapIndex;\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (overlapIndex + 1)) + EVENT_GAP +\n                        this_1.moreIndicatorHeight;\n                    var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;\n                    var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));\n                    var eventsPerRow = this_1.parent.rowAutoHeight ? 1 : this_1.parent.activeViewOptions.maxEventsPerRow;\n                    var moreIndicatorCount = this_1.parent.activeViewOptions.maxEventsPerRow ? count - eventsPerRow\n                        : (count - renderedAppCount) <= 0 ? 1 : count - renderedAppCount;\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                            return eventObj.Guid === eventData.Guid;\n                        });\n                        if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {\n                            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                            this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                            return \"continue\";\n                        }\n                        else if (isRendered.length > 0 || isSpanned.length > 0) {\n                            return \"continue\";\n                        }\n                    }\n                    var enableAppRender = this_1.maxOrIndicator || (overlapIndex < eventsPerRow) ||\n                        (this_1.cellHeight > availedHeight);\n                    if (this_1.parent.rowAutoHeight || enableAppRender || this_1.cellHeight > availedHeight) {\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex);\n                        if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {\n                            this_1.updateCellHeight(rowTd, availedHeight);\n                        }\n                        isSpannedCollection.push(eventData);\n                    }\n                    else {\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n                        this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n                            eventData.MoreIndicator = true;\n                            this_1.renderedEvents.push(eventData);\n                            isSpannedCollection.push(eventData);\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\n                    _loop_1(index, count);\n                }\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    dayIndex++;\n                    this.renderedEvents = [];\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n            var tr_1 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CONTENT_TABLE_CLASS + ' tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var app = [].slice.call(ele.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n                var appTop = tr_1[parseInt(index.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP;\n                app.forEach(function (app) {\n                    var overlap = parseInt(app.getAttribute('data-index'), 10);\n                    app.style.top = appTop + (overlap * _this.eventHeight) + 'px';\n                    app.removeAttribute('data-index');\n                });\n            });\n        }\n    };\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n            if (isLeftRightResize) {\n                data.isLeft = false;\n            }\n            else {\n                data.isTop = false;\n            }\n        }\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) ||\n            (isLeftRightResize && this.isResource && (dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()))) {\n            if (isLeftRightResize) {\n                data.isRight = false;\n            }\n            else {\n                data.isBottom = false;\n            }\n        }\n        eventObj.data = data;\n    };\n    YearEvent.prototype.timelineResourceEvents = function () {\n        var _this = this;\n        var contentTable = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.cellWidth = this.parent.getElementWidth(workCell);\n        this.cellHeader = 0;\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        this.eventHeight = this.parent.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n        var selector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        this.addCellHeight(selector, this.eventHeight, EVENT_GAP, this.cellHeader, this.moreIndicatorHeight);\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] :\n            this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources :\n                this.parent.resourceBase.lastResourceLevel;\n        var months = this.getMonths();\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            for (var month = 0; month < months.length; month++) {\n                var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                for (var i = 0, len = resources.length; i < len; i++) {\n                    this.renderedEvents = [];\n                    this.renderResourceEvent(wrapperCollection[parseInt(month.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        else {\n            for (var i = 0, len = resources.length; i < len; i++) {\n                this.renderedEvents = [];\n                for (var month = 0; month < months.length; month++) {\n                    var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month, i, monthStart);\n                }\n            }\n        }\n        if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {\n            var appointments = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n            appointments.forEach(function (ele) {\n                ele.style.removeProperty('left');\n                ele.style.removeProperty('right');\n            });\n            var appContainer = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n            var conTable_1 = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            var tr_2 = [].slice.call(conTable_1.querySelectorAll('tbody tr'));\n            appContainer.forEach(function (ele, index) {\n                var appWrapper = [].slice.call(ele.children);\n                var row = tr_2[parseInt(index.toString(), 10)];\n                appWrapper.forEach(function (appWrap, cellIndex) {\n                    var td = row.querySelector(\"td:nth-child(\" + (cellIndex + 1) + \")\");\n                    var app = [].slice.call(appWrap.children);\n                    var width = _this.parent.getElementWidth(td);\n                    var left = td.offsetLeft;\n                    if (_this.parent.enableRtl) {\n                        var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.right = right_1 + 'px';\n                        });\n                    }\n                    else {\n                        app.forEach(function (app) {\n                            app.style.width = Math.floor(parseInt(app.style.width, 10) / width) * width + 'px';\n                            app.style.left = left + 'px';\n                        });\n                    }\n                });\n            });\n        }\n    };\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index, monthStart) {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n        wrapper.appendChild(eventWrapper);\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n        this.cellHeight = td.offsetHeight;\n        this.groupOrder = resource.groupOrder;\n        var isSpannedCollection = [];\n        var _loop_2 = function (a) {\n            var data = eventDatas[parseInt(a.toString(), 10)];\n            var overlapIndex = void 0;\n            var eventData = extend({}, data, null, true);\n            if (this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var eventObj = this_2.isSpannedEvent(eventData, monthStart);\n                overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            else {\n                overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);\n                eventData.Index = overlapIndex;\n            }\n            var availedHeight = this_2.cellHeader + (this_2.eventHeight * (a + 1)) + EVENT_GAP + this_2.moreIndicatorHeight;\n            var leftValue = (this_2.parent.activeViewOptions.orientation === 'Vertical') ?\n                month * this_2.cellWidth : index * this_2.cellWidth;\n            if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {\n                return { value: void 0 };\n            }\n            if (this_2.parent.activeViewOptions.orientation === 'Vertical' && this_2.parent.activeViewOptions.group.resources.length > 0) {\n                var isRendered = this_2.renderedEvents.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                var isSpanned = isSpannedCollection.filter(function (eventObj) {\n                    return eventObj.Guid === eventData.Guid;\n                });\n                if (isRendered.length > 0 || isSpanned.length > 0) {\n                    return \"continue\";\n                }\n            }\n            if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {\n                this_2.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, monthStart, index);\n                this_2.updateCellHeight(td, availedHeight);\n                isSpannedCollection.push(eventData);\n            }\n            else {\n                var moreIndex = this_2.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n                this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n                if (this_2.parent.activeViewOptions.orientation === 'Horizontal') {\n                    for (var i = index; i < eventDatas.length; i++) {\n                        this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], { Index: overlapIndex + i }, true));\n                    }\n                }\n                return \"break\";\n            }\n        };\n        var this_2 = this;\n        for (var a = 0; a < eventDatas.length; a++) {\n            var state_1 = _loop_2(a);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n            if (state_1 === \"break\")\n                break;\n        }\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, monthDate, rowIndex) {\n        var _this = this;\n        var eventObj = this.isSpannedEvent(eventData, monthDate);\n        var wrap = this.createEventElement(eventObj);\n        var width;\n        var index;\n        if (eventObj.isSpanned.count === 1) {\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\n        }\n        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n            return;\n        }\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            index = row + 1;\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n                eventObj.isSpanned.count = 1;\n            }\n            width = eventObj.isSpanned.count * this.cellWidth;\n        }\n        else {\n            index = rowIndex + 1;\n            width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;\n        }\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\n        setStyleAttribute(wrap, {\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\n        });\n        if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === 'Vertical') {\n            wrap.setAttribute('data-index', eventObj.Index.toString());\n        }\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                wrapper.appendChild(wrap);\n                _this.wireAppointmentEvents(wrap, eventObj);\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if (_this.parent.activeViewOptions.orientation === 'Vertical') {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n                else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal'\n                    || !eventObj.isSpanned.isRight) {\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\n                }\n            }\n        });\n    };\n    // eslint-disable-next-line max-len\n    YearEvent.prototype.renderMoreIndicator = function (wrapper, count, startDate, row, left, right, index) {\n        if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date=\"' + startDate.getTime() + '\"]')) {\n            return;\n        }\n        var endDate;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n        }\n        else {\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\n        }\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\n        if (!isNullOrUndefined(index)) {\n            moreIndicator.setAttribute('data-group-index', index.toString());\n        }\n        wrapper.appendChild(moreIndicator);\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n    };\n    YearEvent.prototype.createEventElement = function (record) {\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventWrapper = createElement('div', {\n            className: cls.APPOINTMENT_CLASS,\n            attrs: {\n                'data-id': 'Appointment_' + record[this.fields.id],\n                'data-guid': record.Guid,\n                'role': 'button', 'tabindex': '0',\n                'aria-disabled': this.parent.eventBase.getReadonlyAttribute(record),\n                'aria-label': this.parent.getAnnouncementString(record)\n            }\n        });\n        if (this.cssClass) {\n            addClass([eventWrapper], this.cssClass);\n        }\n        if (record[this.fields.isReadonly]) {\n            addClass([eventWrapper], cls.READ_ONLY);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resIndex = this.getGroupIndexFromEvent(record);\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\n        }\n        var templateElement = [];\n        var eventObj = extend({}, record, null, true);\n        if (this.parent.activeViewOptions.eventTemplate) {\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n            templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, 'eventTemplate', templateId, false, undefined, undefined, this.parent.root);\n        }\n        else {\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\n            var subjectEle = createElement('div', {\n                className: cls.SUBJECT_CLASS,\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\n            });\n            var startTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n            });\n            var endTimeEle = createElement('div', {\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n            });\n            addClass([subjectEle], 'e-text-center');\n            if (record[this.fields.isAllDay]) {\n                templateElement = [subjectEle];\n            }\n            else if (!eventObj.isLeft && !eventObj.isRight) {\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\n            }\n            else {\n                if (!eventObj.isLeft) {\n                    templateElement.push(startTimeEle);\n                }\n                templateElement.push(subjectEle);\n                if (!eventObj.isRight) {\n                    templateElement.push(endTimeEle);\n                }\n            }\n        }\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\n        append(templateElement, appointmentDetails);\n        eventWrapper.appendChild(appointmentDetails);\n        this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n        return eventWrapper;\n    };\n    YearEvent.prototype.isSpannedEvent = function (eventObj, monthDate) {\n        var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);\n        var monthEnd = util.addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);\n        var eventData = extend({}, eventObj, null, true);\n        var eventStart = eventData[this.fields.startTime];\n        var eventEnd = eventData[this.fields.endTime];\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\n        var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);\n        var yearEnd = util.addMonths(yearStart, this.parent.monthsCount);\n        if (this.isResource) {\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n            this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);\n            var originalStartTime = eventData[this.fields.startTime];\n            var originalEndTime = new Date(eventData[this.fields.endTime] - 1);\n            isSpanned.count = (originalEndTime.getMonth() - originalStartTime.getMonth()) +\n                (this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear())) + 1;\n        }\n        else {\n            this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);\n            if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n                var end = util.resetTime(eventData[this.fields.endTime]).getTime();\n                var start = util.resetTime(eventData[this.fields.startTime]).getTime();\n                if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {\n                    end = util.addDays(new Date(end), -1).getTime();\n                }\n                isSpanned.count = Math.round((end - start) / util.MS_PER_DAY) + 1;\n            }\n        }\n        eventData.isSpanned = isSpanned;\n        if (util.resetTime(eventStart).getTime() < util.resetTime(this.parent.minDate).getTime()) {\n            eventData[this.fields.startTime] = this.parent.minDate;\n        }\n        if (util.resetTime(eventEnd).getTime() > util.resetTime(this.parent.maxDate).getTime()) {\n            eventData[this.fields.endTime] = this.parent.maxDate;\n        }\n        return eventData;\n    };\n    YearEvent.prototype.updateSpannedEventDetails = function (eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {\n        if (eventStart.getTime() < viewStart.getTime()) {\n            eventObj[this.fields.startTime] = viewStart;\n            isSpanned.isLeft = true;\n        }\n        if (eventEnd.getTime() > viewEnd.getTime()) {\n            eventObj[this.fields.endTime] = viewEnd;\n            isSpanned.isRight = true;\n        }\n    };\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n        var appointmentsList = [];\n        var dateStart;\n        var dateEnd;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n        }\n        else {\n            if (this.parent.rowAutoHeight) {\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n            }\n            else {\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n            }\n        }\n        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {\n            var app = appointments_1[_i];\n            var appStart = new Date(app[this.fields.startTime].getTime());\n            var appEnd = new Date(app[this.fields.endTime].getTime());\n            var timeCondition = app[this.fields.isAllDay] ? util.resetTime(appEnd).getTime() > dateStart :\n                util.resetTime(appEnd).getTime() >= dateStart;\n            if (((util.resetTime(appStart).getTime() <= dateStart) && (timeCondition)) ||\n                (util.resetTime(appStart).getTime() >= dateStart) && (util.resetTime(appEnd).getTime() <= dateEnd)) {\n                appointmentsList.push(app);\n            }\n            else if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() >= dateEnd) {\n                    appointmentsList.push(app);\n                }\n            }\n        }\n        return appointmentsList;\n    };\n    YearEvent.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    YearEvent.prototype.removeCellHeight = function () {\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            row.firstElementChild.style.height = '';\n        }\n    };\n    YearEvent.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.parent = null;\n    };\n    return YearEvent;\n}(TimelineEvent));\nexport { YearEvent };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { createElement, closest, Draggable, extend, formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, remove, removeClass, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { YearEvent } from '../event-renderer/year';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport * as cls from '../base/css-constant';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nvar MINUTES_PER_DAY = 1440;\n/**\n * Schedule events drag actions\n */\nvar DragAndDrop = /** @class */ (function (_super) {\n    __extends(DragAndDrop, _super);\n    function DragAndDrop() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.widthUptoCursorPoint = 0;\n        _this.heightUptoCursorPoint = 0;\n        _this.cursorPointIndex = 0;\n        _this.isHeaderRows = false;\n        _this.isTimelineDayProcess = false;\n        _this.widthPerMinute = 0;\n        _this.heightPerMinute = 0;\n        _this.minDiff = 0;\n        _this.isStepDragging = false;\n        _this.isMorePopupOpened = false;\n        _this.isAllDayDrag = false;\n        _this.isMultiSelect = false;\n        _this.multiData = [];\n        _this.updatedData = [];\n        _this.swagData = [];\n        _this.startTime = 0;\n        _this.isAllDayTarget = false;\n        _this.targetTd = null;\n        _this.isCursorAhead = false;\n        _this.enableCurrentViewDrag = false;\n        _this.isPreventMultiDrag = false;\n        _this.slotsUptoCursor = -1;\n        _this.eleTop = 0;\n        return _this;\n    }\n    DragAndDrop.prototype.wireDragEvent = function (element) {\n        var isVerticalView = ['Day', 'Week', 'WorkWeek'].indexOf(this.parent.currentView) > -1;\n        new Draggable(element, {\n            abort: '.' + cls.EVENT_RESIZE_CLASS,\n            clone: true,\n            isDragScroll: true,\n            enableTailMode: (this.parent.eventDragArea || isVerticalView) ? true : false,\n            cursorAt: (this.parent.eventDragArea) ? { left: -20, top: -20 } : { left: 0, top: 0 },\n            dragArea: this.dragArea,\n            dragStart: this.dragStart.bind(this),\n            drag: this.drag.bind(this),\n            dragStop: this.dragStop.bind(this),\n            enableAutoScroll: false,\n            helper: this.dragHelper.bind(this),\n            queryPositionInfo: this.dragPosition.bind(this)\n        });\n    };\n    DragAndDrop.prototype.setDragArea = function () {\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        this.dragArea = this.parent.eventDragArea && dragElement ? dragElement :\n            this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n    };\n    DragAndDrop.prototype.dragHelper = function (e) {\n        var _this = this;\n        if (e.sender && e.sender.type === 'touchmove' && (!this.parent.uiStateValues.isTapHold ||\n            !e.element.classList.contains(cls.APPOINTMENT_BORDER))) {\n            return null;\n        }\n        this.setDragActionDefaultValues();\n        this.actionObj.element = e.element;\n        this.eleTop = parseFloat(this.actionObj.element.style.top);\n        this.slotsUptoCursor = -1;\n        this.actionObj.action = 'drag';\n        var elements = [];\n        if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 ||\n            (this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1)) {\n            elements = [e.element];\n        }\n        else {\n            elements = this.parent.selectedElements;\n            this.isMultiSelect = true;\n        }\n        elements.forEach(function (ele) {\n            var cloneElement = _this.createCloneElement(ele);\n            if (ele.getAttribute('data-guid') === _this.actionObj.element.getAttribute('data-guid')) {\n                _this.actionObj.clone = cloneElement;\n                if (!_this.parent.eventDragArea && _this.parent.currentView !== 'Month' &&\n                    _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() &&\n                    !_this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    setStyleAttribute(_this.actionObj.clone, { cursor: 'move', left: '0%', right: '0%', width: '100%' });\n                }\n                _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);\n            }\n            _this.actionObj.cloneElement.push(cloneElement);\n            _this.actionObj.originalElement.push(ele);\n        });\n        return this.actionObj.clone;\n    };\n    DragAndDrop.prototype.dragPosition = function (e) {\n        if (this.parent.eventDragArea) {\n            return { left: e.left, top: e.top };\n        }\n        var cellHeight = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var leftValue = formatUnit(0);\n        if (this.parent.currentView === 'Month') {\n            leftValue = e.left;\n        }\n        var cloneRight;\n        if (this.isStepDragging) {\n            cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;\n        }\n        else {\n            cloneRight = this.actionObj.clone.getBoundingClientRect().right;\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var contentWrapRight = dragArea.getBoundingClientRect().right;\n        if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear' && !this.parent.enableRtl &&\n            this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {\n            this.isCursorAhead = true;\n        }\n        if (this.parent.activeView.isTimelineView()) {\n            leftValue = formatUnit(this.actionObj.clone.offsetLeft);\n        }\n        var topValue;\n        if ((this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable ||\n            (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n                this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)))) {\n            topValue = formatUnit(this.actionObj.clone.offsetTop);\n        }\n        else if (this.parent.currentView === 'Month') {\n            topValue = formatUnit(0);\n        }\n        else if (this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n            topValue = formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop);\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),\n                right: this.parent.enableRtl && formatUnit(0)\n            });\n        }\n        else {\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                !this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                setStyleAttribute(this.actionObj.clone, {\n                    height: formatUnit(this.actionObj.cellHeight),\n                    width: formatUnit(this.actionObj.cellWidth - 1),\n                    pointerEvents: 'none'\n                });\n            }\n            var top_1 = parseInt(e.top, 10);\n            top_1 = top_1 < 0 ? 0 : top_1;\n            if (this.slotsUptoCursor < 0) {\n                var cellsCountUptoCursor = Math.floor(top_1 / cellHeight);\n                var cellsCountUptoEleTop = Math.floor(this.eleTop / cellHeight);\n                this.slotsUptoCursor = cellsCountUptoCursor - cellsCountUptoEleTop;\n            }\n            top_1 = (Math.floor((top_1 + 1) / cellHeight) - this.slotsUptoCursor) * cellHeight;\n            topValue = formatUnit(top_1 < 0 ? 0 : top_1);\n            var scrollHeight = this.parent.element.querySelector('.e-content-wrap').scrollHeight;\n            var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;\n            if (cloneBottom > scrollHeight) {\n                topValue = (parseInt(topValue, 10) - (cloneBottom - scrollHeight)) + 'px';\n            }\n            if (this.isPreventMultiDrag) {\n                topValue = formatUnit(this.actionObj.clone.offsetTop);\n            }\n        }\n        return { left: leftValue, top: topValue };\n    };\n    DragAndDrop.prototype.setDragActionDefaultValues = function () {\n        this.actionObj.action = 'drag';\n        this.actionObj.isAllDay = null;\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n        this.actionObj.cellWidth = workCell.offsetWidth;\n        this.actionObj.cellHeight = workCell.offsetHeight;\n    };\n    DragAndDrop.prototype.dragStart = function (e) {\n        var _this = this;\n        var eventGuid = this.actionObj.element.getAttribute('data-guid');\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        if (!isNullOrUndefined(eventObj)) {\n            this.startTime = eventObj[this.parent.eventFields.startTime].getTime();\n        }\n        var dragArgs = {\n            cancel: false,\n            data: eventObj,\n            selectedData: this.getSelectedData(),\n            event: e,\n            excludeSelectors: null,\n            element: this.actionObj.element,\n            interval: this.actionObj.interval,\n            navigation: { enable: false, timeDelay: 2000 },\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(events.dragStart, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel || (!isNullOrUndefined(_this.actionObj.element) &&\n                isNullOrUndefined(_this.actionObj.element.parentElement))) {\n                var dragObj = _this.actionObj.element.ej2_instances[0];\n                if (!isNullOrUndefined(dragObj)) {\n                    dragObj.intDestroy(e.event);\n                }\n                _this.actionObj.action = '';\n                _this.removeCloneElementClasses();\n                _this.removeCloneElement();\n                return;\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];\n            _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = dragEventArgs.interval;\n            _this.actionObj.navigation = dragEventArgs.navigation;\n            _this.actionObj.scroll = dragEventArgs.scroll;\n            _this.enableCurrentViewDrag = dragArgs.dragWithinRange && !dragArgs.navigation.enable && _this.parent.allowMultiDrag;\n            _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            _this.widthPerMinute = (_this.actionObj.cellWidth / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.heightPerMinute = (_this.actionObj.cellHeight / _this.actionObj.slotInterval) * _this.actionObj.interval;\n            _this.widthUptoCursorPoint = 0;\n            _this.heightUptoCursorPoint = 0;\n            _this.cursorPointIndex = -1;\n            _this.isHeaderRows = false;\n            _this.isTimelineDayProcess = false;\n            _this.minDiff = 0;\n            _this.isMorePopupOpened = false;\n            _this.daysVariation = -1;\n            _this.isAllDayTarget = _this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n            if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== 'TimelineYear') {\n                if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) &&\n                    _this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n                    _this.isMorePopupOpened = true;\n                }\n                _this.actionObj.pageX = e.event.pageX;\n                var rows = _this.parent.activeViewOptions.headerRows;\n                _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== 'Hour' &&\n                    rows[rows.length - 1].option !== 'Date';\n                _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows ||\n                    _this.parent.currentView === 'TimelineMonth' || (rows.length > 0 && rows[rows.length - 1].option === 'Date');\n                _this.isStepDragging = !_this.isTimelineDayProcess && (_this.actionObj.slotInterval !== _this.actionObj.interval);\n                if (_this.isTimelineDayProcess) {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'day');\n                }\n                else {\n                    _this.timelineEventModule = new TimelineEvent(_this.parent, 'hour');\n                }\n            }\n            if (_this.parent.currentView === 'TimelineYear') {\n                _this.yearEvent = new YearEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Month') {\n                _this.startTime = util.resetTime(new Date(_this.startTime)).getTime();\n                _this.updateOriginalElement(_this.actionObj.clone);\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            if (_this.parent.currentView === 'Day' || _this.parent.currentView === 'Week' || _this.parent.currentView === 'WorkWeek') {\n                _this.verticalEvent = new VerticalEvent(_this.parent);\n                _this.verticalEvent.initializeValues();\n                var splitEvents = _this.splitEvent(_this.actionObj.event);\n                splitEvents.forEach(function (event) {\n                    var query = \".e-day-wrapper[data-date=\\\"\" + util.resetTime(event[_this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n                    if (_this.parent.activeViewOptions.group.resources.length > 0) {\n                        query = query.concat('[data-group-index = \"' + _this.actionObj.groupIndex + '\"]');\n                    }\n                    var appWrap = _this.parent.element.querySelector(query);\n                    if (appWrap) {\n                        var appEle = appWrap.querySelector('[data-id=\"' + _this.actionObj.clone.getAttribute('data-id') + '\"]');\n                        if (appEle) {\n                            addClass([appEle], cls.EVENT_ACTION_CLASS);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    DragAndDrop.prototype.getSelectedData = function () {\n        if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {\n            for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {\n                var element = _a[_i];\n                var eventGuid = element.getAttribute('data-guid');\n                var data = this.parent.eventBase.getEventByGuid(eventGuid);\n                this.multiData.push(extend({}, data, null, true));\n            }\n        }\n        return this.multiData;\n    };\n    DragAndDrop.prototype.drag = function (e) {\n        if (e.event && e.event.type === 'touchmove') {\n            e.event.preventDefault();\n        }\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide(true);\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList &&\n            e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventArgs = this.parent.eventBase.getPageCoordinates(e);\n        this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;\n        this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;\n        this.actionObj.target = e.target;\n        this.widthUptoCursorPoint = (this.widthUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute)) *\n                this.widthPerMinute : this.widthUptoCursorPoint;\n        this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;\n        this.heightUptoCursorPoint = (this.heightUptoCursorPoint === 0) ?\n            Math.ceil((Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute)) *\n                this.heightPerMinute : this.heightUptoCursorPoint;\n        this.isAllDayDrag = (this.parent.activeViewOptions.timeScale.enable) ?\n            this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) :\n            this.actionObj.event[this.parent.eventFields.isAllDay];\n        if (this.isStepDragging && this.minDiff === 0) {\n            this.calculateMinutesDiff(eventObj);\n        }\n        if ((this.parent.currentView === 'Month' || this.isAllDayDrag) && this.daysVariation < 0) {\n            var date = this.parent.getDateFromElement(this.actionObj.target);\n            if (!isNullOrUndefined(date)) {\n                var currentDate = util.resetTime(date);\n                var startDate = util.resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));\n                this.daysVariation = (currentDate.getTime() - startDate.getTime()) / util.MS_PER_DAY;\n            }\n            else {\n                this.daysVariation = 0;\n            }\n        }\n        else {\n            this.daysVariation = 0;\n        }\n        if (this.parent.eventDragArea) {\n            var targetElement = eventArgs.target;\n            this.actionObj.clone.style.top = formatUnit(targetElement.offsetTop);\n            this.actionObj.clone.style.left = formatUnit(targetElement.offsetLeft);\n            var currentTarget = closest(targetElement, '.' + cls.ROOT);\n            if (!currentTarget) {\n                this.actionObj.clone.style.height = '';\n                this.actionObj.clone.style.width = '';\n            }\n            else {\n                if (!(this.parent.currentView === 'Week' || this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'Day')) {\n                    this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);\n                }\n            }\n        }\n        this.updateScrollPosition(e);\n        this.updateNavigatingPosition(e);\n        this.updateDraggingDateTime(e);\n        var dragArgs = {\n            data: eventObj, event: e, element: this.actionObj.element, startTime: this.actionObj.start,\n            endTime: this.actionObj.end, selectedData: this.updatedData\n        };\n        if (this.parent.group.resources.length > 0) {\n            dragArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(events.drag, dragArgs);\n    };\n    DragAndDrop.prototype.calculateMinutesDiff = function (eventObj) {\n        if (this.parent.enableRtl) {\n            this.minDiff =\n                ((this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute) * this.actionObj.interval;\n        }\n        else {\n            this.minDiff = (this.widthUptoCursorPoint / this.widthPerMinute) * this.actionObj.interval;\n        }\n        var startDate = eventObj[this.parent.eventFields.startTime];\n        var startTime = this.parent.activeView.renderDates[0];\n        var startEndHours = util.getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());\n        if (startEndHours.startHour.getTime() > startDate.getTime()) {\n            this.minDiff = this.minDiff + ((startEndHours.startHour.getTime() - startDate.getTime()) / util.MS_PER_MINUTE);\n        }\n    };\n    DragAndDrop.prototype.dragStop = function (e) {\n        var _this = this;\n        this.isCursorAhead = false;\n        this.isPreventMultiDrag = false;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        clearInterval(this.actionObj.navigationInterval);\n        this.actionObj.navigationInterval = null;\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = this.parent.uiStateValues.isTapHold = false;\n        if (this.isAllowDrop(e)) {\n            return;\n        }\n        var target = (e.target.classList && (!e.target.classList.contains('e-work-cells') && this.parent.cellTemplate) ?\n            closest(e.target, '.e-work-cells') : e.target);\n        var dragArgs = {\n            cancel: false, data: this.getChangedData(this.updatedData), selectedData: this.updatedData,\n            event: e, element: this.actionObj.element, target: target\n        };\n        this.actionObj.action = null;\n        this.parent.trigger(events.dragStop, dragArgs, function (dragEventArgs) {\n            if (dragEventArgs.cancel) {\n                return;\n            }\n            if (_this.parent.isSpecificResourceEvents()) {\n                _this.parent.crudModule.crudObj.isCrudAction = true;\n                _this.parent.crudModule.crudObj.sourceEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute('data-group-index'), 10)]];\n                var currentGroupIndex = parseInt(dragArgs.target.getAttribute('data-group-index'), 10) || _this.actionObj.groupIndex;\n                _this.parent.crudModule.crudObj.targetEvent =\n                    [_this.parent.resourceBase.lastResourceLevel[parseInt(currentGroupIndex.toString(), 10)]];\n            }\n            _this.saveChangedData(dragEventArgs, _this.isMultiSelect);\n        });\n        this.updatedData = [];\n        this.multiData = [];\n        this.isMultiSelect = false;\n        this.parent.selectedElements = [];\n    };\n    DragAndDrop.prototype.updateNavigatingPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.navigation.enable) {\n            var currentDate_1 = this.parent.getCurrentTime();\n            if (isNullOrUndefined(this.actionObj.navigationInterval)) {\n                this.actionObj.navigationInterval = window.setInterval(function () {\n                    if (currentDate_1) {\n                        var crtDate = _this.parent.getCurrentTime();\n                        var end = crtDate.getSeconds();\n                        var start = currentDate_1.getSeconds() + (_this.actionObj.navigation.timeDelay / 1000);\n                        start = (start >= 60) ? start - 60 : start;\n                        if (start === end) {\n                            currentDate_1 = _this.parent.getCurrentTime();\n                            _this.viewNavigation(e);\n                            _this.updateDraggingDateTime(e);\n                        }\n                    }\n                }, this.actionObj.navigation.timeDelay);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateDraggingDateTime = function (e) {\n        if (!isNullOrUndefined(this.actionObj.clone.offsetParent) &&\n            this.actionObj.clone.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS)) {\n            this.morePopupEventDragging(e);\n        }\n        else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== 'TimelineYear') {\n            this.timelineEventModule.dateRender = this.parent.activeView.renderDates;\n            this.timelineEventModule.cellWidth = this.actionObj.cellWidth;\n            this.timelineEventModule.getSlotDates();\n            this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth :\n                this.parent.getElementWidth(this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS));\n            this.calculateTimelineTime(e);\n        }\n        else {\n            if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineYear') {\n                this.calculateVerticalDate(e);\n            }\n            else {\n                this.calculateVerticalTime(e);\n            }\n        }\n    };\n    DragAndDrop.prototype.navigationWrapper = function () {\n        if (!this.parent.activeView.isTimelineView()) {\n            if (this.parent.currentView === 'Month' || !this.parent.timeScale.enable) {\n                var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                this.actionObj.index = (this.parent.activeView.renderDates.length < this.actionObj.index) ?\n                    this.parent.activeView.renderDates.length - 1 : this.actionObj.index;\n                var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!targetWrapper) {\n                    targetWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);\n                }\n                targetWrapper.appendChild(this.actionObj.clone);\n            }\n            else {\n                var wrapperClass = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) ?\n                    '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n                this.parent.element.querySelectorAll(wrapperClass)\n                    .item(this.actionObj.index).appendChild(this.actionObj.clone);\n                if (wrapperClass === '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS) {\n                    var elementHeight = this.getAllDayEventHeight();\n                    var event_2 = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n                    if (event_2[0].offsetHeight < elementHeight) {\n                        for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {\n                            var e = event_1[_i];\n                            e.style.height = ((elementHeight + 2) / 12) + 'em';\n                        }\n                    }\n                    this.actionObj.clone.style.height = formatUnit(elementHeight);\n                }\n                this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);\n            }\n        }\n        else {\n            var outWrapper = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                outWrapper = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(this.actionObj.index);\n            }\n            else {\n                outWrapper = this.parent.element.querySelector('.' + cls.APPOINTMENT_CONTAINER_CLASS);\n            }\n            if (!isNullOrUndefined(outWrapper)) {\n                var tarWrapper_1 = outWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n                if (!tarWrapper_1) {\n                    tarWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                    outWrapper.appendChild(tarWrapper_1);\n                }\n                this.actionObj.cloneElement.forEach(function (ele) {\n                    tarWrapper_1.appendChild(ele);\n                });\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.viewNavigation = function (e) {\n        var navigationType;\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (dragArea && ((!this.scrollEdges.top && !this.scrollEdges.bottom) ||\n            closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {\n            if ((dragArea.scrollLeft === 0) &&\n                (Math.round(this.actionObj.X) <=\n                    Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'Next' : 'Previous';\n            }\n            else if ((Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth) &&\n                (Math.round(this.actionObj.X) >=\n                    Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset))) {\n                navigationType = this.parent.enableRtl ? 'Previous' : 'Next';\n            }\n            if (navigationType) {\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));\n            }\n        }\n    };\n    DragAndDrop.prototype.morePopupEventDragging = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'td')))) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var td = closest(e.target, 'td');\n        if (this.parent.currentView === 'TimelineYear' && (!td.classList.contains(cls.WORK_CELLS_CLASS) || td.classList.contains(cls.OTHERMONTH_CLASS))) {\n            return;\n        }\n        var dragStart = this.parent.getDateFromElement(td);\n        var dragEnd = new Date(dragStart.getTime());\n        dragEnd.setMilliseconds(eventDuration);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        this.actionObj.start = new Date(dragStart.getTime());\n        this.actionObj.end = new Date(dragEnd.getTime());\n        this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);\n        this.actionObj.clone.style.left = formatUnit(td.offsetLeft);\n        this.actionObj.clone.style.width = formatUnit(td.offsetWidth);\n        var eventContainer = td;\n        var eventWrapper;\n        if (this.parent.activeView.isTimelineView()) {\n            var rowIndex = closest(td, 'tr').rowIndex;\n            eventContainer = this.parent.element.querySelectorAll('.e-appointment-container').item(rowIndex);\n        }\n        eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper);\n    };\n    DragAndDrop.prototype.calculateVerticalTime = function (e) {\n        var _this = this;\n        if (isNullOrUndefined(this.actionObj.target) ||\n            (this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, 'tr'))) ||\n            (!isNullOrUndefined(closest(this.actionObj.target, 'td')) && !(closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS)) &&\n                !(closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS)))) {\n            return;\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.swapDragging(e);\n        }\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventStart = eventObj[this.parent.eventFields.startTime];\n        var eventEnd = eventObj[this.parent.eventFields.endTime];\n        var eventDuration = util.getUniversalTime(eventEnd) - util.getUniversalTime(eventStart);\n        var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight)\n            * this.actionObj.cellHeight;\n        offsetTop = offsetTop < 0 ? 0 : offsetTop;\n        if (this.scrollEdges.top || this.scrollEdges.bottom) {\n            offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint +\n                this.actionObj.cellHeight + window.pageYOffset :\n                (dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset) +\n                    (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);\n            offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;\n            if (dragArea.scrollTop > 0 && offsetTop < dragArea.scrollHeight) {\n                this.actionObj.clone.style.top = formatUnit(offsetTop);\n            }\n        }\n        var rowIndex = (this.parent.activeViewOptions.timeScale.enable) ? (offsetTop / this.actionObj.cellHeight) : 0;\n        var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;\n        var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;\n        var tr;\n        if (this.isAllDayDrag) {\n            tr = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS);\n        }\n        else {\n            var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll('tr'));\n            tr = trCollections[parseInt(rowIndex.toString(), 10)];\n        }\n        var index;\n        if (!isNullOrUndefined(closest(this.actionObj.target, 'td')) && (closest(this.actionObj.target, 'td').classList.contains(cls.WORK_CELLS_CLASS) ||\n            closest(this.actionObj.target, 'td').classList.contains(cls.ALLDAY_CELLS_CLASS))) {\n            index = closest(this.actionObj.target, 'td').cellIndex;\n        }\n        var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, 'td').cellIndex : index;\n        this.actionObj.index = colIndex;\n        if (isNullOrUndefined(tr)) {\n            return;\n        }\n        var td = tr.children[parseInt(colIndex.toString(), 10)];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n        }\n        var dragStart;\n        var dragEnd;\n        if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {\n            if (!this.enableCurrentViewDrag || this.multiData.length === 0) {\n                this.appendCloneElement(this.getEventWrapper(colIndex));\n            }\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setMinutes(dragStart.getMinutes() + (diffInMinutes / heightPerMinute));\n            dragEnd = new Date(dragStart.getTime());\n            if (this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);\n            }\n            else {\n                dragEnd.setMilliseconds(eventDuration);\n            }\n        }\n        else {\n            dragStart = this.parent.getDateFromElement(td);\n            dragStart.setDate(dragStart.getDate() - this.daysVariation);\n            dragStart.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            dragEnd = new Date(dragStart.getTime());\n            dragEnd.setMilliseconds(eventDuration);\n            if (!this.actionObj.element.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS) &&\n                this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                dragEnd = util.addDays(util.resetTime(dragEnd), 1);\n            }\n            var index_1 = this.parent.activeViewOptions.group.byDate || (this.parent.virtualScrollModule &&\n                !this.parent.activeViewOptions.timeScale.enable) ? colIndex : undefined;\n            this.updateAllDayEvents(dragStart, dragEnd, index_1);\n        }\n        this.actionObj.start = new Date(+dragStart);\n        this.actionObj.end = new Date(+dragEnd);\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll('.e-dynamic-clone'));\n        for (var _i = 0, dynamicWrappers_1 = dynamicWrappers; _i < dynamicWrappers_1.length; _i++) {\n            var wrapper = dynamicWrappers_1[_i];\n            remove(wrapper);\n        }\n        if (this.multiData.length > 0) {\n            if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {\n                var targetCellTime_1 = parseInt((closest(this.actionObj.target, 'td')).getAttribute('data-date'), 10);\n                this.multiData.forEach(function (data) {\n                    _this.swagData.push(extend({}, data, null, true));\n                    if (data[_this.parent.eventFields.isAllDay]) {\n                        data[_this.parent.eventFields.startTime] =\n                            new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));\n                        var startTime = new Date(data[_this.parent.eventFields.startTime]);\n                        var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));\n                        data[_this.parent.eventFields.endTime] = endTime;\n                        data[_this.parent.eventFields.isAllDay] = false;\n                    }\n                });\n                this.startTime = targetCellTime_1;\n            }\n            if (this.isAllDayTarget && this.isAllDayDrag &&\n                !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {\n                this.multiData = this.swagData;\n                this.swagData = [];\n                var eventObj_1 = extend({}, this.actionObj.event, null, true);\n                this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();\n            }\n            var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;\n            if (this.enableCurrentViewDrag) {\n                var renderDates = this.getRenderedDates();\n                for (var i = 0; i < this.multiData.length; i++) {\n                    var eventObj_2 = extend({}, this.multiData[parseInt(i.toString(), 10)], null, true);\n                    var startTime = new Date(eventObj_2[this.parent.eventFields.startTime].getTime() + startTimeDiff);\n                    var dayIndex = this.parent.getIndexOfDate(renderDates, util.resetTime(startTime));\n                    if (dayIndex < 0) {\n                        this.isPreventMultiDrag = true;\n                        break;\n                    }\n                    this.isPreventMultiDrag = false;\n                }\n            }\n            if (!this.isPreventMultiDrag) {\n                for (var index_2 = 0; index_2 < this.multiData.length; index_2++) {\n                    this.updatedData[parseInt(index_2.toString(), 10)] =\n                        this.updateMultipleData(this.multiData[parseInt(index_2.toString(), 10)], startTimeDiff);\n                    var dayIndex = this.getDayIndex(this.updatedData[parseInt(index_2.toString(), 10)]);\n                    if (dayIndex >= 0) {\n                        var isAllDay = this.updatedData[parseInt(index_2.toString(), 10)][this.parent.eventFields.isAllDay];\n                        var wrapper = this.getEventWrapper(dayIndex, isAllDay);\n                        this.appendCloneElement(wrapper, this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n                        this.updateEventHeight(this.updatedData[parseInt(index_2.toString(), 10)], index_2, dayIndex);\n                    }\n                    else {\n                        if (!isNullOrUndefined(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)].parentNode)) {\n                            remove(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            this.updateEventHeight(event);\n        }\n        this.updateTimePosition(this.actionObj.start, this.updatedData);\n    };\n    DragAndDrop.prototype.splitEvent = function (event) {\n        var eventFields = this.parent.eventFields;\n        var eventData = [];\n        var startTime = event[eventFields.startTime];\n        var endTime = event[eventFields.endTime];\n        if (util.resetTime(new Date(startTime.getTime())) < util.resetTime(new Date(endTime.getTime()))) {\n            var startReferenceDate = util.resetTime(new Date(startTime.getTime()));\n            var endReferenceDate = new Date(startReferenceDate.getTime());\n            for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {\n                endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                var eventObj = extend({}, event, null, true);\n                eventObj[eventFields.startTime] = new Date(startReferenceDate);\n                eventObj[eventFields.endTime] = new Date(endReferenceDate);\n                startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));\n                eventData.push(eventObj);\n            }\n            var index = eventData.length - 1;\n            eventData[0][eventFields.startTime] = startTime;\n            eventData[parseInt(index.toString(), 10)][eventFields.endTime] = endTime;\n        }\n        else {\n            eventData.push(event);\n        }\n        return eventData;\n    };\n    DragAndDrop.prototype.updateMultipleData = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable &&\n            ((this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay]) ||\n                (!this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay]))) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        if (eventObj[this.parent.eventFields.isAllDay]) {\n            var differInDays = Math.ceil(timeDifference / (1000 * 3600 * 24));\n            var day = Math.ceil(endTimeDiff / (1000 * 3600 * 24));\n            var startTime = new Date(eventObj[this.parent.eventFields.startTime]);\n            eventObj[this.parent.eventFields.startTime] = util.resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));\n            eventObj[this.parent.eventFields.endTime] = util.addDays(eventObj[this.parent.eventFields.startTime], day);\n        }\n        else {\n            eventObj[this.parent.eventFields.startTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);\n            eventObj[this.parent.eventFields.endTime] =\n                new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);\n        }\n        return eventObj;\n    };\n    DragAndDrop.prototype.getDayIndex = function (event) {\n        var eventObj = extend({}, event, null, true);\n        var startDate = util.resetTime(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.activeViewOptions.timeScale.enable && !eventObj[this.parent.eventFields.isAllDay]) {\n            var startHour = this.parent.activeView.getStartHour();\n            startDate.setMilliseconds(startHour.getTime() - util.resetTime(startHour).getTime());\n        }\n        var startTime = startDate.getTime();\n        var query = '';\n        var wrapper = cls.DAY_WRAPPER_CLASS;\n        if (this.parent.activeViewOptions.timeScale.enable && (eventObj[this.parent.eventFields.isAllDay])) {\n            wrapper = cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS;\n        }\n        else {\n            wrapper = cls.WORK_CELLS_CLASS;\n        }\n        query = '.' + wrapper + '[data-date=\"' + startTime + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]';\n        }\n        this.targetTd = this.parent.element.querySelector(query);\n        if (isNullOrUndefined(this.targetTd)) {\n            return -1;\n        }\n        return this.targetTd.cellIndex;\n    };\n    DragAndDrop.prototype.updateEventHeight = function (event, index, colIndex) {\n        this.verticalEvent.initializeValues();\n        var datesCount = this.verticalEvent.getStartCount();\n        if (!this.parent.uiStateValues.isGroupAdaptive) {\n            for (var i = 0; i < this.actionObj.groupIndex; i++) {\n                if (this.verticalEvent.dateRender[parseInt(i.toString(), 10)]) {\n                    datesCount = datesCount + this.verticalEvent.dateRender[parseInt(i.toString(), 10)].length;\n                }\n            }\n        }\n        var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;\n        var target = (this.parent.activeViewOptions.group.byDate &&\n            !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target))) ? true : false;\n        if (target || !this.parent.activeViewOptions.group.byDate) {\n            var dynamicIndex = -1;\n            var dayIndex = !this.parent.activeViewOptions.group.byDate ?\n                isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount\n                : this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(indexGroup.toString(), 10)], util.resetTime(\n                // eslint-disable-next-line max-len\n                this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)));\n            var splitEvents = this.splitEvent(event);\n            var events_1 = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 ||\n                this.parent.eventSettings.spannedEventPlacement !== 'TimeSlot' ? [event] : splitEvents;\n            for (var i = 0; i < events_1.length; i++) {\n                if (i > 0) {\n                    var filterQuery = \".e-day-wrapper[data-date=\\\"\" + util.resetTime(events_1[parseInt(i.toString(), 10)][this.parent.eventFields.startTime]).getTime() + \"\\\"]\";\n                    if (this.parent.activeViewOptions.group.resources.length > 0) {\n                        filterQuery = filterQuery.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n                    }\n                    var appWrap = this.parent.element.querySelector(filterQuery);\n                    if (appWrap) {\n                        dayIndex = dayIndex + 1;\n                        dynamicIndex = appWrap.cellIndex;\n                    }\n                    else {\n                        dayIndex = -1;\n                    }\n                }\n                if (dayIndex >= 0) {\n                    var record = this.verticalEvent.isSpannedEvent(events_1[parseInt(i.toString(), 10)], dayIndex, indexGroup);\n                    var eStart = record[this.verticalEvent.fields.startTime];\n                    var eEnd = record[this.verticalEvent.fields.endTime];\n                    var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) :\n                        this.actionObj.element.offsetHeight;\n                    var topValue = this.parent.activeViewOptions.timeScale.enable ?\n                        this.verticalEvent.getTopValue(eStart) : this.actionObj.element.offsetTop;\n                    if (isNullOrUndefined(index)) {\n                        if (i === 0) {\n                            this.actionObj.clone.style.top = formatUnit(topValue);\n                            this.actionObj.clone.style.height = formatUnit(appHeight);\n                        }\n                        else {\n                            this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                        }\n                    }\n                    else {\n                        var appWidth = this.actionObj.cellWidth;\n                        if (event[this.parent.eventFields.isAllDay]) {\n                            topValue = this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop;\n                            appHeight = this.getAllDayEventHeight();\n                            var timeDiff = event[this.parent.eventFields.endTime].getTime() -\n                                event[this.parent.eventFields.startTime].getTime();\n                            var allDayDifference = Math.ceil(timeDiff / (1000 * 3600 * 24));\n                            if (allDayDifference >= 0) {\n                                appWidth = (allDayDifference * this.actionObj.cellWidth);\n                            }\n                        }\n                        if (this.actionObj.cloneElement[parseInt(index.toString(), 10)]) {\n                            if (i === 0) {\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.top = formatUnit(topValue);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.height = formatUnit(appHeight);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.width = formatUnit(appWidth);\n                                this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.left = formatUnit(0);\n                            }\n                            else {\n                                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    DragAndDrop.prototype.renderSpannedEvents = function (record, index, top, height) {\n        var startTime = record[this.parent.eventFields.startTime].getTime();\n        var endTime = record[this.parent.eventFields.endTime].getTime();\n        if (startTime !== endTime) {\n            var appointmentElement = this.verticalEvent.\n                createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);\n            addClass([appointmentElement], [cls.CLONE_ELEMENT_CLASS, 'e-dynamic-clone']);\n            setStyleAttribute(appointmentElement, {\n                'width': '100%',\n                'height': height + 'px',\n                'top': top + 'px',\n                'border': '0px'\n            });\n            var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_WRAPPER_CLASS));\n            appointmentWrap[parseInt(index.toString(), 10)].appendChild(appointmentElement);\n        }\n    };\n    DragAndDrop.prototype.getRenderedDates = function () {\n        var _this = this;\n        var _a, _b;\n        var renderDates = this.parent.activeView.renderDates;\n        (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function (date) { return +date; }));\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.eventBase.slots = [];\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            renderDates = resources[0].renderDates;\n            (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function (date) { return +date; }));\n        }\n        return renderDates;\n    };\n    DragAndDrop.prototype.updateAllDayEvents = function (startDate, endDate, colIndex) {\n        this.parent.eventBase.slots = [];\n        var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);\n        var renderDates = this.getRenderedDates();\n        var events = this.parent.eventBase.splitEvent(event, renderDates);\n        var query = \".e-all-day-cells[data-date=\\\"\" + events[0][this.parent.eventFields.startTime].getTime() + \"\\\"]\";\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            query = query.concat('[data-group-index = \"' + this.actionObj.groupIndex + '\"]');\n        }\n        var cell = [].slice.call(this.parent.element.querySelectorAll(query));\n        if (cell.length > 0 || !isNullOrUndefined(colIndex)) {\n            var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;\n            this.appendCloneElement(this.getEventWrapper(cellIndex));\n            // eslint-disable-next-line max-len\n            this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DragAndDrop.prototype.swapDragging = function (e) {\n        if (this.isPreventMultiDrag) {\n            return;\n        }\n        var colIndex = !isNullOrUndefined(closest(this.actionObj.target, 'td')) && closest(this.actionObj.target, 'td').cellIndex;\n        if (closest(this.actionObj.target, '.' + cls.DATE_HEADER_WRAP_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {\n            addClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = true;\n            var eventHeight = this.getAllDayEventHeight();\n            var allDayElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.ALLDAY_CELLS_CLASS + ':first-child'));\n            if (allDayElement[0].offsetHeight < eventHeight) {\n                for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {\n                    var element = allDayElement_1[_i];\n                    element.style.height = ((eventHeight + 2) / 12) + 'em';\n                }\n            }\n            setStyleAttribute(this.actionObj.clone, {\n                width: formatUnit(this.actionObj.cellWidth),\n                height: formatUnit(eventHeight),\n                top: formatUnit(this.parent.element.querySelector('.' + cls.ALLDAY_ROW_CLASS).offsetTop)\n            });\n        }\n        if (closest(this.actionObj.target, '.' + cls.WORK_CELLS_CLASS) &&\n            !closest(this.actionObj.clone, '.' + cls.DAY_WRAPPER_CLASS)) {\n            removeClass([this.actionObj.clone], cls.ALLDAY_APPOINTMENT_CLASS);\n            this.appendCloneElement(this.getEventWrapper(colIndex));\n            this.actionObj.isAllDay = false;\n            // eslint-disable-next-line max-len\n            var height = (this.actionObj.element.offsetHeight === 0) ? this.actionObj.height : this.actionObj.element.offsetHeight;\n            setStyleAttribute(this.actionObj.clone, {\n                left: formatUnit(0),\n                height: formatUnit(height),\n                width: formatUnit(this.actionObj.cellWidth)\n            });\n        }\n    };\n    DragAndDrop.prototype.calculateVerticalDate = function (e) {\n        if (isNullOrUndefined(e.target) || (e.target && isNullOrUndefined(closest(e.target, 'tr'))) ||\n            (e.target && e.target.tagName === 'DIV')) {\n            return;\n        }\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            this.removeCloneElement();\n        }\n        var eventDuration = util.getUniversalTime(eventObj[this.parent.eventFields.endTime]) -\n            util.getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n        var td = closest(this.actionObj.target, 'td');\n        if (!isNullOrUndefined(td)) {\n            var tr = td.parentElement;\n            this.actionObj.index = (tr.rowIndex * tr.children.length) + td.cellIndex;\n            var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n            td = workCells[this.actionObj.index];\n            var currentDate = this.parent.getDateFromElement(td);\n            if (!isNullOrUndefined(currentDate)) {\n                if (this.parent.activeViewOptions.group.resources.length > 0) {\n                    this.actionObj.groupIndex = parseInt(td.getAttribute('data-group-index'), 10);\n                }\n                var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));\n                var dragStart = new Date(timeString.getTime());\n                var startTimeDiff = util.getUniversalTime(eventObj[this.parent.eventFields.startTime]) -\n                    util.getUniversalTime(util.resetTime(new Date(+eventObj[this.parent.eventFields.startTime])));\n                dragStart.setMilliseconds(startTimeDiff);\n                var dragEnd = new Date(dragStart.getTime());\n                dragEnd.setMilliseconds(eventDuration);\n                this.actionObj.start = new Date(dragStart.getTime());\n                this.actionObj.end = new Date(dragEnd.getTime());\n            }\n        }\n        var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n        if (isNullOrUndefined(this.parent.eventDragArea)) {\n            var eventWrappers = [].slice.call(this.parent.element.querySelectorAll('.' + cls.CLONE_ELEMENT_CLASS));\n            for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n                var wrapper = eventWrappers_1[_i];\n                remove(wrapper);\n            }\n        }\n        if (this.multiData && this.multiData.length > 0) {\n            var startTime = util.resetTime(new Date(event[this.parent.eventFields.startTime]));\n            var startTimeDiff = startTime.getTime() - this.startTime;\n            if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n                startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;\n                startTimeDiff -= new Date(this.startTime).getMonth();\n                startTimeDiff += startTime.getMonth();\n            }\n            for (var index = 0; index < this.multiData.length; index++) {\n                this.updatedData[parseInt(index.toString(), 10)] =\n                    this.updateMultipleVerticalDate(this.multiData[parseInt(index.toString(), 10)], startTimeDiff);\n                if (this.parent.currentView === 'TimelineYear') {\n                    this.dynamicYearlyEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n                }\n                else {\n                    this.dynamicEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);\n                }\n            }\n        }\n        else {\n            if (this.parent.currentView === 'TimelineYear') {\n                this.dynamicYearlyEventsRendering(event);\n            }\n            else {\n                this.dynamicEventsRendering(event);\n            }\n        }\n    };\n    DragAndDrop.prototype.updateMultipleVerticalDate = function (data, timeDifference) {\n        var eventObj = extend({}, data, null, true);\n        var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() -\n            eventObj[this.parent.eventFields.startTime].getTime();\n        var startDate = new Date(eventObj[this.parent.eventFields.startTime]);\n        if (this.parent.currentView === 'TimelineYear' && this.parent.group.resources.length > 0) {\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));\n        }\n        else {\n            var differInDays = Math.ceil(timeDifference / util.MS_PER_DAY);\n            eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));\n        }\n        eventObj[this.parent.eventFields.endTime] =\n            new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);\n        return eventObj;\n    };\n    DragAndDrop.prototype.calculateTimelineTime = function (e) {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var eventDuration = util.getUniversalTime(eventObj[this.parent.eventFields.endTime]) -\n            util.getUniversalTime(eventObj[this.parent.eventFields.startTime]);\n        var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth :\n            parseInt(this.actionObj.clone.style.left, 10);\n        offsetLeft = Math.round(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var rightOffset;\n        if (this.parent.enableRtl) {\n            rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));\n            this.actionObj.clone.style.right = formatUnit(rightOffset);\n        }\n        offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);\n        var colIndex = this.getColumnIndex(offsetLeft);\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var contentWrapRight = dragArea.getBoundingClientRect().right;\n        var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl &&\n            this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right &&\n            !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);\n        var leftVal = (this.parent.eventDragArea) ? dragArea.scrollLeft - dragArea.offsetLeft : 0;\n        if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {\n            this.isCursorAhead = true;\n        }\n        var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);\n        if (this.parent.enableRtl) {\n            cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) /\n                this.actionObj.cellWidth)) - 1;\n        }\n        if (this.cursorPointIndex < 0) {\n            this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);\n        }\n        var tr = this.parent.getContentTable().querySelector('tr');\n        var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);\n        index = index < 0 ? 0 : index;\n        var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[parseInt(index.toString(), 10)].getTime()) :\n            this.parent.getDateFromElement(tr.children[parseInt(index.toString(), 10)]);\n        if (this.isStepDragging) {\n            var widthDiff = this.getWidthDiff(tr, index);\n            if (widthDiff !== 0) {\n                var timeDiff = Math.ceil(widthDiff / this.widthPerMinute);\n                eventStart.setMinutes(eventStart.getMinutes() + (timeDiff * this.actionObj.interval));\n                if (this.isCursorAhead || cursorDrag) {\n                    eventStart.setMilliseconds(-(eventDuration));\n                }\n                else {\n                    eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);\n                    var intervalInMS = this.actionObj.interval * util.MS_PER_MINUTE;\n                    timeDiff = Math.abs(eventStart.getTime() - this.actionObj.start.getTime()) / intervalInMS;\n                    var roundTimeDiff = Math.trunc(timeDiff);\n                    if (roundTimeDiff !== timeDiff) {\n                        timeDiff = (roundTimeDiff * intervalInMS) * (eventStart > this.actionObj.start ? 1 : -1);\n                        eventStart = new Date(this.actionObj.start.getTime() + timeDiff);\n                    }\n                }\n            }\n            else {\n                eventStart = this.actionObj.start;\n            }\n        }\n        else {\n            if (this.isCursorAhead || cursorDrag) {\n                var minutes = this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval;\n                eventStart.setMinutes(eventStart.getMinutes() + minutes);\n                eventStart.setMilliseconds(-(eventDuration));\n                if (eventStart.getTime() === util.resetTime(eventStart).getTime() && eventStart.getMinutes() === 0 && eventDuration === 0) {\n                    eventStart.setMinutes(-minutes);\n                }\n            }\n            else {\n                eventStart.setMinutes(eventStart.getMinutes() -\n                    (this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval)));\n            }\n        }\n        if (!this.isStepDragging) {\n            eventStart = this.calculateIntervalTime(eventStart);\n        }\n        if (this.isTimelineDayProcess) {\n            var eventSrt = eventObj[this.parent.eventFields.startTime];\n            eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());\n        }\n        if (this.parent.eventDragArea) {\n            var targetDate = this.parent.getDateFromElement(e.target);\n            if (!isNullOrUndefined(targetDate)) {\n                if (!this.parent.activeViewOptions.timeScale.enable || (this.parent.currentView === 'TimelineMonth')) {\n                    var eventSrt = eventObj[this.parent.eventFields.startTime];\n                    eventStart = new Date(targetDate.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds()));\n                }\n                else {\n                    eventStart = targetDate;\n                }\n            }\n        }\n        var eventEnd = new Date(eventStart.getTime());\n        eventEnd.setMilliseconds(eventDuration);\n        var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];\n        if (this.multiData.length > 0) {\n            var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;\n            for (var i = 0; i < this.multiData.length; i++) {\n                this.updatedData[parseInt(i.toString(), 10)] =\n                    this.updateMultipleData(this.multiData[parseInt(i.toString(), 10)], startTimeDiff);\n            }\n            eventsData = this.updatedData;\n        }\n        for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {\n            var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[parseInt(dataIndex.toString(), 10)] : this.actionObj.clone;\n            if (isNullOrUndefined(this.parent.eventDragArea)) {\n                var events_2 = this.timelineEventModule.splitEvent(eventsData[parseInt(dataIndex.toString(), 10)], this.timelineEventModule.dateRender);\n                var eventData = events_2[0].data;\n                var startTime = this.timelineEventModule.getStartTime(events_2[0], eventData);\n                var endTime = this.timelineEventModule.getEndTime(events_2[0], eventData);\n                // eslint-disable-next-line max-len\n                var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);\n                // eslint-disable-next-line max-len\n                var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, util.resetTime(new Date(startTime.getTime())));\n                day = day < 0 ? 0 : day;\n                var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);\n                if (this.parent.enableRtl) {\n                    cloneElement.style.right = formatUnit(left);\n                }\n                else {\n                    cloneElement.style.left = formatUnit(left);\n                }\n                if (!this.isMorePopupOpened) {\n                    cloneElement.style.width = formatUnit(width);\n                }\n            }\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\n                this.calculateResourceGroupingPosition(e, cloneElement);\n            }\n            this.actionObj.start = new Date(eventStart.getTime());\n            this.actionObj.end = new Date(eventEnd.getTime());\n            this.updateTimePosition(this.actionObj.start, this.updatedData);\n        }\n    };\n    DragAndDrop.prototype.getOffsetValue = function (offsetLeft, rightOffset) {\n        if (this.scrollEdges.left || this.scrollEdges.right) {\n            var viewEle = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (this.parent.enableRtl) {\n                rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;\n                if (this.scrollEdges.right) {\n                    rightOffset = (rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth) -\n                        (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                else {\n                    rightOffset = rightOffset + this.widthUptoCursorPoint;\n                    if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {\n                        this.actionObj.clone.style.width =\n                            formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);\n                        rightOffset = (viewEle.scrollLeft - viewEle.scrollWidth);\n                    }\n                }\n                if (isNullOrUndefined(this.parent.eventDragArea)) {\n                    this.actionObj.clone.style.left = formatUnit(rightOffset);\n                }\n            }\n            else {\n                if (this.scrollEdges.left) {\n                    offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;\n                    if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {\n                        viewEle.scrollLeft = viewEle.scrollLeft - 1;\n                    }\n                    else if (this.actionObj.clone.offsetLeft === 0) {\n                        offsetLeft = viewEle.scrollLeft;\n                    }\n                }\n                else {\n                    offsetLeft = (viewEle.scrollLeft + viewEle.offsetWidth -\n                        this.actionObj.clone.offsetWidth) + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);\n                }\n                offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;\n                if (isNullOrUndefined(this.parent.eventDragArea)) {\n                    this.actionObj.clone.style.left = formatUnit(offsetLeft);\n                }\n            }\n        }\n        return offsetLeft;\n    };\n    DragAndDrop.prototype.getWidthDiff = function (tr, index) {\n        var pages = this.scrollArgs.element.getBoundingClientRect();\n        if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {\n            var targetLeft = tr.children[parseInt(index.toString(), 10)].offsetLeft;\n            var pageX = this.actionObj.pageX - pages.left;\n            if (this.parent.enableRtl) {\n                return (targetLeft + this.actionObj.cellWidth) - (this.scrollArgs.element.scrollLeft + pageX);\n            }\n            else {\n                return (this.scrollArgs.element.scrollLeft + pageX) - targetLeft;\n            }\n        }\n        return 0;\n    };\n    DragAndDrop.prototype.getColumnIndex = function (offsetLeft) {\n        var index = Math.round(offsetLeft / this.actionObj.cellWidth);\n        if (this.isHeaderRows) {\n            return index;\n        }\n        return this.getIndex(index);\n    };\n    DragAndDrop.prototype.getCursorCurrentIndex = function (colIndex, cloneIndex, tr) {\n        var index = colIndex + cloneIndex;\n        if (this.isHeaderRows) {\n            var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);\n            return (index > dateLength - 1) ? dateLength - 1 : index;\n        }\n        return (index > tr.children.length - 1) ? tr.children.length - 1 : index;\n    };\n    DragAndDrop.prototype.cursorIndex = function (e, event, left, index) {\n        var td = closest(e.target, '.e-work-cells');\n        if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {\n            var targetDate = this.parent.getDateFromElement(td);\n            if (this.isHeaderRows) {\n                var currentIndex = Math.floor(left / this.actionObj.cellWidth);\n                targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());\n            }\n            var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();\n            if (this.isTimelineDayProcess) {\n                this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / (util.MS_PER_DAY)));\n            }\n            else {\n                var widthDiff = Math.floor((timeDiff / util.MS_PER_MINUTE) / (this.actionObj.slotInterval / this.actionObj.cellWidth));\n                this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);\n                this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;\n            }\n        }\n        else {\n            this.cursorPointIndex = 0;\n        }\n    };\n    DragAndDrop.prototype.calculateResourceGroupingPosition = function (e, cloneElement) {\n        var dragArea = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trCollection = [].slice.call(this.parent.element.querySelectorAll('.e-content-wrap .e-content-table tr:not(.e-hidden)'));\n        var translateY = util.getTranslateY(dragArea.querySelector('table'));\n        translateY = (isNullOrUndefined(translateY)) ? 0 : translateY;\n        var rowHeight = (this.parent.rowAutoHeight) ?\n            ~~(dragArea.querySelector('table').offsetHeight / trCollection.length) : this.actionObj.cellHeight;\n        var rowIndex = Math.floor(Math.floor((this.actionObj.Y +\n            (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset))) -\n            util.getElementTop(dragArea, this.parent.uiStateValues.isTransformed)) / rowHeight);\n        rowIndex = (rowIndex < 0) ? 0 : (rowIndex > trCollection.length - 1) ? trCollection.length - 1 : rowIndex;\n        this.actionObj.index = rowIndex;\n        var eventContainer = this.parent.element.querySelectorAll('.e-appointment-container:not(.e-hidden)').item(rowIndex);\n        var eventWrapper = eventContainer.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n        if (!eventWrapper) {\n            eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n            eventContainer.appendChild(eventWrapper);\n        }\n        this.appendCloneElement(eventWrapper, cloneElement);\n        var td = closest(this.actionObj.target, 'td');\n        this.actionObj.groupIndex = (td && !isNaN(parseInt(td.getAttribute('data-group-index'), 10)))\n            ? parseInt(td.getAttribute('data-group-index'), 10) : this.actionObj.groupIndex;\n        if (!isNullOrUndefined(this.parent.eventDragArea)) {\n            return;\n        }\n        var top = this.parent.getElementHeight(trCollection[parseInt(rowIndex.toString(), 10)]) * rowIndex;\n        if (this.parent.rowAutoHeight) {\n            var cursorElement = this.getCursorElement(e);\n            if (cursorElement) {\n                top = cursorElement.classList.contains(cls.WORK_CELLS_CLASS) ? cursorElement.offsetTop :\n                    (cursorElement.offsetParent && cursorElement.offsetParent.classList.contains(cls.APPOINTMENT_CLASS)) ?\n                        cursorElement.offsetParent.offsetTop : top;\n            }\n        }\n        cloneElement.style.top = formatUnit(top);\n    };\n    DragAndDrop.prototype.appendCloneElement = function (element, cloneElement) {\n        if (cloneElement === void 0) { cloneElement = null; }\n        cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;\n        var dragElement = document.querySelector(this.parent.eventDragArea);\n        if (this.parent.eventDragArea && dragElement) {\n            dragElement.appendChild(cloneElement);\n        }\n        else {\n            element.appendChild(cloneElement);\n        }\n    };\n    DragAndDrop.prototype.getEventWrapper = function (index, isAllDayDrag) {\n        var eventWrapper;\n        if (isNullOrUndefined(isAllDayDrag)) {\n            isAllDayDrag = this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS);\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var wrapperClass = isAllDayDrag ? '.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS;\n            eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);\n        }\n        else {\n            var targetWrapper = this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS).item(index);\n            eventWrapper = targetWrapper.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n            if (!eventWrapper) {\n                eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\n                targetWrapper.appendChild(eventWrapper);\n            }\n        }\n        return eventWrapper;\n    };\n    DragAndDrop.prototype.getAllDayEventHeight = function () {\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_CLASS });\n        this.parent.element.querySelector('.' + cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);\n        var eventHeight = eventWrapper.offsetHeight;\n        remove(eventWrapper);\n        return eventHeight;\n    };\n    DragAndDrop.prototype.isAllowDrop = function (e) {\n        if (!this.actionObj.excludeSelectors) {\n            return false;\n        }\n        var dropSelectors = this.actionObj.excludeSelectors.split(',');\n        var isAllowDrop = false;\n        for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {\n            var selector = dropSelectors_1[_i];\n            if (e.target.classList.contains(selector)) {\n                isAllowDrop = true;\n                break;\n            }\n        }\n        return isAllowDrop;\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name\n     */\n    DragAndDrop.prototype.getModuleName = function () {\n        return 'dragAndDrop';\n    };\n    return DragAndDrop;\n}(ActionBase));\nexport { DragAndDrop };\n","import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass, setStyleAttribute, formatUnit, EventHandler, remove } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\n/**\n * view base\n */\nvar ViewBase = /** @class */ (function () {\n    /**\n     * Constructor\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function ViewBase(parent) {\n        this.previousNextAction = 'Next';\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.refreshHeader = function () {\n        // Method to refresh the date header\n    };\n    ViewBase.prototype.refreshResourceHeader = function () {\n        var resTbl = this.element.querySelector('.' + cls.RESOURCE_COLUMN_TABLE_CLASS);\n        var resourceTd = Array.from(resTbl.querySelectorAll('.' + cls.RESOURCE_CELLS_CLASS));\n        resourceTd.forEach(function (currentElement) {\n            var children = Array.from(currentElement.children);\n            children.forEach(function (child) {\n                if (!child.classList.contains(cls.RESOURCE_EXPAND_CLASS) && !child.classList.contains(cls.RESOURCE_COLLAPSE_CLASS)) {\n                    remove(child);\n                }\n            });\n        });\n        var rendereData = this.parent.resourceBase.renderedResources;\n        if (!isNullOrUndefined(rendereData) && rendereData.length > 0) {\n            for (var i = 0; i < resourceTd.length; i++) {\n                var element = resourceTd[parseInt(i.toString(), 10)];\n                var data = rendereData[parseInt(i.toString(), 10)];\n                if (this.parent.activeView && !isNullOrUndefined(element) && !isNullOrUndefined(data)\n                    && parseInt(element.getAttribute('data-group-index'), 10) === data.groupIndex) {\n                    this.parent.activeView.setResourceHeaderContent(element, data, cls.RESOURCE_TEXT_CLASS);\n                }\n            }\n        }\n        this.parent.renderTemplates();\n        this.parent.notify(event.contentReady, {});\n    };\n    ViewBase.prototype.getDayName = function (date) {\n        return this.parent.getDayNames('abbreviated')[date.getDay()];\n    };\n    ViewBase.prototype.getDate = function (date) {\n        return this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() });\n    };\n    ViewBase.prototype.getTime = function (date) {\n        if (this.parent.isAdaptive) {\n            if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n                return this.parent.globalize.formatDate(date, { format: 'H', calendar: this.parent.getCalendarMode() });\n            }\n            return this.parent.globalize.formatDate(date, { skeleton: 'h', calendar: this.parent.getCalendarMode() });\n        }\n        return this.parent.getTimeString(date);\n    };\n    ViewBase.prototype.getTimelineDate = function (date) {\n        var text = this.parent.globalize.formatDate(date, { skeleton: 'MMMd', calendar: this.parent.getCalendarMode() }) + ', ' +\n            this.parent.getDayNames('wide')[date.getDay()];\n        return util.capitalizeFirstWord(text, 'multiple');\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.setAriaAttributes = function (table) {\n        table.setAttribute('role', 'grid');\n        if (this.parent.currentView !== 'Year') {\n            table.setAttribute('id', this.parent.element.id + '_table');\n        }\n        table.setAttribute('aria-label', this.getLabelText(this.parent.currentView));\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        if (isNullOrUndefined(lastRow)) {\n            return;\n        }\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? util.getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? -(target.scrollLeft) : target.scrollLeft;\n            for (var _i = 0, headerCells_2 = headerCells; _i < headerCells_2.length; _i++) {\n                var cell = headerCells_2[_i];\n                colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = cell;\n                    break;\n                }\n                tdLeft += cell.offsetWidth;\n            }\n            if (!isNullOrUndefined(currentCell)) {\n                currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n            }\n        };\n        var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n            var className = classNames_1[_i];\n            var headerCells = [].slice.call(this.element.querySelectorAll(className));\n            if (headerCells.length > 0) {\n                for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n                    var element = headerCells_1[_a];\n                    element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n                }\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += util.getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === cls.PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        return []; // Here getDateSlots only need in vertical and month views\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        return []; // Here generateColumnLevels only need in vertical and month views\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.getStartDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.getEndDate = function () {\n        return this.renderDates[this.renderDates.length - 1];\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date(this.parent.currentTimezoneDate).setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        if (this.parent.activeViewOptions.displayDate || this.parent.activeViewOptions.numberOfWeeks > 0) {\n            return this.parent.activeView.getStartDate().getTime() <= this.parent.getCurrentTime().getTime() &&\n                this.parent.activeView.getEndDate().getTime() >= this.parent.getCurrentTime().getTime();\n        }\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (!isNullOrUndefined(workDays) && workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        if (util.resetTime(date).getTime() !== util.resetTime(startHour).getTime()) {\n            startHour = new Date(2000, 0, 0, startHour.getHours(), startHour.getMinutes(), startHour.getMilliseconds());\n            endHour = new Date(2000, 0, 0, endHour.getHours(), endHour.getMinutes(), endHour.getMilliseconds());\n        }\n        return !(util.getDateInMs(date) < util.getDateInMs(startHour) || util.getDateInMs(date) >= util.getDateInMs(endHour) ||\n            !this.isWorkDay(date, workDays));\n    };\n    ViewBase.prototype.getRenderDates = function (workDays, date) {\n        if (date === void 0) { date = this.parent.selectedDate; }\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = util.resetTime(date);\n            var start = util.getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_1 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = util.getWeekFirstDate(util.resetTime(date), this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_2 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else {\n            var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount :\n                this.parent.activeViewOptions.interval;\n            var start = util.resetTime(date);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            } while (dayCount !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        this.previousNextAction = type;\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                var daysCount = this.parent.activeViewOptions.interval;\n                return util.addDays(this.parent.selectedDate, type === 'Next' ? daysCount : -daysCount);\n            }\n            else {\n                var date = void 0;\n                if (type === 'Next') {\n                    date = util.addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = util.addDays(date, 1);\n                    }\n                }\n                else {\n                    date = util.addDays(this.renderDates[0], -1);\n                    var count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = util.addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        var weekLength = type === 'Next' ? util.WEEK_LENGTH : -util.WEEK_LENGTH;\n        return util.addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    };\n    ViewBase.prototype.formatViewLabel = function (view, startDate, endDate) {\n        var formatOptions = { type: 'date', skeleton: 'full', calendar: this.parent.getCalendarMode() };\n        return this.parent.localeObj.getConstant(view) + ' ' + this.parent.localeObj.getConstant('start') + ' ' + this.parent.globalize.formatDate(startDate, formatOptions) + ' '\n            + this.parent.localeObj.getConstant('endAt') + ' ' + this.parent.globalize.formatDate(endDate, formatOptions);\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        if (view === 'Year' || view === 'TimelineYear') {\n            return this.formatViewLabel(viewStr, this.parent.activeView.getStartDate(), this.parent.activeView.getEndDate());\n        }\n        else {\n            if (this.renderDates.length > 0) {\n                if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n                    return this.parent.localeObj.getConstant(viewStr) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { type: 'date', skeleton: 'full', calendar: this.parent.getCalendarMode() }), 'single');\n                }\n                else {\n                    return this.formatViewLabel(viewStr, this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n                }\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    ViewBase.prototype.getDateRangeText = function (date, dateCollection) {\n        if (date === void 0) { date = this.renderDates[0]; }\n        if (dateCollection === void 0) { dateCollection = this.renderDates; }\n        if (this.parent.isAdaptive) {\n            var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(date, dateCollection[dateCollection.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        var mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return util.capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return util.capitalizeFirstWord(text, 'multiple');\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (isNullOrUndefined(this.parent.locale) || this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return util.capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return util.capitalizeFirstWord(formattedStr, 'multiple');\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = cls.TEXT_ELLIPSIS; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            var resourceText = createElement('div', { className: className });\n            this.parent.sanitize(tdData.resourceData[tdData.resource.textField], resourceText);\n            tdElement.appendChild(resourceText);\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], cls.AUTO_HEIGHT);\n        }\n    };\n    ViewBase.prototype.getColElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' col, .' + cls.DATE_HEADER_WRAP_CLASS + ' col'));\n    };\n    ViewBase.prototype.setColWidth = function (content) {\n        if (this.isTimelineView()) {\n            var colElements = this.getColElements();\n            var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n            var colWidth_1 = (this.parent.getElementWidth(contentBody) / (colElements.length / 2));\n            if (content.offsetHeight !== content.clientHeight) {\n                var resourceColumn = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn) && resourceColumn.offsetHeight !== content.clientHeight) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n            var cssClass = \".\" + cls.HEADER_CELLS_CLASS + \",.\" + cls.TIME_SLOT_CLASS + \",.\" + cls.HEADER_WEEK_CELLS_CLASS + \",.\" + cls.HEADER_MONTH_CELLS_CLASS + \",.\" + cls.HEADER_YEAR_CELLS_CLASS;\n            var headerCellElements = [].slice.call(this.element.querySelectorAll(cssClass));\n            headerCellElements.forEach(function (ele) {\n                var colSpan = isNullOrUndefined(ele.getAttribute('colspan')) ? '1' : ele.getAttribute('colspan');\n                var headerCellColSpan = parseInt(colSpan, 10);\n                setStyleAttribute(ele, { 'width': formatUnit(colWidth_1 * headerCellColSpan) });\n            });\n        }\n    };\n    ViewBase.prototype.resetColWidth = function () {\n        var colElements = this.getColElements();\n        for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {\n            var col = colElements_1[_i];\n            col.style.width = '';\n        }\n    };\n    ViewBase.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            var treeIcons = [].slice.call(this.element.querySelectorAll('.' + cls.RESOURCE_TREE_ICON_CLASS));\n            for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {\n                var icon = treeIcons_1[_i];\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n            }\n        }\n    };\n    ViewBase.prototype.scrollToDate = function (scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        var scrollWrap = this.getContentAreaElement();\n        var tdDate = new Date(util.resetTime(new Date(+scrollDate)).getTime()).getTime();\n        var dateElement = scrollWrap.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + tdDate + \"\\\"]\");\n        if (this.parent.currentView === 'Month' && dateElement) {\n            if (scrollWrap.scrollWidth > scrollWrap.clientWidth) {\n                if (!this.parent.enableRtl) {\n                    scrollWrap.scrollLeft = dateElement.offsetLeft;\n                }\n                else {\n                    scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n                }\n            }\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            if (!this.parent.enableRtl) {\n                scrollWrap.scrollLeft = dateElement.offsetLeft;\n            }\n            else {\n                scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n            }\n        }\n    };\n    ViewBase.prototype.setPersistence = function () {\n        if (this.parent.enablePersistence) {\n            var contentWrap = this.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(contentWrap)) {\n                this.parent.scrollLeft = contentWrap.scrollLeft;\n                this.parent.scrollTop = contentWrap.scrollTop;\n            }\n        }\n    };\n    ViewBase.prototype.retainScrollPosition = function () {\n        if (this.parent.enablePersistence) {\n            var conWrap = this.parent.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n                conWrap.scrollTop = this.parent.scrollTop;\n                conWrap.scrollLeft = this.parent.scrollLeft;\n            }\n        }\n    };\n    ViewBase.prototype.getViewStartDate = function () {\n        var startDate = this.renderDates[0];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n        }\n        return startDate;\n    };\n    ViewBase.prototype.getViewEndDate = function () {\n        var endDate = util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            endDate = util.addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n        }\n        return endDate;\n    };\n    ViewBase.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === 'Month' ||\n            (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else if (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length > 0) {\n            startTime.setHours(0, 0, 0, 0);\n            return new Date(startTime.setDate(1));\n        }\n        return null;\n    };\n    ViewBase.prototype.resetColLevels = function () {\n        this.parent.resourceBase.expandedResources = [];\n        var renderedCount = this.parent.virtualScrollModule.getRenderedCount();\n        var lastLevel = this.parent.activeViewOptions.group.byDate ? this.colLevels[0] :\n            this.parent.resourceBase.renderedResources;\n        var index = 0;\n        for (var i = 0; i < lastLevel.length; i++) {\n            if (index >= renderedCount) {\n                break;\n            }\n            index += lastLevel[parseInt(i.toString(), 10)].colSpan;\n            this.parent.resourceBase.expandedResources.push(lastLevel[parseInt(i.toString(), 10)]);\n        }\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.colLevels[0] = this.parent.resourceBase.expandedResources;\n            this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources);\n        }\n        else {\n            this.colLevels[this.colLevels.length - 2] = this.parent.resourceBase.expandedResources;\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources;\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.colLevels[this.colLevels.length - 1] = this.colLevels[this.colLevels.length - 1].slice(0, index);\n            this.parent.resourceBase.expandedResources = this.colLevels[this.colLevels.length - 1];\n        }\n    };\n    ViewBase.prototype.getGroupIndices = function (dataCollection) {\n        var groupIndices = [];\n        if (this.parent.virtualScrollModule && this.parent.activeViewOptions.group.resources.length > 0 && (dataCollection ||\n            this.parent.virtualScrollModule.existingDataCollection.length > 0) && !this.parent.uiStateValues.isGroupAdaptive) {\n            dataCollection = isNullOrUndefined(dataCollection) ? this.parent.virtualScrollModule.existingDataCollection : dataCollection;\n            groupIndices = dataCollection.map(function (data) { return data.groupIndex; });\n        }\n        return groupIndices;\n    };\n    ViewBase.prototype.destroy = function () {\n        if (this.element && this.element.parentNode) {\n            remove(this.element);\n        }\n        this.element = null;\n        this.renderDates = null;\n        this.colLevels = null;\n    };\n    return ViewBase;\n}());\nexport { ViewBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.appointment = null;\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(event.dataReady, this.renderEvents);\n        }\n    };\n    VerticalView.prototype.renderEvents = function () {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup) && !this.parent.uiStateValues.isTapHold) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onAdaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        if (!this.parent) {\n            return;\n        }\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timeCells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        this.setColWidth(content);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                if (this.parent.currentView.indexOf('Timeline') > -1) {\n                    content.scrollTop = this.parent.uiStateValues.top;\n                }\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n        if (!isNullOrUndefined(timeCells) && !isNullOrUndefined(content) && timeCells.scrollTop !== content.scrollTop) {\n            timeCells.scrollTop = content.scrollTop;\n        }\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (!isNullOrUndefined(scrollDate)) {\n            var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n            if (headerElement) {\n                if (this.parent.enableRtl) {\n                    var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n                    this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n                }\n                else {\n                    this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n                }\n            }\n        }\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.scrollToDate = function (scrollDate) {\n        this.scrollToHour(null, scrollDate);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                while (columnLevels[0].length === 0) {\n                    this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);\n                    this.parent.activeView.getRenderDates();\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n                        this.parent.headerModule.updateDateRange();\n                    }\n                    level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n                    columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n                }\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        var currentDate = this.parent.getCurrentTime();\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0 && !isNullOrUndefined(this.element.querySelector('.' + cls.WORK_CELLS_CLASS))) {\n                this.changeCurrentTimePosition();\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    var interval = util.MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (util.MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(function () {\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                                _this.clearCurrentTimeIndicatorTimer();\n                                _this.changeCurrentTimePosition();\n                                _this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            var currentDate = util.resetTime(this.parent.getCurrentTime());\n            if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling &&\n                this.parent.activeViewOptions.group.byDate) {\n                for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n                    var resource = _a[_i];\n                    if (util.resetTime(resource.date).getTime() === currentDate.getTime()) {\n                        currentDateIndex.push(count);\n                    }\n                    count += 1;\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n                    var resource = _c[_b];\n                    var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n                    if (index >= 0) {\n                        var resIndex = this.parent.activeViewOptions.group.byDate ?\n                            (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                        currentDateIndex.push(resIndex);\n                    }\n                    count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n                }\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n        var _this = this;\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            if (curTimeWrap.length > day) {\n                curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', {\n                    className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx\n                }));\n            }\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n                addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        var hoursRange = util.getStartEndHours(util.resetTime(new Date(date.getTime())), startHour, endHour);\n        var interval = this.parent.activeViewOptions.timeScale.slotCount !== 1 ?\n            this.parent.activeViewOptions.timeScale.interval :\n            (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) / interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return parseFloat(this.parent.getElementHeight(this.element.querySelector('.' + cls.WORK_CELLS_CLASS)).toFixed(2));\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false, undefined, undefined, this.parent.root));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false, undefined, undefined, this.parent.root));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        if (dateHeader) {\n            dateHeader.scrollLeft = this.parent.uiStateValues.left;\n        }\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            var levels = this.colLevels.slice(0);\n            if (this.parent.virtualScrollModule) {\n                this.resetColLevels();\n            }\n            var wrap = this.renderContentArea();\n            workTd.appendChild(wrap);\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n            if (this.parent.virtualScrollModule) {\n                this.colLevels = levels;\n                this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n            }\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var nth;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data_1);\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\n            ntr_1.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false',\n                'aria-label': this.parent.localeObj.getConstant('expandAllDaySection')\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr', { className: cls.ALLDAY_ROW_CLASS });\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.getContentRows = function () {\n        var _this = this;\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var existingGroupIndices = this.getGroupIndices();\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var isAllowTdCreation = true;\n                if (_this.parent.virtualScrollModule && _this.parent.activeViewOptions.group.resources.length > 0) {\n                    if (existingGroupIndices.indexOf(tdData.groupIndex) > -1) {\n                        isAllowTdCreation = false;\n                    }\n                }\n                if (isAllowTdCreation) {\n                    var ntd = _this.createContentTd(tdData, r, td);\n                    ntr.appendChild(ntd);\n                }\n            }\n            rows.push(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        return rows;\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = util.resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        cellDate = new Date(cellDate.setHours(r.date.getHours(), r.date.getMinutes(), r.date.getSeconds(), r.date.getMilliseconds()));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        var skeleton = 'full';\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            var announcementText = this.parent.globalize.formatDate(tdData.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n        else {\n            var startDateText = this.parent.globalize.formatDate(cellDate, {\n                type: 'dateTime', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            var endDateText = this.parent.globalize.formatDate(this.getEndDateFromStartDate(cellDate), {\n                type: 'dateTime', skeleton: skeleton, calendar: this.parent.getCalendarMode()\n            });\n            ntd.setAttribute('aria-label', startDateText + ' ' + this.parent.localeObj.getConstant('endAt') + ' ' + endDateText);\n        }\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getStartEndHours = function (startEndTime) {\n        if (!isNullOrUndefined(startEndTime) && startEndTime !== '') {\n            var startEndDate = new Date(2000, 0, 0, 0);\n            var timeString = startEndTime.split(':');\n            if (timeString.length === 2) {\n                startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);\n            }\n            return startEndDate;\n        }\n        return new Date(2000, 0, 0, 0);\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartEndHours(this.parent.activeViewOptions.startHour);\n        var endHour = this.getStartEndHours(this.parent.activeViewOptions.endHour);\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            var milliSeconds = (startHour.getTimezoneOffset() !== endHour.getTimezoneOffset()) ?\n                (msEndHour - msStartHour) - 3600000 : (msEndHour - msStartHour);\n            length = Math.round(milliSeconds / msInterval);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.getTimeSlotRows();\n            var startDate = new Date(new Date(timeSlots[0].date.getTime()).\n                setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n                    startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n                    return new Date(startTime);\n                }\n            }\n        }\n        return null;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * day view\n */\nvar Day = /** @class */ (function (_super) {\n    __extends(Day, _super);\n    /**\n     * Constructor for day view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function Day(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        return _this;\n    }\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    Day.prototype.getModuleName = function () {\n        return 'day';\n    };\n    return Day;\n}(VerticalView));\nexport { Day };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * week view\n */\nvar Week = /** @class */ (function (_super) {\n    __extends(Week, _super);\n    /**\n     * Constructor for week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function Week(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-week-view';\n        return _this;\n    }\n    Week.prototype.startDate = function () {\n        return this.getViewStartDate();\n    };\n    Week.prototype.endDate = function () {\n        return this.getViewEndDate();\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    Week.prototype.getModuleName = function () {\n        return 'week';\n    };\n    return Week;\n}(VerticalView));\nexport { Week };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { VerticalView } from './vertical-view';\n/**\n * work week view\n */\nvar WorkWeek = /** @class */ (function (_super) {\n    __extends(WorkWeek, _super);\n    /**\n     * Constructor for work week view\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function WorkWeek(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-work-week-view';\n        return _this;\n    }\n    WorkWeek.prototype.startDate = function () {\n        return this.getViewStartDate();\n    };\n    WorkWeek.prototype.endDate = function () {\n        return this.getViewEndDate();\n    };\n    /**\n     * Get module name.\n     *\n     * @returns {string} Returns the module name.\n     */\n    WorkWeek.prototype.getModuleName = function () {\n        return 'workWeek';\n    };\n    return WorkWeek;\n}(VerticalView));\nexport { WorkWeek };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, isNullOrUndefined, createElement, addClass, append, prepend, remove, extend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month view\n */\nvar Month = /** @class */ (function (_super) {\n    __extends(Month, _super);\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthEvent = null;\n        _this.monthDates = {};\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n        this.parent.on(event.cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n            this.parent.off(event.dataReady, this.onDataReady);\n            this.parent.off(event.cellClick, this.onCellClick);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onDataReady = function (args) {\n        this.monthEvent = new MonthEvent(this.parent);\n        this.monthEvent.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onCellClick = function (event) { };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.parent.uiStateValues.top = e.target.scrollTop;\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        if (this.parent.height !== 'auto') {\n            this.setContentHeight(content, leftPanel, height);\n        }\n        var scrollBarWidth = util.getScrollBarWidth();\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        this.setColWidth(content);\n        if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === 'TimelineMonth') {\n            var top_1 = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.top : args.scrollPosition.top;\n            if (leftPanel) {\n                leftPanel.scrollTop = top_1;\n            }\n            content.scrollTop = top_1;\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToSelectedDate();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                content.scrollLeft = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.left :\n                    args.scrollPosition.left;\n            }\n        }\n        else {\n            this.scrollToSelectedDate();\n        }\n        this.retainScrollPosition();\n    };\n    Month.prototype.scrollToSelectedDate = function () {\n        var headerCell = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"'\n            + this.parent.selectedDate.getTime().toString() + '\"]');\n        var content = this.getContentAreaElement();\n        if (!isNullOrUndefined(headerCell)) {\n            content.scrollLeft = !this.parent.enableRtl ?\n                headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n        }\n        else {\n            content.scrollLeft = 0;\n        }\n        if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {\n            this.parent.uiStateValues.left = 0;\n        }\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = (this.parent.activeViewOptions.interval > 1) ?\n                    this.getContentAreaElement().firstElementChild.offsetHeight :\n                    this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);\n                if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                    var index = levels_1.findIndex(function (x, index) {\n                        return index !== 0 && x.date.getDay() === levels_1[0].date.getDay();\n                    });\n                    levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;\n                }\n                colLevels = [levels_1];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);\n        for (var col = 0; col < count; col++) {\n            var classList = [cls.HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[parseInt(col.toString(), 10)], type: 'monthDay', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n            if (this.parent.currentView !== 'Month') {\n                this.parent.activeViewOptions.group.hideNonWorkingDays = false;\n            }\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n        if (this.parent.uiStateValues.isCustomMonth) {\n            this.parent.uiStateValues.isCustomMonth = false;\n        }\n    };\n    Month.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (dateHeader) {\n            dateHeader.scrollLeft = this.parent.uiStateValues.left;\n        }\n        if (contentWrapper) {\n            contentWrapper.scrollLeft = this.parent.uiStateValues.left;\n        }\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var levels = this.colLevels.slice(0);\n        if (this.parent.virtualScrollModule) {\n            this.resetColLevels();\n        }\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: cls.TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.colLevels = levels;\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: cls.WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = this.parent.getWeekNumberContent(dates);\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        if (this.parent.currentView === 'Month') {\n            var thead = createElement('thead');\n            thead.appendChild(createElement('tr'));\n            prepend([thead], table);\n        }\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[parseInt(j.toString(), 10)];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: util.capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], cls.DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var cellArgs = { date: td.date, type: td.type };\n                var elementId = this.parent.element.id + '_';\n                var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                var templateId = elementId + viewName + 'dateHeaderTemplate';\n                var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false, undefined, undefined, this.parent.root));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: cls.NAVIGATE_CLASS });\n                var skeleton = 'full';\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', util.capitalizeFirstWord(title, 'multiple'));\n                var innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList || [cls.WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {\n                slotDatas[parseInt(rowIndex.toString(), 10)] = [];\n            }\n            slotDatas[parseInt(rowIndex.toString(), 10)].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            var level = this.colLevels.slice(0, 1)[0];\n            var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                var k = startIndex;\n                var _loop_1 = function (j) {\n                    var colDate = colDates[parseInt(k.toString(), 10)];\n                    k++;\n                    if (includeResource) {\n                        var lastRow = this_1.colLevels[(this_1.colLevels.length - 1)];\n                        var rowCount = lastRow.length / count;\n                        var resourcesTd = lastRow.slice(0, rowCount);\n                        if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {\n                            resourcesTd = lastRow.filter(function (x) { return x.date.getDay() === colDate.getDay(); });\n                            if (resourcesTd.length === 0) {\n                                j = j - 1;\n                                return out_j_1 = j, \"continue\";\n                            }\n                        }\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this_1.colLevels[this_1.colLevels.length - 1][0]);\n                    }\n                    out_j_1 = j;\n                };\n                var this_1 = this, out_j_1;\n                for (var j = startIndex; j < (this.colLevels[0].length + startIndex) && j < colDates.length; j++) {\n                    _loop_1(j);\n                    j = out_j_1;\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {\n            data.className.push(cls.OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n        this.updateSelectedCellClass(data);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.updateSelectedCellClass = function (data) {\n        return;\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        var isTimeline = this.parent.currentView === 'TimelineMonth';\n        var existingGroupIndices = isTimeline ? this.getGroupIndices() : [];\n        for (var row = 0; row < slotDatas.length; row++) {\n            if (existingGroupIndices.length > 0 &&\n                existingGroupIndices.indexOf(slotDatas[parseInt(row.toString(), 10)][0].groupIndex) > -1) {\n                continue;\n            }\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {\n                var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(cls.WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(cls.CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: data.date, type: type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(cellTemplate, ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: cls.DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            var args = { date: data.date, type: data.type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(cellHeaderTemplate, dateHeader);\n        }\n        else {\n            var innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], cls.NAVIGATE_CLASS);\n            var skeleton = 'full';\n            var announcementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var useDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());\n        var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth ||\n            this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);\n        var monthStart = util.getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        if (this.isCustomMonth()) {\n            var start = this.getMonthStart(currentDate);\n            var numberOfDays = util.WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS);\n            return util.addDays(start, (numberOfDays - 1));\n        }\n        else {\n            var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n            var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n            return util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n        }\n    };\n    Month.prototype.isCustomRange = function () {\n        var dates = this.parent.getCurrentViewDates();\n        if (dates && dates.length > 0) {\n            var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n            var weekFirstDate = util.getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);\n            return !(selectedTime >= util.getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() &&\n                selectedTime <= util.addDays(weekFirstDate, 6).getTime());\n        }\n        return false;\n    };\n    Month.prototype.getRenderDates = function (workDays, selectedDate) {\n        if (selectedDate === void 0) { selectedDate = this.parent.selectedDate; }\n        var renderDates = [];\n        var currentDate = util.resetTime(selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = util.addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = util.resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (this.isCustomMonth()) {\n            var dates = this.parent.getCurrentViewDates();\n            var date = util.getWeekFirstDate(type === 'Next' ? dates[dates.length - 1]\n                : dates[0], this.parent.activeViewOptions.firstDayOfWeek);\n            return util.addDays(date, type === 'Next' ? util.WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS) * util.WEEK_LENGTH);\n        }\n        else {\n            return util.addMonths(this.parent.selectedDate, ((type === 'Next' ? 1 : -1) * this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getStartDate = function () {\n        return this.getMonthStart(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDate = function () {\n        return this.getMonthEnd(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function (startDate, dateCollection) {\n        if (startDate === void 0) { startDate = this.parent.selectedDate; }\n        if (dateCollection === void 0) { dateCollection = null; }\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var maxNumberOfDaysPerWeek = 7;\n            startDate = !isNullOrUndefined(dateCollection) && dateCollection.length > maxNumberOfDaysPerWeek - 1\n                ? dateCollection[maxNumberOfDaysPerWeek - 1] : startDate;\n            var endDate = void 0;\n            var updateCustomRange = false;\n            if (this.isCustomMonth()) {\n                var dates = !isNullOrUndefined(dateCollection) && dateCollection.length > 0 ? dateCollection :\n                    this.parent.getCurrentViewDates();\n                updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() ||\n                    dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();\n                if (updateCustomRange) {\n                    startDate = dates[0];\n                    endDate = dates[dates.length - 1];\n                }\n            }\n            var isUpdateDateRange = (this.parent.currentView !== 'Month' || !this.isCustomMonth());\n            if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {\n                endDate = endDate ? endDate : util.addMonths(util.lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);\n                if (startDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                    return util.capitalizeFirstWord(monthNames, 'single');\n                }\n                var text = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    startDate.getFullYear() + ' - ' +\n                    this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() }) +\n                    this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                return util.capitalizeFirstWord(text, 'single');\n            }\n            var format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(startDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(!isNullOrUndefined(dateCollection) && dateCollection.length > 0 ? dateCollection[0] :\n            this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.formatViewLabel(viewStr, this.getStartDate(), this.getEndDate());\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: cls.WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(event.renderCell, args);\n        return tr;\n    };\n    Month.prototype.unWireEvents = function () {\n        var contentScrollableEle = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentScrollableEle) {\n            EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        }\n    };\n    Month.prototype.isCustomMonth = function () {\n        return this.parent.currentView === 'Month' &&\n            (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);\n    };\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    Month.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.monthEvent) {\n                this.monthEvent.destroy();\n                this.monthEvent = null;\n            }\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Month;\n}(ViewBase));\nexport { Month };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, createElement, addClass, closest, prepend, append, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { YearEvent } from '../event-renderer/year';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * year view\n */\nvar Year = /** @class */ (function (_super) {\n    __extends(Year, _super);\n    function Year(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-year-view';\n        _this.isInverseTableSelect = false;\n        _this.yearEventModule = null;\n        return _this;\n    }\n    Year.prototype.getModuleName = function () {\n        return 'year';\n    };\n    Year.prototype.renderLayout = function (className) {\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var viewTypeClass = this.parent.activeViewOptions.orientation === 'Horizontal' ? 'e-horizontal' : 'e-vertical';\n        addClass([this.element], [this.viewClass, viewTypeClass, className]);\n        this.renderPanel(className);\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            addClass([this.element], [cls.VIRTUAL_SCROLL_CLASS]);\n        }\n        var calendarTable = this.createTableLayout(cls.OUTER_TABLE_CLASS);\n        this.element.appendChild(calendarTable);\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        var calendarTBody = calendarTable.querySelector('tbody');\n        this.rowCount = this.getRowColumnCount('row');\n        this.columnCount = this.getRowColumnCount('column');\n        this.renderHeader(calendarTBody);\n        this.renderContent(calendarTBody);\n        if (this.parent.currentView !== 'Year' && this.parent.uiStateValues.isGroupAdaptive) {\n            this.generateColumnLevels();\n            this.renderResourceMobileLayout();\n        }\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), 'scroll', this.onContentScroll, this);\n        this.parent.notify(event.contentReady, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Year.prototype.renderHeader = function (headerWrapper) { };\n    Year.prototype.renderContent = function (content) {\n        var tr = createElement('tr');\n        content.appendChild(tr);\n        var td = createElement('td');\n        tr.appendChild(td);\n        this.element.querySelector('tbody').appendChild(tr);\n        var contentWrapper = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        td.appendChild(contentWrapper);\n        var calendarTable = this.createTableLayout('e-calendar-table');\n        contentWrapper.appendChild(calendarTable);\n        var cTr = createElement('tr');\n        calendarTable.querySelector('tbody').appendChild(cTr);\n        var cTd = createElement('td');\n        cTr.appendChild(cTd);\n        var calendarWrapper = createElement('div', { className: 'e-calendar-wrapper' });\n        cTd.appendChild(calendarWrapper);\n        var months = this.getMonths();\n        for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {\n            var month = months_1[_i];\n            var currentMonth = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n            var calendarElement = createElement('div', {\n                className: 'e-month-calendar e-calendar',\n                attrs: { 'data-role': 'calendar' }\n            });\n            calendarElement.appendChild(this.renderCalendarHeader(currentMonth));\n            calendarElement.appendChild(this.renderCalendarContent(currentMonth));\n            calendarWrapper.appendChild(calendarElement);\n        }\n        this.renderDates.splice(0, 1);\n    };\n    Year.prototype.renderCalendarHeader = function (currentDate) {\n        var headerWrapper = createElement('div', { className: 'e-header e-month' });\n        var headerContent = createElement('div', { className: 'e-day e-title' });\n        if (this.parent.activeViewOptions.monthHeaderTemplate) {\n            var args = { date: currentDate, type: 'monthHeader' };\n            this.renderTemplates(this.parent.getMonthHeaderTemplate(), args, 'monthHeaderTemplate', this.parent.activeViewOptions.monthHeaderTemplateName, headerContent);\n        }\n        else {\n            headerContent.innerHTML = this.getMonthName(currentDate);\n        }\n        headerWrapper.appendChild(headerContent);\n        this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: headerContent, date: currentDate });\n        return headerWrapper;\n    };\n    Year.prototype.renderCalendarContent = function (currentDate) {\n        var dateCollection = this.getMonthDates(currentDate);\n        var contentWrapper = createElement('div', { className: 'e-content e-month' });\n        var contentTable = this.createTableLayout('e-calendar-table ' + cls.CONTENT_TABLE_CLASS);\n        contentWrapper.appendChild(contentTable);\n        this.setAriaAttributes(contentTable);\n        var thead = createElement('thead', { className: 'e-week-header' });\n        var tr = createElement('tr');\n        var currentWeek = util.getWeekFirstDate(util.firstDateOfMonth(currentDate), this.parent.activeViewOptions.firstDayOfWeek);\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('th'));\n        }\n        for (var i = 0; i < util.WEEK_LENGTH; i++) {\n            if (this.parent.activeViewOptions.dayHeaderTemplate) {\n                var th = createElement('th');\n                var args = { date: currentWeek, type: 'dayHeader' };\n                this.renderTemplates(this.parent.getDayHeaderTemplate(), args, 'dayHeaderTemplate', this.parent.activeViewOptions.dayHeaderTemplateName, th);\n                tr.appendChild(th);\n            }\n            else {\n                tr.appendChild(createElement('th', { innerHTML: this.parent.getDayNames('narrow')[currentWeek.getDay()] }));\n            }\n            var nextDay = new Date(currentWeek.getTime() + util.MS_PER_DAY);\n            currentWeek = nextDay.getDate() === currentWeek.getDate() ? util.addDays(nextDay, 1) : nextDay;\n        }\n        thead.appendChild(tr);\n        prepend([thead], contentTable);\n        var tbody = contentTable.querySelector('tbody');\n        while (dateCollection.length > 0) {\n            var weekDates = dateCollection.splice(0, util.WEEK_LENGTH);\n            var tr_1 = createElement('tr');\n            if (this.parent.activeViewOptions.showWeekNumber) {\n                var weekNumber = this.parent.getWeekNumberContent(weekDates);\n                var td = createElement('td', {\n                    className: 'e-week-number',\n                    attrs: { 'title': this.parent.localeObj.getConstant('week') + ' ' + weekNumber },\n                    innerHTML: weekNumber\n                });\n                tr_1.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'weekNumberCells', element: td });\n            }\n            for (var _i = 0, weekDates_1 = weekDates; _i < weekDates_1.length; _i++) {\n                var date = weekDates_1[_i];\n                var td = createElement('td', {\n                    className: 'e-cell ' + cls.WORK_CELLS_CLASS,\n                    attrs: { 'data-date': date.getTime().toString() }\n                });\n                if (this.parent.activeViewOptions.cellHeaderTemplate) {\n                    var args = { date: date, type: 'monthCells' };\n                    this.renderTemplates(this.parent.getCellHeaderTemplate(), args, 'cellHeaderTemplate', this.parent.activeViewOptions.cellHeaderTemplateName, td);\n                }\n                else {\n                    var span = createElement('span', {\n                        className: 'e-day', innerHTML: this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }),\n                        attrs: { title: this.parent.globalize.formatDate(date, { type: 'date', skeleton: 'full' }) }\n                    });\n                    td.appendChild(span);\n                }\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var args = { date: date, type: 'monthCells' };\n                    this.renderTemplates(this.parent.getCellTemplate(), args, 'cellTemplate', this.parent.activeViewOptions.cellTemplateName, td);\n                }\n                var classList = [];\n                if (currentDate.getMonth() !== date.getMonth()) {\n                    classList.push(cls.OTHERMONTH_CLASS);\n                    if (td.firstElementChild && !this.parent.activeViewOptions.cellTemplate) {\n                        td.firstElementChild.setAttribute('aria-disabled', 'true');\n                    }\n                }\n                if (this.isCurrentDate(date) && currentDate.getMonth() === date.getMonth()) {\n                    classList = classList.concat(['e-today', 'e-selected']);\n                }\n                if (classList.length > 0) {\n                    addClass([td], classList);\n                }\n                tr_1.appendChild(td);\n                if (currentDate.getMonth() === date.getMonth()) {\n                    this.renderDates.push(new Date(date));\n                }\n                if (!this.parent.isMinMaxDate(date)) {\n                    addClass([td], cls.DISABLE_DATES);\n                }\n                else {\n                    EventHandler.add(td, 'click', this.onCellClick, this);\n                    if (!this.parent.isAdaptive) {\n                        EventHandler.add(td, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n                    }\n                }\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n            }\n            tbody.appendChild(tr_1);\n        }\n        return contentWrapper;\n    };\n    Year.prototype.createTableColGroup = function (count) {\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < count; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        return colGroupEle;\n    };\n    Year.prototype.getMonthName = function (date) {\n        var month = this.parent.globalize.formatDate(date, {\n            format: this.parent.activeViewOptions.dateFormat || 'MMMM y',\n            calendar: this.parent.getCalendarMode()\n        });\n        return util.capitalizeFirstWord(month, 'multiple');\n    };\n    Year.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots([this.parent.selectedDate], this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                colLevels = [this.getDateSlots([this.parent.selectedDate], resourceLevel.workDays)];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        colLevels.pop();\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    // eslint-disable-next-line max-len\n    Year.prototype.getDateSlots = function (renderDates, workDays, startHour, endHour) {\n        if (startHour === void 0) { startHour = this.parent.workHours.start; }\n        if (endHour === void 0) { endHour = this.parent.workHours.end; }\n        var dateCol = [{\n                date: renderDates[0], type: 'dateHeader', className: [cls.HEADER_CELLS_CLASS], colSpan: 1, workDays: workDays,\n                startHour: new Date(+this.parent.globalize.parseDate(startHour, { skeleton: 'Hm' })),\n                endHour: new Date(+this.parent.globalize.parseDate(endHour, { skeleton: 'Hm' }))\n            }];\n        return dateCol;\n    };\n    Year.prototype.getMonthDates = function (date) {\n        var startDate = util.getWeekFirstDate(util.firstDateOfMonth(date), this.parent.activeViewOptions.firstDayOfWeek);\n        var endDate = util.addDays(new Date(+startDate), (6 * util.WEEK_LENGTH));\n        var dateCollection = [];\n        for (var start = startDate; start.getTime() < endDate.getTime(); start = util.addDays(start, 1)) {\n            dateCollection.push(util.resetTime(new Date(start)));\n        }\n        return dateCollection;\n    };\n    Year.prototype.getRowColumnCount = function (type) {\n        var months = this.getMonths();\n        var year = this.parent.selectedDate.getFullYear();\n        var monthDaysCount = [];\n        for (var _i = 0, months_2 = months; _i < months_2.length; _i++) {\n            var month = months_2[_i];\n            monthDaysCount.push(new Date(year, month, 1).getDay() + new Date(year, month + 1, 0).getDate());\n        }\n        var maxCount = Math.max.apply(Math, monthDaysCount);\n        var count;\n        if (type === 'row') {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? months.length : maxCount;\n        }\n        else {\n            count = this.parent.activeViewOptions.orientation === 'Horizontal' ? maxCount : months.length;\n        }\n        return count;\n    };\n    Year.prototype.isCurrentDate = function (date) {\n        return util.resetTime(new Date()).getTime() === util.resetTime(new Date(date.getTime())).getTime();\n    };\n    Year.prototype.getMonths = function () {\n        var _this = this;\n        // eslint-disable-next-line prefer-spread\n        return Array.apply(null, { length: this.parent.activeViewOptions.monthsCount }).map(function (value, index) {\n            return _this.parent.firstMonthOfYear + index;\n        });\n    };\n    Year.prototype.renderTemplates = function (fn, args, tName, vName, ele) {\n        var templateId = this.parent.element.id + '_' + vName + tName;\n        var template = [].slice.call(fn(args, this.parent, tName, templateId, false, undefined, undefined, this.parent.root));\n        append(template, ele);\n    };\n    Year.prototype.onCellClick = function (e) {\n        var target = closest(e.target, '.' + cls.WORK_CELLS_CLASS);\n        var startDate = this.parent.getDateFromElement(target);\n        this.parent.activeCellsData = this.parent.getCellDetails(target);\n        var isPrevious = startDate.getTime() < this.getStartDate().getTime();\n        if (isPrevious || startDate.getTime() > this.getEndDate().getTime()) {\n            this.parent.changeDate(this.parent.activeView.getNextPreviousDate(isPrevious ? 'Previous' : 'Next'), e);\n            var activeDate = this.parent.activeCellsData.startTime.getTime();\n            var inRange = activeDate >= this.getStartDate().getTime() && activeDate <= this.getEndDate().getTime();\n            var dateAttr = inRange ? activeDate : (isPrevious ? this.getEndDate() : this.getStartDate()).getTime();\n            var selectedCell = this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + dateAttr + '\"]');\n            this.parent.selectCell(selectedCell);\n            this.parent.activeCellsData = this.parent.getCellDetails(selectedCell);\n        }\n        else {\n            var endDate = util.addDays(new Date(startDate.getTime()), 1);\n            var filteredEvents = this.parent.eventBase.filterEvents(startDate, endDate);\n            var moreEventArgs = { date: startDate, event: filteredEvents, element: e.target };\n            if (target.classList.contains(cls.OTHERMONTH_CLASS)) {\n                target = this.parent.element.querySelector(':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + target.getAttribute('data-date') + '\"]');\n            }\n            this.parent.activeCellsData = this.parent.getCellDetails(target);\n            var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: 'cellClick' });\n            this.parent.trigger(event.cellClick, args);\n            this.parent.quickPopup.moreEventClick(moreEventArgs, endDate);\n        }\n    };\n    Year.prototype.onContentScroll = function (e) {\n        var target = e.target;\n        var headerWrapper = this.getDatesHeaderElement();\n        this.parent.notify(event.virtualScroll, e);\n        if (headerWrapper) {\n            headerWrapper.firstElementChild.scrollLeft = target.scrollLeft;\n        }\n        var scrollTopSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var scrollTopElement = this.element.querySelector(scrollTopSelector);\n        if (scrollTopElement) {\n            scrollTopElement.scrollTop = target.scrollTop;\n        }\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Year.prototype.onScrollUiUpdate = function (args) {\n        var height = this.parent.element.offsetHeight - this.getHeaderBarHeight();\n        var headerWrapper = this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n        if (headerWrapper) {\n            height -= headerWrapper.offsetHeight;\n        }\n        var contentWrapper = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentWrapper) {\n            contentWrapper.style.height = formatUnit(height);\n        }\n        if (!this.parent.isAdaptive && headerWrapper) {\n            var scrollBarWidth = util.getScrollBarWidth();\n            if (contentWrapper.offsetWidth - contentWrapper.clientWidth > 0) {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n                headerWrapper.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n            }\n            else {\n                headerWrapper.firstElementChild.style[args.cssProperties.border] = '';\n                headerWrapper.style[args.cssProperties.padding] = '';\n            }\n        }\n        this.setColWidth(this.getContentAreaElement());\n        var leftPanelSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \",.\" + cls.RESOURCE_COLUMN_WRAP_CLASS;\n        var leftPanelElement = this.element.querySelector(leftPanelSelector);\n        if (leftPanelElement) {\n            var isYScroll = contentWrapper.scrollWidth > contentWrapper.clientWidth;\n            leftPanelElement.style.height = formatUnit(height - (isYScroll ? 17 : 0));\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.parent.uiStateValues.isInitial = false;\n                this.parent.uiStateValues.top = this.parent.uiStateValues.left = 0;\n            }\n            else {\n                if (leftPanelElement) {\n                    leftPanelElement.scrollTop = this.parent.uiStateValues.top;\n                }\n                contentWrapper.scrollTop = this.parent.uiStateValues.top;\n                contentWrapper.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        this.retainScrollPosition();\n    };\n    Year.prototype.getStartDate = function () {\n        return new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear % 12, 1);\n    };\n    Year.prototype.getEndDate = function () {\n        return util.addDays(util.addMonths(this.getStartDate(), this.parent.monthsCount), -1);\n    };\n    Year.prototype.startDate = function () {\n        return this.parent.currentView === 'Year' ? util.getWeekFirstDate(this.getStartDate(), this.parent.activeViewOptions.firstDayOfWeek) : this.getStartDate();\n    };\n    Year.prototype.endDate = function () {\n        return this.parent.currentView === 'Year' ? util.addDays(util.getWeekLastDate(this.getEndDate(), this.parent.activeViewOptions.firstDayOfWeek), 1) :\n            util.addDays(this.getEndDate(), 1);\n    };\n    Year.prototype.getEndDateFromStartDate = function (start) {\n        var date = new Date(start.getTime());\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            date = util.lastDateOfMonth(date);\n        }\n        return util.addDays(new Date(date.getTime()), 1);\n    };\n    Year.prototype.getNextPreviousDate = function (type) {\n        return util.addYears(this.parent.selectedDate, ((type === 'Next') ? 1 : -1));\n    };\n    Year.prototype.getDateRangeText = function (date, dateCollection) {\n        if (date === void 0) { date = this.parent.selectedDate; }\n        if (dateCollection === void 0) { dateCollection = null; }\n        var isDateColAvail = !isNullOrUndefined(dateCollection) && dateCollection.length > 0;\n        var startDate = isDateColAvail ? dateCollection[0] : this.getStartDate();\n        var endDate = isDateColAvail ? dateCollection[dateCollection.length - 1] : this.getEndDate();\n        if (startDate.getFullYear() !== endDate.getFullYear()) {\n            return this.parent.globalize.formatDate(startDate, { skeleton: 'yMMM' }) + ' - ' + this.parent.globalize.formatDate(endDate, { skeleton: 'yMMM' });\n        }\n        else {\n            return this.parent.globalize.formatDate(isDateColAvail ? dateCollection[0] : date, { skeleton: 'y' });\n        }\n    };\n    Year.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n    };\n    Year.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onScrollUiUpdate);\n            this.parent.off(event.dataReady, this.onDataReady);\n        }\n    };\n    Year.prototype.onDataReady = function (args) {\n        this.yearEventModule = new YearEvent(this.parent);\n        this.yearEventModule.renderAppointments();\n        this.parent.notify(event.eventsLoaded, args);\n    };\n    Year.prototype.scrollToDate = function (scrollDate) {\n        var date = +new Date(util.resetTime(scrollDate));\n        var element = this.element.querySelector('.' + cls.WORK_CELLS_CLASS + ':not(.' + cls.OTHERMONTH_CLASS + ')[data-date=\"' + date + '\"]');\n        if (element) {\n            element = closest(element, '.e-month-calendar');\n            this.getContentAreaElement().scrollTop = element.offsetTop;\n        }\n    };\n    Year.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            var contentScroll = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (contentScroll) {\n                EventHandler.remove(contentScroll, 'scroll', this.onContentScroll);\n            }\n            if (this.yearEventModule) {\n                this.yearEventModule.destroy();\n                this.yearEventModule = null;\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Year;\n}(ViewBase));\nexport { Year };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, addClass, createElement, append, EventHandler, extend, remove } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { ViewBase } from '../renderer/view-base';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nvar AgendaBase = /** @class */ (function (_super) {\n    __extends(AgendaBase, _super);\n    function AgendaBase(parent) {\n        return _super.call(this, parent) || this;\n    }\n    // eslint-disable-next-line max-len\n    AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n        var _this = this;\n        var listElement;\n        var fieldMapping = this.parent.eventFields;\n        if (type === 'noEvents') {\n            var noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: \"<div class=\\\"\" + cls.AGENDA_NO_EVENT_CLASS + \"\\\">\" + this.parent.localeObj.getConstant('noEvents') + \"</div>\"\n            });\n            if (listElement.querySelector('.e-agenda-item').children.length === 0) {\n                listElement.firstElementChild.appendChild(createElement('div', { className: cls.AGENDA_NO_EVENT_CLASS, innerHTML: this.parent.localeObj.getConstant('noEvents') }));\n            }\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            var listElements = [].slice.call(listElement.children);\n            listElements.forEach(function (element, li) {\n                var appWrapper = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[parseInt(li.toString(), 10)][\"\" + _this.parent.eventFields.id],\n                        'data-guid': listData[parseInt(li.toString(), 10)].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-disabled': _this.parent.eventBase.getReadonlyAttribute(listData[parseInt(li.toString(), 10)]),\n                        'aria-label': _this.parent.getAnnouncementString(listData[parseInt(li.toString(), 10)])\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                _this.parent.eventBase.applyResourceColor(appWrapper, listData[parseInt(li.toString(), 10)], 'borderColor', groupOrder);\n                var templateEle;\n                if (!isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n                    addClass([appWrapper], cls.EVENT_TEMPLATE);\n                    var scheduleId = _this.parent.element.id + '_';\n                    var viewName = _this.parent.activeViewOptions.eventTemplateName;\n                    var templateId = scheduleId + viewName + 'eventTemplate';\n                    templateEle =\n                        _this.parent.getAppointmentTemplate()(listData[parseInt(li.toString(), 10)], _this.parent, 'eventTemplate', templateId, false, undefined, undefined, _this.parent.root);\n                    if (!isNullOrUndefined(listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceRule])) {\n                        var iconClass = (listData[parseInt(li.toString(), 10)][fieldMapping.id] ===\n                            listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceID]) ?\n                            cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                        appWrapper.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                    }\n                }\n                else {\n                    templateEle = _this.createAppointment(listData[parseInt(li.toString(), 10)]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                util.removeChildren(element);\n                element.appendChild(appWrapper);\n                var args = {\n                    data: extend({}, listData[parseInt(li.toString(), 10)], null, true),\n                    element: element, cancel: false\n                };\n                _this.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        remove(element);\n                    }\n                });\n            });\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], cls.AGENDA_DAY_BORDER_CLASS);\n        }\n        this.parent.renderTemplates();\n        return aTd;\n    };\n    AgendaBase.prototype.createAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        var appSubjectWrap = createElement('div', { className: cls.SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        var appSubjectText = createElement('div', { className: cls.SUBJECT_CLASS });\n        this.parent.sanitize(eventSubject, appSubjectText);\n        appSubjectWrap.appendChild(appSubjectText);\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            var appLocation = createElement('div', { className: cls.LOCATION_CLASS });\n            this.parent.sanitize(eventLocation, appLocation);\n            appSubjectWrap.appendChild(appLocation);\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            var iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n        }\n        var strDate = event[fieldMapping.startTime];\n        var endDate = event[fieldMapping.endTime];\n        var isAllDay = event[fieldMapping.isAllDay];\n        var allDayStr = this.parent.localeObj.getConstant('allDay');\n        var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            var milliSeconds = (endDate.getTimezoneOffset() !== strDate.getTimezoneOffset()) ?\n                (endDate.getTime() - strDate.getTime() + 3600000) : (endDate.getTime() - strDate.getTime());\n            var eventString = (milliSeconds / util.MS_PER_DAY) >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        var displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        var appDateTime = createElement('div', { className: cls.DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    };\n    AgendaBase.prototype.processAgendaEvents = function (events) {\n        var eventsProcessed = [];\n        if (isNullOrUndefined(events)) {\n            return eventsProcessed;\n        }\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            var spanned = this.parent.eventBase.splitEventByDay(event_1);\n            eventsProcessed = eventsProcessed.concat(spanned.length > 1 ? spanned : event_1);\n        }\n        return eventsProcessed;\n    };\n    AgendaBase.prototype.wireEventActions = function () {\n        var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n            var element = eventElement_1[_i];\n            this.parent.eventBase.wireAppointmentEvents(element, this.parent.getEventDetails(element), true);\n        }\n        var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n            var element = dateHeaderElement_1[_a];\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    };\n    AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate, agendaEnd) {\n        if (agendaEnd === void 0) { agendaEnd = null; }\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        var agendaLastDate = util.addDays(new Date(agendaDate.getTime()), noOfDays);\n        var days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        var resColl = this.parent.resourceBase.resourceCollection;\n        var resData = this.parent.resourceBase.lastResourceLevel;\n        var agendaStart = agendaDate;\n        var initialDate = agendaDate;\n        var showWeekend = this.parent.activeViewOptions.showWeekend;\n        for (var i = 0; i < days; i++) {\n            var lastLevelInfo = [];\n            var tempLastLevelInfo = [];\n            var tempIndex = 0;\n            var eventObj = void 0;\n            var dateObj = void 0;\n            var firstDate = util.addDays(initialDate, i);\n            if (this.parent.currentView === 'Agenda' && this.parent.activeViewOptions.group.byDate &&\n                this.parent.activeViewOptions.allowVirtualScrolling && !showWeekend && !this.isWorkDay(firstDate)) {\n                do {\n                    firstDate = util.addDays(firstDate, 1);\n                    if (firstDate >= agendaEnd) {\n                        break;\n                    }\n                } while (!this.isWorkDay(firstDate) ||\n                    this.parent.eventBase.filterEvents(firstDate, util.addDays(firstDate, 1)).length < 1);\n                if (firstDate >= agendaEnd) {\n                    break;\n                }\n                initialDate = util.addDays(firstDate, -i);\n                agendaLastDate = util.addDays(firstDate, 1);\n            }\n            var finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? util.addDays(firstDate, 1) : agendaLastDate;\n            var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (var res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    var data = [];\n                    agendaDate = firstDate;\n                    // eslint-disable-next-line max-len\n                    var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[parseInt(res.toString(), 10)]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (var r = 0; r < noOfDays; r++) {\n                            // eslint-disable-next-line max-len\n                            var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, util.addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (((showWeekend || !showWeekend && (this.parent.group.byDate ? this.isWorkDay(agendaDate) :\n                                this.isWorkDay(agendaDate, resData[parseInt(res.toString(), 10)].workDays)))\n                                && (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays)) ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[parseInt(res.toString(), 10)].groupIndex,\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[parseInt(tempIndex.toString(), 10)]) {\n                                    lastLevelInfo[parseInt(tempIndex.toString(), 10)] = [];\n                                }\n                                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(eventObj);\n                                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = util.addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                if (data.length > 0) {\n                                    lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = cls.AGENDA_DAY_BORDER_CLASS;\n                                    var tempObj = {\n                                        rowSpan: data.length, type: 'resourceColumn', resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                                        groupOrder: resData[parseInt(res.toString(), 10)].groupOrder.slice(0, -1),\n                                        resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                        groupIndex: (lastLevelInfo.length - data.length), className: [cls.RESOURCE_NAME],\n                                        date: agendaDate\n                                    };\n                                    lastLevelInfo[parseInt((lastLevelInfo.length - data.length).toString(), 10)].push(tempObj);\n                                    tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                }\n                                break;\n                            }\n                        }\n                    }\n                }\n                var topResources = resColl.slice(0, -1);\n                var tempGroupedData = [];\n                var totalRowSpan = 0;\n                for (var y = 0; y < topResources.length; y++) {\n                    var data = topResources[topResources.length - (y + 1)].dataSource;\n                    for (var x = 0; x < data.length; x++) {\n                        var z = 0;\n                        for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                            // eslint-disable-next-line max-len\n                            if (tempLastLevelInfo[parseInt(u.toString(), 10)].groupOrder[topResources.length - (y + 1)] === data[parseInt(x.toString(), 10)][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[parseInt(u.toString(), 10)].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[parseInt(u.toString(), 10)], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[parseInt(x.toString(), 10)];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        var totalCollection = this.parent.eventBase.filterEvents(agendaStart, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, agendaStart);\n        }\n    };\n    AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n        var tr = createElement('tr');\n        var ntr;\n        var td = createElement('td');\n        var tempData;\n        var rowSpan = 0;\n        var level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            var tContentCollection = [];\n            var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (var w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[parseInt(w.toString(), 10)]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            var rowSpanCollection = tContentCollection.filter(function (data) { return data.type === level; });\n            for (var x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[parseInt(x.toString(), 10)].rowSpan;\n            }\n        }\n        for (var row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (var col = tContent[parseInt(row.toString(), 10)].length - 1; col >= 0; col--) {\n                var data = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n                var ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    var className = [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    if (this.isCurrentDate(new Date(data.date.getTime()))) {\n                        addClass(ntd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    var elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    for (var i = 0; i < ntr.childNodes.length; i++) {\n                        var currentElement = ntr.childNodes.item(i);\n                        var renderCellElementType = currentElement.classList.contains('e-resource-column') ?\n                            event.resourceHeader : event.dateHeader;\n                        this.parent.trigger(event.renderCell, {\n                            elementType: renderCellElementType, element: currentElement, date: data.date, groupIndex: data.groupIndex\n                        });\n                    }\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                    var renderCellType = (data.eventData.length === 0) ? event.noEvents : event.agendaCells;\n                    this.parent.trigger(event.renderCell, {\n                        elementType: renderCellType, element: ntd, date: data.date, groupIndex: data.groupIndex\n                    });\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], cls.AGENDA_RESOURCE_CLASS);\n                    this.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                var ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS, cls.DATE_BORDER_CLASS]);\n                var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('data-row-index', daysCount.toString());\n                if (this.parent.element.querySelector(\".e-agenda-view tr[data-row-index=\\\"\" + daysCount + \"\\\"]\")) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    };\n    AgendaBase.prototype.createDateHeaderElement = function (date) {\n        var dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: cls.AGENDA_HEADER_CLASS });\n            var args = { date: date, type: 'dateHeader' };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false, undefined, undefined, this.parent.root));\n            append(dateTemplate, dateHeader);\n        }\n        else {\n            dateHeader = this.getMobileDateElement(date, cls.AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    };\n    AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate, hasNoEvents) {\n        var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        var eTd = eTr.children[0];\n        var noEvents = createElement('div', {\n            className: cls.AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n        if (hasNoEvents) {\n            this.parent.trigger(event.renderCell, { elementType: event.noEvents, element: eTd, date: agendaDate });\n        }\n    };\n    AgendaBase.prototype.createTableRowElement = function (date, type) {\n        var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        var tr = createElement('tr', { attrs: { 'data-row-index': daysCount.toString() } });\n        var td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? cls.MONTH_HEADER_CLASS : cls.AGENDA_CELLS_CLASS,\n                'aria-selected': 'false',\n                'data-column-index': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        var dTd = td.cloneNode();\n        var aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    };\n    AgendaBase.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    return AgendaBase;\n}(ViewBase));\nexport { AgendaBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend, remove } from '@syncfusion/ej2-base';\nimport { createElement, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        return _this;\n    }\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ?\n            args.processedData : this.parent.eventsProcessed;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        util.removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(event.eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var data = _a[_i];\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.refreshHeader = function () {\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        if (this.parent.activeViewOptions.group.byDate) {\n            util.removeChildren(tBody);\n        }\n        else {\n            remove(tBody.firstElementChild);\n        }\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.renderEmptyContent(tBody, agendaDate, true);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            if (!this.parent.activeViewOptions.showWeekend && !this.isAgendaWorkDay(isObject[0][fieldMapping.startTime])) {\n                for (var _i = 0, isObject_1 = isObject; _i < isObject_1.length; _i++) {\n                    var event_2 = isObject_1[_i];\n                    if (this.isAgendaWorkDay(event_2[fieldMapping.startTime])) {\n                        agendaDate = new Date(new Date(event_2[fieldMapping.startTime].getTime()).setHours(0, 0, 0, 0));\n                        this.updateHeaderText(event_2[fieldMapping.startTime]);\n                        break;\n                    }\n                }\n            }\n            else {\n                agendaDate = new Date(new Date(isObject[0][fieldMapping.startTime].getTime()).setHours(0, 0, 0, 0));\n                this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n            }\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange();\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date, lastDate);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var nTr = this.createTableRowElement(agendaDate, 'data');\n                    var virtualContent = this.element.querySelector('tr[data-row-index=\"' + (+(nTr.dataset.rowIndex)) + '\"]');\n                    if (virtualContent || !this.parent.activeViewOptions.showWeekend && !this.isAgendaWorkDay(agendaDate)) {\n                        agendaDate = util.addDays(agendaDate, 1);\n                        if (!virtualContent && this.parent.activeViewOptions.allowVirtualScrolling) {\n                            day--;\n                        }\n                        if (agendaDate.getTime() > lastDate.getTime()) {\n                            break;\n                        }\n                        continue;\n                    }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    var filterData = this.appointmentFiltering(agendaDate);\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        this.parent.trigger(event.renderCell, { elementType: event.dateHeader, element: dTd, date: agendaDate });\n                        var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                        var renderCellElementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ?\n                            event.noEvents : event.agendaCells;\n                        this.parent.trigger(event.renderCell, { elementType: renderCellElementType, element: cTd, date: agendaDate });\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    Agenda.prototype.isAgendaWorkDay = function (date) {\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.group.byDate) {\n            return this.isWorkDay(date, this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].workDays);\n        }\n        else {\n            return this.isWorkDay(date);\n        }\n    };\n    Agenda.prototype.agendaScrolling = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n                        var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight >= (scrollHeight - 5)) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[parseInt(a.toString(), 10)];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(date);\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            if (this.parent.activeViewOptions.showWeekend || !this.parent.activeViewOptions.showWeekend &&\n                this.isAgendaWorkDay(currentDate)) {\n                var filterData = this.appointmentFiltering(currentDate);\n                if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                    daysCount++;\n                }\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fields.startTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fieldMapping.endTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'Next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n        var date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day', e);\n        }\n    };\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n            this.parent.off(event.dataReady, this.eventLoad);\n        }\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n        }\n    };\n    Agenda.prototype.scrollToDate = function (scrollDate) {\n        var date = new Date(+util.resetTime(scrollDate));\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, util.addDays(date, 1), true).length > 0) {\n                this.parent.changeDate(date);\n            }\n        }\n        else {\n            var dateElement = this.element.querySelector('.' + cls.AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n            if (dateElement) {\n                this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n            }\n        }\n    };\n    Agenda.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Agenda;\n}(AgendaBase));\nexport { Agenda };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month agenda view\n */\nvar MonthAgenda = /** @class */ (function (_super) {\n    __extends(MonthAgenda, _super);\n    function MonthAgenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'narrow';\n        _this.viewClass = 'e-month-agenda-view';\n        _this.monthAgendaDate = new Date('' + parent.selectedDate);\n        return _this;\n    }\n    MonthAgenda.prototype.getModuleName = function () {\n        return 'monthAgenda';\n    };\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\n        var contentArea = this.getContentAreaElement();\n        var wrapperContainer = createElement('div', { className: cls.WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        var appWrap = createElement('div', { className: cls.APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    };\n    MonthAgenda.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    };\n    MonthAgenda.prototype.updateSelectedCellClass = function (data) {\n        if (util.resetTime(data.date).getTime() === util.resetTime(this.monthAgendaDate).getTime()) {\n            data.className.push(cls.SELECTED_CELL_CLASS);\n        }\n    };\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        var contentArea = this.getContentAreaElement().firstElementChild;\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight;\n        var contentAreaHeight = (this.parent.activeViewOptions.interval > 1) ?\n            Math.round(availHeight * 0.8) : contentArea.offsetHeight;\n        var appContainerHeight = availHeight - contentAreaHeight;\n        var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n        var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            if (this.parent.activeViewOptions.interval > 1) {\n                contentArea.style.height = formatUnit(contentAreaHeight);\n                EventHandler.add(contentArea, 'scroll', this.onContentScroll, this);\n            }\n            wrapperContainer.style.height = eventWrapper.style.height = formatUnit(appContainerHeight);\n        }\n    };\n    MonthAgenda.prototype.onDataReady = function (args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.agendaBase = this.getAgendaBase();\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var count = 0;\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            var filterData = this.appointmentFiltering(date);\n            var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[parseInt(count.toString(), 10)];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n        this.parent.notify(events.eventsLoaded, {});\n    };\n    MonthAgenda.prototype.onCellClick = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        var filterData = this.appointmentFiltering(event.startTime);\n        this.onEventRender(filterData, event.startTime);\n        this.parent.notify(events.eventsLoaded, {});\n        this.monthAgendaDate = new Date('' + event.startTime);\n    };\n    MonthAgenda.prototype.onEventRender = function (events, date) {\n        this.agendaBase = this.getAgendaBase();\n        var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        util.removeChildren(appWrap);\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                var appContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                var table = this.createTableLayout();\n                var tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    };\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\n        var dateStart = util.resetTime(new Date(date.getTime()));\n        var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    };\n    MonthAgenda.prototype.clearElements = function () {\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n            var appointmentIndicator = appointmentIndicators_1[_i];\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n    };\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n        var app = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        util.removeChildren(appWrap);\n        appWrap.appendChild(app);\n    };\n    MonthAgenda.prototype.getNextPreviousDate = function (type) {\n        var selectedDate = this.parent.selectedDate;\n        var interval = (type === 'Next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n        var navigateDate = util.addMonths(this.parent.selectedDate, interval);\n        var month = (type === 'Next') ? 2 : 0;\n        var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n        var date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n        return this.monthAgendaDate;\n    };\n    MonthAgenda.prototype.getAgendaBase = function () {\n        return this.agendaBase || new AgendaBase(this.parent);\n    };\n    MonthAgenda.prototype.destroy = function () {\n        if (this.agendaBase) {\n            this.agendaBase.destroy();\n            this.agendaBase = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return MonthAgenda;\n}(Month));\nexport { MonthAgenda };\n","import { createElement } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, capitalizeFirstWord } from '../base/util';\n/**\n * timeline header rows\n */\nvar TimelineHeaderRow = /** @class */ (function () {\n    function TimelineHeaderRow(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    TimelineHeaderRow.prototype.groupByYear = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var d = dates_1[_i];\n            var key = d.getFullYear();\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n            var d = dates_2[_i];\n            var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n            var d = dates_3[_i];\n            var jsDate = +new Date(1970, 0, 1);\n            var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n            var key = Math.ceil(((((+d - jsDate) - (tzOffsetDiff * 60 * 1000)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            if (this.parent.activeViewOptions.firstDayOfWeek && this.parent.activeViewOptions.firstDayOfWeek > new Date(+d).getDay()) {\n                key = key - 1;\n            }\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.generateSlots = function (data, colspan, row, cls, type) {\n        var _this = this;\n        var dateParser = function (date, format) {\n            return _this.parent.globalize.formatDate(date, { format: format, calendar: _this.parent.getCalendarMode() });\n        };\n        var tdDatas = [];\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var dates = data[keys[parseInt(i.toString(), 10)]];\n            var htmlCol = void 0;\n            if (row.template) {\n                var args = { date: dates[0], type: type };\n                var templateId = this.parent.element.id + '_headerRowTemplate';\n                htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n            }\n            else {\n                var viewTemplate = void 0;\n                switch (row.option) {\n                    case 'Year':\n                        viewTemplate = \"<span class=\\\"e-header-year\\\">\" + dateParser(dates[0], 'y') + \"</span>\";\n                        break;\n                    case 'Month':\n                        viewTemplate = \"<span class=\\\"e-header-month\\\">\" + capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single') + \"</span>\";\n                        break;\n                    case 'Week':\n                        viewTemplate = \"<span class=\\\"e-header-week\\\">\" + this.parent.getWeekNumberContent(dates) + \"</span>\";\n                }\n                var headerWrapper = createElement('div', { innerHTML: viewTemplate });\n                htmlCol = [].slice.call(headerWrapper.childNodes);\n            }\n            tdDatas.push({ date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol });\n        }\n        return tdDatas;\n    };\n    TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n        var levels = [];\n        var rows = this.parent.activeViewOptions.headerRows;\n        var lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        var tdDatas = [];\n        var byYear;\n        var byMonth;\n        var byWeek;\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            switch (row.option) {\n                case 'Year':\n                    byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map(function (value) {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    };\n    return TimelineHeaderRow;\n}());\nexport { TimelineHeaderRow };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, createElement, prepend, extend, formatUnit, append, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { VerticalView } from './vertical-view';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline views\n */\nvar TimelineViews = /** @class */ (function (_super) {\n    __extends(TimelineViews, _super);\n    function TimelineViews(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.timelineAppointment = null;\n        _this.baseCssClass = 'e-timeline-view';\n        return _this;\n    }\n    TimelineViews.prototype.getModuleName = function () {\n        return 'timelineViews';\n    };\n    TimelineViews.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineViews.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineViews.prototype.scrollToWorkHour = function () {\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0)\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        var queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n        var firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getContentAreaElement().scrollLeft = !this.parent.enableRtl ? firstWorkHourCell.offsetLeft :\n                -(this.parent.getContentTable().offsetWidth - firstWorkHourCell.offsetLeft - firstWorkHourCell.offsetWidth);\n        }\n    };\n    TimelineViews.prototype.scrollToHour = function (hour, scrollDate) {\n        var date;\n        var index;\n        if (scrollDate) {\n            index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(scrollDate));\n            if (index >= 0) {\n                date = scrollDate;\n                if (!isNullOrUndefined(hour)) {\n                    var timeString = hour.split(':');\n                    if (timeString.length === 2) {\n                        date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n                    }\n                }\n            }\n        }\n        date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        var scrollLeft;\n        if (isNullOrUndefined(hour) || !this.parent.activeViewOptions.timeScale.enable) {\n            scrollLeft = index * this.parent.getElementWidth(this.element.querySelector('.e-work-cells'));\n        }\n        else {\n            scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) :\n                this.getLeftFromDateTime([index], date);\n        }\n        this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    };\n    TimelineViews.prototype.generateColumnLevels = function () {\n        var levels = [];\n        var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    };\n    TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n        var _this = this;\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? [cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS, cls.TIME_CELLS_CLASS];\n            r.workDays = _this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        var timeSlotData = this.getTimeSlotRows(handler);\n        var slots = [];\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var data = dateSlots_1[_i];\n            data.colSpan = timeSlotData.length;\n            var tempTimeSlots = extend([], timeSlotData, null, true);\n            for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n                var slot = tempTimeSlots_1[_a];\n                var cellDate = util.resetTime(new Date('' + data.date));\n                slot.date = util.setTime(cellDate, util.getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    };\n    TimelineViews.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n        var height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n        var headerWrap = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var contentWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: cls.CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var element = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    };\n    TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var diffInDates = 0;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        var hoursRange = util.getStartEndHours(util.resetTime(new Date(date.getTime())), startHour, endHour);\n        var interval = this.parent.activeViewOptions.timeScale.slotCount !== 1 ?\n            this.parent.activeViewOptions.timeScale.interval :\n            (hoursRange.endHour.getTime() - hoursRange.startHour.getTime()) / util.MS_PER_MINUTE;\n        if (!isNullOrUndefined(currentDateIndex)) {\n            if (currentDateIndex[0] !== 0) {\n                var index = this.parent.activeView.colLevels.findIndex(function (level) { return level[0].type === 'dateHeader'; });\n                if (this.parent.activeView.colLevels[parseInt(index.toString(), 10)] &&\n                    this.parent.activeView.colLevels[parseInt(index.toString(), 10)][0].colSpan) {\n                    diffInDates = currentDateIndex[0] * this.parent.activeView.colLevels[parseInt(index.toString(), 10)][0].colSpan *\n                        this.parent.getElementWidth(this.element.querySelector('.e-work-cells'));\n                }\n                else {\n                    var endHour_1 = this.getEndHour();\n                    var end = (endHour_1.getHours() === 0) ? 24 : endHour_1.getHours();\n                    diffInMinutes = diffInMinutes + ((currentDateIndex[0]) * (((end - startHour.getHours()) * 60) +\n                        (endHour_1.getMinutes() - startHour.getMinutes())));\n                }\n            }\n        }\n        return diffInDates + ((diffInMinutes * this.parent.getElementWidth(this.element.querySelector('.e-work-cells'))\n            * this.parent.activeViewOptions.timeScale.slotCount) / interval);\n    };\n    TimelineViews.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineViews.prototype.createAllDayRow = function (table, tdData) { };\n    TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        var index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(this.parent.getCurrentTime()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    };\n    TimelineViews.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        var workTd = createElement('td');\n        var wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    TimelineViews.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n        var resLevel = this.parent.resourceBase.renderedResources[parseInt(i.toString(), 10)];\n        var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.getStartEndTime(resSHr);\n        tdData.endHour = this.parent.getStartEndTime(resEHr);\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    };\n    TimelineViews.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    };\n    TimelineViews.prototype.getContentRows = function () {\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var trCount = this.getRowCount();\n        var existingGroupIndices = this.getGroupIndices();\n        for (var i = 0; i < trCount; i++) {\n            if (existingGroupIndices.length > 0 &&\n                existingGroupIndices.indexOf(this.parent.resourceBase.renderedResources[parseInt(i.toString(), 10)].groupIndex) > -1) {\n                continue;\n            }\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                var ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    };\n    TimelineViews.prototype.getContentTdClass = function (r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [cls.WORK_CELLS_CLASS] :\n            [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    TimelineViews.prototype.renderEvents = function () {\n        this.timelineAppointment = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        this.timelineAppointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineViews.prototype.getAdjustedDate = function (date) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(date.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.colLevels[this.colLevels.length - 1];\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > date.getTime()) {\n                    return timeSlots[i - 1].date;\n                }\n            }\n        }\n        return null;\n    };\n    TimelineViews.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.timelineAppointment) {\n            this.timelineAppointment.destroy();\n            this.timelineAppointment = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return TimelineViews;\n}(VerticalView));\nexport { TimelineViews };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, createElement, formatUnit } from '@syncfusion/ej2-base';\nimport { Month } from './month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * timeline month view\n */\nvar TimelineMonth = /** @class */ (function (_super) {\n    __extends(TimelineMonth, _super);\n    function TimelineMonth(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-month-view';\n        _this.isInverseTableSelect = true;\n        _this.appointment = null;\n        return _this;\n    }\n    TimelineMonth.prototype.getModuleName = function () {\n        return 'timelineMonth';\n    };\n    TimelineMonth.prototype.onDataReady = function () {\n        this.appointment = new TimelineEvent(this.parent, 'day');\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineMonth.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineMonth.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    };\n    TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n        var dateSlots = [];\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    TimelineMonth.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    };\n    TimelineMonth.prototype.renderContent = function () {\n        var contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        var contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    };\n    TimelineMonth.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineMonth.prototype.getContentSlots = function () {\n        var slotDatas = [];\n        for (var row = 0; row < this.getRowCount(); row++) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var data = _a[_i];\n                data.className = [cls.WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    var resLevel = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                var slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[parseInt(row.toString(), 10)]) {\n                    slotDatas[parseInt(row.toString(), 10)] = [];\n                }\n                slotDatas[parseInt(row.toString(), 10)].push(slotData);\n            }\n        }\n        return slotDatas;\n    };\n    TimelineMonth.prototype.updateClassList = function (data) {\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n    };\n    TimelineMonth.prototype.unWireEvents = function () {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    };\n    TimelineMonth.prototype.getMonthStart = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(util.addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    };\n    TimelineMonth.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    TimelineMonth.prototype.getAdjustedDate = function (startTime) {\n        var timeSlots = this.colLevels[this.colLevels.length - 1];\n        for (var i = 0; i < timeSlots.length; i++) {\n            if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startTime.getTime()) {\n                return timeSlots[i - 1].date;\n            }\n        }\n        return null;\n    };\n    TimelineMonth.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            var contentScrollableEle = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n        }\n        if (this.appointment) {\n            this.appointment.destroy();\n            this.appointment = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return TimelineMonth;\n}(Month));\nexport { TimelineMonth };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { append, addClass, createElement, EventHandler } from '@syncfusion/ej2-base';\nimport { Year } from './year';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline year view\n */\nvar TimelineYear = /** @class */ (function (_super) {\n    __extends(TimelineYear, _super);\n    function TimelineYear(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-year-view';\n        _this.isInverseTableSelect = true;\n        return _this;\n    }\n    TimelineYear.prototype.getModuleName = function () {\n        return 'timelineYear';\n    };\n    TimelineYear.prototype.renderHeader = function (headerWrapper) {\n        var tr = createElement('tr');\n        headerWrapper.appendChild(tr);\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        else {\n            var leftHeaderCells = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            tr.appendChild(leftHeaderCells);\n            leftHeaderCells.appendChild(this.renderResourceHeader(cls.LEFT_INDENT_WRAP_CLASS));\n        }\n        var isHorizontal = this.parent.activeViewOptions.orientation === 'Horizontal';\n        var isGroup = this.parent.activeViewOptions.group.resources.length > 0;\n        this.isInverseTableSelect = isHorizontal && !isGroup ? false : true;\n        var td = createElement('td');\n        tr.appendChild(td);\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        td.appendChild(container);\n        if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            container.appendChild(this.renderResourceHeader(cls.DATE_HEADER_WRAP_CLASS));\n            this.columnCount = this.colLevels.slice(-1)[0].length;\n        }\n        else {\n            var wrapper = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n            container.appendChild(wrapper);\n            var table = this.createTableLayout();\n            wrapper.appendChild(table);\n            table.appendChild(this.createTableColGroup(this.columnCount));\n            var innerTr = createElement('tr');\n            table.querySelector('tbody').appendChild(innerTr);\n            var months = this.getMonths();\n            var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n            for (var column = 0; column < this.columnCount; column++) {\n                var date = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], 1);\n                var innerTd = createElement('td', { className: cls.HEADER_CELLS_CLASS });\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                    if (this.parent.dayHeaderTemplate) {\n                        append(this.renderDayMonthHeaderTemplate(dayHeaderDates[parseInt(column.toString(), 10)], column, 'dayHeaderTemplate'), innerTd);\n                    }\n                    else {\n                        innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\n                    }\n                }\n                else {\n                    if (this.parent.monthHeaderTemplate) {\n                        append(this.renderDayMonthHeaderTemplate(date, months[parseInt(column.toString(), 10)], 'monthHeaderTemplate'), innerTd);\n                    }\n                    else {\n                        innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\n                    }\n                    innerTd.setAttribute('data-date', date.getTime().toString());\n                }\n                innerTr.appendChild(innerTd);\n                this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: innerTd });\n            }\n        }\n    };\n    TimelineYear.prototype.renderResourceHeader = function (className) {\n        var wrap = createElement('div', { className: className });\n        var tbl = this.createTableLayout();\n        wrap.appendChild(tbl);\n        var trEle = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.colLevels = this.generateColumnLevels();\n        }\n        else {\n            var colData = [{ className: [cls.HEADER_CELLS_CLASS], type: 'headerCell' }];\n            this.colLevels = [colData];\n        }\n        for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\n            var col = _a[_i];\n            var ntr = trEle.cloneNode();\n            var count = className === cls.DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n            for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\n                var c = count_1[_b];\n                var tdEle = createElement('td');\n                if (c.className) {\n                    addClass([tdEle], c.className);\n                }\n                if (className === cls.DATE_HEADER_WRAP_CLASS) {\n                    if (c.template) {\n                        append(c.template, tdEle);\n                    }\n                    if (c.colSpan) {\n                        tdEle.setAttribute('colspan', c.colSpan.toString());\n                    }\n                    if (c.groupIndex > -1) {\n                        tdEle.setAttribute('data-group-index', c.groupIndex.toString());\n                    }\n                    this.setResourceHeaderContent(tdEle, c);\n                }\n                if (className === cls.LEFT_INDENT_WRAP_CLASS) {\n                    this.parent.renderHeaderIndentTemplate(c, tdEle);\n                }\n                var args = { elementType: c.type, element: tdEle, date: c.date, groupIndex: c.groupIndex };\n                this.parent.trigger(event.renderCell, args);\n                ntr.appendChild(tdEle);\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        if (className === cls.DATE_HEADER_WRAP_CLASS) {\n            tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n        }\n        return wrap;\n    };\n    TimelineYear.prototype.renderContent = function (contentWrapper) {\n        var tr = createElement('tr');\n        contentWrapper.appendChild(tr);\n        var firstTd = createElement('td');\n        var lastTd = createElement('td');\n        var tdCollection = [];\n        var monthTBody;\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            tdCollection.push(firstTd);\n            firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            this.rowCount = this.parent.resourceBase.renderedResources.length;\n        }\n        else {\n            tdCollection.push(firstTd);\n            var monthWrapper = createElement('div', { className: cls.MONTH_HEADER_WRAPPER });\n            firstTd.appendChild(monthWrapper);\n            monthWrapper.appendChild(this.createTableLayout());\n            monthTBody = monthWrapper.querySelector('tbody');\n        }\n        tdCollection.push(lastTd);\n        append(tdCollection, tr);\n        var content = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        lastTd.appendChild(content);\n        var contentTable = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(contentTable);\n        content.appendChild(contentTable);\n        var eventWrapper = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        content.appendChild(eventWrapper);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(content);\n        }\n        var contentTBody = contentTable.querySelector('tbody');\n        if (this.parent.rowAutoHeight) {\n            var addClassTable = [contentTable];\n            var monthHeader = this.parent.element.querySelector('.' + cls.MONTH_HEADER_WRAPPER + ' .' + cls.SCHEDULE_TABLE_CLASS);\n            if (monthHeader) {\n                addClassTable.push(monthHeader);\n            }\n            addClass(addClassTable, cls.AUTO_HEIGHT);\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : this.columnCount;\n            contentTable.appendChild(this.createTableColGroup(colCount));\n            this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n        }\n        else {\n            contentTable.appendChild(this.createTableColGroup(this.columnCount));\n            this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n        }\n    };\n    TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\n        var months = this.getMonths();\n        var dayHeaderDates = this.getMonthDates(new Date(this.parent.selectedDate.getFullYear(), months[0], 1));\n        for (var month = 0; month < this.rowCount; month++) {\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n            var tr = createElement('tr');\n            var monthTr = tr.cloneNode();\n            monthBody.appendChild(monthTr);\n            var contentTr = tr.cloneNode();\n            contentBody.appendChild(contentTr);\n            var monthTd = createElement('td', { className: cls.MONTH_HEADER_CLASS });\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                if (this.parent.monthHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(monthStart, month, 'monthHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n                }\n                monthTd.setAttribute('data-date', monthDate.getTime().toString());\n            }\n            else {\n                if (this.parent.dayHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(dayHeaderDates[parseInt(month.toString(), 10)], month, 'dayHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\n                }\n            }\n            monthTr.appendChild(monthTd);\n            this.parent.trigger(event.renderCell, { elementType: 'leftHeaderCells', element: monthTd });\n            var date = new Date(monthStart.getTime());\n            for (var column = 0; column < this.columnCount; column++) {\n                var isDateAvail = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], 1);\n                    monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                    monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n                    var dayDate = (month - monthStart.getDay()) + 1;\n                    date = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(column.toString(), 10)], dayDate);\n                    isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n                }\n                else {\n                    isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n                }\n                var announcementText = this.parent.globalize.formatDate(date, {\n                    skeleton: 'full', calendar: this.parent.getCalendarMode()\n                });\n                var td = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS, attrs: { 'aria-selected': 'false', 'aria-label': announcementText }\n                });\n                contentTr.appendChild(td);\n                var dateHeader = createElement('div', {\n                    className: cls.DATE_HEADER_CLASS + ' ' + cls.NAVIGATE_CLASS,\n                    innerHTML: (isDateAvail) ?\n                        this.parent.globalize.formatDate(date, { skeleton: 'd', calendar: this.parent.getCalendarMode() }) : ''\n                });\n                if (isDateAvail) {\n                    var tds = [td];\n                    var classList = [];\n                    if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n                        classList.push(cls.WORKDAY_CLASS);\n                    }\n                    if (!this.parent.isMinMaxDate(date)) {\n                        addClass([td], cls.DISABLE_DATES);\n                    }\n                    if (this.isCurrentDate(date)) {\n                        classList.push(cls.CURRENT_DAY_CLASS);\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                            tds.push(this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\n                        }\n                        else {\n                            tds.push(this.element.querySelectorAll('.' + cls.MONTH_HEADER_CLASS).item(month));\n                        }\n                    }\n                    if (classList.length > 0) {\n                        addClass(tds, classList);\n                    }\n                }\n                else {\n                    addClass([td], cls.OTHERMONTH_CLASS);\n                    if (!this.parent.isMinMaxDate(date)) {\n                        addClass([td], cls.DISABLE_DATES);\n                    }\n                }\n                if (td.classList.contains(cls.OTHERMONTH_CLASS)) {\n                    continue;\n                }\n                else {\n                    this.renderDates.push(new Date(date));\n                }\n                td.appendChild(dateHeader);\n                if (isDateAvail) {\n                    td.setAttribute('data-date', date.getTime().toString());\n                    this.wireEvents(td);\n                }\n                this.renderCellTemplate({ date: date, type: 'workCells' }, td);\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\n                if (isDateAvail) {\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                        date = util.addDays(new Date(date.getTime()), 1);\n                    }\n                }\n            }\n        }\n        this.renderDates.splice(0, 1);\n    };\n    TimelineYear.prototype.getContentRows = function () {\n        var tRow = [];\n        var monthCells = this.getMonths();\n        var existingGroupIndices = this.getGroupIndices();\n        for (var row = 0; row < this.parent.resourceBase.renderedResources.length; row++) {\n            var resData = void 0;\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n                if (existingGroupIndices.length > 0 && existingGroupIndices.indexOf(resData.groupIndex) > -1) {\n                    continue;\n                }\n            }\n            var tr = createElement('tr');\n            tRow.push(tr);\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), monthCells[parseInt(row.toString(), 10)], 1);\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            for (var month = 0; month < this.columnCount; month++) {\n                var classList = [];\n                var groupIndex = resData.groupIndex;\n                classList = classList.concat(resData.className);\n                if (classList.indexOf(cls.RESOURCE_PARENT_CLASS) > -1) {\n                    classList.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n                }\n                else {\n                    classList.push(cls.WORKDAY_CLASS);\n                }\n                monthDate = new Date(this.parent.selectedDate.getFullYear(), monthCells[parseInt(month.toString(), 10)], 1);\n                date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                var tdELe = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS,\n                    attrs: {\n                        'aria-selected': 'false',\n                        'data-date': date.getTime().toString()\n                    }\n                });\n                addClass([tdELe], classList);\n                tdELe.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'resourceGroupCells', groupIndex: groupIndex }, tdELe);\n                this.wireEvents(tdELe);\n                this.parent.trigger(event.renderCell, { elementType: 'resourceGroupCells', element: tdELe, date: date });\n                tr.appendChild(tdELe);\n            }\n        }\n        return tRow;\n    };\n    TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\n        var months = this.getMonths();\n        for (var row = 0; row < this.rowCount; row++) {\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\n            var tr = createElement('tr');\n            contentBody.appendChild(tr);\n            var resData = void 0;\n            if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                resData = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n            }\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n                var monthTr = tr.cloneNode();\n                monthBody.appendChild(monthTr);\n                var monthTd = createElement('td', {\n                    className: cls.MONTH_HEADER_CLASS,\n                    attrs: { 'data-date': date.getTime().toString() }\n                });\n                if (this.parent.monthHeaderTemplate) {\n                    append(this.renderDayMonthHeaderTemplate(monthDate, row, 'monthHeaderTemplate'), monthTd);\n                }\n                else {\n                    monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n                }\n                monthTr.appendChild(monthTd);\n            }\n            for (var month = 0; month < this.columnCount; month++) {\n                var classList = [];\n                var groupIndex = void 0;\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\n                    groupIndex = resData.groupIndex;\n                    classList = classList.concat(resData.className);\n                    if (classList.indexOf(cls.RESOURCE_PARENT_CLASS) > -1) {\n                        classList.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n                    }\n                    else {\n                        classList.push(cls.WORKDAY_CLASS);\n                    }\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month.toString(), 10)], 1);\n                    date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n                }\n                else {\n                    groupIndex = this.colLevels.slice(-1)[0][parseInt(month.toString(), 10)].groupIndex;\n                    classList.push(cls.WORKDAY_CLASS);\n                }\n                var startDateText = this.parent.globalize.formatDate(date, { type: 'dateTime', skeleton: 'full', calendar: this.parent.getCalendarMode() });\n                var endDateText = this.parent.globalize.formatDate(this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime())), { type: 'dateTime', skeleton: 'full', calendar: this.parent.getCalendarMode() });\n                var td = createElement('td', {\n                    className: cls.WORK_CELLS_CLASS,\n                    attrs: {\n                        'aria-selected': 'false',\n                        'data-date': date.getTime().toString(),\n                        'aria-label': startDateText + ' ' + this.parent.localeObj.getConstant('endAt') + ' ' + endDateText\n                    }\n                });\n                addClass([td], classList);\n                td.setAttribute('data-group-index', groupIndex.toString());\n                this.renderCellTemplate({ date: date, type: 'resourceGroupCells', groupIndex: groupIndex }, td);\n                this.wireEvents(td);\n                tr.appendChild(td);\n                this.parent.trigger(event.renderCell, { elementType: 'resourceGroupCells', element: td, date: date });\n            }\n        }\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n            this.collapseRows(this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS));\n        }\n    };\n    TimelineYear.prototype.renderDayMonthHeaderTemplate = function (date, column, type) {\n        var args = { date: date, type: type === 'dayHeaderTemplate' ? 'dayHeader' : 'monthHeader' };\n        var dayId = \"schedule_\" + this.parent.activeViewOptions.dayHeaderTemplateName + \"dayHeaderTemplate\";\n        var monthId = \"schedule_\" + this.parent.activeViewOptions.dayHeaderTemplateName + \"monthHeaderTemplate\";\n        if (type === 'dayHeaderTemplate') {\n            args.day = this.parent.getDayNames('wide')[column % 7];\n            return [].slice.call(this.parent.getDayHeaderTemplate()(args, this.parent, 'dayHeaderTemplate', dayId, false, undefined, undefined, this.parent.root));\n        }\n        else {\n            return [].slice.call(this.parent.getMonthHeaderTemplate()(args, this.parent, 'monthHeaderTemplate', monthId, false, undefined, undefined, this.parent.root));\n        }\n    };\n    TimelineYear.prototype.renderCellTemplate = function (data, td) {\n        if (!this.parent.activeViewOptions.cellTemplate || td.classList.contains(cls.OTHERMONTH_CLASS)) {\n            return;\n        }\n        var args = { date: data.date, type: data.type };\n        if (data.groupIndex) {\n            args.groupIndex = data.groupIndex;\n        }\n        var scheduleId = this.parent.element.id + '_';\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\n        var templateId = scheduleId + viewName + 'cellTemplate';\n        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false, undefined, undefined, this.parent.root));\n        append(cellTemplate, td);\n    };\n    TimelineYear.prototype.scrollToDate = function (scrollDate) {\n        var date;\n        if (this.parent.activeViewOptions.group.resources !== null && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            date = +new Date(util.resetTime(util.firstDateOfMonth(scrollDate)));\n        }\n        else {\n            date = +new Date(util.resetTime(scrollDate));\n        }\n        var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n        if (element) {\n            var wrap = this.getScrollableElement();\n            if (this.parent.enableRtl) {\n                var conTable = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n                wrap.scrollLeft = -(conTable.offsetWidth - element.offsetLeft - element.offsetWidth);\n            }\n            else {\n                wrap.scrollLeft = element.offsetLeft;\n            }\n            wrap.scrollTop = element.offsetTop;\n        }\n    };\n    TimelineYear.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    TimelineYear.prototype.wireEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    return TimelineYear;\n}(Year));\nexport { TimelineYear };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { extend } from '@syncfusion/ej2-base';\nimport { getDateFromRecurrenceDateString, getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Export Module\n */\nvar ICalendarExport = /** @class */ (function () {\n    function ICalendarExport(parent) {\n        this.parent = parent;\n    }\n    ICalendarExport.prototype.initializeCalendarExport = function (fileName, customData) {\n        var icsString = this.getCalendarString(fileName, customData);\n        this.download(icsString, fileName);\n    };\n    ICalendarExport.prototype.getCalendarString = function (fileName, customData) {\n        var _this = this;\n        var eventsData = (customData) ? customData :\n            extend([], this.parent.eventsData, null, true);\n        eventsData = this.parent.eventBase.sortByTime(eventsData);\n        var SEPARATOR = (navigator.appVersion.indexOf('Win') !== -1) ? '\\r\\n' : '\\n';\n        var iCalendarEvents = [];\n        var filterCollection = [];\n        var timeZone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n        var fields = this.parent.eventFields;\n        eventsData.forEach(function (eventObj) {\n            var uId = eventObj[fields.id] || eventObj.Guid || _this.parent.eventBase.generateGuid();\n            var editedExDate = [];\n            if (eventObj[fields.recurrenceID]) {\n                var filter = _this.filterEvents(filterCollection, fields.id, eventObj[fields.recurrenceID]);\n                uId = filter.length > 0 ? filter[0].UID : uId;\n            }\n            if (!eventObj[fields.recurrenceID] && eventObj[fields.recurrenceRule] && eventObj[fields.recurrenceException]) {\n                var exDate = (eventObj[fields.recurrenceException]).split(',');\n                var editedObj = _this.filterEvents(eventsData, fields.recurrenceID, eventObj[fields.id]);\n                editedObj.forEach(function (edited) {\n                    editedExDate.push(getRecurrenceStringFromDate(edited[fields.startTime]));\n                });\n                var exceptionDateList = exDate.filter(function (value) { return editedExDate.indexOf(value) === -1; });\n                eventObj[fields.recurrenceException] = (exceptionDateList.length > 0) ? (exceptionDateList.join(',') + ',') : '';\n            }\n            var startZone = (eventObj[fields.startTimezone] || timeZone);\n            var endZone = (eventObj[fields.endTimezone] || timeZone);\n            var readonly = (eventObj[fields.isReadonly]) ? (eventObj[fields.isReadonly]) : false;\n            var calendarEvent = [\n                'BEGIN:VEVENT',\n                'LOCATION:' + (eventObj[fields.location] || ''),\n                'SUMMARY:' + (eventObj[fields.subject] || ''),\n                'UID:' + uId,\n                'DESCRIPTION:' + (eventObj[fields.description] || ''),\n                'ISREADONLY:' + readonly,\n                'END:VEVENT'\n            ];\n            if (eventObj[fields.isAllDay]) {\n                calendarEvent.splice(4, 0, 'DTEND;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.endTime], true));\n                calendarEvent.splice(4, 0, 'DTSTART;VALUE=DATE:' + _this.convertDateToString(eventObj[fields.startTime], true));\n            }\n            else if (!eventObj[fields.isAllDay] && !eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'DTEND:' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART:' + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            else {\n                calendarEvent.splice(4, 0, 'DTEND;TZID=\"' + endZone + '\":' + _this.convertDateToString(eventObj[fields.endTime]));\n                calendarEvent.splice(4, 0, 'DTSTART;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime]));\n            }\n            if (eventObj[fields.recurrenceRule]) {\n                calendarEvent.splice(4, 0, 'RRULE:' + eventObj[fields.recurrenceRule]);\n            }\n            if (eventObj[fields.recurrenceException]) {\n                var exDate = eventObj[fields.recurrenceException].split(',');\n                for (var i = 0; i < exDate.length - 1; i++) {\n                    calendarEvent.splice(5, 0, 'EXDATE:' +\n                        _this.convertDateToString(getDateFromRecurrenceDateString(exDate[parseInt(i.toString(), 10)]), eventObj[fields.isAllDay]));\n                }\n            }\n            if (eventObj[fields.recurrenceID]) {\n                calendarEvent.splice(4, 0, 'RECURRENCE-ID;TZID=\"' + startZone + '\":'\n                    + _this.convertDateToString(eventObj[fields.startTime], eventObj[fields.isAllDay]));\n            }\n            var customFields = _this.customFieldFilter(eventObj, fields);\n            if (customFields.length > 0) {\n                customFields.forEach(function (customField) {\n                    return calendarEvent.splice(4, 0, customField + ':' + (eventObj[\"\" + customField] || ''));\n                });\n            }\n            var app = extend({}, eventObj);\n            app.UID = uId;\n            filterCollection.push(app);\n            iCalendarEvents.push(calendarEvent.join(SEPARATOR));\n        });\n        var iCalendar = [\n            'BEGIN:VCALENDAR',\n            'PRODID:-//Syncfusion Inc//Scheduler//EN',\n            'VERSION:2.0',\n            'CALSCALE:GREGORIAN',\n            'METHOD:PUBLISH',\n            'X-WR-CALNAME:' + (fileName || 'Calendar'),\n            'X-WR-TIMEZONE:' + timeZone\n        ].join(SEPARATOR);\n        var icsString = iCalendar + SEPARATOR + iCalendarEvents.join(SEPARATOR) + SEPARATOR + 'END:VCALENDAR';\n        return icsString;\n    };\n    ICalendarExport.prototype.customFieldFilter = function (eventObj, fields) {\n        var defaultFields = Object.keys(fields).map(function (key) { return fields[\"\" + key]; });\n        var eventFields = Object.keys(eventObj);\n        return eventFields.filter(function (value) { return (defaultFields.indexOf(value) === -1) && (value !== 'Guid'); });\n    };\n    ICalendarExport.prototype.convertDateToString = function (eventDate, allDay) {\n        var year = ('0000' + (eventDate.getFullYear().toString())).slice(-4);\n        var month = ('00' + ((eventDate.getMonth() + 1).toString())).slice(-2);\n        var date = ('00' + ((eventDate.getDate()).toString())).slice(-2);\n        var hours = ('00' + (eventDate.getHours().toString())).slice(-2);\n        var minutes = ('00' + (eventDate.getMinutes().toString())).slice(-2);\n        var seconds = ('00' + (eventDate.getSeconds().toString())).slice(-2);\n        var timeString = (allDay) ? year + month + date : year + month + date + 'T' + hours + minutes + seconds;\n        return timeString;\n    };\n    ICalendarExport.prototype.download = function (icsString, fileName) {\n        var buffer = new Blob([icsString], { type: 'data:text/calendar;charset=utf8' });\n        fileName = (fileName || 'Calendar') + '.ics';\n        if (navigator.msSaveBlob) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink_1 = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            downloadLink_1.download = fileName;\n            downloadLink_1.href = URL.createObjectURL(buffer);\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink_1.dispatchEvent(event_1);\n            setTimeout(function () {\n                URL.revokeObjectURL(downloadLink_1.href);\n                downloadLink_1.href = undefined;\n            });\n        }\n    };\n    ICalendarExport.prototype.filterEvents = function (data, field, value) {\n        return data.filter(function (e) { return e[\"\" + field] === value; });\n    };\n    ICalendarExport.prototype.getModuleName = function () {\n        return 'iCalendarExport';\n    };\n    ICalendarExport.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.parent = null;\n    };\n    return ICalendarExport;\n}());\nexport { ICalendarExport };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { getRecurrenceStringFromDate } from '../../recurrence-editor/date-generator';\n/**\n * ICalendar Import Module\n */\nvar ICalendarImport = /** @class */ (function () {\n    function ICalendarImport(parent) {\n        this.allDay = false;\n        this.parent = parent;\n    }\n    ICalendarImport.prototype.initializeCalendarImport = function (fileContent) {\n        var _this = this;\n        if (fileContent && fileContent instanceof Blob) {\n            var fileReader_1 = new FileReader();\n            fileReader_1.onload = function () {\n                var iCalString = fileReader_1.result;\n                _this.iCalendarParser(iCalString);\n            };\n            fileReader_1.readAsText(fileContent, 'UTF-8');\n        }\n        else if (fileContent && typeof fileContent === 'string') {\n            this.iCalendarParser(fileContent);\n        }\n    };\n    ICalendarImport.prototype.iCalendarParser = function (iCalString) {\n        var iCalData = {\n            isEvent: false,\n            curEvent: null,\n            id: this.parent.eventBase.getEventMaxID(),\n            count: 0,\n            events: [],\n            key: null\n        };\n        var iStringLength = iCalString.length;\n        var lastPosition = iCalString.search(/[^ \\t]/);\n        var position = lastPosition;\n        var iString;\n        var newlineOffset;\n        do {\n            position = iCalString.indexOf('\\n', lastPosition) + 1;\n            if (position === 0) {\n                position = iStringLength;\n                newlineOffset = 0;\n            }\n            else if (position > 1 && iCalString[position - 2] === '\\r') {\n                newlineOffset = 2;\n            }\n            else {\n                newlineOffset = 1;\n            }\n            var firstChar = iCalString.charAt(lastPosition);\n            if (firstChar === ' ' || firstChar === '\\n' || firstChar === '\\t') {\n                iString += iCalString.slice(lastPosition + 1, position - newlineOffset);\n            }\n            else {\n                if (iString) {\n                    iCalData = this.updateEventData(iString, iCalData);\n                }\n                iString = iCalString.slice(lastPosition, position - newlineOffset);\n            }\n            lastPosition = position;\n        } while (position !== iStringLength);\n        iString = iString.trim();\n        if (iString.length) {\n            iCalData = this.updateEventData(iString, iCalData);\n        }\n        var app = extend([], iCalData.events, null, true);\n        this.parent.addEvent(this.processOccurrence(app, iCalData.id));\n    };\n    ICalendarImport.prototype.updateEventData = function (iString, iCalData) {\n        var fields = this.parent.eventFields;\n        var SEPARATOR = '\\r\\n';\n        var id = iCalData.id;\n        var events = iCalData.events;\n        var isEvent = iCalData.isEvent;\n        var count = iCalData.count;\n        var curEvent = iCalData.curEvent;\n        var key = iCalData.key;\n        if (!isEvent && iString === 'BEGIN:VEVENT') {\n            isEvent = true;\n            curEvent = {};\n        }\n        if (isEvent && iString === 'END:VEVENT') {\n            isEvent = false;\n            events.push(curEvent);\n            curEvent = null;\n        }\n        if (isEvent) {\n            var index = iString.indexOf(':');\n            var type_1 = iString.substring(0, index).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n            var value = iString.substring(index + 1, iString.length).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n            if (iString.indexOf('SUMMARY') !== -1) {\n                type_1 = 'SUMMARY';\n            }\n            if (iString.indexOf('DTSTART') !== -1) {\n                curEvent[fields.startTime] = this.dateParsing(iString);\n                curEvent[fields.isAllDay] = this.allDay;\n                this.allDay = false;\n            }\n            else if (iString.indexOf('DTEND') !== -1) {\n                curEvent[fields.endTime] = this.dateParsing(iString);\n            }\n            else if (iString.indexOf('EXDATE') !== -1) {\n                value = getRecurrenceStringFromDate(this.dateParsing(iString));\n                curEvent[fields.recurrenceException] = isNullOrUndefined(curEvent[fields.recurrenceException]) ?\n                    value : curEvent[fields.recurrenceException] + ',' + value;\n            }\n            else if (iString.indexOf('RECURRENCE-ID') !== -1) {\n                value = getRecurrenceStringFromDate(this.dateParsing(iString));\n                curEvent[fields.recurrenceException] = value;\n                curEvent[fields.recurrenceID] = value;\n            }\n            else {\n                key = type_1 || key;\n                switch (key) {\n                    case 'BEGIN':\n                        break;\n                    case 'UID':\n                        curEvent[\"\" + type_1] = value;\n                        if (typeof (id) == 'number') {\n                            curEvent[fields.id] = parseInt(value, 10);\n                            if (isNaN(curEvent[fields.id])) {\n                                curEvent[fields.id] = id + count;\n                                count++;\n                            }\n                        }\n                        else {\n                            curEvent[fields.id] = value;\n                        }\n                        break;\n                    case 'SUMMARY':\n                        curEvent[fields.subject] = this.getFormattedString(value);\n                        break;\n                    case 'LOCATION':\n                        curEvent[fields.location] = this.getFormattedString(value);\n                        break;\n                    case 'DESCRIPTION':\n                        if (curEvent[fields.description]) {\n                            curEvent[fields.description] = this.getFormattedString(curEvent[fields.description] + SEPARATOR + value);\n                        }\n                        else {\n                            curEvent[fields.description] = this.getFormattedString(value);\n                        }\n                        break;\n                    case 'ISREADONLY':\n                        curEvent[fields.isReadonly] = (value.indexOf('true') > -1);\n                        break;\n                    case 'RRULE':\n                        curEvent[fields.recurrenceRule] = value;\n                        break;\n                    default:\n                        if (this.parent.resourceCollection.length > 0) {\n                            var resData = this.parent.resourceCollection.filter(function (data) { return data.field === type_1; });\n                            curEvent[\"\" + type_1] = (resData.length > 0 && (typeof (resData[0].dataSource[0][resData[0].idField]) == 'number')) ? parseInt(value, 10) : value;\n                        }\n                        else {\n                            curEvent[\"\" + type_1] = value;\n                        }\n                }\n            }\n        }\n        return { isEvent: isEvent, curEvent: curEvent, id: id, count: count, events: events, key: key };\n    };\n    ICalendarImport.prototype.processOccurrence = function (app, maxId) {\n        var _this = this;\n        var appoint = [];\n        var uId = 'UID';\n        var fields = this.parent.eventFields;\n        var appointmentIds = [];\n        this.parent.eventsData.forEach(function (eventObj) {\n            appointmentIds.push(eventObj[fields.id]);\n        });\n        app.forEach(function (eventObj) {\n            var parentObj;\n            var id;\n            // eslint-disable-next-line no-prototype-builtins\n            if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                parentObj = eventObj;\n                id = eventObj[fields.id];\n            }\n            if (appointmentIds.indexOf(eventObj[fields.id]) < 0) {\n                var data = app.filter(function (data) { return data.UID === eventObj[\"\" + uId]; });\n                if (data.length > 1 && isNullOrUndefined(eventObj[fields.recurrenceID])) {\n                    id = typeof (maxId) === 'number' ? maxId++ : id;\n                    for (var i = 0; i < data.length; i++) {\n                        // eslint-disable-next-line no-prototype-builtins\n                        if (data[parseInt(i.toString(), 10)].hasOwnProperty(fields.recurrenceID)) {\n                            var exdate = data[parseInt(i.toString(), 10)][fields.recurrenceID];\n                            data[parseInt(i.toString(), 10)][fields.id] = typeof (maxId) === 'number' ? maxId++ : _this.parent.eventBase.generateGuid();\n                            data[parseInt(i.toString(), 10)][fields.recurrenceID] = id;\n                            data[parseInt(i.toString(), 10)][fields.recurrenceException] = null;\n                            parentObj[fields.recurrenceException] =\n                                _this.getExcludeDateString(parentObj[fields.recurrenceException], exdate);\n                            delete data[parseInt(i.toString(), 10)][\"\" + uId];\n                            appoint.push(data[parseInt(i.toString(), 10)]);\n                        }\n                    }\n                    delete parentObj[\"\" + uId];\n                    parentObj[fields.id] = id;\n                    appoint.push(parentObj);\n                    // eslint-disable-next-line no-prototype-builtins\n                }\n                else if (!eventObj.hasOwnProperty(fields.recurrenceID)) {\n                    delete eventObj[\"\" + uId];\n                    eventObj[fields.id] = typeof (maxId) === 'number' ? maxId++ : id;\n                    appoint.push(eventObj);\n                }\n            }\n        });\n        return appoint;\n    };\n    ICalendarImport.prototype.getExcludeDateString = function (parentException, occurrenceException) {\n        if (isNullOrUndefined(parentException)) {\n            return occurrenceException;\n        }\n        else if (isNullOrUndefined(occurrenceException)) {\n            return parentException;\n        }\n        var parentExDate = parentException.split(',').map(function (x) { return x.split('T')[0]; });\n        var childExDate = occurrenceException.split(',').map(function (x) { return x.split('T')[0]; });\n        var exDate = parentExDate.filter(function (x) { return childExDate.indexOf(x) > -1; });\n        if (exDate.length > 0) {\n            return parentException;\n        }\n        return parentException + ',' + occurrenceException;\n    };\n    ICalendarImport.prototype.getFormattedString = function (value) {\n        value = value || '';\n        // eslint-disable-next-line no-useless-escape\n        return (value.replace(/\\\\\\,/g, ',').replace(/\\\\\\;/g, ';').replace(/\\\\[nN]/g, '\\n').replace(/\\\\\\\\/g, '\\\\'));\n    };\n    ICalendarImport.prototype.dateParsing = function (element) {\n        var split = element.split(':');\n        var value = split[split.length - 1];\n        var newDate = new Date(this.getFormattedString(value));\n        if (element && (element.indexOf('VALUE=DATE') > -1 || element.indexOf('RECURRENCE-ID;TZID') > -1)) {\n            var data_1 = /^(\\d{4})(\\d{2})(\\d{2})$/.exec(value);\n            if (data_1 !== null) {\n                newDate = new Date(parseInt(data_1[1], 10), parseInt(data_1[2], 10) - 1, parseInt(data_1[3], 10));\n            }\n            if (element.indexOf('DTSTART') > -1) {\n                this.allDay = true;\n            }\n        }\n        var data = /^(\\d{4})(\\d{2})(\\d{2})T(\\d{2})(\\d{2})(\\d{2})(Z)?$/.exec(value);\n        if (data !== null) {\n            if (data[7] === 'Z') {\n                newDate = new Date(Date.UTC(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10)));\n            }\n            else {\n                newDate = new Date(parseInt(data[1], 10), parseInt(data[2], 10) - 1, parseInt(data[3], 10), parseInt(data[4], 10), parseInt(data[5], 10), parseInt(data[6], 10));\n            }\n        }\n        return newDate;\n    };\n    ICalendarImport.prototype.getModuleName = function () {\n        return 'iCalendarImport';\n    };\n    ICalendarImport.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n    };\n    return ICalendarImport;\n}());\nexport { ICalendarImport };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * Excel Export Module\n */\nvar ExcelExport = /** @class */ (function () {\n    function ExcelExport(parent) {\n        this.parent = parent;\n    }\n    ExcelExport.prototype.initializeExcelExport = function (excelExportOptions) {\n        if (excelExportOptions === void 0) { excelExportOptions = {}; }\n        var exportColumns = this.getExportColumns(excelExportOptions);\n        var exportName = excelExportOptions.fileName || 'Schedule';\n        var exportType = excelExportOptions.exportType || 'xlsx';\n        var isIncludeOccurrences = excelExportOptions.includeOccurrences || false;\n        var separator;\n        if (!isNullOrUndefined(excelExportOptions.separator) && excelExportOptions.separator !== ',') {\n            separator = excelExportOptions.separator;\n        }\n        var eventCollection;\n        if (excelExportOptions.customData) {\n            eventCollection = !isIncludeOccurrences ? excelExportOptions.customData :\n                this.parent.eventBase.getProcessedEvents(excelExportOptions.customData);\n        }\n        else {\n            eventCollection = !isIncludeOccurrences ? this.parent.eventsData : this.parent.eventsProcessed;\n        }\n        this.processWorkbook(exportColumns, exportName, exportType, eventCollection, separator);\n    };\n    ExcelExport.prototype.processWorkbook = function (fields, name, type, eventCollection, separator) {\n        var _this = this;\n        var columns = [];\n        var rows = [];\n        var columnHeader = [];\n        fields.forEach(function (field, i) { columns.push({ index: i + 1, width: (field.name === 'Id' ? 50 : 150) }); });\n        var style = { fontSize: 12, borders: { color: '#E0E0E0' }, bold: true };\n        fields.forEach(function (field, i) { columnHeader.push({ index: i + 1, value: field.text, style: style }); });\n        rows.push({ index: 1, cells: columnHeader });\n        eventCollection.forEach(function (event, i) {\n            var columnData = [];\n            fields.forEach(function (field, n) {\n                var columnRule = { index: n + 1, value: event[field.name] || '' };\n                if (field.name === _this.parent.eventFields.startTime || field.name === _this.parent.eventFields.endTime) {\n                    var styleRule = { fontSize: 12, numberFormat: 'm/d/yyyy h:mm a' };\n                    columnRule = extend({}, columnRule, { style: styleRule }, true);\n                }\n                columnData.push(columnRule);\n            });\n            rows.push({ index: i + 2, cells: columnData });\n        });\n        var workSheet = [{ columns: columns, rows: rows }];\n        var book = new Workbook({ worksheets: workSheet }, type, this.parent.locale, undefined, separator);\n        book.save(name + '.' + type);\n    };\n    ExcelExport.prototype.getExportColumns = function (exportOptions) {\n        var _this = this;\n        var exportColumns = exportOptions.fieldsInfo || [];\n        if (exportColumns.length === 0) {\n            var fields = exportOptions.fields || Object.keys(this.parent.eventFields).map(function (field) {\n                return _this.parent.eventFields[\"\" + field];\n            });\n            fields.forEach(function (field) { exportColumns.push({ name: field, text: field }); });\n        }\n        return exportColumns;\n    };\n    ExcelExport.prototype.getModuleName = function () {\n        return 'excelExport';\n    };\n    ExcelExport.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { print as basePrint, createElement, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Schedule } from '../base/schedule';\nimport { TimelineYear } from '../renderer/timeline-year';\nimport { Year } from '../renderer/year';\nimport { TimelineMonth } from '../renderer/timeline-month';\nimport { TimelineViews } from '../renderer/timeline-view';\nimport { MonthAgenda } from '../renderer/month-agenda';\nimport { Agenda } from '../renderer/agenda';\nimport { Month } from '../renderer/month';\nimport { WorkWeek } from '../renderer/work-week';\nimport { Week } from '../renderer/week';\nimport { Day } from '../renderer/day';\nimport * as events from '../base/constant';\n/**\n * Print Module\n */\nvar Print = /** @class */ (function () {\n    function Print(parent) {\n        this.parent = parent;\n    }\n    Print.prototype.print = function (printOptions) {\n        if (isNullOrUndefined(printOptions)) {\n            this.printScheduler();\n        }\n        else {\n            this.printSchedulerWithModel(printOptions);\n        }\n    };\n    Print.prototype.printScheduler = function () {\n        var clone = this.parent.element.cloneNode(true);\n        clone.id = this.parent.element.id + '_print';\n        document.body.appendChild(clone);\n        var className = this.parent.currentView === 'MonthAgenda' ? '.e-appointment-wrap' : '.e-content-wrap';\n        var scrollableEle = this.parent.element.querySelector(className);\n        var links = [].slice.call(document.getElementsByTagName('head')[0].querySelectorAll('link, style'));\n        var reference = '';\n        for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\n            var link = links_1[_i];\n            reference += link.outerHTML;\n        }\n        var div = createElement('div');\n        clone.style.width = this.parent.element.offsetWidth + 'px';\n        var elementWidth = Math.round((parseInt(clone.style.width, 10)) / 100) * 100;\n        div.appendChild(clone);\n        var printWindow = window.open('', 'print', 'height=550,width=' + elementWidth + ',tabbar=no');\n        printWindow.document.write('<!DOCTYPE html><html><head>' + reference + '</head><body>' + div.innerHTML +\n            '<script>(function() { window.ready = true; })();</script></body></html>');\n        printWindow.document.close();\n        printWindow.focus();\n        setTimeout(function () {\n            if (printWindow.ready && scrollableEle) {\n                // eslint-disable-next-line no-self-assign\n                scrollableEle.scrollLeft = scrollableEle.scrollLeft;\n                // eslint-disable-next-line no-self-assign\n                scrollableEle.scrollTop = scrollableEle.scrollTop;\n                var headerTimeCellsScroll = printWindow.document.querySelector('.e-date-header-wrap');\n                if (headerTimeCellsScroll) {\n                    headerTimeCellsScroll.scrollLeft = scrollableEle.scrollLeft;\n                }\n                var timeCellsScroll = printWindow.document.querySelector('.e-time-cells-wrap');\n                if (timeCellsScroll) {\n                    timeCellsScroll.scrollTop = scrollableEle.scrollTop;\n                }\n                var contentCellScroll = printWindow.document.querySelector(className);\n                if (contentCellScroll) {\n                    contentCellScroll.scrollLeft = scrollableEle.scrollLeft;\n                    contentCellScroll.scrollTop = scrollableEle.scrollTop;\n                }\n                printWindow.print();\n                printWindow.close();\n            }\n        }, 500);\n    };\n    Print.prototype.printSchedulerWithModel = function (printOptions) {\n        var element = createElement('div', { id: this.parent.element.id + '_print', className: 'e-print-schedule' });\n        document.body.appendChild(element);\n        Schedule.Inject(Day, Week, WorkWeek, Month, Agenda, MonthAgenda, TimelineViews, TimelineMonth, Year, TimelineYear);\n        this.printInstance = new Schedule(this.getPrintScheduleModel(printOptions));\n        this.printInstance.isPrinting = true;\n        this.printInstance.registeredTemplate = this.parent.registeredTemplate;\n        this.printInstance.root = this.parent.root ? this.parent.root : this.parent;\n        this.printInstance.appendTo(element);\n        this.printInstance.on(events.print, this.contentReady, this);\n        this.printWindow = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWindow.moveTo(0, 0);\n        this.printWindow.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.getPrintScheduleModel = function (printOptions) {\n        var printModel = {};\n        var scheduleProps = ['agendaDaysCount', 'calendarMode', 'cssClass', 'currentView',\n            'dateFormat', 'enableRtl', 'endHour', 'eventSettings', 'firstDayOfWeek',\n            'firstMonthOfYear', 'group', 'height', 'locale', 'maxDate', 'minDate', 'readonly',\n            'resources', 'rowAutoHeight', 'selectedDate', 'showHeaderBar', 'showTimeIndicator', 'showWeekNumber',\n            'showWeekend', 'startHour', 'timeFormat', 'timeScale', 'timezone', 'views', 'width', 'workDays', 'workHours',\n            'dateHeaderTemplate', 'dateRangeTemplate', 'cellHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate',\n            'cellTemplate', 'resourceHeaderTemplate', 'headerIndentTemplate', 'actionBegin', 'actionComplete', 'actionFailure',\n            'created', 'dataBinding', 'dataBound', 'destroyed', 'eventRendered', 'moreEventsClick', 'navigating', 'popupOpen', 'popupClose', 'renderCell'\n        ];\n        var scheduleTemplates = ['cellHeaderTemplate', 'dayHeaderTemplate', 'monthHeaderTemplate', 'cellTemplate',\n            'dateHeaderTemplate', 'dateRangeTemplate', 'eventTemplate', 'resourceHeaderTemplate', 'headerIndentTemplate'];\n        var scheduleEvents = ['actionBegin', 'actionComplete', 'actionFailure', 'created', 'dataBinding', 'dataBound',\n            'destroyed', 'eventRendered', 'moreEventsClick', 'navigating', 'popupOpen', 'popupClose', 'renderCell'];\n        var eventSettings;\n        var group;\n        var timeScale;\n        var views;\n        for (var _i = 0, scheduleProps_1 = scheduleProps; _i < scheduleProps_1.length; _i++) {\n            var key = scheduleProps_1[_i];\n            switch (key) {\n                case 'eventSettings': {\n                    eventSettings = Object.assign({}, this.parent.eventSettings.properties);\n                    eventSettings.dataSource = this.parent.eventsData;\n                    var eventTemplate = !isNullOrUndefined(printOptions.eventSettings) &&\n                        !isNullOrUndefined(printOptions.eventSettings.template) ? printOptions.eventSettings.template : eventSettings.template;\n                    eventSettings.template = !this.parent.isAngular && typeof (eventTemplate) === 'function' ? null : eventTemplate;\n                    printModel.eventSettings = eventSettings;\n                    break;\n                }\n                case 'group':\n                    group = isNullOrUndefined(printOptions.group) ? this.parent.group : printOptions.group;\n                    group.headerTooltipTemplate = null;\n                    printModel.group = group;\n                    break;\n                case 'timeScale':\n                    timeScale = isNullOrUndefined(printOptions.timeScale) ? this.parent.timeScale : printOptions.timeScale;\n                    if (!this.parent.isAngular) {\n                        timeScale.majorSlotTemplate = typeof (timeScale.majorSlotTemplate) === 'function' ? null : timeScale.majorSlotTemplate;\n                        timeScale.minorSlotTemplate = typeof (timeScale.minorSlotTemplate) === 'function' ? null : timeScale.minorSlotTemplate;\n                    }\n                    printModel.timeScale = timeScale;\n                    break;\n                case 'views':\n                    views = isNullOrUndefined(printOptions.views) ? this.parent.views : printOptions.views;\n                    if (!this.parent.isAngular && views && views.length > 0 && typeof (views[0]) === 'object') {\n                        var _loop_1 = function (view) {\n                            scheduleTemplates.forEach(function (x) {\n                                if (!isNullOrUndefined(view[\"\" + x])) {\n                                    view[\"\" + x] = typeof (view[\"\" + x]) === 'function' ? null : view[\"\" + x];\n                                }\n                            });\n                        };\n                        for (var _a = 0, views_1 = views; _a < views_1.length; _a++) {\n                            var view = views_1[_a];\n                            _loop_1(view);\n                        }\n                    }\n                    printModel.views = views;\n                    break;\n                default:\n                    if (scheduleTemplates.indexOf(key) > -1) {\n                        printModel[\"\" + key] = isNullOrUndefined(printOptions[\"\" + key]) ?\n                            (!this.parent.isAngular && typeof (this.parent[\"\" + key]) === 'function' ? null : this.parent[\"\" + key]) :\n                            (!this.parent.isAngular && typeof (printOptions[\"\" + key]) === 'function' ? null : printOptions[\"\" + key]);\n                        break;\n                    }\n                    if (scheduleEvents.indexOf(key) > -1) {\n                        printModel[\"\" + key] = printOptions[\"\" + key];\n                        break;\n                    }\n                    printModel[\"\" + key] = isNullOrUndefined(printOptions[\"\" + key]) ?\n                        this.parent[\"\" + key] : printOptions[\"\" + key];\n                    break;\n            }\n        }\n        return printModel;\n    };\n    Print.prototype.contentReady = function () {\n        var _this = this;\n        this.printWindow = basePrint(this.printInstance.element, this.printWindow);\n        this.printWindow.onbeforeunload = function () {\n            if (_this.printInstance) {\n                _this.printInstance.off(events.print, _this.contentReady);\n                _this.printInstance.element.remove();\n                _this.printInstance.destroy();\n                _this.printInstance = null;\n            }\n            _this.printWindow = null;\n        };\n    };\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.prototype.destroy = function () {\n        this.parent = null;\n    };\n    return Print;\n}());\nexport { Print };\n","import * as index from './index';\nindex.Schedule.Inject(index.Day, index.Week, index.WorkWeek, index.Month, index.Year, index.Agenda, index.MonthAgenda, index.TimelineViews, index.TimelineMonth, index.TimelineYear, index.Resize, index.DragAndDrop, index.ExcelExport, index.ICalendarExport, index.ICalendarImport, index.Print);\nexport * from './index';\n"],"names":["getElementHeightFromClass","container","elementClass","isTransformed","height","el","createElement","className","cloneNode","style","visibility","position","appendChild","getElementHeight","remove","getElementWidthFromClass","width","getElementWidth","getTranslateY","element","getComputedStyle","window","WebKitCSSMatrix","webkitTransform","m42","getTranslateX","m41","getWeekFirstDate","date","firstDayOfWeek","date1","Date","getTime","getDay","setDate","getDate","isNaN","getWeekLastDate","weekFirst","weekLast","getFullYear","getMonth","firstDateOfMonth","lastDateOfMonth","getWeekNumber","valueOf","dayOfYear","MS_PER_DAY","Math","ceil","getWeekMiddleDate","setTime","time","tzOffsetBefore","getTimezoneOffset","d","tzOffsetDiff","MS_PER_MINUTE","resetTime","getDateInMs","localOffset","timezoneOffset","getDateCount","startDate","endDate","addDays","noOfDays","addMonths","noOfMonths","day","setMonth","min","getMaxDays","addYears","noOfYears","setFullYear","getStartEndHours","startHour","endHour","setHours","getHours","setMinutes","getMinutes","setSeconds","getSeconds","date2","getDaysCount","strTime","endTime","round","getDateFromString","indexOf","parseInt","match","toString","replace","getScrollBarWidth","scrollWidth","pixelRatio","devicePixelRatio","screen","availWidth","document","documentElement","clientWidth","divNode","value","cssText","body","ratio","toFixed","floor","offsetWidth","removeChild","resetScrollbarWidth","zoomPixelRatio","findIndexInData","data","field","event","resourceCollection","i","length_1","length","field_1","slice","Array","join","includes","groupIDField","getOuterHeight","offsetHeight","marginTop","marginBottom","removeChildren","_i","elementChildren_1","call","children","elementChild","isDaylightSavingTime","jan","jul","max","getUniversalTime","year","month","hours","minutes","seconds","milliseconds","getMilliseconds","UTC","isMobile","navigator","userAgent","toLowerCase","isIPadDevice","capitalizeFirstWord","inputString","type","split","map","e","charAt","toLocaleUpperCase","substring","array","isNullOrUndefined","index","getBoundingClientRect","getElementTop","offsetTop","top","generateSummary","rule","localeObject","locale","calendarType","cldrObj","cldrObj1","ruleObject","extractObjectFromRule","summary","getConstant","EVERY","calendarMode","nameSpace1","nameSpace","getValue","getDefaultDateObject","cldrData","interval","freq","DAYS","WEEKS","ON","forEach","DAYINDEXOBJECT","MONTHS","getMonthSummary","YEARS","count","TIMES","until","tempDate","UNTIL","localeObj","monthDay","pos","setPosition","WEEKPOS","generate","excludeDate","startDayOfWeek","maximumCount","viewDate","newTimezone","MAXOCCURRENCE","cacheDate","calendarUtil","getCalendarUtil","modifiedDate","tempExcludeDate","tz","Timezone","content","parsedDate","getDateFromRecurrenceDateString","add","push","recExceptionCount","tempViewDate","maxOccurrence","setFirstDayOfWeek","DAYINDEX","end","dailyType","weeklyType","monthlyType","yearlyType","recDateString","substr","excludeDateHandler","zeroIndex","expectedCount","expectedDays","compareDates","validateRules","wkstIndex","weekState","weekCollection","wkst","dayIndex","startDateDiff","weekendDate","compareTempDate","insertDataCollection","getStartDateForWeek","validateMonthlyRuleType","monthlyDayTypeProcessforMonthFreq","monthlyDayTypeProcess","monthlyDateTypeProcessforMonthFreq","monthlyDateTypeProcess","checkYearlyType","processWeekNo","processYearDay","firstWeekSpan","weekNo","maxDate","minDate","stDate","getYearLastDate","weekNos","insertDateCollection","state","insertDatasIntoExistingCollection","dateCollection","yearDay","getLeapYearDaysCount","isLeapYear","getYearDaysCount","initializeRecRuleVariables","ruleData","monthCollection","mainDate","monthInit","currentMonthDate","getMonthStartDate","isSameYear","checkMonth","setValidDate","processDateCollectionForByMonthDay","beginDate","setNextValidDate","isLastMonth","getMonthDaysCount","recRuleVariables","isByMonth","validateProperDate","monthData","getMonthCollection","dates","item","HASNUMBER","test","j","expectedDaysArray","SPLITNUMBERANDSTRING","isSameMonth","filterDateCollectionByIndex","insertDateCollectionBasedonBySetPos","dayCycleData","processWeekDays","initialDate","datas","week","row","insertDateCollectionBasedonIndex","isHavingNumber","processDateCollectionforByDayWithInteger","compareMonth","newstr","getDayString","currentDate","getRecurrenceCollection","recurrenceCollectionObject","expectedDaysArrays","arrPosition","getDateCollectionforBySetPosNull","recurrenceCollections","dayData","chDate","weekCount","firstOfMonth","numberOfDaysInMonth","used","sort","weekIndex","validRules","REMOVENUMBERINSTRING","checkDayIndex","sortedExpectedDays","expectedDaysNumberSplit","expectedDaysArr","rules","temp","splitData","Number","splice","dayCycle","startIndex","checkDate","expectedDate","shift","checkYear","expectedyearDay","getYearDay","startDateCollection","diff","rotate","days","expectedMonth","getExpectedDays","Islamic","Gregorian","getRecurrenceStringFromDate","getUTCFullYear","roundDateValues","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","actionBegin","renderCell","inlineClick","dataReady","contentReady","scrollUiUpdate","ROOT","ICON","TABLE_CONTAINER_CLASS","SCHEDULE_TABLE_CLASS","CONTENT_TABLE_CLASS","POPUP_OPEN","APPOINTMENT_CONTAINER_CLASS","TEXT_ELLIPSIS","FORM_CLASS","EVENT_TOOLTIP_ROOT_CLASS","DISABLE_DATES","__assign","Object","assign","t","s","n","arguments","p","prototype","hasOwnProperty","apply","this","HeaderRenderer","parent","l10n","renderHeader","addEventListener","on","closeHeaderPopup","removeEventListener","off","closestEle","closest","target","closestPop","contentWrap","querySelector","isAdaptive","classList","contains","cls.POPUP_OPEN","removeClass","popupEle","popupObj","ej2_instances","hide","addClass","hideHeaderPopup","headerPopup","toolbarEle","insertBefore","firstElementChild","renderToolbar","_this","items","toolbarItems","getToolbarItems","getItems","trigger","events.actionBegin","requestType","args","toolbarObj","Toolbar","overflowMode","clicked","toolbarClickHandler","bind","created","toolbarCreateHandler","enableRtl","enableHtmlSanitizer","isStringTemplate","root","appendTo","setAttribute","prevNavEle","nextNavEle","updateAddIcon","updateActiveView","updateItems","dataBind","getPopUpRelativeElement","setDayOfWeek","headerCalendar","setCalendarDate","setCalendarMinMaxDate","getCalendarView","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","querySelectorAll","viewIndex","updateDateRange","textEle","activeViewOptions","dateRangeTemplate","textContent","activeView","getStartDate","getEndDate","viewName","dateRangeTemplateName","templateId","id","dateTemplate","getDateRangeTemplate","undefined","append","text","getDateRangeText","refreshOverflow","addEle","eventSettings","allowAdding","util.capitalizeFirstWord","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","getItemModel","propItem","tooltipText","prefixIcon","cssClass","showTextOn","template","disabled","suffixIcon","align","overflow","htmlAttributes","visible","showAlwaysInPopup","tabIndex","_a","tbItem","name","enableAdaptiveUI","role","aria-atomic","aria-live","views","_b","_c","view","getItemObject","displayName","option","isItemInsidePopup","orientation","renderHeaderPopup","headerPopupEle","headerCalendarEle","Popup","actionOnScroll","targetType","relateTo","X","Y","collision","viewPortElement","isDisplayDate","displayDate","hasSelectedDate","Calendar","change","calendarChange","setCalendarTimezone","calendarDate","util.resetTime","changeDate","timezone","tzModule","getLocalTimezoneName","calculateViewIndex","originalEvent","portals","concat","isSameTime","currentTime","show","changeView","getCurrentTime","isSelectedDate","numberOfWeeks","util.firstDateOfMonth","getNextPreviousDate","activeCellsData","startTime","timeScale","slotCount","msInterval","util.MS_PER_MINUTE","currentTime_1","setMilliseconds","isAllDay","eventWindow","openEditor","extend","cancel","toolbarPopUp","duration","selectedTime","getHeaderElement","updateHeaderItems","classType","dateRangeEle","cls.TEXT_ELLIPSIS","previousNextIconHandler","getCurrentViewDates","firstDate","lastDate","util.addDays","util.getWeekFirstDate","isCustomMonth","util.lastDateOfMonth","util.addMonths","enableItems","getModuleName","destroy","isDestroyed","Scroll","setWidth","formatUnit","setHeight","setDimensions","onPropertyChanged","cssProperties","getCssProperties","module","notify","ScheduleTouch","cls.TABLE_CONTAINER_CLASS","touchObj","Touch","scroll","scrollHandler","swipe","swipeHandler","tapHold","tapHoldHandler","swipeSettings","swipeThresholdDistance","EventHandler","onTransitionEnd","touchLeftDirection","touchRightDirection","eventTooltip","close","blockSwipe","uiStateValues","isTouchScroll","action","allowSwiping","isTapHold","isSwipeScroll","timeStampStart","now","scrollDirection","scrollDiv","isScrollTriggered","preventDefault","stopPropagation","nextPanel","renderPanel","getPanel","renderDates","colLevels","x","distanceX","transform","prevWidth","previousPanel","swipeDate","swipeDirection","offsetDist","Browser","isDevice","swapPanels","transitionDuration","confirmSwipe","cancelSwipe","isIos","preventEventClick","quickPopup","tapHoldEventPopup","selectedElements","eventBase","getSelectedEventElements","resizeModule","resizeStart","clsName","nextPrevType","currentPanel","setProperties","headerModule","getRenderDates","renderLayout","direction","previousDate","navArgs","setPanel","translateX","offsetLeft","renderTemplates","crudModule","refreshDataManager","resetValues","util.removeChildren","KeyboardInteraction","selectedCells","isCutContentPasted","isCutAction","keyConfigs","downArrow","upArrow","rightArrow","leftArrow","shiftDownArrow","shiftUpArrow","shiftRightArrow","shiftLeftArrow","ctrlLeftArrow","ctrlRightArrow","altOne","altTwo","altThree","altFour","altFive","altSix","altSeven","altEight","altNine","enter","escape","delete","backspace","home","pageUp","pageDown","tab","shiftTab","ctrlShiftUpArrow","ctrlShiftDownArrow","ctrlShiftLeftArrow","ctrlShiftRightArrow","shiftAltY","shiftAltN","cut","copy","cmdCut","cmdCopy","keyboardModule","KeyboardEvents","keyAction","keyActionHandler","eventName","createClipboardElement","processDown","shiftKey","processUp","processLeft","processRight","focus","processViewNavigation","processEnter","focusFirstCell","processTab","processDelete","processCtrlShiftNavigationArrows","processEscape","allowInline","inlineModule","processFTwelve","processShiftAltN","processClipboardAction","getSelectedCells","cellData","getSelectedElements","activeEventData","event_1","StartTime","EndTime","IsAllDay","workHour","getStartEndTime","workHours","slotInterval","inlineArgs","groupIndex","event.inlineClick","click","onCellMouseDown","allowClipboard","pasteHandler","initialTarget","getClosestCell","readonly","which","removeSelectedClass","getContentTable","onMouseSelection","onMoveUp","allDayRow","getAllDayRow","appointments","selectionEdges","boundaryValidation","pageY","pageX","bottom","left","right","parent_1","yInBounds","scrollHeight","scrollTop","xInBounds","scrollLeft","selectCells","isPreventAction","convertToEventData","showQuickPopup","selectArgs","quickInfoOnSelectionEnd","cellArgs","resourceIcon","inlineCrudActions","getDateFromElement","getNavigateView","cellDetails","getCellDetails","getCells","isInverseTable","tableEle","isTimelineYear","query","cells","maxRow","rows","maxColumn","endIndex","inverseCells","cell","focusCell","removeSelectedAppointmentClass","isTimelineView","cls.CONTENT_TABLE_CLASS","getWorkCellElements","isInverseTableSelect","isMultiple","targetCell","initialId_1","views_1","allowMultipleRow","removeInlineAppointmentElement","allowMultiRowSelection","isGroupYear","group","resources","parentElement","cellIndex","getAttribute","resourceSelectedCells","selectedCells_1","allowMultiCellSelection","allDayCells","getAllDayCells","resourceAllDayCells","allDayCells_1","addSelectedClass","selectAppointment","isReverse","getAppointmentElements","nextAppEle","targetIndex","addSelectedAppointments","selectAppointmentElementFromWorkCell","appointmentElements_1","getUniqueAppointmentElements","filteredElements_1","selectedDate_1","eventsProcessed","filter","eventObject","eventFields","JSON","stringify","Guid","selectedElement","focusElements","getAppointmentElementsByGuid","startCell","endCell","util.MS_PER_DAY","guid","appointmentElements","self","getWorkCellFromAppointmentElement","selectedObject","getEventByGuid","selectWorkCellByTime","code","viewCollections","isCalendarTarget","keyTarget","currentTarget","cancelUpDownAction","isVerticalYear","isGroup","selectedEventElements","getSelectedAppointments","moreEventWrapper","quickPopupWrapper","getQuickPopupElement","tableRows","getTableRows","curRowIndex","getVerticalUpDownCell","getHorizontalUpDownCell","getYearUpDownCell","rowIndex","isUp","workCell","dateAttr","processLeftRight","parentNode","sectionRowIndex","columnIndex","maxIndex","isCancelLeftRightAction","prevent","selectedAppointments","key","targetDate","isMonthEnd","calculateNextPrevDate","getTimelineYearTargetCell","getHorizontalLeftRightCell","curColIndex","maxColIndex","allDayRow_1","isMonthStart","tbody","allDayRow_2","isRight","getVerticalLeftRightCell","currentCell","initialId","nextPrevDate","getFocusableElements","processTabOnPopup","popupElement","focusableElements","firstEle","footerEle","offsetParent","lastEle","activeElement","popupWrapper","cls.ROOT","appSelector","appElements","focusAppointment","resourceBase","lastResourceLevel","virtualScrollModule","virtual","averageRowHeight","expandedResources","virtualScrolling","setScrollPosition","resCellSelector","resourceCell","preventScroll","processTabOnResourceCells","activeEle","selectedEle","getSelectedEvents","allowDeleting","deleteClick","eventEle","renderedResources","onClosePopup","morePopup","tabElements","currentTabIndex","nextTabElement","resColWrap_1","clipBoardTextArea","attrs","tabindex","setCopy","copiedEventData","getSelection","eventDetails","elements","eventDatas","filteredContent","filterReadOnlyEvent","selectedEvents","isArray","getEventDetails","setSelectionRange","select","clipboard","writeText","then","blur","removeAllRanges","closestAppointment","catch","err","isReadonly","isCut","closeQuickInfoPopup","clipboardEvent","targetElement","dialogObject","pastedData","clipboardData","getData","parsedData","parse","pasteEventArgs","every","processPaste","getTargetElements","isAllDayEvent","getResourcesByIndex","processedData","processEventData","selectedEventData","sortByDateTime","saveData","prepareEventData","saveEvent","addEvent","some","processedItem","recurrenceID","adjustEventTime","groupData","itemIsAllDay","isTimeScaleEnabled","enable","initialEventTime","uniqueId","getEventMaxID","events","totalDuration","calculateTotalDuration","cloneDetails","recurrenceRule","eventStartTime","Data","dataSource","initDataManager","dataManager","DataManager","Query","generateQuery","clone","enableLazyLoading","resIdCollection_1","resource","resId","groupId","groupOrder","addParams","includeFiltersInQuery","dateQuery","getStartEndQuery","recurrenceQuery","Predicate","and","where","or","toISOString","fieldMapping","executeQuery","dt","getMonthEndDate","dateObj","monthValue","maxDay","months","hDate","getHijriDate","HijriParser","toGregorian","daysInMonth","getDaysInMonth","gDate","finalGDate","finalHDate","updateDateObj","currentHijri","tempHijri","hDate1","timezoneData","getTimezoneData","offset","convertedDate","toLocaleString","timeZone","error","convert","fromOffset","toOffset","fromLocalOffset","toLocalOffset","removeLocalOffset","Intl","DateTimeFormat","resolvedOptions","Value","Text","SU","MO","TU","WE","TH","FR","SA","EventBase","slots","isDoubleTapped","processData","timeZonePropChanged","oldTimezone","fields","processed","generateID","this_1","events_1","updateEventDateTime","processTimezoneChange","isPrinting","isPreventTimezone","processTimezone","level","crudObj","isCrudAction","recurrenceEvent_1","generateOccurrence","occurrence","app","generateGuid","eventData","isBlock","filterEvents","blockData","blockData_1","eventObj","blockProcessed","util.getDateFromString","getProcessedEvents","eventCollection","eventsData","eventCollection_1","event_2","timezonePropertyChange","event.dataReady","timezoneConvert","startTimezone","endTimezone","startTz","endTz","filterBlockEvents","resourceData","eStart","eEnd","getGroupIndexFromEvent","blockEvents","blockEvents_1","eventObj_1","resourceTdData","predicate","dataModule","json","executeLocal","filterEventsByResource","sortByTime","filterEventsByRange","filteredEvents","keys","appointmentsCollection","sortComparer","fieldMappings_1","a","b","d1","d2","customSorting","fieldMapping_1","object1","object2","d3","d4","d5","d6","splits","sortFn","getSmallestMissingNumber","large","splitEventByDay","eventEndTime","eventLength","util.getDaysCount","isSpanned","splitEvent","dateRender","util.getDateInMs","orgStart","orgEnd","ranges","cStart","slot","byDate","showWeekend","slotDates","slot_1","renderedDates","getRenderedDates","renderedDates_1","firstSlot","hasBreak","isLeft","cloneEventObject","dateInRange","availSlot","availSlot_1","slot_2","elementSelector","focusElements_1","eventSelect","elementSelect","preventFocus","focusElement","isFocused","selectedCell","keyboardInteractionModule","nearestTime","isAllDayAppointment","findNearestSlot","targetArea","queryString","appointmentTime","numberOfSlots","nearestSlot","from","_","reduce","nearest","difference","abs","trunc","levelIndex","levelName","idField","parentField","getIndexFromResourceId","isFullDay","util.getUniversalTime","spannedEventPlacement","appointmentBorderRemove","wireAppointmentEvents","isPreventCrud","isReadOnly","eventClick","eventTouchClick","eventDoubleClick","wireResizeEvent","dragAndDropModule","wireDragEvent","setTimeout","renderResizeHandler","spanEvent","allowResizing","resizeEdge","resizeHandler","prepend","isTop","isBottom","ctrlKey","metaKey","target_1","selectEventArgs","eventClickArgs","quickPopupHide","eventDoubleClickArgs","currentAction","openRecurrenceAlert","getEventById","c","r","random","getEventIDType","resourceId","eventId","idType","maxId","obj","isMaxCount","eventRule","timeZoneDiff","maxCount","exception","recurrenceException","util.getDateCount","firstDay","isDayBasedRecurrence","generatedDates","isDSTAdjusted","convertedDates","occurrenceCollection","convertedDates_1","clonedObject","getDSTAdjustedTime","followingID","occurDate","eventOffset","getDSTDiff","schOffset","getParentEvent","isParent","parentEvent","getFollowingEvent","collection","getEventCollections","followObj","follow","parentObj","childObj","followingCollection","followingEvent","getOccurrenceEvent","collections","fields_1","fieldValue","isFollowingEvent","parentStart","childStart","isGuid","isFollowing","fieldKey","getOccurrencesByID","parentObject_1","event_3","getOccurrencesByRange","event_4","getDeletedOccurrences","recurrenceData","parentObject","deletedOccurrences","exDateString_1","this_2","len","exDate","childObject","applyResourceColor","alpha","color","getResourceColor","createBlockAppointmentElement","record","resIndex","isResourceEventTemplate","templateElement","eventSubject","subject","default","appointmentWrapper","data-id","aria-disabled","eventTemplate","appointmentSubject","sanitize","eventTemplateName","templateName","getEventTemplateName","getAppointmentTemplate","setWrapperAttributes","getReadonlyAttribute","isBlockRange","isBlockAlert","event_5","dataCol","dataCol_1","getFilterEventsList","getSeriesEvents","deleteFutureEditEvents","futureEvents","deleteFutureEvent","deleteFutureEditEventList","delId","followingId","startTimeQuery","getEditedOccurrences","delEditedEvents","deleteRecurrenceEventList","deleteFutureEditEventList_1","event_6","delEventQuery","filteredDates","isValidEvent","schedule","isHourRange","isSameRange","allDayExpandScroll","dateHeader","indentHeight","ele","expand","updateEventMinimumDuration","startEndHours","minimumEventDuration","tempEnd","tempStart","createEventWrapper","tr","levels","isReact","col","appointmentWrap","data-date","innerWrapper","cls.APPOINTMENT_WRAPPER_CLASS","getPageCoordinates","eventArgs","changedTouches","renderSpannedIcon","iconElement","cls.EVENT_INDICATOR_CLASS","cls.ICON","iconLeft","iconRight","iconTop","iconBottom","addCellHeight","selector","eventHeight","eventGap","headerHeight","indHeight","isScrollUpdate","maxEventsPerRow","rowAutoHeight","weekNumberRows","showWeekNumber","rows_1","setStyleAttribute","enablePersistence","allowVirtualScrolling","event.contentReady","unWireEvents","appElements_1","clearEvents","__extends","extendStatics","setPrototypeOf","__proto__","__","constructor","create","VerticalEvent","_super","renderedEvents","renderedAllDayEvents","overlapEvents","moreEvents","overlapList","allDayEvents","allDayLevel","animation","Animation","progress","animationUiUpdate","renderAppointments","setDragArea","isSpecificResourceEvents","wrapperElements","isDragging","hideWrapper","wrapper","appWrapper","wrapperElements_1","sourceEvent","targetEvent","updateFocusedWorkCell","allDayElement","setAllDayRowHeight","expandCollapse","rowExpandCollapse","initializeValues","processBlockEvents","renderEvents","arr","animate","events.contentReady","wraps","isGroupAdaptive","cellHeight","parseFloat","getHeight","appHeight","appendEvent","appointmentElement","appLeft","eventType","getResourceList","dateCount","getStartCount","resources_1","filterEvents_1","setValues","renderBlockEvents","dayCount","spannedData","isSpannedEvent","util.getStartEndHours","isWorkDayAvailable","blockTop","blockHeight","getTopValue","getDayIndex","isRender","allDayRowTop","resources_2","renderedDate","length_2","filterEvents_2","renderAllDayEvents","enableMaxHeight","getOverlapIndex","renderNormalEvents","filterEvents_3","hideNonWorkingDays","renderedIndex","dateIndex","firstColumn","currentResources","resourceDateTree","colSpan","findIndex","resourceIndex","getCssClass","createAppointmentElement","recordSubject","data-guid","aria-label","getAnnouncementString","appointmentDetails","appointmentStartTime","innerHTML","getTimeString","appointmentEndTime","timeStr","appointmentLocation","location","iconClass","recurrenceIcon","createMoreIndicator","currentDay","countWrapper","childElementCount","innerCountWrap","cls.ROW_COUNT_WRAPPER_CLASS","moreIndicatorElement","data-index","data-count","countCell","moreCount","formatNumber","isSameDuration","eventDates","workDays","workDaysField","inline","cellTop","currentDates","appWidth","topValue","isDateRange","isAlreadyRendered","allDayDifference_1","allDayIndex_1","Index","widthAdjustment","appointmentElement_1","wIndex_1","eventWrapper_1","createInlineAppointmentElement","length_3","allDayRowHeight","addOrRemoveClass","appIndex","argsData","getEventWidth","tempData","adjustOverlapElements","maxHeight","subjectElement","tempWidth","getEventLeft","tempLeft","startEndTime","startEndDate","timeString","diffInMinutes","eventsList","date_1","appointmentList_1","appointment_1","recordStart_1","recordEnd_1","queue_1","filterList","processedIds","Set","currentObj","has","overlap","size","val","eventsList_1","appLevel","length1","length2","eleGuid","apps","enableAllDayScroll","moreEventCount","getEventHeight","eventElement","styles","rowHeight","MonthEvent","monthHeaderHeight","moreIndicatorHeight","renderType","enableIndicator","withIndicator","maxOrIndicator","ignoreWhitespace","removeEventWrapper","appElement","appElement_1","wrap","conWrap","appointmentWrapper_1","removeHeightProperty","cellTd","isHorizontalScroll","renderResourceEvents","renderEventsHandler","updateBlockElements","isPreventScrollUpdate","scrollPosition","updateVirtualScrollHeight","events.scrollUiUpdate","totalCells_1","resData","blockList","workCells","totalCells","height_1","clientHeight","cellDetail","cellWidth","getSlotDates","spannedEvents_1","sDate","getStartTime","getIndex","updateIndicatorIcon","blockSpannedList","isSameDate","isBlockIcon","blockSpannedList_1","blockEvent","spannedEvents_2","isIcon","getEndTime","getIndexOfDate","getCellTd","getPosition","renderBlockIndicator","diffInDays","appRight","appTop","getRowTop","blockElement","renderEventElement","blockIndicator","cloneData","getStartHour","getEndHour","actualStartTime","actualEndTime","actualStartHour","actualEndHour","sourceRes","slotData","isCloneElement","newRecord","getEventData","eventLocation","innerElement","appTime","appLocation","appendEventIcons","eventsPerRow","overlapCount","enableAppRender","inlineValue","firstChild","updateCellHeight","indicator","getMoreIndicatorText","getMoreIndicatorElement","renderElement","moreIndicatorClick","blockElement_1","getFilteredEvents","getOverlapEvents","appointmentsList","dateTime","appointments_1","moreArgs","isPopupOpen","clickArgs","moreArgs_1","moreEventClick","isAppointment","getSpannedTime","pop","setMaxEventHeight","wrapperEle","data-start-date","data-end-date","util.getOuterHeight","align-items","TimelineEvent","cellTops","eventContainers","cls.APPOINTMENT_CONTAINER_CLASS","dayLength","cls.SCHEDULE_TABLE_CLASS","headerRows","slotsPerDay","appointments_2","trimStartTime","trimEndTime","getSortComparerIndex","getOverlapSortComparerEvents","appointmentsCollection_1","start_1","end_1","appStart_1","appEnd_1","source","isDayProcess","top_1","renderApp","conWidth","isWithoutScroll","getFirstChild","adjustAppointments","moreIndicator","appPos","position_1","renderTimelineMoreIndicator","k","adjustToNearestTimeSlot","position_2","inputTime","parsedTime","minutesInMilliseconds","adjustedMinutesInMilliseconds","adjustedTime","isAlreadyAvail","startDateTime","slotStartTime","slotEndTime","getFilterEvents","appArea","renderedAppCount","monthHeader","actualCellWidth","currentPercentage","blockIndicator_1","getNextDay","getPreviousDay","isSameDay","getSameDayEventsWidth","getSpannedEventsWidth","getIntervalInMinutes","endWidth","startWidth","spannedWidth","getAppointmentLeft","slotTd","gIndex","hoursRange","indicatorPos","wrapIndex","InlineEdit","events.inlineClick","inlineEdit","moreWrapper","cellEdit","eventEdit","saveObj","generateEventData","getEventDaysCount","isVertical","createVerticalViewInline","createMonthViewInline","createTimelineViewInline","inlineSubject","subEle","innerText","subjectWrap","innerWrapElement","daysCount","verticalEvent","allDayElements","saveObject","monthEvent","monthCellSelector","monthModule","timelineView","inlineElement","setDefaultValueToObject","setResourceValues","documentClick","eventTarget","inlineData","inlineAppointmentElement","cls.APPOINTMENT_CLASS","inlineDetails","inlineAppointment","node","FieldValidator","renderFormValidator","form","formObj","FormValidator","customPlacement","inputElement","errorPlacement","validationComplete","focusout","focusOut","relatedTarget","ignoreError","elem","inputName","display","status","createTooltip","dlgContent","client","inputClient","div","arrow","destroyToolTip","elements_1","reset","QuickPopups","isMultipleEventSelect","fieldValidator","render","renderQuickPopup","renderMorePopup","renderQuickDialog","cls.POPUP_WRAPPER_CLASS","open","quickPopupOpen","quickPopupClose","hideAnimation","showAnimation","zIndex","moreEventPopup","cls.MORE_POPUP_WRAPPER_CLASS","morePopupOpen","morePopupClose","closeButton","renderButton","closeClick","navigationClick","buttonModel","isPrimary","dialogButtonClick","editFollowingEvents","followingSeriesButton","quickDialog","Dialog","animationSettings","effect","buttons","closeOnEscape","beforeClose","beforeQuickDialogClose","isModal","showCloseIcon","dialogElement","okButton","cancelButton","iconName","isDisabled","clickEvent","Button","iconCss","quickDialogClass","followingEventButton","applyFormValidation","cls.FORM_CLASS","validation","editDeleteOnly","editFollowingEventsOnly","editDeleteSeries","header","showQuickDialog","openRecurrenceValidationAlert","dialogCancel","enableRecurrenceValidation","openDeleteAlert","openValidationError","popupType","eventProp","popupArgs","createMoreEventList","moreEventContentEle","moreEventWrapperEle","eventText","tempId","eventTitle","closeIcon","editAction","allowEditing","deleteAction","editIcon","editClick","deleteIcon","beforeQuickPopupOpen","isCellBlocked","tempObj","cellClick","showQuickInfo","isMinMaxDate","targetEle","newEventClone","subjectElement_1","destroyPopupButtons","quickCellPopup","getPopupHeader","getPopupContent","getPopupFooter","Input","createInput","properties","placeholder","popupClose","moreButton","detailsClick","saveButton","saveClick","isSameEventClick","editButton","isQuickTemplate","quickInfoTemplates","templateType","updateTapHoldEventPopup","isSameTarget","quickEventPopup","buttonClass","deleteButton","headerType","headerData","headerTemplate","headerArgs","elementType","headerTemp","getQuickInfoTemplatesHeader","getFormattedString","replaceAll","templateWrapper","subjectText","childNodes","contentTemplate","contentArgs","contentTemp","getQuickInfoTemplatesContent","resourceText","getResourceText","details","getRecurrenceSummary","getTimezone","description","locationDetails","descriptionDetails","resourceDetails","footerType","footerData","footerTemplate","footer","footerArgs","footerTemp","getQuickInfoTemplatesFooter","resourceValue","resourceCollection_1","resourceData_1","id_1","textField","lastResource_1","resNames_1","lastResourceData_1","util.findIndexInData","startDateDetails","getDateFormat","endDateDetails","startTimeDetail","endTimeDetail","spanLength","dateElement","moreEventElements","tdDate","dialogEvent","subjectEle","updateMoreEventContent","moreElement","selectCell","cancelBtn","deleteEvent","isIgnoreOccurrence","eventSave","titleContent","zoneDetails","recurrenceEditor","getRecurrenceEditorInstance","ruleSummary","getRuleSummary","toUpperCase","skeletonString","skeleton","getDataFromTarget","cellsData","popupCloseArgs","isEventPopup","removeAttribute","innerHeight","isVirtualScroll","conTable","offsetX","util.getTranslateX","offsetY","refreshPosition","collide","isCollide","translateY","util.getTranslateY","clientX","clientY","targetRect","y","previousOffset","popupRect","elementFromPoint","applyEventColor","colorField","colorEle","borderLeftColor","backgroundColor","editElement","popupData","isCellPopup","formvalidator","validate","getObjectFromFormData","navigateEle","classNames","popupWrap","removeNewEventElement","tar","popupName","popup","buttonCollections_1","instance","input","resetTemplates","refreshQuickDialog","destroyQuickDialog","refreshQuickPopup","destroyQuickPopup","refreshMorePopup","destroyMorePopup","EventTooltip","tooltipObj","Tooltip","mouseTrail","showTipPointer","cls.EVENT_TOOLTIP_ROOT_CLASS","getTargets","beforeRender","onBeforeRender","onTooltipClose","targets","headerTooltipTemplate","enableTooltip","resCollection","getColumnLevels","contentContainer","tooltipTemplate","getHeaderTooltipTemplate","setContent","eventStart","eventEnd","tooltipSubject","tooltipLocation","startMonthDate","startMonthYearDate","endMonthYearDate","tooltipDetails","content_1","initializeCSPTemplate","getEventTooltipTemplate","windowCollision","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","INPUTWARAPPER","FORMLEFT","ENDONCOUNT","HIDEWRAPPER","PRIMARY","contentType","none","daily","weekly","monthly","yearly","valueData","sun","mon","tue","wed","thu","fri","sat","neverClassList","weekClassList","monthClassList","yearClassList","dailyClassList","noEndClassList","endOnCountClassList","endOnDateClassList","RecurrenceEditor","options","defaultLocale","never","first","second","third","fourth","last","repeat","repeatEvery","onDay","weeks","years","summaryTimes","summaryOn","summaryUntil","summaryRepeat","summaryDay","summaryWeek","summaryMonth","summaryYear","monthWeek","monthPosition","monthExpander","yearExpander","repeatInterval","renderStatus","dayButtons","monthButtons","startState","endOn","showFormElement","updateForm","freshOnEndForm","updateEndOnForm","selectMonthDay","updateUntilDate","onMonthDay","checked","preRender","L10n","applyCustomClass","initialize","renderComponent","repeatType","endTypes","selectedType","getRecurrenceRule","setRecurrenceRule","triggerChangeEvent","resetDayButton","daySelection","rotateArray","rtlClass","untilDateObj","weekday","monthDate","monthWeekDays","monthWeekPos","getDayPosition","endType","hideElement","renderDropdowns","DropDownList","getRepeatData","floatLabelType","title","frequencies","resetFormValues","getEndData","popupWidth","getPopupWidth","renderDropDownList","dropDownData","onWeekDay","getMonthPosData","getDayData","getMonthData","setDefaultValue","formelement_1","recurreneElement_1","renderDatePickers","DatePicker","dateFormat","getFormat","formatType","dayButtonRender","btns_1","btn","button","isToggle","btns","radioButtonRender","RadioButton","label","numericTextboxRender","recurrenceCount","NumericTextBox","setTemplate","positionCollection","textValue","monthposValue","nameSpaceString","weekday_1","fullDay","getSelectedDaysData","RULEBYDAY","getSelectedMonthData","RULEBYMONTHDAY","getIntervalData","RULEINTERVAL","getEndOnCount","RULECOUNT","getYearMonthRuleData","RULEBYMONTH","updateWeekButton","updateMonthUI","updateUI","getUntilData","RULEUNTIL","destroyComponents","resetFields","updateRuleUntilDate","untilDate","newUntilDate","getRecurrenceDates","RULEFREQ","RULEDAILY","RULEWEEKLY","RULEMONTHLY","RULEYEARLY","endon","detachInputs","inputElements_1","detach","removeClasses","getPersistData","addOnPersist","renderComplete","newProp","oldProp","Property","Event","NotifyPropertyChanges","Component","EventWindow","eventWindowTime","renderEventWindow","dialogModel","getEventWindowContent","minHeight","beforeOpen","onBeforeOpen","onBeforeClose","cls.EVENT_WINDOW_DIALOG_CLASS","editorHeaderTemplate","editorFooterTemplate","renderDialogButtons","addEventHandlers","preventEventSave","dialogButton","eventDelete","dialogClose","backIcon","saveIcon","refreshRecurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","editorTemplate","isEventData","cellClickAction","createAdaptiveHeaderElement","getDialogHeader","getDialogFooter","setEditorContent","renderFormElements","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","setDialogHeader","setDialogFooter","headerBackIcon","headerSaveIcon","headerTemplateId","temHeaderDiv","getEditorHeaderTemplate","footerTemplateId","temFooterDiv","getEditorFooterTemplate","allowKeyboardInteraction","isEnterKey","getSlotDuration","getInstance","deleteObj","callBackPromise","Deferred","trimAllDay","refreshDateTimePicker","startObj","endObj","resolve","isInteracted","eventCrudData","processCrudActions","resetForm","onsubmit","getDefaultEventWindowContent","formElements_1","tempEle","getEditorTemplate","parentDiv","createDivElement","titleLocationDiv","renderTextBox","startEndDateTimeDiv","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","renderCheckBox","timezoneParentDiv","renderDropDown","repeatParentDiv","repeatDiv","repeatEditContainer","buttonObj","REPEAT_BUTTON_ICON_CLASS","loadRecurrenceEditor","resourceParentDiv","renderResourceDetails","cls.DESCRIPTION_CLASS","submit","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","DateTimePicker","strictMode","timeFormat","getFieldLabel","step","startEndElement_1","labelValue","resourceDiv","resourceInput","resourceTemplate","SanitizeHtmlHelper","allowMultiple","MultiSelect","onMultiselectResourceChange","itemTemplate","popupHeight","mode","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","timezoneDataSource","filterBarPlaceholder","noRecordsTemplate","filtering","updateData","byGroupID","getColumnName","resObject","createInstance","datasource","resourceModel","filterRes","filterDatasource","clear","resObj","itemData","resValue","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","CheckBox","onChange","repeatStatus","textBoxDiv","textBoxInput","labelText","editorTitles","onAllDayChange","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","repeatSaveDialog","repeatCancelDialog","repeatOpenDialog","repeatRule","repeatStartDate","updateRepeatLabel","closeRepeatDialog","repeatTempRule","showDetails","disableButton","RecurrenceRule","getValidationRule","subjectRule","locationRule","startTimeRule","endTimeRule","descriptionRule","formElements","getFormElements","keyNames","formElements_2","curElement","columnName","setValueToElement","setDefaultValueToElement","timezoneObj","cls.TIME_ZONE_CLASS","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","updateDateTime","timezoneValue","isDisable","untilObj","resetFormFields","localTimezoneName","formElement_1","currentElement","alert","formElement","dataCollection","getEventDataFromEditor","processEventValidation","Repeat","alertType","recurrenceValidation","isShowAlert","getResourceData","isResourceEventExpand","allowGroupEdit","getEventIdFromForm","resourceSaveEvent","eveId_1","editedData","editOccurrenceValidation","formElement_2","getValueFromElement","alertMessage","recEditor","activeEvent","excludedEvents","seriesEvents","types","tempDiff","tempValue","getRecurrenceIndex","recColl","recIndex","currentData","editData","recurColl","recurColl_1","nextStartTime","nextEndTime","currentStartTime","currentEndTime","lastEndTime","previousStartTime","previousEndTime","lastResourceData","reverse","lastLevel","eventList","state_1","addValues","lastResource","resCol","groupId_1","index_1","l","eventList_1","dateValue","formElements_3","detachComponents","formElements_4","isIgnore","VirtualScroll","itemSize","bufferCount","renderedLength","existingDataCollection","enableTransition","getRenderedCount","setItemSize","containerSize","renderVirtualTrack","colCount","lastResourceIndex","updateVirtualTrackHeight","resourceCount","resWrap","eventWrap","setTranslate","lastRenderIndex","renderedResCount","util.getElementWidthFromClass","refreshLayout","initialHeight","scheduleHeight","preRenderedLength","isRemoteRefresh","firstTDIndex","updateContent","setTabIndex","dynamicData","triggerScrollEvent","refreshProcessedData","hideSpinner","horizontalScrolling","timeIndicator","upScroll","downScroll","focusedEle","actionObj","navigationWrapper","clearTimeout","timeValue","leftScroll","rightScroll","updateHorizontalContent","showSpinner","prevSetCollection","getBufferCollection","nextSetResIndex","lastIndex","nextSetCollection","getCollection","nextSetIndex","getResCollection","getByDateCollection","setRenderedDates","getByIdCollection","firstItem","lastItem","setStartEndIndex","colIndex","isResourceCell","currentGroupIndices","getGroupIndices","previousGroupIndices","newGroupIndices","resWrapRows","conWrapRows","resWrapBody","conWrapBody","removeObsoleteRows","resourceRows","getContentRows","contentRows","eventRows","getEventRows","renderedRows","updateMonthViewContent","updateOtherViewContent","colGroup","thead","table","td","tHead","mergeNewTdData","existingRow","newRow","existingTds_1","newTd","newGroupIndex","inserted","existingTds_2","existingTd","dateCol_1","dateCol_2","renderDates_1","resColWrap","resCells","focusResCell","Render","isDataRefresh","initializeLayout","templates","activeEventTemplates","dayModule","weekModule","workWeekModule","yearModule","agendaModule","monthAgendaModule","timelineViewsModule","viewClass","timelineMonthModule","timelineYearModule","firstView","console","warn","Error","updateLabelText","enableCompactView","updateHeader","currentTimezoneDate","getLabelText","WorkHours","ChildProperty","TimeScale","QuickInfoTemplates","HeaderRows","Crud","getQuery","getTable","fromTable","isPreventEventRefresh","refreshEvents","dataManagerSuccess","dataManagerFailure","resultData","result","isVirtualScrollAction","dynamicEvents","templateNames","events.dataReady","refreshData","actionArgs","addedRecords","editParams","changedRecords","deletedRecords","crudData_1","tdData","offline","offlineArgs","promise","onlineArgs","isBlockEvent","addEvents","addArgs","eventData_1","saveChanges","insert","crudArgs","updateEvents","processSave","processOccurrences","processFollowSeries","processEntireSeries","saveArgs","eventData_2","update","cloneEvent","deleteEvents","deleteArgs","occurrenceData","isDeletedRecords","eventData_3","occurrenceArgs","occurrenceEvents","childEvent","parentException","exceptionDate","excludeDateCheck","followData","eventData_4","updateFollowEvents","followArgs","followEvents","followData_1","processRecurrenceRule","seriesData","eventData_5","event_7","updateSeriesEvents","eventCollections","deletedEvents","seriesArgs","fields_2","records","originalParent","deleteData","eventData_6","fields_3","isDelete","parentEvent_1","isEdited","editedDate","eventData_7","editArgs","exceptionString","parentEle","exceptionDateList","followEvent","newRecurrenceRule","getUpdatedRecurrenceRule","updatedRule","splitRule_1","ruleKey","ruleValue","WorkCellInteraction","onHover","cellMouseDown","isWorkCell","navigateView","sameView","viewOptions","cellDblClick","hoverTarget","hoverArgs","FieldOptions","Field","Complex","EventSettings","Group","Resources","ResourceBase","leftPixel","renderResourceHeaderIndent","resColTd","resColDiv","headerIndentTemplate","renderHeaderIndentTemplate","events.renderCell","hideResourceRows","tBody","trCount","res","ClassName","expandedField","slicedCollection","Count","createResourceColumn","resColl","resDiv","tbl","createTableLayout","generateTreeData","countCalculation","setExpandedResources","setRenderedResources","isExpanded","rIndex","resRows","existingGroupIndices","ntd","iconDiv","setMargin","onTreeIconClick","setResourceHeaderContent","resourceHeaderTemplate","classCollection","ntr","marginRight","marginLeft","parentCollection","wholeCollection","totalCount","z","trElement","eventElements_1","updateVirtualContent","pNode","rowCollection","workCellCollection","headerRowCollection","clickedRes","clonedCollection","expanded","trElem","sIndex","virtualTrack","resTable","contentTable","eventTable","renderResourceHeader","resourceWrapper","renderResourceHeaderText","menuClick","renderResourceTree","popupOverlay","treeWrapper","cls.RESOURCE_TREE_POPUP","resourceTree","treeViewObj","TreeView","child","nodeTemplate","nodeClicked","resourceClick","resourceTreeCreated","expandAll","treePopup","isTimeLine","treeCollection","resTreeColl","resourceTreeLevel","treeHandler","treeLevel","levelId","treeArgs","resourceName","resourceChild","tree","headerCollection","resourceLevel","levelIcon","headerWrapper","headerCollection_1","treeNodes","selectResourceByIndex","triggerEvents","renderModule","adaptiveGroupIndex","bindResourcesData","isSetModel","promises","Promise","all","resourceObj","getResourceModel","startHourField","endHourField","cssClassField","renderElements","setResourceCollection","requiredResources","colorIndex","requiredResources_1","resourceColorField","generateResourceLevels","innerDates","resTreeGroup","lastColumnDates","prevResource","prevResourceData","prevOrder","resTree","dateCol","resWorkDays","resStartHour","resEndHour","getDateSlots","dateSlots","generateCustomHours","resCssClass","resourceLevelIndex","generateHeaderLevels","dateSlots_1","dateSlot","headerDates","headerLevels","currentLevelChilds_1","currentLevelChild","nextLevelChilds","nextLevelChilds_1","nextLevelChild","_d","_e","lastLevelResource","dateHeaderLevels","datesColumn","this_3","_f","headerDates_1","headerDate","currentDateLevels","resTd_1","filterDates","filteredResource","existedResource","filteredTd","unshift","dateColSpan","_g","_h","_j","headerDates_2","resGroup","_k","_l","resTd","colorFieldIndex","filterData","getResourceRenderDates","resourceDates","dateColl","groupEditIndex","groupEditIndex_1","length_4","addResource","addObj","removeResource","removeObj","resourceExpand","resourceScroll","scrollElement","offsetTarget","treeViewTemplates","propName","resToolBarEle","ToolbarItem","Schedule","addClasses","allowMultiDrag","cssClass_1","cls_1","validateDate","createSpinner","scrollModule","workCellAction","initializeDataModule","renderTableContainer","getActiveViewOptions","initializeResources","wireEvents","util.getElementWidth","util.getElementHeight","util.getElementHeightFromClass","callback","renderReactTemplates","isAngular","clearTemplate","destroyEditorWindow","isLayoutOnly","initializeView","destroyHeaderModule","showHeaderBar","isTouch","scheduleTouchModule","destroyPopups","initializePopups","getViewIndex","setViewOptions","isModuleLoad","selectedView","prevIndex","isOptions","isSelected","fieldViewName","cellHeaderTemplateName","cellHeaderTemplate","dateHeaderTemplateName","dateHeaderTemplate","cellTemplateName","cellTemplate","dayHeaderTemplateName","dayHeaderTemplate","monthHeaderTemplateName","monthHeaderTemplate","resourceHeaderTemplateName","headerIndentTemplateName","currentIndex","majorSlotTemplate","minorSlotTemplate","scheduleOptions","firstMonthOfYear","monthsCount","internalTimeFormat","viewsData","setEditorTitles","initializeTemplates","cellHeaderTemplateFn","templateParser","dayHeaderTemplateFn","monthHeaderTemplateFn","cellTemplateFn","dateHeaderTemplateFn","dateRangeTemplateFn","majorSlotTemplateFn","minorSlotTemplateFn","appointmentTemplateFn","resourceHeaderTemplateFn","headerIndentTemplateFn","headerTooltipTemplateFn","eventTooltipTemplateFn","editorTemplateFn","editorHeaderTemplateFn","editorFooterTemplateFn","quickInfoTemplatesHeaderFn","quickInfoTemplatesContentFn","quickInfoTemplatesFooterFn","getDayNames","culShortNames","setCldrTimeFormat","getDateTime","setCalendarMode","muteOnChange","previousView","navigationArgs","isInitial","animateLayout","monthAgendaDate","timingFunction","requiredModules","modules","member","allowDragAndDrop","util.isIPadDevice","Internationalization","getDefaultLocale","workWeek","agenda","weekAgenda","workWeekAgenda","monthAgenda","today","noEvents","emptyContainer","allDay","more","noTitle","deleteMultipleEvent","selectedItems","deleteSeries","edit","editSeries","editEvent","createEvent","addTitle","moreDetails","save","editContent","deleteContent","deleteMultipleContent","newEvent","recurrence","wrongPattern","seriesChangeAlert","createError","sameDayAlert","occurenceAlert","editRecurrence","recurringEvent","repeats","startEndError","invalidDateError","blockAlert","ok","yes","no","of","series","previous","next","timelineDay","timelineWeek","timelineWorkWeek","timelineMonth","timelineYear","editFollowingEvent","deleteTitle","editTitle","beginFrom","endAt","expandAllDaySection","collapseAllDaySection","searchTimezone","noRecords","onScheduleResize","touchStartEvent","onDocumentClick","onDocumentPaste","isPreventScroll","cells_1","isAllDayCell","dateString","dateInMS","getTargetElement","getCellHeaderTemplate","getDayHeaderTemplate","getMonthHeaderTemplate","getCellTemplate","getDateHeaderTemplate","getMajorSlotTemplate","getMinorSlotTemplate","getResourceHeaderTemplate","getHeaderIndentTemplate","border","padding","rtlBorder","rtlPadding","eventClone","util.isMobile","highlightCurrentTime","util.resetScrollbarWidth","resetColWidth","compile","trim","recordLocation","startDateText","endDateText","announcementString","scrollEdges","viewBoundaries","pageYOffset","pageXOffset","getWeekNumberContent","weekNumber","weekRule","weekNumberDate","util.getWeekLastDate","util.getWeekNumber","weekMidDate","util.getWeekMiddleDate","weekFirstDate","indentTemplate","isRefresh","isResource","isDate","isView","isLayout","isDataManager","prop","setRtlClass","extendedPropertyChange","propertyChangeAction","allDayRowScrollUpdate","onEventSettingsPropertyChanged","onGroupSettingsPropertyChanged","setWorkHours","getWorkHourCells","resetWorkHours","workHourCells","viewStartHour","viewEndHour","offsetDiff","endOffsetDiff","tempStartIndex","tempEndIndex","dates_1","tds","tdCol","firstTd","getElement","lastTd","endDateFromColSpan","getEndDateFromStartDate","getResourceCollections","setResourceCollections","resourceCol","isEventDataRefresh","changeCurrentView","getCurrentViewIndex","expandResource","collapseResource","scrollTo","hour","scrollDate","scrollToDate","scrollToHour","scrollToResource","groupName","exportToICalendar","fileName","customData","iCalendarExportModule","initializeCalendarExport","importICalendar","fileContent","iCalendarImportModule","initializeCalendarImport","generateEventOccurrences","exportToExcel","excelExportOptions","excelExportModule","initializeExcelExport","print","printOptions","printModule","getEvents","includeOccurrences","getBlockEvents","eventID","getCurrentViewEvents","refreshTemplates","refreshHeader","refreshResourceHeader","isSlotAvailable","processCutCopyActions","paste","DataTransfer","readText","setData","pasteEvent","ClipboardEvent","bubbles","cancelable","eventDetailsArray","eventDetail","closeEditor","openQuickInfoPopup","getAdjustedDate","selectEvent","occurence","closeTooltip","getViewDates","modules_1","Collection","ActionBase","daysVariation","actionIndex","cloneElement","originalElement","excludeSelectors","navigationInterval","scrollInterval","scrollArgs","resizeEdges","getChangedData","multiData","getOriginalElement","indexCol_1","cloneIndex_1","saveChangedData","isMultiSelect","eventsCollection","selectedData","eventsCollection_1","isSameResource","eveId","calculateIntervalTime","intervalInMS","getContentAreaDimension","viewElement","getResourceElements","leftOffset","rightOffset","contentElements","indexes","minIndex","groupElements","updateTimePosition","timeElement","wrapperClass","offsetValue","rightValue","leftValue","createCloneElement","outerHTML","cloneClassLists","dragElement","eventDragArea","removeCloneElementClasses","removeCloneElement","dynamicEle_1","cloneEle","getCursorElement","pages","autoScroll","yIsScrollable","xIsScrollable","tdCollections","scrollBy","autoScrollValidation","actionClass","updateScrollPosition","scrollEventArgs","setInterval","updateDraggingDateTime","updateResizingDirection","timeDelay","updateOriginalElement","eventWrappers","getUpdatedEvent","dynamicYearlyEventsRendering","isResize","yearEvent","pointer-events","renderDynamicElement","dynamicEventsRendering","eventWrappers_1","Resize","resizeElement_1","element_1","resizeHelper","resizeTarget","resizeArgs","resizeEventArgs","hRows","tdCollections_1","trRect","touchMoveEvent","resizing","touchEndEvent","resizeStop","cls.DISABLE_DATES","doc","clientLeft","clientTop","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","horizontalResizing","rightStyles","topStyles","getTopBottomStyles","verticalResizing","bottomStyles","resizeTime","isSameCell","yearEventsRendering","monthDiff","getMonthDiff","getEventCount","monthStart","monthEnd","clearInterval","headerName","isTimelineMonth","isLastCell","pixelsPerMinute","tdCollections_2","cellOffsetWidth","resizeDate","spanMinutes","cloneIndex","originalWidth","isNotHourSlot","resizeEnd","clnHeight","clnTop","isTimeViews","pageWidth","targetWidth","roundedLeft","roundedWidth","cloneWidth","viewDimension","isTimeScale","YearEvent","yearViewEvents","removeCellHeight","timelineResourceEvents","timelineYearViewEvents","getMonths","months_1","cellHeader","wrapperCollection","eventWrapper","isSpannedCollection","wrapper_1","rowTd","dayStart","dayEnd","dayEvents","updateSpannedEvents","overlapIndex","availedHeight","moreIndicatorCount","isRendered","MoreIndicator","moreIndex","renderMoreIndicator","renderEvent","appContainer","tr_1","isLeftRightResize","isVerticalScrollbarAvail","renderResourceEvent","removeProperty","conTable_1","tr_2","appWrap","right_1","createEventElement","locationEle","startTimeEle","endTimeEle","yearStart","yearEnd","updateSpannedEventDetails","originalStartTime","originalEndTime","viewStart","viewEnd","dateStart","dateEnd","appStart","appEnd","timeCondition","DragAndDrop","widthUptoCursorPoint","heightUptoCursorPoint","cursorPointIndex","isHeaderRows","isTimelineDayProcess","widthPerMinute","heightPerMinute","minDiff","isStepDragging","isMorePopupOpened","isAllDayDrag","updatedData","swagData","isAllDayTarget","targetTd","isCursorAhead","enableCurrentViewDrag","isPreventMultiDrag","slotsUptoCursor","eleTop","isVerticalView","Draggable","abort","isDragScroll","enableTailMode","cursorAt","dragArea","dragStart","drag","dragStop","enableAutoScroll","helper","dragHelper","queryPositionInfo","dragPosition","sender","setDragActionDefaultValues","cursor","cloneRight","contentWrapRight","pointerEvents","cellsCountUptoCursor","cellsCountUptoEleTop","cloneBottom","eventGuid","dragArgs","getSelectedData","navigation","dragEventArgs","dragObj","intDestroy","dragWithinRange","timelineEventModule","appEle","calculateMinutesDiff","updateNavigatingPosition","isAllowDrop","currentGroupIndex","currentDate_1","viewNavigation","morePopupEventDragging","calculateTimelineTime","calculateVerticalDate","calculateVerticalTime","outWrapper","tarWrapper_1","elementHeight","getAllDayEventHeight","outerWrapperCls","targetWrapper","navigationType","eventDuration","dragEnd","eventContainer","appendCloneElement","swapDragging","getEventWrapper","updateAllDayEvents","dynamicWrappers_1","targetCellTime_1","startTimeDiff","eventObj_2","index_2","updateMultipleData","updateEventHeight","startReferenceDate","endReferenceDate","timeDifference","endTimeDiff","differInDays","datesCount","indexGroup","dynamicIndex","splitEvents","filterQuery","renderSpannedEvents","timeDiff","allDayDifference","allDayElement_1","tagName","updateMultipleVerticalDate","getOffsetValue","getColumnIndex","cursorDrag","leftVal","cursorIndex","getCursorCurrentIndex","widthDiff","getWidthDiff","roundTimeDiff","eventSrt","dataIndex","events_2","calculateResourceGroupingPosition","viewEle","targetLeft","dateLength","trCollection","scrollY","util.getElementTop","cursorElement","dropSelectors_1","ViewBase","previousNextAction","resTbl","resourceTd","rendereData","getDayName","getTimelineDate","createEventTable","collapseRows","setAriaAttributes","createColGroup","lastRow","prev","colGroupEle","getScrollXIndent","util.getScrollBarWidth","scrollTopPanel","getDatesHeaderElement","scrollHeaderLabels","headerTable","colWidth","classNames_1","headerCells","headerCells_1","isRtl","tdLeft","hiddenLeft","headerCells_2","addAttributes","getHeaderBarHeight","headerBarHeight","resHeader","panel","generateColumnLevels","isCurrentDate","isCurrentMonth","isWorkDay","isWorkHour","agendaDaysCount","weekLength","formatViewLabel","formatOptions","viewStr","formatDateRange","formattedStr","longDateFormat","toLocaleLowerCase","getMobileDateElement","tdElement","quickTemplate","renderResourceMobileLayout","addAutoHeightClass","getColElements","setColWidth","colElements","contentBody","colWidth_1","resourceColumn","headerCellColSpan","colElements_1","getContentAreaElement","wireExpandCollapseIconEvents","treeIcons_1","icon","scrollWrap","setPersistence","retainScrollPosition","getViewStartDate","getViewEndDate","resetColLevels","renderedCount","groupIndices","VerticalView","baseCssClass","appointment","event.scrollUiUpdate","onContentScroll","scrollLeftPanel","onAdaptiveMove","onAdaptiveScroll","leftPanel","getLeftPanelElement","timeCells","getScrollableElement","scrollerHeight","setContentHeight","scrollBarWidth","isDateHeaderScroll","scrollToWorkHour","leftPanelElement","highlight","firstWorkHourCell","headerElement","getTopFromDateTime","columnLevels","workStartHour","workEndHour","isWorkHourRange","showTimeIndicator","getCurrentTimeIndicatorIndex","changeCurrentTimePosition","currentTimeIndicatorTimer","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","currentDateIndex","removeCurrentTimeIndicatorElements","timeIndicator_1","firstRow","topInPx","timeCellsWrap","timeTrs","curTimeWrap","currentDateIndex_1","currentTimeEle","lastElementChild","getWorkCellHeight","getTdContent","cntEle","clsList","renderContent","dateTd","renderDatesHeader","indentTd","renderLeftIndent","workTd","scrollContainer","renderTimeCells","renderContentArea","timesTd","nth","trEle","rowCount","ntr_1","data_1","createTd","appointmentExpandCollapse","cls.ALLDAY_APPOINTMENT_SECTION_CLASS","createAllDayRow","wireCellEvents","tdEle","wireMouseEvents","event.renderCell","handler","getTimeSlotRows","renderContentTable","renderContentTableHeader","aria-selected","isAllowTdCreation","createContentTd","getContentTdClass","cellDate","args_1","announcementText","msMajorInterval","msStartHour","msEndHour","milliSeconds","util.isDaylightSavingTime","timeOffset","majorTickDivider","middle","timeSlots","contentScrollableEle","Day","Week","WorkWeek","Month","dayNameFormat","monthDates","onScrollUIUpdate","onDataReady","onCellClick","scrollToSelectedDate","headerCell","levels_1","getDayNameFormat","contentWrapper","renderWeekNumberContent","contentArea","monthAgendaWrapper","renderAppointmentContainer","contentWrapTable","createWeekNumberElement","createHeaderCell","getContentSlots","slotDatas","prepareSlots","renderDate","includeResource","out_j_1","colDates","colDate","resourcesTd","colDates_1","updateClassList","isOtherMonth","updateSelectedCellClass","trows","renderDateHeaderElement","getMonthStart","isCustomRange","getMonthEnd","util.WEEK_LENGTH","maxNumberOfDaysPerWeek","updateCustomRange","isUpdateDateRange","Year","yearEventModule","viewTypeClass","calendarTable","calendarTBody","getRowColumnCount","columnCount","cTr","cTd","calendarWrapper","currentMonth","calendarElement","data-role","renderCalendarHeader","renderCalendarContent","headerContent","getMonthName","getMonthDates","currentWeek","th","nextDay","weekDates","weekDates_1","span","createTableColGroup","parseDate","monthDaysCount","months_2","fn","tName","vName","isPrevious","activeDate","moreEventArgs","scrollTopElement","onScrollUiUpdate","isYScroll","util.addYears","isDateColAvail","contentScroll","AgendaBase","createAgendaContentElement","listData","aTd","listElement","ListBase","createList","moduleName","listClass","itemClass","li","templateEle","createAppointment","appSubjectWrap","appSubjectText","strDate","allDayStr","displayStr","processAgendaEvents","spanned","wireEventActions","eventElement_1","dateHeaderElement_1","dayNavigationClick","calculateResourceTableElement","agendaDate","agendaEnd","agendaLastDate","agendaStart","lastLevelInfo","tempLastLevelInfo","tempIndex","finalDate","agendaCollection","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","topResources","tempGroupedData","totalRowSpan","u","createResourceTableRow","renderEmptyContent","tContent","tContentCollection","w","rowSpanCollection","createDateHeaderElement","renderCellElementType","renderCellType","hasNoEvents","eTr","createTableRowElement","eTd","data-row-index","class","data-column-index","dTd","Agenda","agendaDates","virtualScrollTop","eventLoad","renderInitialContent","refreshEvent","refreshDate","emptyTBody","contentChild","emptyTBody_1","isObject","appointmentFiltering","isAgendaWorkDay","updateHeaderText","isObject_1","nTr","virtualContent","dataset","agendaScrolling","filterDate","totalHeight","topElement","getElementFromScrollerPosition","getPreviousNextDate","scrollToValue","filterElement","liCollection","getStartDateFromEndDate","util.setTime","onAgendaScrollUiUpdate","MonthAgenda","wrapperContainer","appendAppContainer","setEventWrapperHeight","availHeight","contentAreaHeight","appContainerHeight","clearElements","agendaBase","getAgendaBase","onEventRender","appointmentIndicators_1","appointmentIndicator","navigateDate","TimelineHeaderRow","groupByYear","groupByMonth","dates_2","groupByWeek","dates_3","jsDate","generateSlots","colspan","cls","dateParser","tdDatas","htmlCol","viewTemplate","hourSlots","lastLevelColspan","byYear","byMonth","byWeek","TimelineViews","timelineAppointment","currDateTime","getLeftFromDateTime","generateTimeSlots","timeSlotData","tempTimeSlots_1","headerWrap","diffInDates","endHour_1","getRowCount","getResourceTdData","resLevel","resSHr","resEHr","TimelineMonth","contentTr","contentTd","TimelineYear","leftHeaderCells","isHorizontal","innerTr","dayHeaderDates","column","innerTd","renderDayMonthHeaderTemplate","colData","count_1","monthTBody","tdCollection","monthWrapper","contentTBody","addClassTable","renderResourceContent","renderDefaultContent","monthBody","monthTr","monthTd","isDateAvail","dayDate","cls.DATE_HEADER_CLASS","renderCellTemplate","tRow","monthCells","tdELe","dayId","monthId","ICalendarExport","icsString","getCalendarString","download","SEPARATOR","appVersion","iCalendarEvents","filterCollection","uId","editedExDate","UID","edited","startZone","endZone","calendarEvent","convertDateToString","customFields","customFieldFilter","customField","defaultFields","eventDate","buffer","Blob","msSaveBlob","downloadLink_1","createElementNS","href","URL","createObjectURL","initEvent","dispatchEvent","revokeObjectURL","ICalendarImport","fileReader_1","FileReader","onload","iCalString","iCalendarParser","readAsText","iString","newlineOffset","iCalData","isEvent","curEvent","iStringLength","lastPosition","search","firstChar","updateEventData","processOccurrence","type_1","dateParsing","appoint","appointmentIds","exdate","getExcludeDateString","occurrenceException","parentExDate","childExDate","newDate","exec","ExcelExport","separator","exportColumns","getExportColumns","exportName","exportType","isIncludeOccurrences","processWorkbook","columns","columnHeader","fontSize","borders","bold","columnData","columnRule","styleRule","numberFormat","workSheet","Workbook","worksheets","exportOptions","fieldsInfo","Print","printScheduler","printSchedulerWithModel","scrollableEle","reference","links_1","getElementsByTagName","elementWidth","printWindow","write","ready","headerTimeCellsScroll","timeCellsScroll","contentCellScroll","Inject","printInstance","getPrintScheduleModel","registeredTemplate","outerHeight","outerWidth","moveTo","resizeTo","printModel","scheduleTemplates","scheduleEvents","scheduleProps_1","basePrint","onbeforeunload","index.Day","index.Week","index.WorkWeek","index.Month","index.Year","index.Agenda","index.MonthAgenda","index.TimelineViews","index.TimelineMonth","index.TimelineYear","index.Resize","index.DragAndDrop","index.ExcelExport","index.ICalendarExport","index.ICalendarImport","index.Print"],"mappings":"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gqB,EAASvgF,UAAW,eAAY,IACnCurD,IACIgL,WAAS,KACVgqB,EAASvgF,UAAW,kBAAe,IACtCurD,IACIgL,WAAS,UACVgqB,EAASvgF,UAAW,gBAAa,IACpCurD,IACIgL,WAAS,UACVgqB,EAASvgF,UAAW,cAAW,IAClCurD,IACIgL,WAAS,OACVgqB,EAASvgF,UAAW,iBAAc,IACrCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,0BAAuB,IAC9CurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,yBAAsB,IAC7CurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,uBAAoB,IAC3CurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIkpB,aAAY1G,KACbwS,EAASvgF,UAAW,gBAAa,IACpCurD,IACIkpB,aAAYxG,KACbsS,EAASvgF,UAAW,gBAAa,IACpCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,+BAA4B,IACnDurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,uBAAoB,IAC3CurD,IACIgL,cACDgqB,EAASvgF,UAAW,yBAAsB,IAC7CurD,IACIgL,cACDgqB,EAASvgF,UAAW,wBAAqB,IAC5CurD,IACIgL,cACDgqB,EAASvgF,UAAW,yBAAsB,IAC7CurD,IACIgL,cACDgqB,EAASvgF,UAAW,wBAAqB,IAC5CurD,IACIgL,cACDgqB,EAASvgF,UAAW,0BAAuB,IAC9CurD,IACIgL,cACDgqB,EAASvgF,UAAW,mBAAgB,IACvCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,eAAY,IACnCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,kBAAe,IACtCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,8BAA2B,IAClDurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,6BAA0B,IACjDurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,8BAA2B,IAClDurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,qBAAkB,IACzCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,qBAAkB,IACzCurD,IACIgL,WAAS,IACVgqB,EAASvgF,UAAW,uBAAoB,IAC3CurD,IACIgL,cACDgqB,EAASvgF,UAAW,qBAAkB,IACzCurD,IACIgL,cACDgqB,EAASvgF,UAAW,2BAAwB,IAC/CurD,IACIgL,cACDgqB,EAASvgF,UAAW,2BAAwB,IAC/CurD,IACIkpB,aAAYvG,KACbqS,EAASvgF,UAAW,yBAAsB,IAC7CurD,IACIgL,WAAS,IACVgqB,EAASvgF,UAAW,sBAAmB,IAC1CurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,0BAAuB,IAC9CurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,iCAA8B,IACrDurD,IACIgL,cACDgqB,EAASvgF,UAAW,eAAY,IACnCurD,IACIkpB,aAAYC,KACb6L,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIgL,WAAStrC,KACVs1D,EAASvgF,UAAW,yBAAsB,IAC7CurD,IACIgL,cACDgqB,EAASvgF,UAAW,6BAA0B,IACjDurD,IACIgL,cACDgqB,EAASvgF,UAAW,2BAAwB,IAC/CurD,IACIkpB,aAAYE,KACb4L,EAASvgF,UAAW,YAAS,IAChCurD,IACIwnC,gBAAene,KAChB2L,EAASvgF,UAAW,gBAAa,IACpCurD,IACIwnC,gBAAe5kB,KAChBoS,EAASvgF,UAAW,iBAAc,IACrCurD,IACIgL,cACDgqB,EAASvgF,UAAW,eAAY,IACnCurD,IACIgL,YAAS,IACVgqB,EAASvgF,UAAW,qBAAkB,IACzCurD,IACIgL,cACDgqB,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIiL,WACD+pB,EAASvgF,UAAW,cAAW,IAClCurD,IACIiL,WACD+pB,EAASvgF,UAAW,gBAAa,IACpCurD,IACIiL,WACD+pB,EAASvgF,UAAW,gBAAa,IACpCurD,IACIiL,WACD+pB,EAASvgF,UAAW,sBAAmB,IAC1CurD,IACIiL,WACD+pB,EAASvgF,UAAW,sBAAmB,IAC1CurD,IACIiL,WACD+pB,EAASvgF,UAAW,YAAS,IAChCurD,IACIiL,WACD+pB,EAASvgF,UAAW,aAAU,IACjCurD,IACIiL,WACD+pB,EAASvgF,UAAW,kBAAe,IACtCurD,IACIiL,WACD+pB,EAASvgF,UAAW,qBAAkB,IACzCurD,IACIiL,WACD+pB,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIiL,WACD+pB,EAASvgF,UAAW,iBAAc,IACrCurD,IACIiL,WACD+pB,EAASvgF,UAAW,iBAAc,IACrCurD,IACIiL,WACD+pB,EAASvgF,UAAW,iBAAc,IACrCurD,IACIiL,WACD+pB,EAASvgF,UAAW,uBAAoB,IAC3CurD,IACIiL,WACD+pB,EAASvgF,UAAW,oBAAiB,IACxCurD,IACIiL,WACD+pB,EAASvgF,UAAW,kBAAe,IACtCurD,IACIiL,WACD+pB,EAASvgF,UAAW,gBAAa,IACpCurD,IACIiL,WACD+pB,EAASvgF,UAAW,iBAAc,IACrCurD,IACIiL,WACD+pB,EAASvgF,UAAW,gBAAa,IACpCurD,IACIiL,WACD+pB,EAASvgF,UAAW,WAAQ,IAC/BurD,IACIiL,WACD+pB,EAASvgF,UAAW,eAAY,IACnCurD,IACIiL,WACD+pB,EAASvgF,UAAW,kBAAe,IACtCurD,IACIiL,WACD+pB,EAASvgF,UAAW,eAAY,IACnCurD,IACIiL,WACD+pB,EAASvgF,UAAW,iBAAc,IACrCurD,IACIiL,WACD+pB,EAASvgF,UAAW,yBAAsB,IAC7CurD,IACIiL,WACD+pB,EAASvgF,UAAW,wBAAqB,IAC5CurD,IACIiL,WACD+pB,EAASvgF,UAAW,gBAAa,IACpCurD,IACIiL,WACD+pB,EAASvgF,UAAW,kBAAe,IACtCugF,EAAWh1B,IACPkL,yBACD8pB,IAEL7pB,aClsGEs8B,GAA4B,WAC5B,QAASA,GAAW3yF,GAChBF,KAAK8yF,cAAgB,EACrB9yF,KAAKE,OAASA,EACdF,KAAKuoE,WACDx/D,EAAG,EAAGC,EAAG,EAAGuO,WAAY,EAAGi3B,UAAW,EAAG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"}